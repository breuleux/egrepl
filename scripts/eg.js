require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var $237=function(type$240){var f$244;(f$244=type$240["::check"]);if((f$244===(void 0))){return function(value$250){return (value$250 instanceof type$240);};}else{return function(value$254){return f$244.call(type$240,value$254);};}};
var $256=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $257=function(dest$260,values$261){var k$266;(k$266=null);$264:for(k$266 in values$261){if(values$261.hasOwnProperty(k$266)){(dest$260[k$266]=values$261[k$266]);}}return dest$260;};
var $274=function($276$279){var ph$285;(ph$285=$276$279);var $281$291;($281$291=ph$285);var bridge$283$296;var x$300;(bridge$283$296=$281$291);if((((typeof(bridge$283$296)==="string")&&((x$300=bridge$283$296),true))||((typeof(bridge$283$296)==="number")&&((x$300=bridge$283$296),true)))){return ["value",x$300];}else{var other$311;(other$311=$281$291);return other$311["::serialize_ast"]();}};
var send$11;(send$11=function(obj$18,$15$19){var ph$25;var msg$26;var t0$28;(t0$28=$15$19);(msg$26=t0$28);(ph$25=t0$28);var $21$37;($21$37=ph$25);var bridge$23$42;(bridge$23$42=$21$37);if(((typeof(bridge$23$42)==="string")||(typeof(bridge$23$42)==="number"))){return obj$18[msg$26];}else{var other$54;(other$54=$21$37);return obj$18["::send"](msg$26);}});(Array[":::project"]=function($60$63){var ph$68;var value$69;var t0$71;(t0$71=$60$63);(value$69=t0$71);(ph$68=t0$71);var $65$80;($65$80=ph$68);if($237(Array)($65$80)){return [true,value$69];}else{$65$80;return [true,[value$69]];}});(Array.prototype["::check"]=function(value$98){if((value$98 instanceof Array)){var i$104;(i$104=0);$101:for(;(i$104<this.length);(i$104++)){if(($256(this,i$104)!==$256(value$98,i$104))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $257(this.slice(0),this);});(Array.prototype[":::project"]=function(value$123){if((value$123 instanceof Array)){var i$129;(i$129=0);$126:for(;(i$129<this.length);(i$129++)){if(($256(this,i$129)!==$256(value$123,i$129))){return [true,[value$123]];}}return [true,value$123.slice(this.length)];}else{return [true,[value$123]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($274));});(RegExp.prototype["::check"]=function($147$150){var ph$155;(ph$155=$147$150);var $152$161;($152$161=ph$155);var value$169;if((typeof($152$161)==="string")){(value$169=$152$161);if(value$169.match(this)){return true;}else{return false;}}else{var other$174;(other$174=$152$161);return false;}});(RegExp.prototype[":::project"]=function($180$183){var ph$188;(ph$188=$180$183);var $185$194;($185$194=ph$188);var value$202;if((typeof($185$194)==="string")){(value$202=$185$194);var $205$210;($205$210=value$202.match(this));var m$218;if(($205$210===null)){(m$218=$205$210);return [false,null];}else{var m$223;(m$223=$205$210);return [true,m$223];}}else{var other$227;(other$227=$185$194);return [false,null];}});(Function.prototype["::send"]=function(args$234){return this.apply(this,args$234);});
var $1073=Object.keys;
var $1074=function($1076$1079,key$1080){var ph$1088;(ph$1088=$1076$1079);var $1082$1094;($1082$1094=ph$1088);var bridge$1084$1099;(bridge$1084$1099=$1082$1094);if(((bridge$1084$1099===null)||(bridge$1084$1099===(void 0)))){return false;}else{var x$1111;if((typeof($1082$1094)==="string")){(x$1111=$1082$1094);return (key$1080 in String.prototype);}else{var x$1116;if((typeof($1082$1094)==="number")){(x$1116=$1082$1094);return (key$1080 in Number.prototype);}else{var x$1121;(x$1121=$1082$1094);return (key$1080 in x$1121);}}}};
var $901=function($903$906,b$907){var ph$921;var a$922;var t0$924;(t0$924=$903$906);(a$922=t0$924);(ph$921=t0$924);var $909$933;($909$933=ph$921);var bridge$912$938;if(($909$933===b$907)){return true;}else{(bridge$912$938=$909$933);if((function(){var bridge$913$952;(bridge$913$952=bridge$912$938);return (function(){var bridge$914$959;(bridge$914$959=bridge$913$952);return (function(){var bridge$915$966;(bridge$915$966=bridge$914$959);return (function(){var bridge$916$973;(bridge$916$973=bridge$915$966);return ((typeof(bridge$916$973)==="number")||(typeof(bridge$916$973)==="string"));}()||(bridge$915$966===null));}()||(bridge$914$959===(void 0)));}()||(bridge$913$952===true));}()||(bridge$912$938===false))){return false;}else{if($237(Array)($909$933)){if(((!$237(Array)(b$907))||(a$922.length!==b$907.length))){return false;}var i$989;(i$989=0);$985:for(;(i$989<a$922.length);(i$989++)){if((!$901(a$922[i$989],b$907[i$989]))){return false;}}return true;}else{$909$933;if((((Object.getPrototypeOf(a$922)===Object.prototype)&&$237(Object)(b$907))&&(Object.getPrototypeOf(b$907)===Object.prototype))){var ka$1003;(ka$1003=$1073(a$922));if((!$901(ka$1003.sort(),$1073(b$907).sort()))){return false;}var temp$1014;(temp$1014=ka$1003);var $length$1020;($length$1020=temp$1014.length);var $index$1026;($index$1026=0);$1004:for(;($index$1026<$length$1020);($index$1026++)){var m$1035;(m$1035=temp$1014[$index$1026]);var k$1043;(k$1043=m$1035);if((!$901(a$922[k$1043],b$907[k$1043]))){return false;}}return true;}else{if($1074($909$933,"::serialize")){$909$933["::serialize"];var $1050$1055;($1050$1055=b$907);if($1074($1050$1055,"::serialize")){$1050$1055["::serialize"];return $901(a$922["::serialize"](),b$907["::serialize"]());}else{var otherwise$1067;(otherwise$1067=$1050$1055);return false;}}else{var otherwise$1071;(otherwise$1071=$909$933);return false;}}}}}};
var $895=function(x$898,y$899){return (!$901(x$898,y$899));};var accum$883;var accum$887;var keynames$326;var prevent$327;var Interactor$328;(keynames$326=({8:"Backspace",9:"Tab",13:"Enter",16:"S-",17:"C-",18:"A-",27:"Esc",32:"Space",33:"PgUp",34:"PgDn",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12"}));(prevent$327=function(event$336){event$336.preventDefault();return event$336.stopPropagation();});(Interactor$328=function(target$344){var accum$368;var accum$375;var accum$382;var accum$389;var it$0$347;(it$0$347=function(){if((!$237(Interactor$328)(this))){return Object.create(Interactor$328.prototype);}else{return this;}}());(it$0$347["functions"]=(target$344.interactor_functions||target$344));(it$0$347["more_functions"]=$257(((accum$368=({})),((accum$368["default"]=function(){return "default";}),accum$368)),$257(((accum$375=({})),((accum$375["stick"]=function(){return "stick";}),accum$375)),$257(((accum$382=({})),((accum$382["break"]=function(){return "break";}),accum$382)),((accum$389=({})),((accum$389["none"]=function(){return (void 0);}),accum$389))))));(it$0$347["current_bindings"]=null);(it$0$347["global_bindings"]=null);return it$0$347;});(Interactor$328.prototype["set_bindings"]=function(new_bindings$407){var it$0$411;var self$412;(it$0$411=this);(self$412=this);(it$0$411["current_bindings"]=null);(it$0$411["global_bindings"]=new_bindings$407);});(Interactor$328.prototype["execute"]=function(c$433,e$434){var f$467;var $index$505;var $length$499;var temp$493;var result$483;var cmd$561;var cmds$478;var f$473;var cmd$462;var $447$454;var it$0$438;var self$439;(it$0$438=this);(self$439=this);($447$454=c$433);if((typeof($447$454)==="string")){(cmd$462=$447$454);(f$467=($256(it$0$438.functions,cmd$462)||$256(it$0$438.more_functions,cmd$462)));return f$467(e$434);}else{if($237(Function)($447$454)){(f$473=$447$454);return f$473(it$0$438.target,e$434);}else{if($237(Array)($447$454)){(cmds$478=$447$454);(result$483=null);(temp$493=cmds$478);($length$499=temp$493.length);($index$505=0);$484:for(;($index$505<$length$499);($index$505++)){var other$557;var $526$536;var cmd$522;var m$514;(m$514=temp$493[$index$505]);(cmd$522=m$514);(result$483=it$0$438.execute(cmd$522,e$434));($526$536=result$483);if(($526$536==="break")){prevent$327(e$434);break $484;}else{if(($526$536==="default")){break $484;}else{if(($526$536==="ignore")){continue $484;}else{(other$557=$526$536);prevent$327(e$434);}}}}return result$483;}else{(cmd$561=$447$454);(it$0$438["current_bindings"]=cmd$561);return "break stick";}}}});(Interactor$328.prototype["process_codes"]=function(codes$572,e$573){var $index$623;var $length$617;var temp$611;var otherwise$717;var $677$686;var $672$680;var result$724;var t0$661;var $590$656;var bindings$593;var just_modifiers$594;var commands$595;var it$0$577;var self$578;(it$0$577=this);(self$578=this);(bindings$593=(it$0$577.current_bindings||it$0$577.global_bindings));(just_modifiers$594=null);(commands$595=[]);(temp$611=codes$572);($length$617=temp$611.length);($index$623=0);$596:for(;($index$623<$length$617);($index$623++)){var command$644;var code$640;var m$632;(m$632=temp$611[$index$623]);(code$640=m$632);if($237(RegExp("^([ACS]-)+$",""))(code$640)){(just_modifiers$594=true);}(command$644=$256(bindings$593,code$640));if($895(command$644,(void 0))){commands$595.push(command$644);}}($590$656=commands$595);if((($590$656 instanceof Array)&&(((t0$661=$590$656.length)),(t0$661===0)))){($672$680=null);$672$680;if((it$0$577.current_bindings&&it$0$577.current_bindings._eat)){if((!just_modifiers$594)){(it$0$577["current_bindings"]=null);}return prevent$327(e$573);}else{if((it$0$577.current_bindings&&it$0$577.current_bindings._browser)){if((!just_modifiers$594)){(it$0$577["current_bindings"]=null);}}else{if((it$0$577.current_bindings&&(!just_modifiers$594))){(it$0$577["current_bindings"]=null);return it$0$577.process_codes(codes$572,e$573);}else{(otherwise$717=$672$680);return null;}}}}else{$590$656;(result$724=it$0$577.execute(commands$595,e$573));if(($901(result$724,(void 0))||(result$724.match&&result$724.match("break")))){prevent$327(e$573);}if((((!((result$724&&result$724.match)&&result$724.match("stick")))&&it$0$577.current_bindings)&&(!it$0$577.current_bindings._stick))){(it$0$577["current_bindings"]=null);}}});(Interactor$328.prototype["getcode"]=function(e$738){var otherwise$786;var $758$771;var $753$765;var code$759;var it$0$742;var self$743;(it$0$742=this);(self$743=this);(code$759=($256(keynames$326,e$738.which)||(("<"+e$738.which)+">")));($753$765=null);$753$765;if((e$738.shiftKey&&$895(code$759,"S-"))){return ("S-"+code$759);}else{if((e$738.altKey&&$895(code$759,"A-"))){return ("A-"+code$759);}else{if(((e$738.ctrlKey||e$738.metaKey)&&$895(code$759,"C-"))){return ("C-"+code$759);}else{(otherwise$786=$753$765);return code$759;}}}});(Interactor$328.prototype["keyup"]=function(e$792){var it$0$796;var self$797;(it$0$796=this);(self$797=this);return it$0$796.process_codes(["!^All",("^"+it$0$796.getcode(e$792)),"^All"],e$792);});(Interactor$328.prototype["keydown"]=function(e$809){var it$0$813;var self$814;(it$0$813=this);(self$814=this);return it$0$813.process_codes(["!All",it$0$813.getcode(e$809),"All"],e$809);});(Interactor$328.prototype["keypress"]=function(e$826){var key$842;var code$843;var it$0$830;var self$831;(it$0$830=this);(self$831=this);(key$842=e$826.which);(code$843=("="+String.fromCharCode(key$842)));return it$0$830.process_codes(["!=All",code$843,"=All"],e$826);});(Interactor$328.prototype["install"]=function(element$854){var it$0$858;var self$859;(it$0$858=this);(self$859=this);(element$854["onkeydown"]=it$0$858.keydown.bind(it$0$858));(element$854["onkeyup"]=it$0$858.keyup.bind(it$0$858));(element$854["onkeypress"]=it$0$858.keypress.bind(it$0$858));});$257(Interactor$328,$257(((accum$883=({})),((accum$883["::name"]="Interactor"),accum$883)),((accum$887=({})),((accum$887["::egclass"]=true),accum$887))));Interactor$328;(exports["Interactor"]=Interactor$328);

},{}],"eXk3/i":[function(require,module,exports){
var $1359=function(type$1362){var f$1366;(f$1366=type$1362["::check"]);if((f$1366===(void 0))){return function(value$1372){return (value$1372 instanceof type$1362);};}else{return function(value$1376){return f$1366.call(type$1362,value$1376);};}};
var $1378=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $1379=function(dest$1382,values$1383){var k$1388;(k$1388=null);$1386:for(k$1388 in values$1383){if(values$1383.hasOwnProperty(k$1388)){(dest$1382[k$1388]=values$1383[k$1388]);}}return dest$1382;};
var $1396=function($1398$1401){var ph$1407;(ph$1407=$1398$1401);var $1403$1413;($1403$1413=ph$1407);var bridge$1405$1418;var x$1422;(bridge$1405$1418=$1403$1413);if((((typeof(bridge$1405$1418)==="string")&&((x$1422=bridge$1405$1418),true))||((typeof(bridge$1405$1418)==="number")&&((x$1422=bridge$1405$1418),true)))){return ["value",x$1422];}else{var other$1433;(other$1433=$1403$1413);return other$1433["::serialize_ast"]();}};
var send$1133;(send$1133=function(obj$1140,$1137$1141){var ph$1147;var msg$1148;var t0$1150;(t0$1150=$1137$1141);(msg$1148=t0$1150);(ph$1147=t0$1150);var $1143$1159;($1143$1159=ph$1147);var bridge$1145$1164;(bridge$1145$1164=$1143$1159);if(((typeof(bridge$1145$1164)==="string")||(typeof(bridge$1145$1164)==="number"))){return obj$1140[msg$1148];}else{var other$1176;(other$1176=$1143$1159);return obj$1140["::send"](msg$1148);}});(Array[":::project"]=function($1182$1185){var ph$1190;var value$1191;var t0$1193;(t0$1193=$1182$1185);(value$1191=t0$1193);(ph$1190=t0$1193);var $1187$1202;($1187$1202=ph$1190);if($1359(Array)($1187$1202)){return [true,value$1191];}else{$1187$1202;return [true,[value$1191]];}});(Array.prototype["::check"]=function(value$1220){if((value$1220 instanceof Array)){var i$1226;(i$1226=0);$1223:for(;(i$1226<this.length);(i$1226++)){if(($1378(this,i$1226)!==$1378(value$1220,i$1226))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $1379(this.slice(0),this);});(Array.prototype[":::project"]=function(value$1245){if((value$1245 instanceof Array)){var i$1251;(i$1251=0);$1248:for(;(i$1251<this.length);(i$1251++)){if(($1378(this,i$1251)!==$1378(value$1245,i$1251))){return [true,[value$1245]];}}return [true,value$1245.slice(this.length)];}else{return [true,[value$1245]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($1396));});(RegExp.prototype["::check"]=function($1269$1272){var ph$1277;(ph$1277=$1269$1272);var $1274$1283;($1274$1283=ph$1277);var value$1291;if((typeof($1274$1283)==="string")){(value$1291=$1274$1283);if(value$1291.match(this)){return true;}else{return false;}}else{var other$1296;(other$1296=$1274$1283);return false;}});(RegExp.prototype[":::project"]=function($1302$1305){var ph$1310;(ph$1310=$1302$1305);var $1307$1316;($1307$1316=ph$1310);var value$1324;if((typeof($1307$1316)==="string")){(value$1324=$1307$1316);var $1327$1332;($1327$1332=value$1324.match(this));var m$1340;if(($1327$1332===null)){(m$1340=$1327$1332);return [false,null];}else{var m$1345;(m$1345=$1327$1332);return [true,m$1345];}}else{var other$1349;(other$1349=$1307$1316);return [false,null];}});(Function.prototype["::send"]=function(args$1356){return this.apply(this,args$1356);});
var $3280=function(obj$3283){var results$3288;(results$3288=[]);var k$3293;(k$3293=null);$3287:for(k$3293 in obj$3283){if(Object.prototype.hasOwnProperty.call(obj$3283,k$3293)){results$3288.push([k$3293,$1378(obj$3283,k$3293)]);}}return results$3288;};
var $3549=function(arr$3552){var results$3558;var l$3559;(results$3558=[]);(l$3559=arr$3552.length);var i$3568;(i$3568=0);$3557:for(;(i$3568<l$3559);(i$3568++)){results$3558.push([i$3568,$1378(arr$3552,i$3568)]);}return results$3558;};
var $3316=function(){var $3317$3323;($3317$3323=function(tags$3328){var it$0$3331;(it$0$3331=function(){if((!$1359($3317$3323)(this))){return Object.create($3317$3323.prototype);}else{return this;}}());(it$0$3331["tags"]=tags$3328);return it$0$3331;});($3317$3323.prototype["create"]=function(){var it$0$3351;var self$3352;(it$0$3351=this);(self$3352=this);var $3349$3361;($3349$3361=arguments);var t0$3366;var message$3370;var args$3371;(t0$3366=$3349$3361.length);if((t0$3366>=0)){(message$3370=function(){if((0>=t0$3366)){return "";}else{return $3349$3361[0];}}());(args$3371=Array.prototype.slice.call($3349$3361,1));var e$3384;(e$3384=Error(message$3370));(e$3384["::tags"]=it$0$3351.tags);(e$3384["args"]=args$3371);var temp$3400;(temp$3400=$3549(args$3371));var $length$3406;($length$3406=temp$3400.length);var $index$3412;($index$3412=0);$3385:for(;($index$3412<$length$3406);($index$3412++)){var m$3421;(m$3421=temp$3400[$index$3412]);var t0$3426;var t1$3427;var i$3431;var arg$3432;(t0$3426=m$3421);if(((t0$3426 instanceof Array)&&(((t1$3427=t0$3426.length)),(t1$3427===2)))){(i$3431=t0$3426[0]);(arg$3432=t0$3426[1]);(e$3384[i$3431]=arg$3432);}else{$3297(m$3421);}}(e$3384["length"]=args$3371.length);(e$3384["name"]=["E"].concat(it$0$3351.tags).join("."));return e$3384;}else{$3297($3349$3361);}});($3317$3323.prototype["::check"]=function(e$3462){var it$0$3466;var self$3467;(it$0$3466=this);(self$3467=this);var tags$3477;if(((!e$3462)||(!$1359(Error)(e$3462)))){return false;}(tags$3477=(e$3462["::tags"]||[]));var temp$3488;(temp$3488=it$0$3466.tags);var $length$3494;($length$3494=temp$3488.length);var $index$3500;($index$3500=0);$3478:for(;($index$3500<$length$3494);($index$3500++)){var m$3509;(m$3509=temp$3488[$index$3500]);var tag$3517;(tag$3517=m$3509);if((tags$3477.indexOf(tag$3517)===-1)){return false;}else{false;}}return true;});($3317$3323.prototype["::deconstruct"]=function(e$3526){var it$0$3530;var self$3531;(it$0$3530=this);(self$3531=this);return e$3526.args;});$1379($3317$3323,$1379(function(){var accum$3542;(accum$3542=({}));(accum$3542["::name"]="$3317");return accum$3542;}(),function(){var accum$3546;(accum$3546=({}));(accum$3546["::egclass"]=true);return accum$3546;}()));return $3317$3323;}();
var $3297=function(value$3300,url$3301,start$3302,end$3303){var err$3307;(err$3307=$3316(["match"]).create("Could not find a match for value",({"value":value$3300})));if(url$3301){(err$3307["location"]=["location",url$3301,start$3302,end$3303]);}throw err$3307;};
var $3575=function(type$3578){return function(value$3582){var f$3586;(f$3586=type$3578[":::project"]);if((f$3586===(void 0))){(f$3586=type$3578["::project"]);if((f$3586===(void 0))){return [true,type$3578(value$3582)];}else{var rval$3599;(rval$3599=false);try{(rval$3599=[true,f$3586(value$3582)]);}catch(excv$3610){var e$3616;(e$3616=excv$3610);(rval$3599=[false,null]);}return rval$3599;}}else{return f$3586.call(type$3578,value$3582);}};};
var $3622=function(){var $3623$3627;($3623$3627=function($3631$3636,$3633$3637){var it$0$3640;(it$0$3640=function(){if((!$1359($3623$3627)(this))){return Object.create($3623$3627.prototype);}else{return this;}}());var classes$3646;var children$3647;var t0$3649;(t0$3649=$3575(Array)($3631$3636));if(t0$3649[0]){(classes$3646=t0$3649[1]);}else{$3297($3631$3636);}var t0$3658;(t0$3658=$3575(Array)($3633$3637));if(t0$3658[0]){(children$3647=t0$3658[1]);}else{$3297($3633$3637);}(it$0$3640["classes"]=classes$3646.sort());(it$0$3640["children"]=children$3647);return it$0$3640;});$1379(function(){var accum$3681;(accum$3681=({}));(accum$3681["::check"]=function(x$3686){return ((x$3686&&x$3686.classes)&&x$3686.children);});return accum$3681;}(),$1379(function(){var accum$3689;(accum$3689=({}));(accum$3689["::deconstruct"]=function(x$3694){return [x$3694.classes,x$3694.children];});return accum$3689;}(),$1379(function(){var accum$3697;(accum$3697=({}));(accum$3697["::name"]="$3623");return accum$3697;}(),function(){var accum$3701;(accum$3701=({}));(accum$3701["::egclass"]=true);return accum$3701;}())));($3623$3627.prototype["::check"]=function(n$3708){var it$0$3712;var self$3713;(it$0$3712=this);(self$3713=this);var temp$3728;(temp$3728=it$0$3712.classes);var $length$3734;($length$3734=temp$3728.length);var $index$3740;($index$3740=0);$3722:for(;($index$3740<$length$3734);($index$3740++)){var m$3749;(m$3749=temp$3728[$index$3740]);var c$3757;(c$3757=m$3749);if((n$3708.classes.indexOf(c$3757)===-1)){return false;}else{false;}}return true;});$1379($3623$3627,$1379(function(){var accum$3767;(accum$3767=({}));(accum$3767["::check"]=function(x$3772){return ((x$3772&&x$3772.classes)&&x$3772.children);});return accum$3767;}(),$1379(function(){var accum$3775;(accum$3775=({}));(accum$3775["::deconstruct"]=function(x$3780){return [x$3780.classes,x$3780.children];});return accum$3775;}(),$1379(function(){var accum$3783;(accum$3783=({}));(accum$3783["::name"]="$3623");return accum$3783;}(),function(){var accum$3787;(accum$3787=({}));(accum$3787["::egclass"]=true);return accum$3787;}()))));return $3623$3627;}();
var $3790=function($3792$3795,key$3796){var ph$3804;(ph$3804=$3792$3795);var $3798$3810;($3798$3810=ph$3804);var bridge$3800$3815;(bridge$3800$3815=$3798$3810);if(((bridge$3800$3815===null)||(bridge$3800$3815===(void 0)))){return false;}else{var x$3827;if((typeof($3798$3810)==="string")){(x$3827=$3798$3810);return (key$3796 in String.prototype);}else{var x$3832;if((typeof($3798$3810)==="number")){(x$3832=$3798$3810);return (key$3796 in Number.prototype);}else{var x$3837;(x$3837=$3798$3810);return (key$3796 in x$3837);}}}};
var $4011=Object.keys;
var $3839=function($3841$3844,b$3845){var ph$3859;var a$3860;var t0$3862;(t0$3862=$3841$3844);(a$3860=t0$3862);(ph$3859=t0$3862);var $3847$3871;($3847$3871=ph$3859);var bridge$3850$3876;if(($3847$3871===b$3845)){return true;}else{(bridge$3850$3876=$3847$3871);if((function(){var bridge$3851$3890;(bridge$3851$3890=bridge$3850$3876);return (function(){var bridge$3852$3897;(bridge$3852$3897=bridge$3851$3890);return (function(){var bridge$3853$3904;(bridge$3853$3904=bridge$3852$3897);return (function(){var bridge$3854$3911;(bridge$3854$3911=bridge$3853$3904);return ((typeof(bridge$3854$3911)==="number")||(typeof(bridge$3854$3911)==="string"));}()||(bridge$3853$3904===null));}()||(bridge$3852$3897===(void 0)));}()||(bridge$3851$3890===true));}()||(bridge$3850$3876===false))){return false;}else{if($1359(Array)($3847$3871)){if(((!$1359(Array)(b$3845))||(a$3860.length!==b$3845.length))){return false;}var i$3927;(i$3927=0);$3923:for(;(i$3927<a$3860.length);(i$3927++)){if((!$3839(a$3860[i$3927],b$3845[i$3927]))){return false;}}return true;}else{$3847$3871;if((((Object.getPrototypeOf(a$3860)===Object.prototype)&&$1359(Object)(b$3845))&&(Object.getPrototypeOf(b$3845)===Object.prototype))){var ka$3941;(ka$3941=$4011(a$3860));if((!$3839(ka$3941.sort(),$4011(b$3845).sort()))){return false;}var temp$3952;(temp$3952=ka$3941);var $length$3958;($length$3958=temp$3952.length);var $index$3964;($index$3964=0);$3942:for(;($index$3964<$length$3958);($index$3964++)){var m$3973;(m$3973=temp$3952[$index$3964]);var k$3981;(k$3981=m$3973);if((!$3839(a$3860[k$3981],b$3845[k$3981]))){return false;}}return true;}else{if($3790($3847$3871,"::serialize")){$3847$3871["::serialize"];var $3988$3993;($3988$3993=b$3845);if($3790($3988$3993,"::serialize")){$3988$3993["::serialize"];return $3839(a$3860["::serialize"](),b$3845["::serialize"]());}else{var otherwise$4005;(otherwise$4005=$3988$3993);return false;}}else{var otherwise$4009;(otherwise$4009=$3847$3871);return false;}}}}}};
var $4034=function($4036$4039){var ph$4049;var x$4050;var t0$4052;(t0$4052=$4036$4039);(x$4050=t0$4052);(ph$4049=t0$4052);var $4041$4061;($4041$4061=ph$4049);var bridge$4043$4066;(bridge$4043$4066=$4041$4061);if((function(){var bridge$4044$4076;(bridge$4044$4076=bridge$4043$4066);return (function(){var bridge$4045$4083;(bridge$4045$4083=bridge$4044$4076);return ((bridge$4045$4083===(void 0))||(bridge$4045$4083===null));}()||(typeof(bridge$4044$4076)==="string"));}()||(typeof(bridge$4043$4066)==="number"))){return x$4050;}else{if($3790($4041$4061,"::clone")){$4041$4061["::clone"];return x$4050["::clone"]();}else{$4041$4061;if((Object.getPrototypeOf(x$4050)===Object.prototype)){var dest$4101;(dest$4101=({}));var k$4106;(k$4106=null);$4100:for(k$4106 in x$4050){if(Object.prototype.hasOwnProperty.call(x$4050,k$4106)){(dest$4101[k$4106]=x$4050[k$4106]);}}return dest$4101;}else{var other$4116;(other$4116=$4041$4061);throw $3316(["clone"]).create("Object cannot be cloned",({"obj":x$4050}));}}}};
var $4012=function(a$4015,b$4016){var dest$4021;(dest$4021=$4034(a$4015));var k$4026;(k$4026=null);$4020:for(k$4026 in b$4016){if(Object.prototype.hasOwnProperty.call(b$4016,k$4026)){(dest$4021[k$4026]=b$4016[k$4026]);}}return dest$4021;};var accum$3141;var accum$3145;var kb$1474;var eg$1475;var $1439$1476;var GenSym$1477;var $1440$1478;var Location$1479;var highlight_locations$1480;var format_error$1481;var $1441$1482;var tokenize$1483;var $1442$1484;var parse$1485;var gensym$1486;var create_node$1487;var make_dom$1488;var mktable$1489;var mktable2$1490;var repr$1491;var goto_end$1492;var insert_before_caret$1493;var Repl$1494;var make_cards$1495;(kb$1474=require("./kb"));(eg$1475=require("../lib/earl-grey"));($1439$1476=require("../lib/util"));(GenSym$1477=$1439$1476.GenSym);($1440$1478=require("../lib/location"));(Location$1479=$1440$1478.Location);(highlight_locations$1480=$1440$1478.highlight_locations);(format_error$1481=$1440$1478.format_error);($1441$1482=require("../lib/lex"));(tokenize$1483=$1441$1482.tokenize);($1442$1484=require("../lib/parse"));(parse$1485=$1442$1484.parse);(gensym$1486=GenSym$1477("io_"));(create_node$1487=function(tag$1539,kv$1540,contents$1541){var $index$1571;var $length$1565;var temp$1559;var $index$1624;var $length$1618;var temp$1612;var node$1545;(node$1545=document.createElement(tag$1539));(temp$1559=$3280(kv$1540));($length$1565=temp$1559.length);($index$1571=0);$1546:for(;($index$1571<$length$1565);($index$1571++)){var k$1590;var v$1591;var t0$1585;var t1$1586;var m$1580;(m$1580=temp$1559[$index$1571]);(t0$1585=m$1580);if(((t0$1585 instanceof Array)&&(((t1$1586=t0$1585.length)),(t1$1586===2)))){(k$1590=t0$1585[0]);(v$1591=t0$1585[1]);(node$1545[k$1590]=v$1591);}else{$3297(m$1580,"/home/olivier/git/egrepl/src/repl.eg",1780,1826);}}(temp$1612=$3575(Array)(contents$1541)[1]);($length$1618=temp$1612.length);($index$1624=0);$1549:for(;($index$1624<$length$1618);($index$1624++)){var other$1651;var s$1642;var t0$1638;var m$1633;(m$1633=temp$1612[$index$1624]);(t0$1638=m$1633);if((typeof(t0$1638)==="string")){(s$1642=t0$1638);node$1545.appendChild(document.createTextNode(s$1642));}else{(other$1651=m$1633);node$1545.appendChild(other$1651);}}return node$1545;});(make_dom$1488=function(){var $index$1727;var $length$1721;var temp$1715;var node$1705;var $index$1812;var $length$1806;var temp$1800;var $index$1938;var $length$1932;var temp$1926;var $index$2011;var $length$2005;var temp$1999;var acc$1993;var $index$2070;var $length$2064;var temp$2058;var acc$2052;var other$2045;var $1760$1978;var tag$1763;var _classes$1764;var id$1765;var kv$1766;var sub$1767;var node$1768;var other$2092;var classes$1748;var children$1749;var args$1700;var s$1691;var $1665$1688;var t0$1686;var default_tag$1677;var $1660$1678;var t0$1673;var $1658$1668;($1658$1668=arguments);(t0$1673=$1658$1668.length);if(((t0$1673>=1)&&(t0$1673<=2))){($1660$1678=$1658$1668[0]);(default_tag$1677=function(){if((1>=t0$1673)){return "div";}else{return $1658$1668[1];}}());(t0$1686=$1660$1678);if((typeof(t0$1686)==="string")){(s$1691=t0$1686);return document.createTextNode(s$1691);}else{if($1359(Array)(t0$1686)){(args$1700=t0$1686);(node$1705=document.createElement("span"));(temp$1715=args$1700);($length$1721=temp$1715.length);($index$1727=0);$1706:for(;($index$1727<$length$1721);($index$1727++)){var arg$1744;var m$1736;(m$1736=temp$1715[$index$1727]);(arg$1744=m$1736);node$1705.appendChild(make_dom$1488(arg$1744,default_tag$1677));}return node$1705;}else{if(($1359($3622)(t0$1686)&&($3790(t0$1686,"classes")&&((classes$1748=t0$1686.classes),$3790(t0$1686,"children"))))){(children$1749=t0$1686.children);(tag$1763=default_tag$1677);(_classes$1764=[]);(id$1765=null);(kv$1766=[]);(sub$1767=[]);(temp$1800=classes$1748);($length$1806=temp$1800.length);($index$1812=0);$1769:for(;($index$1812<$length$1806);($index$1812++)){var s$1901;var m$1878;var m$1855;var k$1850;var k$1835;var v$1836;var $1776$1830;var $1777$1831;var $1778$1832;var t0$1826;var t1$1827;var t2$1828;var m$1821;(m$1821=temp$1800[$index$1812]);(t0$1826=m$1821);if((($1777$1831=(t0$1826 instanceof Array))&&(((t1$1827=t0$1826.length)),((t1$1827===3)&&(t0$1826[0]==="assoc"))))){(k$1835=t0$1826[1]);(v$1836=t0$1826[2]);kv$1766.push([k$1835,v$1836]);}else{if(($1777$1831&&((t1$1827===2)&&(t0$1826[0]==="assoc")))){(k$1850=t0$1826[1]);kv$1766.push([k$1850,(void 0)]);}else{(t0$1826=$3575(RegExp("(?:^\\+((?:.*)))",""))(m$1821));if((t0$1826[0]&&(((t1$1827=t0$1826[1])),(((t2$1828=t1$1827.length)),(t2$1828===2))))){t1$1827[0];(m$1855=t1$1827[1]);(tag$1763=m$1855);}else{(t0$1826=$3575(RegExp("(?:^#((?:.*)))",""))(m$1821));if((t0$1826[0]&&(((t1$1827=t0$1826[1])),(((t2$1828=t1$1827.length)),(t2$1828===2))))){t1$1827[0];(m$1878=t1$1827[1]);(id$1765=m$1878);}else{(t0$1826=m$1821);if((typeof(t0$1826)==="string")){(s$1901=t0$1826);_classes$1764.push(s$1901);}else{$3297(m$1821,"/home/olivier/git/egrepl/src/repl.eg",2362,2681);}}}}}}(node$1768=document.createElement(tag$1763));if(id$1765){(node$1768["id"]=id$1765);}if(_classes$1764.length){(node$1768["className"]=_classes$1764.join(" "));}(temp$1926=kv$1766);($length$1932=temp$1926.length);($index$1938=0);$1779:for(;($index$1938<$length$1932);($index$1938++)){var k$1957;var v$1958;var t0$1952;var t1$1953;var m$1947;(m$1947=temp$1926[$index$1938]);(t0$1952=m$1947);if(((t0$1952 instanceof Array)&&(((t1$1953=t0$1952.length)),(t1$1953===2)))){(k$1957=t0$1952[0]);(v$1958=t0$1952[1]);(node$1768[k$1957]=v$1958);}else{$3297(m$1947,"/home/olivier/git/egrepl/src/repl.eg",2828,2874);}}($1760$1978=tag$1763);if(($1760$1978==="raw")){(acc$1993=[]);(temp$1999=children$1749);($length$2005=temp$1999.length);($index$2011=0);$1988:for(;($index$2011<$length$2005);($index$2011++)){var s$2029;var t0$2025;var m$2020;(m$2020=temp$1999[$index$2011]);(t0$2025=m$2020);if((typeof(t0$2025)==="string")){(s$2029=t0$2025);acc$1993.push(((node$1768["innerHTML"]=s$2029)));}else{$3297(m$2020,"/home/olivier/git/egrepl/src/repl.eg",2901,3002);}}acc$1993;}else{(other$2045=$1760$1978);(acc$2052=[]);(temp$2058=children$1749);($length$2064=temp$2058.length);($index$2070=0);$2047:for(;($index$2070<$length$2064);($index$2070++)){var c$2087;var m$2079;(m$2079=temp$2058[$index$2070]);(c$2087=m$2079);acc$2052.push(node$1768.appendChild(make_dom$1488(c$2087,default_tag$1677)));}acc$2052;}return node$1768;}else{(other$2092=$1660$1678);return make_dom$1488([true,String(other$2092)][1]);}}}}else{$3297($1658$1668);}});(mktable$1489=function(){var other$2144;var $2127$2132;var $index$2170;var $length$2164;var temp$2158;var acc$2152;var its$2124;var x$2114;var recur$2115;var t0$2110;var $2101$2105;($2101$2105=arguments);(t0$2110=$2101$2105.length);if(((t0$2110>=1)&&(t0$2110<=2))){(x$2114=$2101$2105[0]);(recur$2115=function(){if((1>=t0$2110)){return repr$1491;}else{return $2101$2105[1];}}());(its$2124=((($2127$2132=x$2114)),function(){if($1359(Array)($2127$2132)){return x$2114;}else{(other$2144=$2127$2132);return $3280(x$2114);}}()));if(its$2124.length){return $3622(["+table","object"],(((acc$2152=[])),(((temp$2158=its$2124)),((($length$2164=temp$2158.length)),((($index$2170=0)),function(){$2147:for(;($index$2170<$length$2164);($index$2170++)){var k$2189;var v$2190;var t0$2184;var t1$2185;var m$2179;(m$2179=temp$2158[$index$2170]);(t0$2184=m$2179);if(((t0$2184 instanceof Array)&&(((t1$2185=t0$2184.length)),(t1$2185===2)))){(k$2189=t0$2184[0]);(v$2190=t0$2184[1]);acc$2152.push($3622(["+tr"],[$3622(["+th"],recur$2115(k$2189,repr$1491)),$3622(["+td"],recur$2115(v$2190,repr$1491))]));}else{$3297(m$2179,"/home/olivier/git/egrepl/src/repl.eg",3296,3430);}}}()))),acc$2152));}else{return $3622(["object","empty"],[]);}}else{$3297($2101$2105);}});(mktable2$1490=function(){var other$2255;var $2238$2243;var $index$2281;var $length$2275;var temp$2269;var acc$2263;var its$2235;var x$2225;var recur$2226;var t0$2221;var $2212$2216;($2212$2216=arguments);(t0$2221=$2212$2216.length);if(((t0$2221>=1)&&(t0$2221<=2))){(x$2225=$2212$2216[0]);(recur$2226=function(){if((1>=t0$2221)){return repr$1491;}else{return $2212$2216[1];}}());(its$2235=((($2238$2243=x$2225)),function(){if($1359(Array)($2238$2243)){return x$2225;}else{(other$2255=$2238$2243);return $3280(x$2225);}}()));return $3622(["+table"],(((acc$2263=[])),(((temp$2269=its$2235)),((($length$2275=temp$2269.length)),((($index$2281=0)),function(){$2258:for(;($index$2281<$length$2275);($index$2281++)){var k$2300;var v$2301;var t0$2295;var t1$2296;var m$2290;(m$2290=temp$2269[$index$2281]);(t0$2295=m$2290);if(((t0$2295 instanceof Array)&&(((t1$2296=t0$2295.length)),(t1$2296===2)))){(k$2300=t0$2295[0]);(v$2301=t0$2295[1]);acc$2263.push($3622(["+tr"],[$3622(["+th"],recur$2226(k$2300,repr$1491)),$3622(["+td"],recur$2226(v$2301,repr$1491))]));}else{$3297(m$2290,"/home/olivier/git/egrepl/src/repl.eg",3560,3665);}}}()))),acc$2263));}else{$3297($2212$2216);}});(repr$1491=function(){var $index$2453;var $length$2447;var temp$2441;var acc$2435;var other$2505;var f$2496;var n$2475;var entries$2427;var $2342$2382;var $2343$2383;var t0$2379;var t1$2380;var x$2357;var recur$2358;var $2325$2359;var t0$2351;var t1$2352;var t2$2353;var $2323$2346;($2323$2346=arguments);(t0$2351=$2323$2346.length);if((((t0$2351>=1)&&(t0$2351<=2))&&(((t1$2352=$2323$2346[0])),((x$2357=t1$2352),(($2325$2359=t1$2352),(((t2$2353=function(){if((1>=t0$2351)){return repr$1491;}else{return $2323$2346[1];}}())),$1359(Function)(t2$2353))))))){(recur$2358=t2$2353);if(($2325$2359===true)){return $3622(["special","true"],"true");}else{if(($2325$2359===false)){return $3622(["special","false"],"false");}else{if(($2325$2359===null)){return $3622(["special","nil"],"null");}else{if(($2325$2359===(void 0))){return $3622(["special","nil"],"undefined");}else{if((typeof($2325$2359)==="number")){return $3622(["num"],String(x$2357));}else{if(($2325$2359==="")){return $3622(["str","empty"],[]);}else{if((typeof($2325$2359)==="string")){return $3622(["str"],x$2357);}else{(t0$2379=$2325$2359);if((($2343$2383=$1359(Array)(t0$2379))&&(((t1$2380=t0$2379.length)),(t1$2380===0)))){return $3622(["sequence","empty"],[]);}else{if($2343$2383){(entries$2427=t0$2379);return $3622(["sequence"],(((acc$2435=[])),(((temp$2441=entries$2427)),((($length$2447=temp$2441.length)),((($index$2453=0)),function(){$2430:for(;($index$2453<$length$2447);($index$2453++)){var x$2470;var m$2462;(m$2462=temp$2441[$index$2453]);(x$2470=m$2462);acc$2435.push(recur$2358(x$2470,repr$1491));}}()))),acc$2435));}else{if($1359($3622)(t0$2379)){(n$2475=t0$2379);return n$2475;}else{$2325$2359;if(x$2357["::repr"]){return x$2357["::repr"](recur$2358);}else{if((Object.getPrototypeOf(x$2357)===Object.prototype)){return mktable$1489(x$2357);}else{if((x$2357.constructor&&x$2357.constructor["::egclass"])){return $3622(["instance"],[$3622(["classname"],x$2357.constructor["::name"]),mktable$1489(x$2357)]);}else{if(x$2357["::egclass"]){return $3622(["class"],[$3622(["classname"],("Class "+x$2357["::name"])),mktable$1489(x$2357.prototype)]);}else{(t0$2379=$2325$2359);if($1359(Function)(t0$2379)){(f$2496=t0$2379);return $3622(["function"],function(){if(f$2496.name){return f$2496.name;}else{return "<anonymous>";}}());}else{(other$2505=$2325$2359);return $3622(["unknown"],other$2505.toString());}}}}}}}}}}}}}}}}else{$3297($2323$2346);}});(goto_end$1492=function(elem$2514){var range$2519;var selection$2520;(range$2519=document.createRange());range$2519.selectNodeContents(elem$2514);range$2519.collapse(false);(selection$2520=window.getSelection());selection$2520.removeAllRanges();return selection$2520.addRange(range$2519);});(insert_before_caret$1493=function(text$2532){var other$2558;var $2541$2546;var it$0$2573;var it$0$2583;var range$2567;var node$2537;var sel$2538;(node$2537=((($2541$2546=text$2532)),function(){if((typeof($2541$2546)==="string")){return document.createTextNode(text$2532);}else{(other$2558=$2541$2546);return other$2558;}}()));(sel$2538=window.getSelection());if(sel$2538.rangeCount){(range$2567=sel$2538.getRangeAt(0));(it$0$2573=range$2567);it$0$2573.collapse(false);it$0$2573.insertNode(node$2537);(range$2567=range$2567.cloneRange());(it$0$2583=range$2567);it$0$2583.selectNodeContents(node$2537);it$0$2583.collapse(false);sel$2538.removeAllRanges();return sel$2538.addRange(range$2567);}});(Error.prototype["::repr"]=function(){return format_error$1481(this);});(Repl$1494=function(box$2599,target$2600,input$2601,evaluator$2602){var it$0$2605;(it$0$2605=function(){if((!$1359(Repl$1494)(this))){return Object.create(Repl$1494.prototype);}else{return this;}}());(it$0$2605["url"]="<repl>");(it$0$2605["gen"]=eg$1475.Generator(true));(it$0$2605["evaluator"]=evaluator$2602);(it$0$2605["box"]=box$2599);(it$0$2605["target"]=target$2600);(it$0$2605["input"]=input$2601);(it$0$2605["multiline"]=false);(it$0$2605["interactor"]=kb$1474.Interactor(({})));it$0$2605.set_multiline(false);it$0$2605.interactor.install(it$0$2605.input);(it$0$2605["cursor"]=0);(it$0$2605["history"]=[""]);return it$0$2605;});(Repl$1494.prototype["sink"]=function(){var it$0$2660;var self$2661;(it$0$2660=this);(self$2661=this);return jQuery(it$0$2660.box).scrollTop(it$0$2660.box.scrollHeight);});(Repl$1494.prototype["add_to_history"]=function(text$2673){var hl$2689;var it$0$2677;var self$2678;(it$0$2677=this);(self$2678=this);(hl$2689=it$0$2677.history.length);if(((text$2673!=="")&&(!((hl$2689>1)&&$3839($1378(it$0$2677.history,(hl$2689-2)),text$2673))))){(it$0$2677.history[(hl$2689-1)]=text$2673);it$0$2677.history.push("");}(it$0$2677["cursor"]=(it$0$2677.history.length-1));});(Repl$1494.prototype["submit"]=function(){var text$2720;var it$0$2708;var self$2709;(it$0$2708=this);(self$2709=this);it$0$2708.set_multiline(false);(text$2720=it$0$2708.input.textContent);it$0$2708.process(text$2720);(it$0$2708.input["innerHTML"]="");return it$0$2708.sink();});(Repl$1494.prototype["begin_multiline"]=function(){var it$0$2734;var self$2735;(it$0$2734=this);(self$2735=this);it$0$2734.set_multiline(true);goto_end$1492(it$0$2734.input);insert_before_caret$1493("\n   ");return it$0$2734.sink();});(Repl$1494.prototype["set_multiline"]=function(x$2748){var accum$2806;var accum$2813;var accum$2829;var accum$2837;var accum$2845;var accum$2880;var accum$2888;var accum$2895;var accum$2903;var previous$2776;var next$2777;var common$2778;var $2761$2766;var it$0$2752;var self$2753;(it$0$2752=this);(self$2753=this);($2761$2766=x$2748);(previous$2776=function(){if((it$0$2752.cursor>0)){(it$0$2752.input["textContent"]=$1378(it$0$2752.history,(--it$0$2752.cursor)));goto_end$1492(it$0$2752.input);return it$0$2752.sink();}});(next$2777=function(){if((it$0$2752.cursor<(it$0$2752.history.length-1))){(it$0$2752.input["textContent"]=$1378(it$0$2752.history,(++it$0$2752.cursor)));goto_end$1492(it$0$2752.input);return it$0$2752.sink();}});(common$2778=$1379(((accum$2806=({})),((accum$2806["C-l"]=function(){return jQuery(it$0$2752.target).empty();}),accum$2806)),((accum$2813=({})),((accum$2813["S-Enter"]=function(){return it$0$2752.submit();}),accum$2813))));if(($2761$2766===false)){jQuery(it$0$2752.input).removeClass("multiline");return it$0$2752.interactor.set_bindings($4012(common$2778,$1379(((accum$2829=({})),((accum$2829["C-m"]=function(){it$0$2752.set_multiline(true);return "break";}),accum$2829)),$1379(((accum$2837=({})),((accum$2837["C-Enter"]=function(){it$0$2752.begin_multiline();return "break";}),accum$2837)),$1379(((accum$2845=({})),((accum$2845["Enter"]=function(){var other$2868;var $2851$2856;($2851$2856=it$0$2752.input.textContent);if($1359(RegExp("(=|->|%|:|with|where|each)$",""))($2851$2856)){return it$0$2752.begin_multiline();}else{(other$2868=$2851$2856);return it$0$2752.submit();}}),accum$2845)),({"Up":previous$2776,"Down":next$2777}))))));}else{if(($2761$2766===true)){jQuery(it$0$2752.input).addClass("multiline");return it$0$2752.interactor.set_bindings($4012(common$2778,$1379(((accum$2880=({})),((accum$2880["C-m"]=function(){it$0$2752.set_multiline(false);return "break";}),accum$2880)),$1379(((accum$2888=({})),((accum$2888["C-Enter"]=function(){return it$0$2752.submit();}),accum$2888)),$1379(((accum$2895=({})),((accum$2895["Enter"]=function(){insert_before_caret$1493("\n");return it$0$2752.sink();}),accum$2895)),((accum$2903=({})),((accum$2903["Tab"]=function(){return insert_before_caret$1493("   ");}),accum$2903)))))));}else{$3297($2761$2766);}}});(Repl$1494.prototype["generate"]=function(text$2915){var it$0$2919;var self$2920;(it$0$2919=this);(self$2920=this);return it$0$2919.gen.generate(eg$1475.Source(text$2915,it$0$2919.url));});(Repl$1494.prototype["eval"]=function(text$2932){var rval$2973;var gen$2948;var handle$2949;var it$0$2936;var self$2937;(it$0$2936=this);(self$2937=this);(gen$2948=function(){var g$2959;(g$2959=it$0$2936.generate(text$2932));return ["success",it$0$2936.evaluator(g$2959)];});(handle$2949=function(e$2968){return ["failure",e$2968];});(rval$2973=false);try{(rval$2973=gen$2948());}catch(excv$2984){var e$2990;(e$2990=excv$2984);(rval$2973=handle$2949(e$2990));}return rval$2973;});(Repl$1494.prototype["process"]=function(){var error$3103;var value$3098;var n$3088;var $3055$3069;var $3056$3070;var $3057$3071;var $3058$3072;var t0$3066;var t1$3067;var $3049$3061;var real_text$3039;var node$3040;var name$3041;var collapse$3042;var on$3043;var text$3024;var display_in$3025;var t0$3020;var $3003$3015;var it$0$3005;var self$3006;(it$0$3005=this);(self$3006=this);($3003$3015=arguments);(t0$3020=$3003$3015.length);if(((t0$3020>=1)&&(t0$3020<=2))){(text$3024=$3003$3015[0]);(display_in$3025=function(){if((1>=t0$3020)){return true;}else{return $3003$3015[1];}}());it$0$3005.add_to_history(text$3024);(real_text$3039=text$3024);(node$3040=make_dom$1488($3622(["io"],[function(){if(display_in$3025){return $3622(["in"],[$3622(["inbanner"],[]),$3622(["entry"],(text$3024||" "))]);}else{return "";}}(),((($3049$3061=it$0$3005.eval(real_text$3039))),($3049$3061,function(){if((text$3024.trim()==="")){return "";}else{if((($3055$3069=($3049$3061 instanceof Array))&&(((t0$3066=$3049$3061.length)),(($3057$3071=(t0$3066===2))&&(($3058$3072=($3049$3061[0]==="success"))&&($3049$3061[1]===(void 0))))))){return "";}else{if(($3058$3072&&(((t1$3067=$3049$3061[1])),$1359($3622)(t1$3067)))){(n$3088=t1$3067);return $3622(["display"],[$3622(["displaybanner"],[]),$3622(["result"],n$3088)]);}else{if($3058$3072){(value$3098=$3049$3061[1]);return $3622(["out"],[$3622(["outbanner"],[]),$3622(["result"],$3622(["eg"],repr$1491(value$3098)))]);}else{if(($3057$3071&&($3049$3061[0]==="failure"))){(error$3103=$3049$3061[1]);return $3622(["err"],[$3622(["errbanner"],[]),$3622(["result"],$3622(["eg"],repr$1491(error$3103)))]);}else{$3297($3049$3061);}}}}}}()))])));(name$3041=gensym$1486());(node$3040["id"]=name$3041);it$0$3005.target.appendChild(node$3040);(collapse$3042=function(e$3119){var at_top$3123;e$3119.stopPropagation();(at_top$3123=$3839((it$0$3005.box.scrollTop+jQuery(it$0$3005.box).height()),it$0$3005.box.scrollHeight));jQuery(this).toggleClass("collapsed");if(at_top$3123){return jQuery(it$0$3005.box).scrollTop(it$0$3005.box.scrollHeight);}});(on$3043=function(sel$3133){return jQuery(((("#"+name$3041)+" ")+sel$3133));});on$3043(".sequence").addClass("complex");on$3043(".object").addClass("complex");on$3043(".complex").click(collapse$3042);on$3043(".complex .complex .complex").addClass("collapsed");on$3043(".error_args.syntax").addClass("collapsed").click(collapse$3042);return on$3043(".traceback").addClass("collapsed").click(collapse$3042);}else{$3297($3003$3015);}});$1379(Repl$1494,$1379(((accum$3141=({})),((accum$3141["::name"]="Repl"),accum$3141)),((accum$3145=({})),((accum$3145["::egclass"]=true),accum$3145))));Repl$1494;(make_cards$1495=function(repl$3152){var clickable$3157;var clickable_row$3158;(clickable$3157=function(text$3163){var click$3167;(click$3167=function(e$3172){e$3172.preventDefault();repl$3152.process(text$3163);repl$3152.sink();return jQuery(repl$3152.input).focus();});return $3622(["clickable",["assoc","onclick",click$3167]],text$3163);});(clickable_row$3158=function(){var $index$3225;var $length$3219;var temp$3213;var acc$3207;var items$3194;var t0$3190;var $3181$3185;($3181$3185=arguments);(t0$3190=$3181$3185.length);if((t0$3190>=0)){(items$3194=Array.prototype.slice.call($3181$3185,0));return $3622(["+span"],(((acc$3207=[])),(((temp$3213=items$3194)),((($length$3219=temp$3213.length)),((($index$3225=0)),function(){$3201:for(;($index$3225<$length$3219);($index$3225++)){var item$3248;var item$3242;var m$3234;(m$3234=temp$3213[$index$3225]);(item$3242=m$3234);if(($index$3225===0)){acc$3207.push(clickable$3157(item$3242));}else{(item$3248=m$3234);acc$3207.push($3622(["+span"],[$3622(["+span","separator"],""),clickable$3157(item$3248)]));}}}()))),acc$3207));}else{$3297($3181$3185);}});return [$3622(["card"],[$3622(["+h3"],"Keyboard controls"),mktable2$1490([[$3622(["+code"],"Up/Down"),"Navigate history"],[$3622(["+code"],"Enter/Shift-Enter"),"Evaluate an expression"],[$3622(["+code"],"Control-l"),"Clear the screen"],[$3622(["+code"],"Control-m"),"Toggle mulitline mode"]]),"Type ",clickable$3157("next")," to continue with the tutorial"]),$3622(["card"],[$3622(["+h3"],"Basics"),$3622([],["Click on boxes like ",clickable$3157("this")," to evaluate their contents."]),$3622(["+h4"],"Strings"),$3622(["+span"],clickable_row$3158("\"hello world\"",".word","\"My name is \\\"Olivier\\\"\"")),$3622(["+h4"],"Numbers"),mktable2$1490([[$3622([],"Decimal"),clickable_row$3158("1","1.4","4.93e51")],[$3622([],"Hex"),clickable_row$3158("16rFF","16r100","16rDEADBEEF","16r0.8")],[$3622([],"Binary etc."),clickable_row$3158("2r1110","3r20","36rZAZZ")]]),$3622(["+h4"],"Function calls"),mktable2$1490([[$3622([],"Call"),clickable_row$3158("alert{\"Hello!\"}","alert with \"Hello!\"")],[$3622([],"Methods"),clickable_row$3158("\"hello\".substring{1}")]]),clickable$3157("next")," => variables"]),$3622(["card"],[$3622(["+h3"],"Variables"),$3622(["+table"],[$3622(["+tr"],$3622(["+td",["assoc","colspan",2]],[$3622(["+b"],"Declare")," a variable"])),$3622(["+tr"],[$3622(["+td"],"Read-only"),$3622(["+td"],clickable$3157("let x = 1234"))]),$3622(["+tr"],[$3622(["+td"],"Mutable"),$3622(["+td"],clickable$3157("var x = 1234"))]),$3622(["+tr"],[$3622(["+td"],[$3622(["+b"],"Set")," a variable"]),$3622(["+td"],clickable$3157("x = 1234"))])]),$3622([],["Attempting to set a variable that has not been declared"," will create a ",$3622(["+b"],"read-only")," variable in the local scope."]),$3622([],[$3622(["+b"],"Note:")," as a convenience, all variables declared interactively"," in the top scope are in fact mutable."]),$3622([],["You can create blocks with their own local variables using ",$3622(["+code"],"[]"),", ",$3622(["+code"],"let")," or ",$3622(["+code"],"where")]),$3622([],clickable$3157("[let a = 10, let b = 90, a + b]")),$3622([],clickable$3157("let [a = 10, b = 90]: a + b")),$3622([],clickable$3157("a + b where\n   a = 10\n   b = 90")),$3622([],["Be aware that ",$3622(["+code"],"[]")," only creates a block"," when it encloses more than one expression."]),$3622([],["An indented block is completely equivalent to ","wrapping it in ",$3622(["+code"],"[]"),"s"]),clickable$3157("next")," => data structures"]),$3622(["card"],[$3622(["+h3"],"Data structures"),$3622([],["Earl Grey uses curly braces ",$3622(["+code"],"{}")," to define all data structures."]),mktable2$1490([[$3622([],"Arrays"),clickable_row$3158("{1, 2, 3}","{1, {2, 3}}","{\"hello\"}")],[$3622([],"Objects"),clickable_row$3158("{name = .Peter, age = 20}","{\"a\" => 123}")]]),$3622([],["The empty array is ",clickable$3157("{}")," and the empty object is ",clickable$3157("{=}")]),$3622(["+h4"],"Deconstruction"),$3622([],"You can extract array elements and object fields into variables directly."),$3622([],clickable$3157("{x, y} = {11, 22}")),$3622([],clickable$3157("{x, *rest, y} = {111, 222, 333, 444}")),$3622([],clickable$3157("{=> name} = {name = .Peter, age = 20}")),$3622(["+h4"],"Operations"),mktable2$1490([[$3622([],"Concatenation"),clickable$3157("{1, 2} ++ {3, 4, 5}")],[$3622([],"Object fusion"),clickable$3157("{name = .Kim} & {age = 39}")]]),clickable$3157("next")," => control structures"]),$3622(["card"],[$3622(["+h3"],"Control structures"),$3622([],[$3622(["+code"],"if")," and ",$3622(["+code"],"while")," are available."]),$3622([],clickable$3157("if 13 > 0:\n   then: \"This number is positive!\"\n   else: \"This number is negative!\"\n")),$3622([],clickable$3157("i = 3\nwhile i > 0:\n   alert{i}\n   i--\n")),$3622([],["Notice that both branches of ",$3622(["+code"],"if")," must be nested."," The expression form of ",$3622(["+code"],"if")," is simply ",clickable$3157("if{1, .yes, .no}")]),clickable$3157("next")," => control structures [2]"]),$3622(["card"],[$3622(["+h3"],"Control structures [2]"),$3622([],["Earl Grey's ",$3622(["+code"],"if")," nests poorly, so if you want to ","write many clauses use ",$3622(["+code"],"match")]),$3622([],clickable$3157("x = 13\nmatch:\n   when x > 0 -> .positive\n   when x < 0 -> .negative\n   when x == 0 -> .zero\n")),$3622([],"You can also match on the variable directly!"),$3622([],clickable$3157("x = 13\nmatch x:\n   > 0 -> .positive\n   < 0 -> .negative\n   0 -> .zero\n")),$3622([],["The left hand side of the arrow is a special pattern matching"," language, whereas ",$3622(["+code"],"when")," takes a standard expression."]),clickable$3157("next")," => each"]),$3622(["card"],[$3622(["+h3"],"each"),$3622([],["A single operator serves both looping over data structures"," and list comprehensions."]),$3622([],clickable$3157("{1, 2, 3} each i -> -i")),$3622([],clickable$3157("1..10 each i -> i * i")),$3622([],clickable$3157("1..10 each i when i mod 2 == 0 -> i")),$3622([],"You can have more than one clause"),$3622([],clickable$3157("{1, 2, .hello, 4, 72, 99, {}} each\n   String? s -> {s, .string}\n   Number? i when i mod 2 == 0 -> {i, .even}\n   Number? i when i mod 2 == 1 -> {i, .odd}\n   x -> {x, .dunno}\n")),$3622([],[$3622(["+code"],"first")," and ",$3622(["+code"],"last")," are special patterns"]),$3622([],clickable$3157("acc = \"\"\n{.a, .b, .c, .d} each\n   first x -> acc += \"[\" + x\n   last x -> acc += \", \" + x + \"]\"\n   x -> acc += \", \" + x\nacc\n")),$3622([],"Be careful to put the catchall clause last."),clickable$3157("next")," => functions"]),$3622(["card"],[$3622(["+h3"],"Functions"),$3622([],["Functions are declared with ",$3622(["+code"],"=")," or ",$3622(["+code"],"->"),". For instance the following are equivalent"]),$3622([],clickable$3157("f{x, y} = [x * x + y * y] ** 0.5")),$3622([],clickable$3157("f = {x, y} -> [x * x + y * y] ** 0.5")),$3622([],"It works inside object definitions as well, of course"),$3622([],clickable$3157("{add1{x} = x + 1, add2{x} = x + 2}")),$3622([],["Pattern matching is deeply integrated in Earl Grey. ","For instance:"]),$3622([],clickable$3157("fact{match} =\n   0 or 1 -> 1\n   n -> n * fact{n - 1}\n")),clickable$3157("next")," => type checking and coercion"]),$3622(["card"],[$3622(["+h3"],"Type checking and coercion"),mktable2$1490([[$3622([],"Type checking"),clickable_row$3158("String? .hello","Number? 1","Array? .nope","R\"x$\"? .simplex")],[$3622([],"Coercion"),clickable_row$3158("String! {1, 2}","Number! \"3.14\"","Array! .yep")]]),$3622([],["Both type checking and coercion can be used in patterns."," Observe the difference in behavior of the following functions "," (try on ",clickable$3157("f{1, \"2\"}"),")"]),$3622([],clickable$3157("f{x, y} = x + y")),$3622([],clickable$3157("f{Number? x, Number? y} = x + y")),$3622([],clickable$3157("f{Number! x, Number! y} = x + y")),$3622([],["Functions naturally act as coercers: ",clickable$3157("parseInt! x = \"99\"")]),$3622(["+h4"],"Predicates"),$3622([],["You can create your own predicates with the ",$3622(["+code"],"predicate")," builtin"]),$3622([],clickable$3157("predicate! even{x} = x mod 2 == 0")),$3622([],clickable_row$3158("even? x = 1","even? x = 2")),clickable$3157("next")," => classes"]),$3622(["card"],[$3622(["+h3"],"Classes"),$3622([],["Classes are declared with the ",$3622(["+code"],"class")," macro. As a convenience, @ can be used to"," refer to fields and members of the instance."]),$3622([],clickable$3157("class Person:\n   constructor{name, age, job} =\n      @name = name\n      @age = age\n      @job = job\n   hello{} =\n      \"Hello, I am \" + @name + \", \" + @age + \", and I am a \" + @job\n")),$3622([],["The ",$3622(["+code"],"new")," keyword is optional."," I prefer to avoid it."]),$3622([],clickable$3157("Person{.Sonia, 25, .baker}")),$3622([],clickable$3157("Person{.Jack, 56, \"serial murderer\"}.hello{}")),clickable$3157("next")," => HTML generation"]),$3622(["card"],[$3622(["+h3"],"Here, let's have some fun"),$3622([],["The ",$3622(["+code"],"%")," operator creates structured data"," which is directly translated as HTML."]),$3622([],clickable_row$3158("b % .hello","i % .hello")),$3622([],"We can print out a multiplication table!"),$3622([],clickable_row$3158("table % 1..10 each i ->\n   tr % 1..10 each j ->\n      td % i * j\n"))]),$3622(["card"],[$3622(["+h3"],"The end"),$3622([],["This is the end of this humble tutorial,"," but you can keep messing around with the language,"," it's a lot of fun :)"])])];});(exports["Repl"]=Repl$1494);(exports["Interactor"]=kb$1474.Interactor);(exports["parse"]=parse$1485);(exports["tokenize"]=tokenize$1483);(exports["Source"]=eg$1475.Source);(exports["make_cards"]=make_cards$1495);

},{"../lib/earl-grey":4,"../lib/lex":6,"../lib/location":7,"../lib/parse":9,"../lib/util":14,"./kb":1}],"repl":[function(require,module,exports){
module.exports=require('eXk3/i');
},{}],4:[function(require,module,exports){
var $185=function(type$187){var f$190;(f$190=type$187["::check"]);if((f$190===(void 0))){return function(value$195){return (value$195 instanceof type$187);};}else{return function(value$198){return f$190.call(type$187,value$198);};}};
var $200=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $201=function(dest$203,values$204){var k$209;(k$209=null);$207:for(k$209 in values$204){if(values$204.hasOwnProperty(k$209)){(dest$203[k$209]=values$204[k$209]);}}return dest$203;};
var $213=function($214$216){var ph$220;(ph$220=$214$216);var $218$225;($218$225=ph$220);var bridge$219$230;var x$234;(bridge$219$230=$218$225);if((((typeof(bridge$219$230)==="string")&&((x$234=bridge$219$230),true))||((typeof(bridge$219$230)==="number")&&((x$234=bridge$219$230),true)))){return ["value",x$234];}else{var other$241;(other$241=$218$225);return other$241["::serialize_ast"]();}};
var send$25;(send$25=function(obj$30,$28$31){var ph$35;var msg$36;var t0$38;(t0$38=$28$31);(msg$36=t0$38);(ph$35=t0$38);var $33$42;($33$42=ph$35);var bridge$34$47;(bridge$34$47=$33$42);if(((typeof(bridge$34$47)==="string")||(typeof(bridge$34$47)==="number"))){return obj$30[msg$36];}else{var other$55;(other$55=$33$42);return obj$30["::send"](msg$36);}});(Array[":::project"]=function($58$60){var ph$63;var value$64;var t0$66;(t0$66=$58$60);(value$64=t0$66);(ph$63=t0$66);var $62$70;($62$70=ph$63);if($185(Array)($62$70)){return [true,value$64];}else{$62$70;return [true,[value$64]];}});(Array.prototype["::check"]=function(value$84){if((value$84 instanceof Array)){var i$89;(i$89=0);$87:for(;(i$89<this.length);(i$89++)){if(($200(this,i$89)!==$200(value$84,i$89))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $201(this.slice(0),this);});(Array.prototype[":::project"]=function(value$100){if((value$100 instanceof Array)){var i$105;(i$105=0);$103:for(;(i$105<this.length);(i$105++)){if(($200(this,i$105)!==$200(value$100,i$105))){return [true,[value$100]];}}return [true,value$100.slice(this.length)];}else{return [true,[value$100]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($213));});(RegExp.prototype["::check"]=function($115$117){var ph$120;(ph$120=$115$117);var $119$125;($119$125=ph$120);var value$133;if((typeof($119$125)==="string")){(value$133=$119$125);if(value$133.match(this)){return true;}else{return false;}}else{var other$138;(other$138=$119$125);return false;}});(RegExp.prototype[":::project"]=function($140$142){var ph$145;(ph$145=$140$142);var $144$150;($144$150=ph$145);var value$158;if((typeof($144$150)==="string")){(value$158=$144$150);var $161$163;($161$163=value$158.match(this));var m$171;if(($161$163===null)){(m$171=$161$163);return [false,null];}else{var m$176;(m$176=$161$163);return [true,m$176];}}else{var other$180;(other$180=$144$150);return [false,null];}});(Function.prototype["::send"]=function(args$183){return this.apply(this,args$183);});
var $744=function(arr$746){var results$750;var l$751;(results$750=[]);(l$751=arr$746.length);var i$759;(i$759=0);$749:for(;(i$759<l$751);(i$759++)){results$750.push([i$759,$200(arr$746,i$759)]);}return results$750;};
var $575=function(){var $576$578;($576$578=function(tags$582){var it$0$585;(it$0$585=function(){if((!$185($576$578)(this))){return Object.create($576$578.prototype);}else{return this;}}());(it$0$585["tags"]=tags$582);return it$0$585;});($576$578.prototype["create"]=function(){var $594$596;($594$596=arguments);var t0$601;var message$605;var args$606;(t0$601=$594$596.length);if((t0$601>=0)){(message$605=function(){if((0>=t0$601)){return "";}else{return $594$596[0];}}());(args$606=Array.prototype.slice.call($594$596,1));var it$0$610;(it$0$610=this);var self$615;(self$615=this);var e$620;(e$620=Error(message$605));(e$620["::tags"]=it$0$610.tags);(e$620["args"]=args$606);var temp$628;(temp$628=$744(args$606));var $length$633;($length$633=temp$628.length);var $index$638;($index$638=0);$621:for(;($index$638<$length$633);($index$638++)){var m$646;(m$646=temp$628[$index$638]);var t0$651;var t1$652;var i$656;var arg$657;(t0$651=m$646);if(((t0$651 instanceof Array)&&((t1$652=t0$651.length),(t1$652===2)))){(i$656=t0$651[0]);(arg$657=t0$651[1]);(e$620[i$656]=arg$657);}else{$562(m$646);}}(e$620["length"]=args$606.length);(e$620["name"]=["E"].concat(it$0$610.tags).join("."));return e$620;}else{$562($594$596);}});($576$578.prototype["::check"]=function(e$668){var it$0$671;(it$0$671=this);var self$676;(self$676=this);var tags$681;if(((!e$668)||(!$185(Error)(e$668)))){return false;}(tags$681=(e$668["::tags"]||[]));var temp$690;(temp$690=it$0$671.tags);var $length$695;($length$695=temp$690.length);var $index$700;($index$700=0);$682:for(;($index$700<$length$695);($index$700++)){var m$708;(m$708=temp$690[$index$700]);var tag$716;(tag$716=m$708);if((tags$681.indexOf(tag$716)===-1)){return false;}else{false;}}return true;});($576$578.prototype["::deconstruct"]=function(e$724){var it$0$727;(it$0$727=this);var self$732;(self$732=this);return e$724.args;});$201($576$578,$201(function(){var accum$737;(accum$737=({}));(accum$737["::name"]="$576");return accum$737;}(),function(){var accum$741;(accum$741=({}));(accum$741["::egclass"]=true);return accum$741;}()));return $576$578;}();
var $562=function(value$564,url$565,start$566,end$567){var err$570;(err$570=$575(["match"]).create("Could not find a match for value",({"value":value$564})));if(url$565){(err$570["location"]=["location",url$565,start$566,end$567]);}throw err$570;};
var $766=function($767$769,key$770){var ph$774;(ph$774=$767$769);var $772$779;($772$779=ph$774);var bridge$773$784;(bridge$773$784=$772$779);if(((bridge$773$784===null)||(bridge$773$784===(void 0)))){return false;}else{var x$792;if((typeof($772$779)==="string")){(x$792=$772$779);return (key$770 in String.prototype);}else{var x$797;if((typeof($772$779)==="number")){(x$797=$772$779);return (key$770 in Number.prototype);}else{var x$802;(x$802=$772$779);return (key$770 in x$802);}}}};
var $804=function(obj$806){var results$810;(results$810=[]);var k$815;(k$815=null);$809:for(k$815 in obj$806){if(Object.prototype.hasOwnProperty.call(obj$806,k$815)){results$810.push([k$815,$200(obj$806,k$815)]);}}return results$810;};var accum$554;var accum$558;var $245$252;var Source$253;var Location$254;var highlight_locations$255;var $246$256;var tokenize$257;var $247$258;var parse$259;var $248$260;var translate$261;var Translator$262;var std$263;var exp$264;var opt$265;var generate_from_ast$266;var generate$267;var Generator$268;($245$252=require("./location"));(Source$253=$245$252.Source);(Location$254=$245$252.Location);(highlight_locations$255=$245$252.highlight_locations);($246$256=require("./lex"));(tokenize$257=$246$256.tokenize);($247$258=require("./parse"));(parse$259=$247$258.parse);($248$260=require("./translate-js"));(translate$261=$248$260.translate);(Translator$262=$248$260.Translator);(std$263=require("./stdenv"));(exp$264=require("./expand"));(opt$265=require("./opt"));(generate_from_ast$266=function(ast$314){var ex$317;var tr$318;var rval$319;(ex$317=std$263.expand(["top"],std$263.topscope,std$263.stdenv.fork().convert(["multi",ast$314])));(ex$317=opt$265.hoist(ex$317));(tr$318=Translator$262());(rval$319=tr$318.translate(ex$317,"expr"));return [tr$318.dump_store(),rval$319];});std$263.stdenv.bind(std$263.topscope,"macro",["macro",function(context$332,scope$333,form$334,$330$335){var t0$374;var t1$375;var prep$369;var code$370;var mac$371;var mac2$372;var name$356;var sym$357;var arguments$358;var ast$359;var t0$348;var t1$349;var t2$350;var t3$351;var t4$352;var $337$343;var ph$338;(ph$338=$330$335);($337$343=ph$338);if((($337$343 instanceof Array)&&((t0$348=$337$343.length),((t0$348===3)&&(($337$343[0]==="data")&&((t1$349=$337$343[1]),((t1$349 instanceof Array)&&((t2$350=t1$349.length),((t2$350===3)&&((t1$349[0]==="send")&&((t3$351=t1$349[1]),((name$356=t3$351),((t3$351 instanceof Array)&&((t4$352=t3$351.length),((t4$352===2)&&(t3$351[0]==="symbol")))))))))))))))){(sym$357=t3$351[1]);(arguments$358=t1$349[2]);(ast$359=$337$343[2]);(t0$374=generate_from_ast$266(["send",["symbol","->"],["data",arguments$358,ast$359]]));if(((t0$374 instanceof Array)&&((t1$375=t0$374.length),(t1$375===2)))){(prep$369=t0$374[0]);(code$370=t0$374[1]);}else{$562(generate_from_ast$266(["send",["symbol","->"],["data",arguments$358,ast$359]]),"/home/olivier/git/earl-grey/src/earl-grey.eg",798,848);}(mac$371=eval((prep$369+((";("+code$370)+")"))));(mac2$372=function(c$386,s$387,f$388,e$389){var env$392;var r$393;(env$392=scope$333.expander.mkenv());env$392.bind(scope$333,sym$357,["macro",mac2$372]);(r$393=mac$371(c$386,s$387,f$388,e$389));return env$392.convert(r$393);});return ["declare_raw",name$356,["macro",mac2$372]];}else{$562($337$343);}}]);std$263.stdenv.bind(std$263.topscope,"macros",["macro",function(context$406,scope$407,$403$408,$404$409){var t0$414;var t0$419;var t1$420;var t0$430;var t1$431;var $index$458;var $length$453;var temp$448;var acc$443;var prep$426;var code$427;var the_macros$428;var env$411;var body$412;(t0$414=$403$408);if($766(t0$414,"env")){(env$411=t0$414.env);}else{$562($403$408);}(t0$419=$404$409);if(((t0$419 instanceof Array)&&((t1$420=t0$419.length),((t1$420===2)&&(t0$419[0]==="data"))))){(body$412=t0$419[1]);}else{$562($404$409);}(t0$430=generate_from_ast$266(body$412));if(((t0$430 instanceof Array)&&((t1$431=t0$430.length),(t1$431===2)))){(prep$426=t0$430[0]);(code$427=t0$430[1]);}else{$562(generate_from_ast$266(body$412),"/home/olivier/git/earl-grey/src/earl-grey.eg",1358,1388);}(the_macros$428=eval((((prep$426+";(")+code$427)+")")));return ["splice"].concat((((acc$443=[])),(((temp$448=$804(the_macros$428))),((($length$453=temp$448.length)),((($index$458=0)),function(){$440:for(;($index$458<$length$453);($index$458++)){var k$476;var v$477;var t0$471;var t1$472;var m$466;(m$466=temp$448[$index$458]);(t0$471=m$466);if(((t0$471 instanceof Array)&&((t1$472=t0$471.length),(t1$472===2)))){(k$476=t0$471[0]);(v$477=t0$471[1]);acc$443.push(["declare_raw",$201(["symbol",k$476],({"env":env$411})),["macro",v$477]]);}else{$562(m$466,"/home/olivier/git/earl-grey/src/earl-grey.eg",1458,1565);}}}()))),acc$443));}]);(generate$267=function(source$486){return Generator$268().generate(source$486);});(Generator$268=function(){var it$0$507;var interactive$503;var t0$499;var $492$494;($492$494=arguments);(t0$499=$492$494.length);if(((t0$499>=0)&&(t0$499<=1))){(interactive$503=function(){if((0>=t0$499)){return false;}else{return $492$494[0];}}());(it$0$507=function(){if((!$185(Generator$268)(this))){return Object.create(Generator$268.prototype);}else{return this;}}());(it$0$507["tr"]=Translator$262(std$263.stdprelude));(it$0$507["env"]=std$263.stdenv.fork());(it$0$507["interactive"]=interactive$503);return it$0$507;}else{$562($492$494);}});(Generator$268.prototype["generate"]=function(source$519){var stmt$545;var t$532;var p$533;var ex$534;var rval$535;var self$527;var it$0$522;(it$0$522=this);(self$527=this);(t$532=tokenize$257(source$519));(p$533=parse$259(t$532));(ex$534=(((stmt$545=function(){if(it$0$522.interactive){return ["interactive",p$533];}else{return ["multi",p$533];}}())),std$263.expand(["top"],std$263.topscope,it$0$522.env.convert(stmt$545))));(ex$534=opt$265.hoist(ex$534));(rval$535=it$0$522.tr.translate(ex$534,"stmt"));return (it$0$522.tr.dump_store()+rval$535);});$201(Generator$268,$201(((accum$554=({})),((accum$554["::name"]="Generator"),accum$554)),((accum$558=({})),((accum$558["::egclass"]=true),accum$558))));Generator$268;(exports["Source"]=Source$253);(exports["Location"]=Location$254);(exports["highlight_locations"]=highlight_locations$255);(exports["tokenize"]=tokenize$257);(exports["parse"]=parse$259);(exports["Generator"]=Generator$268);(exports["generate"]=generate$267);

},{"./expand":5,"./lex":6,"./location":7,"./opt":8,"./parse":9,"./stdenv":12,"./translate-js":13}],5:[function(require,module,exports){
var $980=function(type$982){var f$985;(f$985=type$982["::check"]);if((f$985===(void 0))){return function(value$990){return (value$990 instanceof type$982);};}else{return function(value$993){return f$985.call(type$982,value$993);};}};
var $995=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $996=function(dest$998,values$999){var k$1004;(k$1004=null);$1002:for(k$1004 in values$999){if(values$999.hasOwnProperty(k$1004)){(dest$998[k$1004]=values$999[k$1004]);}}return dest$998;};
var $1008=function($1009$1011){var ph$1015;(ph$1015=$1009$1011);var $1013$1020;($1013$1020=ph$1015);var bridge$1014$1025;var x$1029;(bridge$1014$1025=$1013$1020);if((((typeof(bridge$1014$1025)==="string")&&((x$1029=bridge$1014$1025),true))||((typeof(bridge$1014$1025)==="number")&&((x$1029=bridge$1014$1025),true)))){return ["value",x$1029];}else{var other$1036;(other$1036=$1013$1020);return other$1036["::serialize_ast"]();}};
var send$820;(send$820=function(obj$825,$823$826){var ph$830;var msg$831;var t0$833;(t0$833=$823$826);(msg$831=t0$833);(ph$830=t0$833);var $828$837;($828$837=ph$830);var bridge$829$842;(bridge$829$842=$828$837);if(((typeof(bridge$829$842)==="string")||(typeof(bridge$829$842)==="number"))){return obj$825[msg$831];}else{var other$850;(other$850=$828$837);return obj$825["::send"](msg$831);}});(Array[":::project"]=function($853$855){var ph$858;var value$859;var t0$861;(t0$861=$853$855);(value$859=t0$861);(ph$858=t0$861);var $857$865;($857$865=ph$858);if($980(Array)($857$865)){return [true,value$859];}else{$857$865;return [true,[value$859]];}});(Array.prototype["::check"]=function(value$879){if((value$879 instanceof Array)){var i$884;(i$884=0);$882:for(;(i$884<this.length);(i$884++)){if(($995(this,i$884)!==$995(value$879,i$884))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $996(this.slice(0),this);});(Array.prototype[":::project"]=function(value$895){if((value$895 instanceof Array)){var i$900;(i$900=0);$898:for(;(i$900<this.length);(i$900++)){if(($995(this,i$900)!==$995(value$895,i$900))){return [true,[value$895]];}}return [true,value$895.slice(this.length)];}else{return [true,[value$895]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($1008));});(RegExp.prototype["::check"]=function($910$912){var ph$915;(ph$915=$910$912);var $914$920;($914$920=ph$915);var value$928;if((typeof($914$920)==="string")){(value$928=$914$920);if(value$928.match(this)){return true;}else{return false;}}else{var other$933;(other$933=$914$920);return false;}});(RegExp.prototype[":::project"]=function($935$937){var ph$940;(ph$940=$935$937);var $939$945;($939$945=ph$940);var value$953;if((typeof($939$945)==="string")){(value$953=$939$945);var $956$958;($956$958=value$953.match(this));var m$966;if(($956$958===null)){(m$966=$956$958);return [false,null];}else{var m$971;(m$971=$956$958);return [true,m$971];}}else{var other$975;(other$975=$939$945);return [false,null];}});(Function.prototype["::send"]=function(args$978){return this.apply(this,args$978);});
var $3254=function(arr$3256){var results$3260;var l$3261;(results$3260=[]);(l$3261=arr$3256.length);var i$3269;(i$3269=0);$3259:for(;(i$3269<l$3261);(i$3269++)){results$3260.push([i$3269,$995(arr$3256,i$3269)]);}return results$3260;};
var $3085=function(){var $3086$3088;($3086$3088=function(tags$3092){var it$0$3095;(it$0$3095=function(){if((!$980($3086$3088)(this))){return Object.create($3086$3088.prototype);}else{return this;}}());(it$0$3095["tags"]=tags$3092);return it$0$3095;});($3086$3088.prototype["create"]=function(){var $3104$3106;($3104$3106=arguments);var t0$3111;var message$3115;var args$3116;(t0$3111=$3104$3106.length);if((t0$3111>=0)){(message$3115=function(){if((0>=t0$3111)){return "";}else{return $3104$3106[0];}}());(args$3116=Array.prototype.slice.call($3104$3106,1));var it$0$3120;(it$0$3120=this);var self$3125;(self$3125=this);var e$3130;(e$3130=Error(message$3115));(e$3130["::tags"]=it$0$3120.tags);(e$3130["args"]=args$3116);var temp$3138;(temp$3138=$3254(args$3116));var $length$3143;($length$3143=temp$3138.length);var $index$3148;($index$3148=0);$3131:for(;($index$3148<$length$3143);($index$3148++)){var m$3156;(m$3156=temp$3138[$index$3148]);var t0$3161;var t1$3162;var i$3166;var arg$3167;(t0$3161=m$3156);if(((t0$3161 instanceof Array)&&((t1$3162=t0$3161.length),(t1$3162===2)))){(i$3166=t0$3161[0]);(arg$3167=t0$3161[1]);(e$3130[i$3166]=arg$3167);}else{$3072(m$3156);}}(e$3130["length"]=args$3116.length);(e$3130["name"]=["E"].concat(it$0$3120.tags).join("."));return e$3130;}else{$3072($3104$3106);}});($3086$3088.prototype["::check"]=function(e$3178){var it$0$3181;(it$0$3181=this);var self$3186;(self$3186=this);var tags$3191;if(((!e$3178)||(!$980(Error)(e$3178)))){return false;}(tags$3191=(e$3178["::tags"]||[]));var temp$3200;(temp$3200=it$0$3181.tags);var $length$3205;($length$3205=temp$3200.length);var $index$3210;($index$3210=0);$3192:for(;($index$3210<$length$3205);($index$3210++)){var m$3218;(m$3218=temp$3200[$index$3210]);var tag$3226;(tag$3226=m$3218);if((tags$3191.indexOf(tag$3226)===-1)){return false;}else{false;}}return true;});($3086$3088.prototype["::deconstruct"]=function(e$3234){var it$0$3237;(it$0$3237=this);var self$3242;(self$3242=this);return e$3234.args;});$996($3086$3088,$996(function(){var accum$3247;(accum$3247=({}));(accum$3247["::name"]="$3086");return accum$3247;}(),function(){var accum$3251;(accum$3251=({}));(accum$3251["::egclass"]=true);return accum$3251;}()));return $3086$3088;}();
var $3072=function(value$3074,url$3075,start$3076,end$3077){var err$3080;(err$3080=$3085(["match"]).create("Could not find a match for value",({"value":value$3074})));if(url$3075){(err$3080["location"]=["location",url$3075,start$3076,end$3077]);}throw err$3080;};
var $3276=function($3277$3279,key$3280){var ph$3284;(ph$3284=$3277$3279);var $3282$3289;($3282$3289=ph$3284);var bridge$3283$3294;(bridge$3283$3294=$3282$3289);if(((bridge$3283$3294===null)||(bridge$3283$3294===(void 0)))){return false;}else{var x$3302;if((typeof($3282$3289)==="string")){(x$3302=$3282$3289);return (key$3280 in String.prototype);}else{var x$3307;if((typeof($3282$3289)==="number")){(x$3307=$3282$3289);return (key$3280 in Number.prototype);}else{var x$3312;(x$3312=$3282$3289);return (key$3280 in x$3312);}}}};
var $3314=function(obj$3316){var results$3320;(results$3320=[]);var k$3325;(k$3325=null);$3319:for(k$3325 in obj$3316){if(Object.prototype.hasOwnProperty.call(obj$3316,k$3325)){results$3320.push([k$3325,$995(obj$3316,k$3325)]);}}return results$3320;};
var $3329=function(type$3331){return function(value$3334){var f$3337;(f$3337=type$3331[":::project"]);if((f$3337===(void 0))){(f$3337=type$3331["::project"]);if((f$3337===(void 0))){return [true,type$3331(value$3334)];}else{var rval$3343;(rval$3343=false);try{(rval$3343=[true,f$3337(value$3334)]);}catch(excv$3349){var e$3355;(e$3355=excv$3349);(rval$3343=[false,null]);}return rval$3343;}}else{return f$3337.call(type$3331,value$3334);}};};var accum$1263;var accum$1267;var accum$1556;var accum$1560;var accum$2953;var accum$2957;var $1040$1044;var __lt____gt__$1045;var $1041$1046;var __lt____lt____colon__$1047;var util$1048;var classify$1049;var neighbours$1050;var GenSym$1051;var gensym$1052;var uuid$1053;var $1043$1054;var PatternParser$1055;var PatternProcessor$1056;var Scope$1057;var Env$1058;var track_location$1059;var Expander$1060;var mac1$1061;var __chk_ncache$1062;var __chk_scache$1063;var checker_db$1064;($1040$1044=require("./pp"));(__lt____gt__$1045=$1040$1044["<>"]);($1041$1046=require("./location"));(__lt____lt____colon__$1047=$1041$1046["<<:"]);(util$1048=require("./util"));(classify$1049=util$1048.classify);(neighbours$1050=util$1048.neighbours);(GenSym$1051=util$1048.GenSym);(gensym$1052=util$1048.gensym);(uuid$1053=util$1048.uuid);($1043$1054=require("./pattern"));(PatternParser$1055=$1043$1054.PatternParser);(PatternProcessor$1056=$1043$1054.PatternProcessor);(Scope$1057=function(){var it$0$1124;var parent$1118;var name$1119;var expander$1120;var t0$1114;var $1107$1109;($1107$1109=arguments);(t0$1114=$1107$1109.length);if(((t0$1114>=0)&&(t0$1114<=3))){(parent$1118=function(){if((0>=t0$1114)){return null;}else{return $1107$1109[0];}}());(name$1119=function(){if((1>=t0$1114)){return null;}else{return $1107$1109[1];}}());(expander$1120=function(){if((2>=t0$1114)){return null;}else{return $1107$1109[2];}}());(it$0$1124=function(){if((!$980(Scope$1057)(this))){return Object.create(Scope$1057.prototype);}else{return this;}}());(it$0$1124["name"]=(name$1119||gensym$1052("scope")));(it$0$1124["parent"]=parent$1118);(it$0$1124["options"]=({}));(it$0$1124["expander"]=(expander$1120||parent$1118.expander));return it$0$1124;}else{$3072($1107$1109);}});(Scope$1057.prototype["getopt"]=function(opt$1136){var otherwise$1168;var $1145$1157;var $1144$1151;var self$1146;var it$0$1139;(it$0$1139=this);(self$1146=this);($1144$1151=null);$1144$1151;if(Object.prototype.hasOwnProperty.call(it$0$1139.options,opt$1136)){return $995(it$0$1139.options,opt$1136);}else{if((it$0$1139.parent===null)){return (void 0);}else{(otherwise$1168=$1144$1151);return it$0$1139.parent.getopt(opt$1136);}}});(Scope$1057.prototype["setopt"]=function(opt$1173,value$1174){var self$1182;var it$0$1177;(it$0$1177=this);(self$1182=this);return (it$0$1177.options[opt$1173]=value$1174);});(Scope$1057.prototype["gensym"]=function(){var self$1196;var it$0$1191;(it$0$1191=this);(self$1196=this);return it$0$1191.expander.gensym();});(Scope$1057.prototype["step"]=function(context$1203,expr$1204){var self$1212;var it$0$1207;(it$0$1207=this);(self$1212=this);return it$0$1207.expander.step(context$1203,it$0$1207,expr$1204);});(Scope$1057.prototype["step_all"]=function(context$1219,exprs$1220){var self$1228;var it$0$1223;(it$0$1223=this);(self$1228=this);return it$0$1223.expander.step_all(context$1219,it$0$1223,exprs$1220);});(Scope$1057.prototype["expand"]=function(context$1235,expr$1236){var self$1244;var it$0$1239;(it$0$1239=this);(self$1244=this);return it$0$1239.expander.expand(context$1235,it$0$1239,expr$1236);});(Scope$1057.prototype["toString"]=function(){var self$1258;var it$0$1253;(it$0$1253=this);(self$1258=this);return (("Scope{"+it$0$1253.name)+"}");});$996(Scope$1057,$996(((accum$1263=({})),((accum$1263["::name"]="Scope"),accum$1263)),((accum$1267=({})),((accum$1267["::egclass"]=true),accum$1267))));Scope$1057;(Env$1058=function(){var it$0$1275;(it$0$1275=function(){if((!$980(Env$1058)(this))){return Object.create(Env$1058.prototype);}else{return this;}}());(it$0$1275["scopes"]=({}));return it$0$1275;});(Env$1058.prototype["resolve"]=function(scope$1284,name$1285){var scope_data$1298;var self$1293;var it$0$1288;(it$0$1288=this);(self$1293=this);if((scope$1284===null)){return (void 0);}(scope_data$1298=$995(it$0$1288.scopes,scope$1284.name));if((scope_data$1298&&Object.prototype.hasOwnProperty.call(scope_data$1298,name$1285))){return $995(scope_data$1298,name$1285);}else{return it$0$1288.resolve(scope$1284.parent,name$1285);}});(Env$1058.prototype["bind"]=function(scope$1306,name$1307,value$1308){var self$1316;var it$0$1311;(it$0$1311=this);(self$1316=this);if((!$995(it$0$1311.scopes,scope$1306.name))){(it$0$1311.scopes[scope$1306.name]=({}));}return ($995(it$0$1311.scopes,scope$1306.name)[name$1307]=value$1308);});(Env$1058.prototype["convert"]=function(expr$1325){var x$1369;var x$1374;var bridge$1337$1366;var x$1379;var bridge$1336$1363;var x$1384;var bridge$1335$1360;var x$1389;var $index$1416;var $length$1411;var temp$1406;var other$1436;var type$1396;var args$1397;var e$1353;var bridge$1334$1348;var t0$1349;var $1333$1343;var self$1338;var it$0$1328;(it$0$1328=this);(self$1338=this);($1333$1343=expr$1325);if($3276($1333$1343,"env")){(e$1353=$1333$1343.env);return expr$1325;}else{(bridge$1334$1348=$1333$1343);if((((bridge$1335$1360=bridge$1334$1348),(((bridge$1336$1363=bridge$1335$1360),(((bridge$1337$1366=bridge$1336$1363),((((x$1369=bridge$1337$1366)),((x$1369 instanceof Array)&&(x$1369[0]==="symbol")))||(((x$1374=bridge$1337$1366)),((x$1374 instanceof Array)&&(x$1374[0]==="value")))))||(((x$1379=bridge$1336$1363)),((x$1379 instanceof Array)&&(x$1379[0]==="variable")))))||(((x$1384=bridge$1335$1360)),((x$1384 instanceof Array)&&(x$1384[0]==="macro")))))||(((x$1389=bridge$1334$1348)),((x$1389 instanceof Array)&&(x$1389[0]==="void"))))){return $996(expr$1325,({"env":it$0$1328}));}else{if((($1333$1343 instanceof Array)&&((t0$1349=$1333$1343.length),(t0$1349>=1)))){(type$1396=$1333$1343[0]);(args$1397=Array.prototype.slice.call($1333$1343,1));(temp$1406=args$1397);($length$1411=temp$1406.length);($index$1416=0);$1402:for(;($index$1416<$length$1411);($index$1416++)){var arg$1432;var m$1424;(m$1424=temp$1406[$index$1416]);(arg$1432=m$1424);it$0$1328.convert(arg$1432);}return $996(expr$1325,({"env":it$0$1328}));}else{(other$1436=$1333$1343);return $996(expr$1325,({"env":it$0$1328}));}}}});(Env$1058.prototype["fork"]=function(){var $index$1471;var $length$1466;var temp$1461;var e$1453;var self$1448;var it$0$1443;(it$0$1443=this);(self$1448=this);(e$1453=Env$1058());(temp$1461=$3314(it$0$1443.scopes));($length$1466=temp$1461.length);($index$1471=0);$1454:for(;($index$1471<$length$1466);($index$1471++)){var $index$1512;var $length$1507;var temp$1502;var acc$1497;var scope$1489;var bindings$1490;var t0$1484;var t1$1485;var m$1479;(m$1479=temp$1461[$index$1471]);(t0$1484=m$1479);if(((t0$1484 instanceof Array)&&((t1$1485=t0$1484.length),(t1$1485===2)))){(scope$1489=t0$1484[0]);(bindings$1490=t0$1484[1]);(acc$1497=[]);(temp$1502=$3314(bindings$1490));($length$1507=temp$1502.length);($index$1512=0);$1494:for(;($index$1512<$length$1507);($index$1512++)){var k$1530;var v$1531;var t0$1525;var t1$1526;var m$1520;(m$1520=temp$1502[$index$1512]);(t0$1525=m$1520);if(((t0$1525 instanceof Array)&&((t1$1526=t0$1525.length),(t1$1526===2)))){(k$1530=t0$1525[0]);(v$1531=t0$1525[1]);acc$1497.push((function(){if((!$995(e$1453.scopes,scope$1489))){return (e$1453.scopes[scope$1489]=({}));}}(),($995(e$1453.scopes,scope$1489)[k$1530]=v$1531)));}else{$3072(m$1520,"/home/olivier/git/earl-grey/src/expand.eg",2010,2169);}}acc$1497;}else{$3072(m$1479,"/home/olivier/git/earl-grey/src/expand.eg",1970,2169);}}return e$1453;});(Env$1058.prototype["toString"]=function(){var self$1551;var it$0$1546;(it$0$1546=this);(self$1551=this);return "Env{...}";});$996(Env$1058,$996(((accum$1556=({})),((accum$1556["::name"]="Env"),accum$1556)),((accum$1560=({})),((accum$1560["::egclass"]=true),accum$1560))));Env$1058;(track_location$1059=function(f$1566){var f2$1569;(f2$1569=function(context$1573,scope$1574,expr$1575){var rval$1583;var other$1615;var v$1609;var t0$1605;var $1578$1600;var rval$1579;(rval$1579=(((rval$1583=false)),(function(){try{(rval$1583=f$1566(context$1573,scope$1574,expr$1575));}catch(excv$1589){var e$1595;(e$1595=excv$1589);(rval$1583=(__lt____lt____colon__$1047(e$1595,expr$1575),function(){throw e$1595;}()));}}(),rval$1583)));($1578$1600=rval$1579);if((($1578$1600 instanceof Array)&&((t0$1605=$1578$1600.length),((t0$1605===2)&&($1578$1600[0]==="bounce"))))){(v$1609=$1578$1600[1]);return f2$1569(context$1573,scope$1574,__lt____lt____colon__$1047(v$1609,expr$1575));}else{(other$1615=$1578$1600);return __lt____lt____colon__$1047(other$1615,expr$1575);}});return f2$1569;});(Expander$1060=function(env_factory$1622,generic_nodes$1623){var it$0$1626;(it$0$1626=function(){if((!$980(Expander$1060)(this))){return Object.create(Expander$1060.prototype);}else{return this;}}());(it$0$1626["gensym"]=gensym$1052);(it$0$1626["mkenv"]=env_factory$1622);(it$0$1626["generic_nodes"]=generic_nodes$1623);return it$0$1626;});(Expander$1060.prototype["run_macro"]=function(m$1636,context$1637,scope$1638,form$1639,arg$1640){var rval$1657;var rval$1653;var self$1648;var it$0$1643;(it$0$1643=this);(self$1648=this);(rval$1653=(((rval$1657=false)),(function(){try{(rval$1657=m$1636(context$1637,scope$1638,form$1639,arg$1640));}catch(excv$1663){var msg$1696;var msg$1791;var find$1705;var err$1706;var other$1702;var $1683$1685;var e$1680;var e$1798;var value$1673;var t0$1666;var t1$1667;var t2$1668;var t3$1669;(t0$1666=excv$1663);if(($980($3085(["match"]))(t0$1666)&&($3276(t0$1666,"args")&&((t1$1667=t0$1666.args),((t1$1667 instanceof Array)&&((t2$1668=t1$1667.length),((t2$1668===1)&&((t3$1669=t1$1667[0]),$3276(t3$1669,"value"))))))))){(value$1673=t3$1669.value);(rval$1657=(((e$1680=((($1683$1685=value$1673)),function(){if(($1683$1685===context$1637)){(msg$1696="The macro cannot be found in this context.");return $3085(["syntax","context"]).create(msg$1696,({"context":context$1637,"form":form$1639}));}else{(other$1702=$1683$1685);(find$1705=function($1709$1711){var t0$1717;var msg$1733;var $index$1759;var $length$1754;var temp$1749;var other$1784;var type$1739;var xs$1740;var t0$1726;var $1713$1721;var ph$1714;var arg$1715;(t0$1717=$1709$1711);(arg$1715=t0$1717);(ph$1714=t0$1717);($1713$1721=ph$1714);if(($1713$1721===value$1673)){(msg$1733="The macro expected something different.");return $3085(["syntax","argument"]).create(msg$1733,({"context":context$1637,"argument":arg$1715,"form":form$1639}));}else{if((($1713$1721 instanceof Array)&&((t0$1726=$1713$1721.length),(t0$1726>=1)))){(type$1739=$1713$1721[0]);(xs$1740=Array.prototype.slice.call($1713$1721,1));(temp$1749=xs$1740);($length$1754=temp$1749.length);($index$1759=0);$1745:for(;($index$1759<$length$1754);($index$1759++)){var x$1776;var t0$1772;var m$1767;(m$1767=temp$1749[$index$1759]);(t0$1772=$3329(find$1705)(m$1767));if(t0$1772[0]){(x$1776=t0$1772[1]);if(x$1776){return x$1776;}}else{$3072(m$1767,"/home/olivier/git/earl-grey/src/expand.eg",3431,3516);}}return false;}else{(other$1784=$1713$1721);return false;}}});(err$1706=find$1705(arg$1640));if(err$1706){return err$1706;}else{(msg$1791="The macro expected something different (could not locate error in the source).");return $3085(["syntax","failure"]).create(msg$1791,({"form":form$1639,"value":value$1673}));}}}()))),function(){throw e$1680;}()));}else{(e$1798=excv$1663);(rval$1657=function(){throw e$1798;}());}}}(),rval$1657)));return it$0$1643.mkenv().convert(rval$1653);});(Expander$1060.prototype["step"]=function(context$1804,scope$1805,expr$1806){var helper$1819;var self$1814;var it$0$1809;(it$0$1809=this);(self$1814=this);(helper$1819=track_location$1059(function(context$1824,scope$1825,$1822$1826){var t0$1835;var other$1875;var env$1870;var $1860$1862;var other$1908;var t0$1899;var $1892$1894;var other$1912;var m$1888;var t0$1884;var $1856$1879;var env$1857;var other$1935;var t0$1926;var $1919$1921;var other$1960;var m$1954;var t0$1950;var $1943$1945;var other$1969;var x$1964;var f$1939;var arg$1940;var m$1916;var s$1851;var $1829$1846;var $1830$1847;var $1831$1848;var t0$1844;var $1828$1839;var ph$1832;var expr$1833;(t0$1835=$1822$1826);(expr$1833=t0$1835);(ph$1832=t0$1835);($1828$1839=ph$1832);if((($1829$1846=($1828$1839 instanceof Array))&&((t0$1844=$1828$1839.length),(($1831$1848=(t0$1844===2))&&($1828$1839[0]==="symbol"))))){(s$1851=$1828$1839[1]);(env$1857=((($1860$1862=expr$1833)),function(){if($3276($1860$1862,"env")){(env$1870=$1860$1862.env);return expr$1833.env;}else{(other$1875=$1860$1862);throw $3085(["syntax","no_env"]).create("No environment was found to resolve",({"symbol":expr$1833}));}}()));($1856$1879=env$1857.resolve(scope$1825,s$1851));if((($1856$1879 instanceof Array)&&((t0$1884=$1856$1879.length),((t0$1884===2)&&($1856$1879[0]==="macro"))))){(m$1888=$1856$1879[1]);($1892$1894=context$1824);if((($1892$1894 instanceof Array)&&((t0$1899=$1892$1894.length),((t0$1899===2)&&(($1892$1894[0]==="expr")&&($1892$1894[1]==="head")))))){return ["macro",m$1888];}else{(other$1908=$1892$1894);return ["bounce",it$0$1809.run_macro(m$1888,context$1824,scope$1825,expr$1833,__lt____lt____colon__$1047(["void"],expr$1833))];}}else{(other$1912=$1856$1879);return expr$1833;}}else{if(($1831$1848&&($1828$1839[0]==="macro"))){(m$1916=$1828$1839[1]);($1919$1921=context$1824);if((($1919$1921 instanceof Array)&&((t0$1926=$1919$1921.length),((t0$1926===2)&&(($1919$1921[0]==="expr")&&($1919$1921[1]==="head")))))){return expr$1833;}else{(other$1935=$1919$1921);return ["bounce",it$0$1809.run_macro(m$1916,context$1824,scope$1825,expr$1833,__lt____lt____colon__$1047(["void"],expr$1833))];}}else{if(($1829$1846&&((t0$1844===3)&&($1828$1839[0]==="send")))){(f$1939=$1828$1839[1]);(arg$1940=$1828$1839[2]);($1943$1945=helper$1819(["expr","head"],scope$1825,f$1939));if((($1943$1945 instanceof Array)&&((t0$1950=$1943$1945.length),((t0$1950===2)&&($1943$1945[0]==="macro"))))){(m$1954=$1943$1945[1]);return ["bounce",it$0$1809.run_macro(m$1954,context$1824,scope$1825,expr$1833,arg$1940)];}else{(other$1960=$1943$1945);return expr$1833;}}else{if(($1829$1846&&((t0$1844===2)&&($1828$1839[0]==="nostep")))){(x$1964=$1828$1839[1]);return x$1964;}else{(other$1969=$1828$1839);return expr$1833;}}}}}));return helper$1819(context$1804,scope$1805,expr$1806);});(Expander$1060.prototype["step_all"]=function(context$1976,scope$1977,$1974$1978){var t0$1982;var t1$1983;var pre$1999;var bulk$2000;var post$2001;var self$1994;var it$0$1989;var stmts$1980;(t0$1982=$1974$1978);if(((t0$1982 instanceof Array)&&((t1$1983=t0$1982.length),(t1$1983>=0)))){(stmts$1980=Array.prototype.slice.call(t0$1982,0));}else{$3072($1974$1978);}(it$0$1989=this);(self$1994=this);(pre$1999=[]);(bulk$2000=[]);(post$2001=[]);$2011:while(stmts$1980.length){var x$2057;var m$2052;var stmt$2047;var stmt$2042;var prepend$2036;var $2016$2031;var $2017$2032;var $2018$2033;var t0$2029;var $2015$2024;var current$2019;(current$2019=stmts$1980.shift());($2015$2024=it$0$1989.step(context$1976,scope$1977,current$2019));if((($2016$2031=($2015$2024 instanceof Array))&&((t0$2029=$2015$2024.length),((t0$2029>=1)&&($2015$2024[0]==="splice"))))){(prepend$2036=Array.prototype.slice.call($2015$2024,1));(stmts$1980=prepend$2036.concat(stmts$1980));}else{if(($2016$2031&&(($2018$2033=(t0$2029===2))&&($2015$2024[0]==="float")))){(stmt$2042=$2015$2024[1]);(pre$1999=pre$1999.concat(it$0$1989.step_all(context$1976,scope$1977,[stmt$2042])));}else{if(($2018$2033&&($2015$2024[0]==="sink"))){(stmt$2047=$2015$2024[1]);(post$2001=post$2001.concat(it$0$1989.step_all(context$1976,scope$1977,[stmt$2047])));}else{if(($2018$2033&&($2015$2024[0]==="multimacro"))){(m$2052=$2015$2024[1]);(stmts$1980=m$2052(context$1976,scope$1977,current$2019,stmts$1980));}else{(x$2057=$2015$2024);bulk$2000.push(x$2057);}}}}}return pre$1999.concat(bulk$2000).concat(post$2001);});(Expander$1060.prototype["expand"]=function(context$2062,scope$2063,expr$2064){var helper$2077;var self$2072;var it$0$2067;(it$0$2067=this);(self$2072=this);(helper$2077=track_location$1059(function(context$2081,scope$2082,expr$2083){var t0$2114;var other$2131;var $2111$2119;var env$2112;var $index$2178;var $length$2173;var temp$2168;var acc$2163;var newargs$2157;var $index$2224;var $length$2219;var temp$2214;var acc$2209;var newargs$2203;var t0$2268;var newscope$2262;var env$2263;var $index$2330;var $length$2325;var temp$2320;var acc$2315;var $index$2440;var $length$2435;var temp$2430;var acc$2425;var t0$2304;var newscope$2288;var stepscope$2289;var changes$2290;var newargs$2291;var vars$2292;var exp$2293;var $index$2708;var $length$2703;var temp$2698;var other$2782;var t0$2765;var $2758$2760;var is_obj$2619;var obj$2620;var arr$2621;var arr_parts$2622;var obj_parts$2623;var new_arr_part$2624;var new_obj_part$2625;var r$2626;var $index$2825;var $length$2820;var temp$2815;var acc$2810;var newscope$2802;var s$2885;var newscope$2894;var name$2881;var t0$2877;var $index$2929;var $length$2924;var temp$2919;var acc$2914;var other$2949;var type$2905;var args$2906;var tag$2898;var body$2899;var x$2872;var $2087$2873;var bindings$2797;var body$2798;var target$2791;var value$2792;var args$2615;var args$2284;var args$2279;var args$2274;var variable$2252;var s$2253;var value$2254;var body$2255;var args$2199;var args$2153;var f$2147;var arg$2148;var s$2106;var $2088$2101;var $2089$2102;var $2090$2103;var t0$2097;var t1$2098;var t2$2099;var $2086$2092;(expr$2083=it$0$2067.step(context$2081,scope$2082,expr$2083));($2086$2092=expr$2083);if((($2088$2101=($2086$2092 instanceof Array))&&((t0$2097=$2086$2092.length),(($2090$2103=(t0$2097===2))&&($2086$2092[0]==="symbol"))))){(s$2106=$2086$2092[1]);(t0$2114=expr$2083);if($3276(t0$2114,"env")){(env$2112=t0$2114.env);}else{$3072(expr$2083,"/home/olivier/git/earl-grey/src/expand.eg",7720,7724);}($2111$2119=env$2112.resolve(scope$2082,s$2106));if(($2111$2119===(void 0))){throw $3085(["syntax","undeclared"]).create(("Undeclared variable: "+s$2106),({"node":expr$2083}));}else{(other$2131=$2111$2119);return ["bounce",other$2131];}}else{if(($2090$2103&&($2086$2092[0]==="value"))){$2086$2092[1];return expr$2083;}else{if(($2090$2103&&($2086$2092[0]==="variable"))){$2086$2092[1];return expr$2083;}else{if(($2088$2101&&((t0$2097===1)&&($2086$2092[0]==="void")))){return expr$2083;}else{if(($2088$2101&&((t0$2097===3)&&($2086$2092[0]==="send")))){(f$2147=$2086$2092[1]);(arg$2148=$2086$2092[2]);return ["send",helper$2077(["expr","head"],scope$2082,f$2147),helper$2077(["expr","tail"],scope$2082,arg$2148)];}else{if(($2088$2101&&(($2090$2103=(t0$2097>=1))&&($2086$2092[0]==="array")))){(args$2153=Array.prototype.slice.call($2086$2092,1));(newargs$2157=(((acc$2163=[])),(((temp$2168=it$0$2067.step_all(["expr","array"],scope$2082,args$2153))),((($length$2173=temp$2168.length)),((($index$2178=0)),function(){$2160:for(;($index$2178<$length$2173);($index$2178++)){var arg$2194;var m$2186;(m$2186=temp$2168[$index$2178]);(arg$2194=m$2186);acc$2163.push(helper$2077(["expr","expr"],scope$2082,arg$2194));}}()))),acc$2163));return ["array"].concat(newargs$2157);}else{if(($2090$2103&&($2086$2092[0]==="object"))){(args$2199=Array.prototype.slice.call($2086$2092,1));(newargs$2203=(((acc$2209=[])),(((temp$2214=it$0$2067.step_all(["expr","object"],scope$2082,args$2199))),((($length$2219=temp$2214.length)),((($index$2224=0)),function(){$2206:for(;($index$2224<$length$2219);($index$2224++)){var k$2242;var v$2243;var t0$2237;var t1$2238;var m$2232;(m$2232=temp$2214[$index$2224]);(t0$2237=m$2232);if(((t0$2237 instanceof Array)&&((t1$2238=t0$2237.length),((t1$2238===3)&&(t0$2237[0]==="array"))))){(k$2242=t0$2237[1]);(v$2243=t0$2237[2]);acc$2209.push(["array",helper$2077(["expr","expr"],scope$2082,k$2242),helper$2077(["expr","expr"],scope$2082,v$2243)]);}else{$3072(m$2232,"/home/olivier/git/earl-grey/src/expand.eg",8563,8752);}}}()))),acc$2209));return ["object"].concat(newargs$2203);}else{if(($2088$2101&&((t0$2097===4)&&(($2086$2092[0]==="bind")&&((t1$2098=$2086$2092[1]),((variable$2252=t1$2098),((t1$2098 instanceof Array)&&((t2$2099=t1$2098.length),((t2$2099===2)&&(t1$2098[0]==="symbol")))))))))){(s$2253=t1$2098[1]);(value$2254=$2086$2092[2]);(body$2255=$2086$2092[3]);(newscope$2262=Scope$1057(scope$2082));(t0$2268=variable$2252);if($3276(t0$2268,"env")){(env$2263=t0$2268.env);}else{$3072(variable$2252,"/home/olivier/git/earl-grey/src/expand.eg",8895,8903);}env$2263.bind(newscope$2262,s$2253,value$2254);return helper$2077(context$2081,newscope$2262,body$2255);}else{if(($2088$2101&&(($2090$2103=(t0$2097>=1))&&($2086$2092[0]==="splice")))){(args$2274=Array.prototype.slice.call($2086$2092,1));return ["bounce",$996(["multi"].concat(args$2274),({"override_scope":true}))];}else{if(($2090$2103&&($2086$2092[0]==="interactive"))){(args$2279=Array.prototype.slice.call($2086$2092,1));return ["bounce",$996(["multi"].concat(args$2279),({"override_scope":true,"all_mutable":true}))];}else{if(($2090$2103&&($2086$2092[0]==="multi"))){(args$2284=Array.prototype.slice.call($2086$2092,1));(newscope$2288=function(){if(expr$2083.override_scope){return scope$2082;}else{return Scope$1057(scope$2082);}}());(stepscope$2289=function(){if(expr$2083.nonrecursive){return scope$2082;}else{return newscope$2288;}}());(changes$2290=false);(t0$2304=classify$1049("newargs","vars",(((acc$2315=[])),(((temp$2320=it$0$2067.step_all(["expr","multi"],stepscope$2289,args$2284))),((($length$2325=temp$2320.length)),((($index$2330=0)),function(){$2306:for(;($index$2330<$length$2325);($index$2330++)){var t0$2375;var env$2373;var t0$2393;var env$2390;var v$2391;var other$2411;var v$2402;var value$2403;var variable$2381;var s$2382;var value$2383;var variable$2364;var s$2365;var value$2366;var opt$2356;var value$2357;var $2308$2348;var $2309$2349;var $2310$2350;var $2311$2351;var $2312$2352;var $2313$2353;var t0$2343;var t1$2344;var t2$2345;var t3$2346;var m$2338;(m$2338=temp$2320[$index$2330]);(t0$2343=m$2338);if((($2309$2349=(t0$2343 instanceof Array))&&((t1$2344=t0$2343.length),(($2311$2351=(t1$2344===3))&&(t0$2343[0]==="option"))))){(opt$2356=t0$2343[1]);(value$2357=t0$2343[2]);acc$2315.push((newscope$2288.setopt(opt$2356,value$2357),["ignore"]));}else{if(($2311$2351&&((t0$2343[0]==="declare_raw")&&((t2$2345=t0$2343[1]),((variable$2364=t2$2345),((t2$2345 instanceof Array)&&((t3$2346=t2$2345.length),((t3$2346===2)&&(t2$2345[0]==="symbol"))))))))){(s$2365=t2$2345[1]);(value$2366=t0$2343[2]);acc$2315.push((((t0$2375=variable$2364),function(){if($3276(t0$2375,"env")){(env$2373=t0$2375.env);}else{return $3072(variable$2364,"/home/olivier/git/earl-grey/src/expand.eg",9845,9853);}}()),env$2373.bind(newscope$2288,s$2365,value$2366),(changes$2290=true),["ignore"]));}else{if(($2309$2349&&(($2311$2351=((t1$2344>=2)&&(t1$2344<=3)))&&(($2312$2352=(t0$2343[0]==="declare"))&&((t2$2345=t0$2343[1]),((variable$2381=t2$2345),((t2$2345 instanceof Array)&&((t3$2346=t2$2345.length),((t3$2346===2)&&(t2$2345[0]==="symbol")))))))))){(s$2382=t2$2345[1]);(value$2383=function(){if((2>=t1$2344)){return null;}else{return t0$2343[2];}}());acc$2315.push((((t0$2393=variable$2381),function(){if($3276(t0$2393,"env")){(env$2390=t0$2393.env);}else{return $3072(variable$2381,"/home/olivier/git/earl-grey/src/expand.eg",10090,10098);}}()),((v$2391=__lt____lt____colon__$1047(["variable",it$0$2067.gensym(s$2382)],variable$2381))),$996(v$2391,({"mutable":(expr$2083.all_mutable||variable$2381.mutable)})),env$2390.bind(newscope$2288,s$2382,v$2391),(changes$2290=true),function(){if(value$2383){return ["splice",["newargs",["assign",v$2391,value$2383]],["vars",v$2391]];}else{return ["vars",v$2391];}}()));}else{if(($2312$2352&&((v$2402=t2$2345),((t2$2345 instanceof Array)&&((t3$2346=t2$2345.length),((t3$2346===2)&&(t2$2345[0]==="variable"))))))){t2$2345[1];(value$2403=function(){if((2>=t1$2344)){return null;}else{return t0$2343[2];}}());acc$2315.push(((changes$2290=true),function(){if(value$2403){return ["splice",["newargs",["assign",v$2402,value$2403]],["vars",v$2402]];}else{return ["vars",v$2402];}}()));}else{(other$2411=m$2338);acc$2315.push(["newargs",other$2411]);}}}}}}()))),acc$2315)));if(($3276(t0$2304,"newargs")&&((newargs$2291=t0$2304.newargs),$3276(t0$2304,"vars")))){(vars$2292=t0$2304.vars);}else{$3072(classify$1049("newargs","vars",(((acc$2425=[])),(((temp$2430=it$0$2067.step_all(["expr","multi"],stepscope$2289,args$2284))),((($length$2435=temp$2430.length)),((($index$2440=0)),function(){$2416:for(;($index$2440<$length$2435);($index$2440++)){var t0$2485;var env$2483;var t0$2503;var env$2500;var v$2501;var other$2521;var v$2512;var value$2513;var variable$2491;var s$2492;var value$2493;var variable$2474;var s$2475;var value$2476;var opt$2466;var value$2467;var $2418$2458;var $2419$2459;var $2420$2460;var $2421$2461;var $2422$2462;var $2423$2463;var t0$2453;var t1$2454;var t2$2455;var t3$2456;var m$2448;(m$2448=temp$2430[$index$2440]);(t0$2453=m$2448);if((($2419$2459=(t0$2453 instanceof Array))&&((t1$2454=t0$2453.length),(($2421$2461=(t1$2454===3))&&(t0$2453[0]==="option"))))){(opt$2466=t0$2453[1]);(value$2467=t0$2453[2]);acc$2425.push((newscope$2288.setopt(opt$2466,value$2467),["ignore"]));}else{if(($2421$2461&&((t0$2453[0]==="declare_raw")&&((t2$2455=t0$2453[1]),((variable$2474=t2$2455),((t2$2455 instanceof Array)&&((t3$2456=t2$2455.length),((t3$2456===2)&&(t2$2455[0]==="symbol"))))))))){(s$2475=t2$2455[1]);(value$2476=t0$2453[2]);acc$2425.push((((t0$2485=variable$2474),function(){if($3276(t0$2485,"env")){(env$2483=t0$2485.env);}else{return $3072(variable$2474,"/home/olivier/git/earl-grey/src/expand.eg",9845,9853);}}()),env$2483.bind(newscope$2288,s$2475,value$2476),(changes$2290=true),["ignore"]));}else{if(($2419$2459&&(($2421$2461=((t1$2454>=2)&&(t1$2454<=3)))&&(($2422$2462=(t0$2453[0]==="declare"))&&((t2$2455=t0$2453[1]),((variable$2491=t2$2455),((t2$2455 instanceof Array)&&((t3$2456=t2$2455.length),((t3$2456===2)&&(t2$2455[0]==="symbol")))))))))){(s$2492=t2$2455[1]);(value$2493=function(){if((2>=t1$2454)){return null;}else{return t0$2453[2];}}());acc$2425.push((((t0$2503=variable$2491),function(){if($3276(t0$2503,"env")){(env$2500=t0$2503.env);}else{return $3072(variable$2491,"/home/olivier/git/earl-grey/src/expand.eg",10090,10098);}}()),((v$2501=__lt____lt____colon__$1047(["variable",it$0$2067.gensym(s$2492)],variable$2491))),$996(v$2501,({"mutable":(expr$2083.all_mutable||variable$2491.mutable)})),env$2500.bind(newscope$2288,s$2492,v$2501),(changes$2290=true),function(){if(value$2493){return ["splice",["newargs",["assign",v$2501,value$2493]],["vars",v$2501]];}else{return ["vars",v$2501];}}()));}else{if(($2422$2462&&((v$2512=t2$2455),((t2$2455 instanceof Array)&&((t3$2456=t2$2455.length),((t3$2456===2)&&(t2$2455[0]==="variable"))))))){t2$2455[1];(value$2513=function(){if((2>=t1$2454)){return null;}else{return t0$2453[2];}}());acc$2425.push(((changes$2290=true),function(){if(value$2513){return ["splice",["newargs",["assign",v$2512,value$2513]],["vars",v$2512]];}else{return ["vars",v$2512];}}()));}else{(other$2521=m$2448);acc$2425.push(["newargs",other$2521]);}}}}}}()))),acc$2425)),"/home/olivier/git/earl-grey/src/expand.eg",9517,11116);}(exp$2293=function(s$2526){var $index$2552;var $length$2547;var temp$2542;var acc$2537;var $index$2594;var $length$2589;var temp$2584;var acc$2579;var stepped$2529;(stepped$2529=(((acc$2537=[])),(((temp$2542=$3254(newargs$2291))),((($length$2547=temp$2542.length)),((($index$2552=0)),function(){$2534:for(;($index$2552<$length$2547);($index$2552++)){var i$2570;var arg$2571;var t0$2565;var t1$2566;var m$2560;(m$2560=temp$2542[$index$2552]);(t0$2565=m$2560);if(((t0$2565 instanceof Array)&&((t1$2566=t0$2565.length),(t1$2566===2)))){(i$2570=t0$2565[0]);(arg$2571=t0$2565[1]);acc$2537.push(it$0$2067.step(["expr",function(){if((i$2570===(newargs$2291.length-1))){return "expr";}else{return "ignore";}}()],s$2526,arg$2571));}else{$3072(m$2560,"/home/olivier/git/earl-grey/src/expand.eg",11338,11515);}}}()))),acc$2537));(acc$2579=[]);(temp$2584=stepped$2529);($length$2589=temp$2584.length);($index$2594=0);$2530:for(;($index$2594<$length$2589);($index$2594++)){var arg$2610;var m$2602;(m$2602=temp$2584[$index$2594]);(arg$2610=m$2602);acc$2579.push(helper$2077(["expr","expr"],s$2526,arg$2610));}return acc$2579;});if(changes$2290){return ["scope",vars$2292,["multi"].concat(exp$2293(newscope$2288))];}else{return ["multi"].concat(exp$2293(scope$2082));}}else{if(($2090$2103&&($2086$2092[0]==="data"))){(args$2615=Array.prototype.slice.call($2086$2092,1));(is_obj$2619=false);(obj$2620=["object"]);(arr$2621=["array"]);(arr_parts$2622=[]);(obj_parts$2623=[]);(new_arr_part$2624=function(){var other$2668;var t0$2659;var $2652$2654;($2652$2654=arr$2621);if((($2652$2654 instanceof Array)&&((t0$2659=$2652$2654.length),((t0$2659===1)&&($2652$2654[0]==="array"))))){return false;}else{(other$2668=$2652$2654);arr_parts$2622.push(arr$2621);return (arr$2621=["array"]);}});(new_obj_part$2625=function(){var other$2692;var t0$2683;var $2676$2678;($2676$2678=obj$2620);if((($2676$2678 instanceof Array)&&((t0$2683=$2676$2678.length),((t0$2683===1)&&($2676$2678[0]==="object"))))){return false;}else{(other$2692=$2676$2678);obj_parts$2623.push(obj$2620);return (obj$2620=["object"]);}});(temp$2698=it$0$2067.step_all(["expr","data"],scope$2082,args$2615));($length$2703=temp$2698.length);($index$2708=0);$2627:for(;($index$2708<$length$2703);($index$2708++)){var other$2754;var expr$2748;var expr$2742;var k$2735;var v$2736;var $2629$2724;var $2630$2725;var $2631$2726;var $2632$2727;var t0$2721;var t1$2722;var m$2716;(m$2716=temp$2698[$index$2708]);(t0$2721=m$2716);if((($2630$2725=(t0$2721 instanceof Array))&&((t1$2722=t0$2721.length),((t1$2722===1)&&(t0$2721[0]==="assoc"))))){(is_obj$2619=true);}else{if(($2630$2725&&((t1$2722===3)&&(t0$2721[0]==="assoc")))){(k$2735=t0$2721[1]);(v$2736=t0$2721[2]);(is_obj$2619=true);obj$2620.push(["array",k$2735,v$2736]);}else{if(($2630$2725&&(($2632$2727=(t1$2722===2))&&(t0$2721[0]==="dynsplice")))){(expr$2742=t0$2721[1]);new_arr_part$2624();arr_parts$2622.push(expr$2742);}else{if(($2632$2727&&(t0$2721[0]==="objsplice"))){(expr$2748=t0$2721[1]);(is_obj$2619=true);new_obj_part$2625();obj_parts$2623.push(expr$2748);}else{(other$2754=m$2716);arr$2621.push(other$2754);}}}}}new_arr_part$2624();new_obj_part$2625();(r$2626=((($2758$2760=arr_parts$2622)),function(){if((($2758$2760 instanceof Array)&&((t0$2765=$2758$2760.length),((t0$2765===0)&&is_obj$2619)))){return util$1048.construct(obj_parts$2623,function(x$2773,rest$2774){return ["send",["symbol","&:"],["data",x$2773,rest$2774]];},["object"]);}else{$2758$2760;if(is_obj$2619){throw $3085(["syntax","array","object"]).create("Cannot mix array and object notations.");}else{(other$2782=$2758$2760);return util$1048.construct(arr_parts$2622.reverse(),function(x$2785,rest$2786){return ["send",["send",rest$2786,["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",x$2785]];},["array"]);}}}()));return helper$2077(context$2081,scope$2082,it$0$2067.mkenv().convert(r$2626));}else{if(($2088$2101&&(($2090$2103=(t0$2097===3))&&($2086$2092[0]==="assign")))){(target$2791=$2086$2092[1]);(value$2792=$2086$2092[2]);return ["assign",helper$2077(["expr","expr"],scope$2082,target$2791),helper$2077(["expr","expr"],scope$2082,value$2792)];}else{if(($2090$2103&&($2086$2092[0]==="lambda"))){(bindings$2797=$2086$2092[1]);(body$2798=$2086$2092[2]);(newscope$2802=Scope$1057(scope$2082));return ["lambda",(((acc$2810=[])),(((temp$2815=bindings$2797)),((($length$2820=temp$2815.length)),((($index$2825=0)),function(){$2806:for(;($index$2825<$length$2820);($index$2825++)){var v$2851;var x$2861;var other$2868;var v$2858;var b$2844;var env$2845;var $2808$2841;var t0$2838;var t1$2839;var m$2833;(m$2833=temp$2815[$index$2825]);(t0$2838=m$2833);if(((t0$2838 instanceof Array)&&((t1$2839=t0$2838.length),((t1$2839===2)&&((t0$2838[0]==="symbol")&&((b$2844=t0$2838[1]),$3276(t0$2838,"env"))))))){(env$2845=t0$2838.env);acc$2810.push((((v$2851=["variable",it$0$2067.gensym(b$2844)])),(env$2845.bind(newscope$2802,b$2844,v$2851),v$2851)));}else{if((((x$2861=t0$2838)),((x$2861 instanceof Array)&&(x$2861[0]==="variable")))){(v$2858=t0$2838);acc$2810.push(v$2858);}else{(other$2868=m$2833);acc$2810.push(function(){throw $3085(["syntax","lambda","binding"]).create("Not a valid binding.",({"node":other$2868}));}());}}}}()))),acc$2810),helper$2077(["expr","expr"],newscope$2802,body$2798)];}else{if(($2090$2103&&($2086$2092[0]==="use"))){($2087$2873=$2086$2092[1]);(x$2872=$2086$2092[2]);(t0$2877=$2087$2873);if((typeof(t0$2877)==="string")){(name$2881=t0$2877);(s$2885=scope$2082);$2889:while(s$2885){if((s$2885.name.slice(0,(name$2881.length+1))===(name$2881+"/"))){break $2889;}else{(s$2885=s$2885.parent);}}if(s$2885){return helper$2077(context$2081,s$2885,x$2872);}else{throw $3085(["syntax","noscope"]).create(("Could not find a scope tagged: "+name$2881));}}else{(newscope$2894=$2087$2873);return helper$2077(context$2081,newscope$2894,x$2872);}}else{if(($2090$2103&&(($2086$2092[0]==="tagscope")&&((t1$2098=$2086$2092[1]),(typeof(t1$2098)==="string"))))){(tag$2898=t1$2098);(body$2899=$2086$2092[2]);return helper$2077(context$2081,Scope$1057(scope$2082,it$0$2067.gensym((tag$2898+"/"))),body$2899);}else{if(($2088$2101&&((t0$2097>=1)&&((type$2905=$2086$2092[0]),((args$2906=Array.prototype.slice.call($2086$2092,1)),(it$0$2067.generic_nodes.indexOf(type$2905)!==-1)))))){return [type$2905].concat((((acc$2914=[])),(((temp$2919=args$2906)),((($length$2924=temp$2919.length)),((($index$2929=0)),function(){$2911:for(;($index$2929<$length$2924);($index$2929++)){var arg$2945;var m$2937;(m$2937=temp$2919[$index$2929]);(arg$2945=m$2937);acc$2914.push(helper$2077(["expr","expr"],scope$2082,arg$2945));}}()))),acc$2914));}else{(other$2949=$2086$2092);throw $3085(["syntax","illegal_node"]).create("An illegal node was found.",({"node":other$2949,"context":context$2081}));}}}}}}}}}}}}}}}}}}));return helper$2077(context$2062,scope$2063,expr$2064);});$996(Expander$1060,$996(((accum$2953=({})),((accum$2953["::name"]="Expander"),accum$2953)),((accum$2957=({})),((accum$2957["::egclass"]=true),accum$2957))));Expander$1060;(mac1$1061=function(f$2963){return ["macro",function(context$2967,scope$2968,form$2969,$2965$2970){var t0$2974;var t1$2975;var expr$2972;(t0$2974=$2965$2970);if(((t0$2974 instanceof Array)&&((t1$2975=t0$2974.length),((t1$2975===2)&&(t0$2974[0]==="data"))))){(expr$2972=t0$2974[1]);}else{$3072($2965$2970);}return f$2963(expr$2972);}];});(__chk_ncache$1062=({}));(__chk_scache$1063=({}));(checker_db$1064=function($2989$2991){var v$3027;var v$3040;var s$3036;var n$3023;var $2993$2999;var ph$2994;(ph$2994=$2989$2991);($2993$2999=ph$2994);if(($2993$2999===null)){return checker_db$1064.null;}else{if(($2993$2999===(void 0))){return checker_db$1064.undefined;}else{if(($2993$2999===true)){return checker_db$1064.true;}else{if(($2993$2999===false)){return checker_db$1064.false;}else{if((typeof($2993$2999)==="number")){(n$3023=$2993$2999);if($995(__chk_ncache$1062,n$3023)){return $995(__chk_ncache$1062,n$3023);}else{(v$3027=mac1$1061(function(x$3031){return ["send",["symbol","==="],["data",x$3031,["value",n$3023]]];}));(__chk_ncache$1062[n$3023]=v$3027);return v$3027;}}else{if((typeof($2993$2999)==="string")){(s$3036=$2993$2999);if(Object.prototype.hasOwnProperty.call(__chk_scache$1063,s$3036)){return $995(__chk_scache$1063,s$3036);}else{(v$3040=mac1$1061(function(x$3044){return ["send",["symbol","==="],["data",x$3044,["value",s$3036]]];}));(__chk_scache$1063[s$3036]=v$3040);return v$3040;}}else{$3072($2993$2999);}}}}}}});$996(checker_db$1064,({"String":mac1$1061(function(x$3051){return ["send",["symbol","==="],["data",["send",["symbol","typeof"],["data",x$3051]],["value","string"]]];}),"Number":mac1$1061(function(x$3054){return ["send",["symbol","==="],["data",["send",["symbol","typeof"],["data",x$3054]],["value","number"]]];}),"Array":mac1$1061(function(x$3057){return ["send",["symbol","instanceof"],["data",x$3057,["symbol","Array"]]];}),"true":mac1$1061(function(x$3060){return x$3060;}),"false":mac1$1061(function(x$3063){return ["send",["symbol","not"],["data",["void"],x$3063]];}),"null":mac1$1061(function(x$3066){return ["send",["symbol","==="],["data",x$3066,["value",null]]];}),"undefined":mac1$1061(function(x$3069){return ["send",["symbol","==="],["data",x$3069,["value",(void 0)]]];})}));(exports["Env"]=Env$1058);(exports["Scope"]=Scope$1057);(exports["track_location"]=track_location$1059);(exports["Expander"]=Expander$1060);(exports["GenSym"]=GenSym$1051);(exports["gensym"]=gensym$1052);(exports["mac1"]=mac1$1061);(exports["checker_db"]=checker_db$1064);

},{"./location":7,"./pattern":10,"./pp":11,"./util":14}],6:[function(require,module,exports){
var $3518=function(type$3520){var f$3523;(f$3523=type$3520["::check"]);if((f$3523===(void 0))){return function(value$3528){return (value$3528 instanceof type$3520);};}else{return function(value$3531){return f$3523.call(type$3520,value$3531);};}};
var $3533=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $3534=function(dest$3536,values$3537){var k$3542;(k$3542=null);$3540:for(k$3542 in values$3537){if(values$3537.hasOwnProperty(k$3542)){(dest$3536[k$3542]=values$3537[k$3542]);}}return dest$3536;};
var $3546=function($3547$3549){var ph$3553;(ph$3553=$3547$3549);var $3551$3558;($3551$3558=ph$3553);var bridge$3552$3563;var x$3567;(bridge$3552$3563=$3551$3558);if((((typeof(bridge$3552$3563)==="string")&&((x$3567=bridge$3552$3563),true))||((typeof(bridge$3552$3563)==="number")&&((x$3567=bridge$3552$3563),true)))){return ["value",x$3567];}else{var other$3574;(other$3574=$3551$3558);return other$3574["::serialize_ast"]();}};
var send$3358;(send$3358=function(obj$3363,$3361$3364){var ph$3368;var msg$3369;var t0$3371;(t0$3371=$3361$3364);(msg$3369=t0$3371);(ph$3368=t0$3371);var $3366$3375;($3366$3375=ph$3368);var bridge$3367$3380;(bridge$3367$3380=$3366$3375);if(((typeof(bridge$3367$3380)==="string")||(typeof(bridge$3367$3380)==="number"))){return obj$3363[msg$3369];}else{var other$3388;(other$3388=$3366$3375);return obj$3363["::send"](msg$3369);}});(Array[":::project"]=function($3391$3393){var ph$3396;var value$3397;var t0$3399;(t0$3399=$3391$3393);(value$3397=t0$3399);(ph$3396=t0$3399);var $3395$3403;($3395$3403=ph$3396);if($3518(Array)($3395$3403)){return [true,value$3397];}else{$3395$3403;return [true,[value$3397]];}});(Array.prototype["::check"]=function(value$3417){if((value$3417 instanceof Array)){var i$3422;(i$3422=0);$3420:for(;(i$3422<this.length);(i$3422++)){if(($3533(this,i$3422)!==$3533(value$3417,i$3422))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $3534(this.slice(0),this);});(Array.prototype[":::project"]=function(value$3433){if((value$3433 instanceof Array)){var i$3438;(i$3438=0);$3436:for(;(i$3438<this.length);(i$3438++)){if(($3533(this,i$3438)!==$3533(value$3433,i$3438))){return [true,[value$3433]];}}return [true,value$3433.slice(this.length)];}else{return [true,[value$3433]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($3546));});(RegExp.prototype["::check"]=function($3448$3450){var ph$3453;(ph$3453=$3448$3450);var $3452$3458;($3452$3458=ph$3453);var value$3466;if((typeof($3452$3458)==="string")){(value$3466=$3452$3458);if(value$3466.match(this)){return true;}else{return false;}}else{var other$3471;(other$3471=$3452$3458);return false;}});(RegExp.prototype[":::project"]=function($3473$3475){var ph$3478;(ph$3478=$3473$3475);var $3477$3483;($3477$3483=ph$3478);var value$3491;if((typeof($3477$3483)==="string")){(value$3491=$3477$3483);var $3494$3496;($3494$3496=value$3491.match(this));var m$3504;if(($3494$3496===null)){(m$3504=$3494$3496);return [false,null];}else{var m$3509;(m$3509=$3494$3496);return [true,m$3509];}}else{var other$3513;(other$3513=$3477$3483);return [false,null];}});(Function.prototype["::send"]=function(args$3516){return this.apply(this,args$3516);});
var $4935=function(arr$4937){var results$4941;var l$4942;(results$4941=[]);(l$4942=arr$4937.length);var i$4950;(i$4950=0);$4940:for(;(i$4950<l$4942);(i$4950++)){results$4941.push([i$4950,$3533(arr$4937,i$4950)]);}return results$4941;};
var $4766=function(){var $4767$4769;($4767$4769=function(tags$4773){var it$0$4776;(it$0$4776=function(){if((!$3518($4767$4769)(this))){return Object.create($4767$4769.prototype);}else{return this;}}());(it$0$4776["tags"]=tags$4773);return it$0$4776;});($4767$4769.prototype["create"]=function(){var $4785$4787;($4785$4787=arguments);var t0$4792;var message$4796;var args$4797;(t0$4792=$4785$4787.length);if((t0$4792>=0)){(message$4796=function(){if((0>=t0$4792)){return "";}else{return $4785$4787[0];}}());(args$4797=Array.prototype.slice.call($4785$4787,1));var it$0$4801;(it$0$4801=this);var self$4806;(self$4806=this);var e$4811;(e$4811=Error(message$4796));(e$4811["::tags"]=it$0$4801.tags);(e$4811["args"]=args$4797);var temp$4819;(temp$4819=$4935(args$4797));var $length$4824;($length$4824=temp$4819.length);var $index$4829;($index$4829=0);$4812:for(;($index$4829<$length$4824);($index$4829++)){var m$4837;(m$4837=temp$4819[$index$4829]);var t0$4842;var t1$4843;var i$4847;var arg$4848;(t0$4842=m$4837);if(((t0$4842 instanceof Array)&&((t1$4843=t0$4842.length),(t1$4843===2)))){(i$4847=t0$4842[0]);(arg$4848=t0$4842[1]);(e$4811[i$4847]=arg$4848);}else{$4753(m$4837);}}(e$4811["length"]=args$4797.length);(e$4811["name"]=["E"].concat(it$0$4801.tags).join("."));return e$4811;}else{$4753($4785$4787);}});($4767$4769.prototype["::check"]=function(e$4859){var it$0$4862;(it$0$4862=this);var self$4867;(self$4867=this);var tags$4872;if(((!e$4859)||(!$3518(Error)(e$4859)))){return false;}(tags$4872=(e$4859["::tags"]||[]));var temp$4881;(temp$4881=it$0$4862.tags);var $length$4886;($length$4886=temp$4881.length);var $index$4891;($index$4891=0);$4873:for(;($index$4891<$length$4886);($index$4891++)){var m$4899;(m$4899=temp$4881[$index$4891]);var tag$4907;(tag$4907=m$4899);if((tags$4872.indexOf(tag$4907)===-1)){return false;}else{false;}}return true;});($4767$4769.prototype["::deconstruct"]=function(e$4915){var it$0$4918;(it$0$4918=this);var self$4923;(self$4923=this);return e$4915.args;});$3534($4767$4769,$3534(function(){var accum$4928;(accum$4928=({}));(accum$4928["::name"]="$4767");return accum$4928;}(),function(){var accum$4932;(accum$4932=({}));(accum$4932["::egclass"]=true);return accum$4932;}()));return $4767$4769;}();
var $4753=function(value$4755,url$4756,start$4757,end$4758){var err$4761;(err$4761=$4766(["match"]).create("Could not find a match for value",({"value":value$4755})));if(url$4756){(err$4761["location"]=["location",url$4756,start$4757,end$4758]);}throw err$4761;};
var $5029=function($5030$5032,key$5033){var ph$5037;(ph$5037=$5030$5032);var $5035$5042;($5035$5042=ph$5037);var bridge$5036$5047;(bridge$5036$5047=$5035$5042);if(((bridge$5036$5047===null)||(bridge$5036$5047===(void 0)))){return false;}else{var x$5055;if((typeof($5035$5042)==="string")){(x$5055=$5035$5042);return (key$5033 in String.prototype);}else{var x$5060;if((typeof($5035$5042)==="number")){(x$5060=$5035$5042);return (key$5033 in Number.prototype);}else{var x$5065;(x$5065=$5035$5042);return (key$5033 in x$5065);}}}};
var $4973=function($4974$4976){var ph$4982;var x$4983;var t0$4985;(t0$4985=$4974$4976);(x$4983=t0$4985);(ph$4982=t0$4985);var $4978$4989;($4978$4989=ph$4982);var bridge$4979$4994;(bridge$4979$4994=$4978$4989);if((function(){var bridge$4980$5000;(bridge$4980$5000=bridge$4979$4994);return (function(){var bridge$4981$5003;(bridge$4981$5003=bridge$4980$5000);return ((bridge$4981$5003===(void 0))||(bridge$4981$5003===null));}()||(typeof(bridge$4980$5000)==="string"));}()||(typeof(bridge$4979$4994)==="number"))){return x$4983;}else{if($5029($4978$4989,"::clone")){$4978$4989["::clone"];return x$4983["::clone"]();}else{$4978$4989;if((Object.getPrototypeOf(x$4983)===Object.prototype)){var dest$5016;(dest$5016=({}));var k$5021;(k$5021=null);$5015:for(k$5021 in x$4983){if(Object.prototype.hasOwnProperty.call(x$4983,k$5021)){(dest$5016[k$5021]=x$4983[k$5021]);}}return dest$5016;}else{var other$5027;(other$5027=$4978$4989);throw $4766(["clone"]).create("Object cannot be cloned",({"obj":x$4983}));}}}};
var $4957=function(a$4959,b$4960){var dest$4964;(dest$4964=$4973(a$4959));var k$4969;(k$4969=null);$4963:for(k$4969 in b$4960){if(Object.prototype.hasOwnProperty.call(b$4960,k$4969)){(dest$4964[k$4969]=b$4960[k$4969]);}}return dest$4964;};var id$3608;var id_f$3609;var numr$3610;var numr_f$3611;var num$3612;var num_f$3613;var str$3614;var str_f$3615;var op$3616;var op2$3617;var op3$3618;var op4$3619;var op_f$3620;var indent$3621;var indent_f$3622;var cmnt$3623;var cmnt_f$3624;var unkn$3625;var unkn_f$3626;var $3578$3579;var Location$3580;var __lt____lt____colon__$3581;var special_ops$3582;var regexps$3583;var ws_re$3584;var eol_re$3585;var produce$3586;var indent_tracker$3587;var process_indent$3588;var disambiguate_fixity$3589;var alternate_operators$3590;var fill_locations$3591;var tokenize$3592;($3578$3579=require("./location"));(Location$3580=$3578$3579.Location);(__lt____lt____colon__$3581=$3578$3579["<<:"]);(special_ops$3582=({"(":"PFX","[":"PFX","{":"PFX",")":"SFX","]":"SFX","}":"SFX",",":"IFX",".":"PFX","'":"PFX","not":"PFX"}));(regexps$3583=(((id$3608=RegExp("(?:^[a-zA-Z$_](?:[a-zA-Z$_0-9]*))",""))),((id_f$3609=function(m$3633){return ["ID",m$3633[0]];})),((numr$3610=RegExp("(?:^((?:\\d+))[rR]((?:[A-Za-z0-9_]+))(?:(?:\\.((?:[A-Za-z0-9_]+)))?))",""))),((numr_f$3611=function(m$3642){var t0$3650;var t1$3651;var radix$3645;var intp$3646;var frac$3647;var value$3648;(t0$3650=m$3642);if(((t0$3650 instanceof Array)&&((t1$3651=t0$3650.length),(t1$3651===4)))){t0$3650[0];(radix$3645=t0$3650[1]);(intp$3646=t0$3650[2]);(frac$3647=t0$3650[3]);}else{$4753(m$3642,"/home/olivier/git/earl-grey/src/lex.eg",993,994);}(value$3648=parseInt(intp$3646.replace(RegExp("_","g"),""),radix$3645));if(frac$3647){(frac$3647=frac$3647.replace(RegExp("_","g"),""));(value$3648=(value$3648+(parseInt(frac$3647,radix$3645)/Math.pow(radix$3645,frac$3647.length))));}return ["NUM",value$3648];})),((num$3612=RegExp("(?:^((?:[0-9_]+))(?:(?:\\.((?:\\d+)))?)(?:(?:[eE]((?:[+-]?)(?:[0-9_]+)))?))",""))),((num_f$3613=function(m$3667){return ["NUM",parseFloat(m$3667[0].replace(RegExp("_","g"),""))];})),((str$3614=RegExp("(?:^\"((?:(?:(?:\\\\\\\\|\\\\\")|[^\"])*))\")",""))),((str_f$3615=function(m$3676){var repl$3679;var r$3680;(repl$3679=({"\\\"":"\"","\\\\":"\\","\\n":"\n"}));(r$3680=m$3676[1].replace(RegExp("((?:(?:\\\\\"|\\\\\\\\)|\\\\n))","g"),function(m$3687){return $3533(repl$3679,m$3687);}));return ["STR",r$3680];})),((op$3616=RegExp("(?:^(?:[+\\-*/~\\^<>=%&|?!@#.:']+))",""))),((op2$3617=RegExp("(?:^[\\[\\{\\}\\],])",""))),((op3$3618=RegExp("(?:^(?:(?:(?:(?:(?:(?:(?:(?:(?:with|where)|when)|and)|not)|or)|in)|mod)|each)|as)(?:(?:[+\\-*/~\\^<>=%&|?!@#.:']+)|\\b))",""))),((op4$3619=RegExp("(?:^`((?:[A-Za-z0-9_]+))`)",""))),((op_f$3620=function(m$3706,column$3707){var fixity$3733;var otherwise$3739;var $3711$3723;var $3710$3717;var op$3712;(op$3712=(m$3706[1]||m$3706[0]));($3710$3717=null);$3710$3717;if((op$3712==="|")){return ["INDENT",(column$3707-1)];}else{if((op$3712 in special_ops$3582)){(fixity$3733=$3533(special_ops$3582,op$3712));return ["OP",fixity$3733,op$3712];}else{(otherwise$3739=$3710$3717);return ["OP","?FX",op$3712];}}})),((indent$3621=RegExp("(?:^(?:(?:\n \\*;(?:[^\n]*))*)(?:(?:\n((?: *)))+))",""))),((indent_f$3622=function(m$3748){var ilen$3751;(ilen$3751=m$3748[1].length);return ["INDENT",ilen$3751];})),((cmnt$3623=RegExp("(?:^;(?:[^\n]*))",""))),((cmnt_f$3624=function(m$3762){return ["IGNORE"];})),((unkn$3625=RegExp("(?:^.)",""))),((unkn_f$3626=function(m$3771){return ["ILLEGAL",m$3771[0]];})),[[op3$3618,op_f$3620],[id$3608,id_f$3609],[numr$3610,numr_f$3611],[num$3612,num_f$3613],[str$3614,str_f$3615],[op$3616,op_f$3620],[op2$3617,op_f$3620],[op4$3619,op_f$3620],[indent$3621,indent_f$3622],[cmnt$3623,cmnt_f$3624],[unkn$3625,unkn_f$3626]]));(ws_re$3584=RegExp("(?:^(?: *)(?:(?:\n(?: *)\\\\(?: *))*))",""));(eol_re$3585=RegExp("(?:^(?: *)(?:\n|$))",""));(produce$3586=function(src$3784){var text$3787;var results$3788;var wsb$3789;var pos$3790;var column$3791;(text$3787=src$3784.text);(results$3788=[]);(wsb$3789=text$3787.match(ws_re$3584)[0].length);(text$3787=text$3787.slice(wsb$3789));(pos$3790=wsb$3789);(column$3791=0);$3807:while(text$3787){var i$3812;(i$3812=0);$3810:for(;(i$3812<regexps$3583.length);(++i$3812)){var t0$3824;var t1$3825;var splits$3848;var skip$3834;var endpos$3835;var wsa$3836;var eol$3837;var bwsb$3838;var bwsa$3839;var token$3840;var re$3820;var fn$3821;var m$3822;(t0$3824=$3533(regexps$3583,i$3812));if(((t0$3824 instanceof Array)&&((t1$3825=t0$3824.length),(t1$3825===2)))){(re$3820=t0$3824[0]);(fn$3821=t0$3824[1]);}else{$4753($3533(regexps$3583,i$3812),"/home/olivier/git/earl-grey/src/lex.eg",3328,3348);}(m$3822=text$3787.match(re$3820));if(m$3822){(skip$3834=m$3822[0].length);(endpos$3835=(pos$3790+skip$3834));(column$3791=(((splits$3848=m$3822[0].split("\n"))),function(){if((splits$3848.length>1)){return $3533(splits$3848,(splits$3848.length-1)).length;}else{return (column$3791+skip$3834);}}()));(text$3787=text$3787.slice(skip$3834));(wsa$3836=text$3787.match(ws_re$3584)[0].length);(eol$3837=(text$3787.match(eol_re$3585)&&true));(bwsb$3838=(wsb$3789>0));(bwsa$3839=function(){if(eol$3837){return bwsb$3838;}else{return (wsa$3836>0);}}());(token$3840=fn$3821(m$3822,column$3791));(token$3840["wsb"]=bwsb$3838);(token$3840["wsa"]=bwsa$3839);(token$3840["location"]=Location$3580(src$3784,pos$3790,endpos$3835));results$3788.push(token$3840);(text$3787=text$3787.slice(wsa$3836));(column$3791=(column$3791+wsa$3836));(wsb$3789=wsa$3836);(pos$3790=(endpos$3835+wsa$3836));break $3810;}}}return results$3788;});(indent_tracker$3587=function(){var curr$3874;var stack$3875;var stacks$3876;(curr$3874=0);(stack$3875=[]);(stacks$3876=[stack$3875]);return function($3873$3887){var t0$3900;var rval$3946;var $index$3998;var $length$3993;var temp$3988;var acc$3983;var rval$3977;var x$4020;var $index$4043;var $length$4038;var temp$4033;var acc$4028;var other$4062;var fixity$3971;var fixity$3963;var stuff$3958;var new_indent$3920;var $3890$3921;var $3893$3914;var $3894$3915;var $3895$3916;var $3896$3917;var t0$3909;var t1$3910;var bridge$3891$3911;var bridge$3892$3912;var $3889$3904;var ph$3897;var token$3898;(t0$3900=$3873$3887);(token$3898=t0$3900);(ph$3897=t0$3900);($3889$3904=ph$3897);if((($3893$3914=($3889$3904 instanceof Array))&&((t0$3909=$3889$3904.length),((t0$3909===2)&&($3889$3904[0]==="INDENT"))))){(t1$3910=$3889$3904[1]);(new_indent$3920=t1$3910);($3890$3921=t1$3910);$3890$3921;if((curr$3874===false)){(curr$3874=new_indent$3920);return [$4957(["OP","IFX",","],({"wsb":true,"wsa":true}))];}else{if(($3890$3921>curr$3874)){$3533(stack$3875.push(curr$3874),(curr$3874=new_indent$3920));return [$4957(["OP","PFX","["],({"wsb":true,"wsa":true}))];}else{if(($3890$3921===curr$3874)){return [$4957(["OP","IFX",","],({"wsb":true,"wsa":true}))];}else{if(($3890$3921<curr$3874)){(rval$3946=[]);$3950:while(((stack$3875.length>0)&&(new_indent$3920<curr$3874))){(curr$3874=stack$3875.pop());rval$3946.push($4957(["OP","SFX","]"],({"wsb":true,"wsa":true})));}rval$3946.push($4957(["OP","IFX",","],({"wsb":true,"wsa":true})));return rval$3946;}else{$4753($3890$3921,"/home/olivier/git/earl-grey/src/lex.eg",4681,4697);}}}}}else{if(($3893$3914&&((t0$3909>=1)&&($3889$3904[0]==="ID")))){(stuff$3958=Array.prototype.slice.call($3889$3904,1));return [token$3898];}else{if(($3893$3914&&(($3895$3916=(t0$3909===3))&&(($3896$3917=($3889$3904[0]==="OP"))&&((fixity$3963=$3889$3904[1]),((bridge$3891$3911=$3889$3904[2]),((bridge$3891$3911==="[")||(bridge$3891$3911==="{")))))))){stack$3875.push(curr$3874);stacks$3876.push(stack$3875);(stack$3875=[]);(curr$3874=false);return [token$3898];}else{if(($3896$3917&&((fixity$3971=$3889$3904[1]),((bridge$3892$3912=$3889$3904[2]),((bridge$3892$3912==="]")||(bridge$3892$3912==="}")))))){(rval$3977=(((acc$3983=[])),(((temp$3988=stack$3875)),((($length$3993=temp$3988.length)),((($index$3998=0)),function(){$3980:for(;($index$3998<$length$3993);($index$3998++)){var m$4006;(m$4006=temp$3988[$index$3998]);m$4006;acc$3983.push($4957(["OP","SFX","]"],({"wsb":true,"wsa":true})));}}()))),acc$3983));(stack$3875=stacks$3876.pop());(curr$3874=stack$3875.pop());rval$3977.push(token$3898);return rval$3977;}else{if((((x$4020=$3889$3904)),((x$4020 instanceof Array)&&(x$4020[0]==="EOF")))){(acc$4028=[]);(temp$4033=stack$3875);($length$4038=temp$4033.length);($index$4043=0);$4025:for(;($index$4043<$length$4038);($index$4043++)){var m$4051;(m$4051=temp$4033[$index$4043]);m$4051;acc$4028.push($4957(["OP","SFX","]"],({"wsb":true,"wsa":true})));}return acc$4028;}else{(other$4062=$3889$3904);return [token$3898];}}}}}};});(process_indent$3588=function(stream$4068){var $index$4093;var $length$4088;var temp$4083;var tracker$4071;var results$4072;(tracker$4071=indent_tracker$3587());(results$4072=[]);(temp$4083=stream$4068);($length$4088=temp$4083.length);($index$4093=0);$4073:for(;($index$4093<$length$4088);($index$4093++)){var token$4109;var m$4101;(m$4101=temp$4083[$index$4093]);(token$4109=m$4101);(results$4072=results$4072.concat(tracker$4071(token$4109)));}return results$4072.concat(tracker$4071(["EOF"]));});(disambiguate_fixity$3589=function(stream$4115){var $index$4439;var $length$4434;var temp$4429;var __lt____lt____lt____colon__$4118;var collapse_operators$4119;var buffer$4120;var pfx$4121;var collapse$4122;var results$4123;(__lt____lt____lt____colon__$4118=function(a$4131,b$4132){(a$4131["wsb"]=b$4132.wsb);(a$4131["wsa"]=b$4132.wsa);return __lt____lt____colon__$3581(a$4131,b$4132);});(collapse_operators$4119=function(){var msg$4207;var longer$4204;var token$4193;var fixity$4194;var name$4195;var t0$4187;var t1$4188;var t2$4189;var $4180$4182;var $index$4233;var $length$4228;var temp$4223;var acc$4218;var $index$4281;var $length$4276;var temp$4271;var acc$4266;var t0$4320;var t1$4321;var t2$4322;var t3$4323;var t0$4347;var t0$4350;var t0$4386;var t0$4389;var t1$4390;var t2$4391;var bridge$4373$4380;var $4372$4375;var t$4369;var results$4364;var $4312$4340;var $4313$4341;var $4314$4342;var bridge$4311$4337;var t0$4338;var $4310$4332;var first$4315;var fixity$4316;var name$4317;var rest$4318;var n$4168;var $4141$4163;var $4142$4164;var $4143$4165;var $4144$4166;var t0$4160;var t1$4161;var buffer$4155;var $4140$4156;var t0$4151;var $4139$4146;($4139$4146=arguments);(t0$4151=$4139$4146.length);if((t0$4151>=1)){(buffer$4155=$4139$4146[0]);($4140$4156=Array.prototype.slice.call($4139$4146,1));(n$4168=buffer$4155.length);$4140$4156;if((!buffer$4155.length)){return [];}else{(t0$4160=$4140$4156);(t1$4161=t0$4160.length);if((($4143$4165=(t1$4161===2))&&(($4144$4166=t0$4160[0])&&t0$4160[1]))){($4180$4182=buffer$4155);if((($4180$4182 instanceof Array)&&((t0$4187=$4180$4182.length),((t0$4187===1)&&((t1$4188=$4180$4182[0]),((token$4193=t1$4188),((t1$4188 instanceof Array)&&((t2$4189=t1$4188.length),((t2$4189===3)&&(t1$4188[0]==="OP")))))))))){(fixity$4194=t1$4188[1]);(name$4195=t1$4188[2]);return [__lt____lt____lt____colon__$4118(["ID",name$4195],token$4193)];}else{(longer$4204=$4180$4182);(msg$4207="Too many consecutive operators were found here.");throw $4766(["syntax","nullary"]).create(msg$4207,({"operators":buffer$4155}));}}else{if($4144$4166){t0$4160[1];(acc$4218=[]);(temp$4223=buffer$4155);($length$4228=temp$4223.length);($index$4233=0);$4215:for(;($index$4233<$length$4228);($index$4233++)){var token$4251;var name$4252;var t0$4246;var t1$4247;var m$4241;(m$4241=temp$4223[$index$4233]);(t0$4246=m$4241);(token$4251=t0$4246);if(((t0$4246 instanceof Array)&&((t1$4247=t0$4246.length),((t1$4247===3)&&(t0$4246[0]==="OP"))))){t0$4246[1];(name$4252=t0$4246[2]);acc$4218.push(__lt____lt____lt____colon__$4118(["OP","PFX",name$4252],token$4251));}else{$4753(m$4241,"/home/olivier/git/earl-grey/src/lex.eg",7020,7114);}}return acc$4218;}else{if(($4143$4165&&(t0$4160[0],t0$4160[1]))){(acc$4266=[]);(temp$4271=buffer$4155);($length$4276=temp$4271.length);($index$4281=0);$4263:for(;($index$4281<$length$4276);($index$4281++)){var token$4299;var name$4300;var t0$4294;var t1$4295;var m$4289;(m$4289=temp$4271[$index$4281]);(t0$4294=m$4289);(token$4299=t0$4294);if(((t0$4294 instanceof Array)&&((t1$4295=t0$4294.length),((t1$4295===3)&&(t0$4294[0]==="OP"))))){t0$4294[1];(name$4300=t0$4294[2]);acc$4266.push(__lt____lt____lt____colon__$4118(["OP","SFX",name$4300],token$4299));}else{$4753(m$4289,"/home/olivier/git/earl-grey/src/lex.eg",7127,7221);}}return acc$4266;}else{$4140$4156;(t0$4320=buffer$4155);if(((t0$4320 instanceof Array)&&((t1$4321=t0$4320.length),((t1$4321>=1)&&((t2$4322=t0$4320[0]),((first$4315=t2$4322),((t2$4322 instanceof Array)&&((t3$4323=t2$4322.length),((t3$4323===3)&&(t2$4322[0]==="OP")))))))))){(fixity$4316=t2$4322[1]);(name$4317=t2$4322[2]);(rest$4318=Array.prototype.slice.call(t0$4320,1));}else{$4753(buffer$4155,"/home/olivier/git/earl-grey/src/lex.eg",7274,7280);}($4310$4332=[first$4315.wsb,first$4315.wsa]);(bridge$4311$4337=$4310$4332);if((((bridge$4311$4337 instanceof Array)&&((t0$4347=bridge$4311$4337.length),((t0$4347===2)&&((!bridge$4311$4337[0])&&(!bridge$4311$4337[1])))))||((bridge$4311$4337 instanceof Array)&&((t0$4350=bridge$4311$4337.length),((t0$4350===2)&&(bridge$4311$4337[0]&&bridge$4311$4337[1])))))){return [__lt____lt____lt____colon__$4118(["OP","IFX",name$4317],first$4315)].concat(collapse_operators$4119(rest$4318,true,false));}else{if((($4312$4340=($4310$4332 instanceof Array))&&((t0$4338=$4310$4332.length),(($4314$4342=(t0$4338===2))&&$4310$4332[0])))){$4310$4332[1];return [__lt____lt____lt____colon__$4118(["OP","PFX",name$4317],first$4315)].concat(collapse_operators$4119(rest$4318,true,false));}else{if(($4314$4342&&($4310$4332[0],$4310$4332[1]))){(results$4364=collapse_operators$4119(rest$4318,false,false));(t$4369=((($4372$4375=results$4364)),((bridge$4373$4380=$4372$4375),function(){if((((bridge$4373$4380 instanceof Array)&&((t0$4386=bridge$4373$4380.length),(t0$4386===0)))||((bridge$4373$4380 instanceof Array)&&((t0$4389=bridge$4373$4380.length),((t0$4389>=1)&&((t1$4390=bridge$4373$4380[0]),((t1$4390 instanceof Array)&&((t2$4391=t1$4390.length),((t2$4391>=2)&&((t1$4390[0]==="OP")&&((t1$4390[1]==="PFX")&&(Array.prototype.slice.call(t1$4390,2),(Array.prototype.slice.call(bridge$4373$4380,1),true))))))))))))){return ["OP","IFX",name$4317];}else{$4372$4375;return ["OP","SFX",name$4317];}}())));return [__lt____lt____lt____colon__$4118(t$4369,first$4315)].concat(results$4364);}else{$4753($4310$4332);}}}}}}}}else{$4753($4139$4146);}});(buffer$4120=[]);(pfx$4121=true);(collapse$4122=function(sfx$4416){var rval$4419;(rval$4419=collapse_operators$4119(buffer$4120,pfx$4121,sfx$4416));(buffer$4120=[]);return rval$4419;});(results$4123=[]);(temp$4429=stream$4115);($length$4434=temp$4429.length);($index$4439=0);$4124:for(;($index$4439<$length$4434);($index$4439++)){var other$4495;var name$4465;var $4127$4466;var t0$4460;var t1$4461;var token$4456;var $4126$4457;var t0$4452;var m$4447;(m$4447=temp$4429[$index$4439]);(t0$4452=m$4447);(token$4456=t0$4452);($4126$4457=t0$4452);(t0$4460=$4126$4457);if(((t0$4460 instanceof Array)&&((t1$4461=t0$4460.length),((t1$4461===3)&&(t0$4460[0]==="OP"))))){($4127$4466=t0$4460[1]);(name$4465=t0$4460[2]);if(($4127$4466==="?FX")){buffer$4120.push(token$4456);}else{if(($4127$4466==="IFX")){(results$4123=results$4123.concat(collapse$4122(true)));results$4123.push(token$4456);(pfx$4121=true);}else{if(($4127$4466==="PFX")){(results$4123=results$4123.concat(collapse$4122(false)));results$4123.push(token$4456);(pfx$4121=true);}else{if(($4127$4466==="SFX")){(results$4123=results$4123.concat(collapse$4122(true)));results$4123.push(token$4456);(pfx$4121=false);}else{$4753($4127$4466,"/home/olivier/git/earl-grey/src/lex.eg",8075,8080);}}}}}else{(other$4495=$4126$4457);(results$4123=results$4123.concat(collapse$4122(false)));results$4123.push(token$4456);(pfx$4121=false);}}return results$4123.concat(collapse$4122(true));});(alternate_operators$3590=function(stream$4502){var $index$4535;var $length$4530;var temp$4525;var W$4505;var last_op$4506;var results$4507;(W$4505=function(x$4514){if(x$4514){return "wide";}else{return "short";}});(last_op$4506=true);(results$4507=[]);(temp$4525=stream$4502);($length$4530=temp$4525.length);($index$4535=0);$4508:for(;($index$4535<$length$4530);($index$4535++)){var x$4563;var $4576$4579;var x$4607;var token$4614;var fixity$4570;var name$4571;var t0$4556;var t1$4557;var token$4552;var $4510$4553;var t0$4548;var m$4543;(m$4543=temp$4525[$index$4535]);(t0$4548=m$4543);(token$4552=t0$4548);($4510$4553=t0$4548);if((((x$4563=$4510$4553)),((x$4563 instanceof Array)&&(x$4563[0]==="IGNORE")))){null;}else{(t0$4556=$4510$4553);if(((t0$4556 instanceof Array)&&((t1$4557=t0$4556.length),((t1$4557===3)&&(t0$4556[0]==="OP"))))){(fixity$4570=t0$4556[1]);(name$4571=t0$4556[2]);if(last_op$4506){results$4507.push(["VOID"]);}($4576$4579=fixity$4570);if(($4576$4579==="IFX")){results$4507.push(__lt____lt____colon__$3581(["IFX",W$4505((token$4552.wsa||token$4552.wsb)),name$4571],token$4552));(last_op$4506=true);}else{if(($4576$4579==="PFX")){if((!last_op$4506)){results$4507.push(["IFX",W$4505(token$4552.wsb),"WHITE"],["VOID"]);}results$4507.push(__lt____lt____colon__$3581(["PFX",W$4505(token$4552.wsa),name$4571],token$4552));(last_op$4506=true);}else{if(($4576$4579==="SFX")){results$4507.push(__lt____lt____colon__$3581(["SFX",W$4505(token$4552.wsb),name$4571],token$4552),["VOID"]);(last_op$4506=false);}else{$4753($4576$4579);}}}}else{if((((x$4607=$4510$4553)),((x$4607 instanceof Array)&&(x$4607[0]==="ILLEGAL")))){throw $4766(["syntax","illegal"]).create("unknown character",({"chr":token$4552}));}else{(token$4614=$4510$4553);if((!last_op$4506)){results$4507.push(["IFX",W$4505(token$4614.wsb),"WHITE"]);}results$4507.push(token$4614);(last_op$4506=false);}}}}if(last_op$4506){results$4507.push(["VOID"]);}return results$4507;});(fill_locations$3591=function(source$4623,stream$4624){var $index$4694;var $length$4689;var temp$4684;var to_fill$4627;var start$4628;var fill$4629;(to_fill$4627=[]);(start$4628=0);(fill$4629=function(end$4641){var $index$4658;var $length$4653;var temp$4648;(temp$4648=to_fill$4627);($length$4653=temp$4648.length);($index$4658=0);$4644:for(;($index$4658<$length$4653);($index$4658++)){var token$4679;var token$4674;var m$4666;(m$4666=temp$4648[$index$4658]);(token$4674=m$4666);if(($index$4658===0)){(token$4674["location"]=Location$3580(source$4623,start$4628,end$4641));}else{(token$4679=m$4666);(token$4679["location"]=Location$3580(source$4623,end$4641,end$4641));}}return (to_fill$4627=[]);});(temp$4684=stream$4624);($length$4689=temp$4684.length);($index$4694=0);$4630:for(;($index$4694<$length$4689);($index$4694++)){var other$4718;var location$4711;var t0$4707;var m$4702;(m$4702=temp$4684[$index$4694]);(t0$4707=m$4702);if(($5029(t0$4707,"location")&&((location$4711=t0$4707.location),location$4711))){fill$4629(location$4711.start);(start$4628=location$4711.end);}else{(other$4718=m$4702);to_fill$4627.push(other$4718);}}fill$4629(source$4623.text.length);return stream$4624;});(tokenize$3592=function(src$4724){var it$0$4747;var it$0$4742;var it$0$4737;var it$0$4732;var it$0$4727;(it$0$4727=src$4724);(it$0$4732=produce$3586(it$0$4727));(it$0$4737=process_indent$3588(it$0$4732));(it$0$4742=disambiguate_fixity$3589(it$0$4737));(it$0$4747=alternate_operators$3590(it$0$4742));return fill_locations$3591(src$4724,it$0$4747);});(exports["tokenize"]=tokenize$3592);

},{"./location":7}],7:[function(require,module,exports){
var $5228=function(type$5230){var f$5233;(f$5233=type$5230["::check"]);if((f$5233===(void 0))){return function(value$5238){return (value$5238 instanceof type$5230);};}else{return function(value$5241){return f$5233.call(type$5230,value$5241);};}};
var $5243=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $5244=function(dest$5246,values$5247){var k$5252;(k$5252=null);$5250:for(k$5252 in values$5247){if(values$5247.hasOwnProperty(k$5252)){(dest$5246[k$5252]=values$5247[k$5252]);}}return dest$5246;};
var $5256=function($5257$5259){var ph$5263;(ph$5263=$5257$5259);var $5261$5268;($5261$5268=ph$5263);var bridge$5262$5273;var x$5277;(bridge$5262$5273=$5261$5268);if((((typeof(bridge$5262$5273)==="string")&&((x$5277=bridge$5262$5273),true))||((typeof(bridge$5262$5273)==="number")&&((x$5277=bridge$5262$5273),true)))){return ["value",x$5277];}else{var other$5284;(other$5284=$5261$5268);return other$5284["::serialize_ast"]();}};
var send$5068;(send$5068=function(obj$5073,$5071$5074){var ph$5078;var msg$5079;var t0$5081;(t0$5081=$5071$5074);(msg$5079=t0$5081);(ph$5078=t0$5081);var $5076$5085;($5076$5085=ph$5078);var bridge$5077$5090;(bridge$5077$5090=$5076$5085);if(((typeof(bridge$5077$5090)==="string")||(typeof(bridge$5077$5090)==="number"))){return obj$5073[msg$5079];}else{var other$5098;(other$5098=$5076$5085);return obj$5073["::send"](msg$5079);}});(Array[":::project"]=function($5101$5103){var ph$5106;var value$5107;var t0$5109;(t0$5109=$5101$5103);(value$5107=t0$5109);(ph$5106=t0$5109);var $5105$5113;($5105$5113=ph$5106);if($5228(Array)($5105$5113)){return [true,value$5107];}else{$5105$5113;return [true,[value$5107]];}});(Array.prototype["::check"]=function(value$5127){if((value$5127 instanceof Array)){var i$5132;(i$5132=0);$5130:for(;(i$5132<this.length);(i$5132++)){if(($5243(this,i$5132)!==$5243(value$5127,i$5132))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $5244(this.slice(0),this);});(Array.prototype[":::project"]=function(value$5143){if((value$5143 instanceof Array)){var i$5148;(i$5148=0);$5146:for(;(i$5148<this.length);(i$5148++)){if(($5243(this,i$5148)!==$5243(value$5143,i$5148))){return [true,[value$5143]];}}return [true,value$5143.slice(this.length)];}else{return [true,[value$5143]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($5256));});(RegExp.prototype["::check"]=function($5158$5160){var ph$5163;(ph$5163=$5158$5160);var $5162$5168;($5162$5168=ph$5163);var value$5176;if((typeof($5162$5168)==="string")){(value$5176=$5162$5168);if(value$5176.match(this)){return true;}else{return false;}}else{var other$5181;(other$5181=$5162$5168);return false;}});(RegExp.prototype[":::project"]=function($5183$5185){var ph$5188;(ph$5188=$5183$5185);var $5187$5193;($5187$5193=ph$5188);var value$5201;if((typeof($5187$5193)==="string")){(value$5201=$5187$5193);var $5204$5206;($5204$5206=value$5201.match(this));var m$5214;if(($5204$5206===null)){(m$5214=$5204$5206);return [false,null];}else{var m$5219;(m$5219=$5204$5206);return [true,m$5219];}}else{var other$5223;(other$5223=$5187$5193);return [false,null];}});(Function.prototype["::send"]=function(args$5226){return this.apply(this,args$5226);});
var $7000=function(arr$7002){var results$7006;var l$7007;(results$7006=[]);(l$7007=arr$7002.length);var i$7015;(i$7015=0);$7005:for(;(i$7015<l$7007);(i$7015++)){results$7006.push([i$7015,$5243(arr$7002,i$7015)]);}return results$7006;};
var $6831=function(){var $6832$6834;($6832$6834=function(tags$6838){var it$0$6841;(it$0$6841=function(){if((!$5228($6832$6834)(this))){return Object.create($6832$6834.prototype);}else{return this;}}());(it$0$6841["tags"]=tags$6838);return it$0$6841;});($6832$6834.prototype["create"]=function(){var $6850$6852;($6850$6852=arguments);var t0$6857;var message$6861;var args$6862;(t0$6857=$6850$6852.length);if((t0$6857>=0)){(message$6861=function(){if((0>=t0$6857)){return "";}else{return $6850$6852[0];}}());(args$6862=Array.prototype.slice.call($6850$6852,1));var it$0$6866;(it$0$6866=this);var self$6871;(self$6871=this);var e$6876;(e$6876=Error(message$6861));(e$6876["::tags"]=it$0$6866.tags);(e$6876["args"]=args$6862);var temp$6884;(temp$6884=$7000(args$6862));var $length$6889;($length$6889=temp$6884.length);var $index$6894;($index$6894=0);$6877:for(;($index$6894<$length$6889);($index$6894++)){var m$6902;(m$6902=temp$6884[$index$6894]);var t0$6907;var t1$6908;var i$6912;var arg$6913;(t0$6907=m$6902);if(((t0$6907 instanceof Array)&&((t1$6908=t0$6907.length),(t1$6908===2)))){(i$6912=t0$6907[0]);(arg$6913=t0$6907[1]);(e$6876[i$6912]=arg$6913);}else{$6818(m$6902);}}(e$6876["length"]=args$6862.length);(e$6876["name"]=["E"].concat(it$0$6866.tags).join("."));return e$6876;}else{$6818($6850$6852);}});($6832$6834.prototype["::check"]=function(e$6924){var it$0$6927;(it$0$6927=this);var self$6932;(self$6932=this);var tags$6937;if(((!e$6924)||(!$5228(Error)(e$6924)))){return false;}(tags$6937=(e$6924["::tags"]||[]));var temp$6946;(temp$6946=it$0$6927.tags);var $length$6951;($length$6951=temp$6946.length);var $index$6956;($index$6956=0);$6938:for(;($index$6956<$length$6951);($index$6956++)){var m$6964;(m$6964=temp$6946[$index$6956]);var tag$6972;(tag$6972=m$6964);if((tags$6937.indexOf(tag$6972)===-1)){return false;}else{false;}}return true;});($6832$6834.prototype["::deconstruct"]=function(e$6980){var it$0$6983;(it$0$6983=this);var self$6988;(self$6988=this);return e$6980.args;});$5244($6832$6834,$5244(function(){var accum$6993;(accum$6993=({}));(accum$6993["::name"]="$6832");return accum$6993;}(),function(){var accum$6997;(accum$6997=({}));(accum$6997["::egclass"]=true);return accum$6997;}()));return $6832$6834;}();
var $6818=function(value$6820,url$6821,start$6822,end$6823){var err$6826;(err$6826=$6831(["match"]).create("Could not find a match for value",({"value":value$6820})));if(url$6821){(err$6826["location"]=["location",url$6821,start$6822,end$6823]);}throw err$6826;};
var $7149=function(type$7151){return function(value$7154){var f$7157;(f$7157=type$7151[":::project"]);if((f$7157===(void 0))){(f$7157=type$7151["::project"]);if((f$7157===(void 0))){return [true,type$7151(value$7154)];}else{var rval$7163;(rval$7163=false);try{(rval$7163=[true,f$7157(value$7154)]);}catch(excv$7169){var e$7175;(e$7175=excv$7169);(rval$7163=[false,null]);}return rval$7163;}}else{return f$7157.call(type$7151,value$7154);}};};
var $7022=function(){var $7023$7025;($7023$7025=function($7028$7031,$7029$7032){var classes$7034;var children$7035;var t0$7037;(t0$7037=$7149(Array)($7028$7031));if(t0$7037[0]){(classes$7034=t0$7037[1]);}else{$6818($7028$7031);}var t0$7042;(t0$7042=$7149(Array)($7029$7032));if(t0$7042[0]){(children$7035=t0$7042[1]);}else{$6818($7029$7032);}var it$0$7047;(it$0$7047=function(){if((!$5228($7023$7025)(this))){return Object.create($7023$7025.prototype);}else{return this;}}());(it$0$7047["classes"]=classes$7034.sort());(it$0$7047["children"]=children$7035);return it$0$7047;});$5244(function(){var accum$7055;(accum$7055=({}));(accum$7055["::check"]=function(x$7059){return ((x$7059&&x$7059.classes)&&x$7059.children);});return accum$7055;}(),$5244(function(){var accum$7062;(accum$7062=({}));(accum$7062["::deconstruct"]=function(x$7066){return [x$7066.classes,x$7066.children];});return accum$7062;}(),$5244(function(){var accum$7069;(accum$7069=({}));(accum$7069["::name"]="$7023");return accum$7069;}(),function(){var accum$7073;(accum$7073=({}));(accum$7073["::egclass"]=true);return accum$7073;}())));($7023$7025.prototype["::check"]=function(n$7079){var it$0$7082;(it$0$7082=this);var self$7087;(self$7087=this);var temp$7096;(temp$7096=it$0$7082.classes);var $length$7101;($length$7101=temp$7096.length);var $index$7106;($index$7106=0);$7092:for(;($index$7106<$length$7101);($index$7106++)){var m$7114;(m$7114=temp$7096[$index$7106]);var c$7122;(c$7122=m$7114);if((n$7079.classes.indexOf(c$7122)===-1)){return false;}else{false;}}return true;});$5244($7023$7025,$5244(function(){var accum$7128;(accum$7128=({}));(accum$7128["::check"]=function(x$7132){return ((x$7132&&x$7132.classes)&&x$7132.children);});return accum$7128;}(),$5244(function(){var accum$7135;(accum$7135=({}));(accum$7135["::deconstruct"]=function(x$7139){return [x$7139.classes,x$7139.children];});return accum$7135;}(),$5244(function(){var accum$7142;(accum$7142=({}));(accum$7142["::name"]="$7023");return accum$7142;}(),function(){var accum$7146;(accum$7146=({}));(accum$7146["::egclass"]=true);return accum$7146;}()))));return $7023$7025;}();
var $7177=function(from$7179,to$7180){var rval$7184;(rval$7184=[]);var i$7189;(i$7189=from$7179);$7183:for(;(i$7189<=to$7180);(i$7189++)){rval$7184.push(i$7189);}return rval$7184;};
var $7196=function(obj$7198){var results$7202;(results$7202=[]);var k$7207;(k$7207=null);$7201:for(k$7207 in obj$7198){if(Object.prototype.hasOwnProperty.call(obj$7198,k$7207)){results$7202.push([k$7207,$5243(obj$7198,k$7207)]);}}return results$7202;};
var $7211=function($7212$7214,key$7215){var ph$7219;(ph$7219=$7212$7214);var $7217$7224;($7217$7224=ph$7219);var bridge$7218$7229;(bridge$7218$7229=$7217$7224);if(((bridge$7218$7229===null)||(bridge$7218$7229===(void 0)))){return false;}else{var x$7237;if((typeof($7217$7224)==="string")){(x$7237=$7217$7224);return (key$7215 in String.prototype);}else{var x$7242;if((typeof($7217$7224)==="number")){(x$7242=$7217$7224);return (key$7215 in Number.prototype);}else{var x$7247;(x$7247=$7217$7224);return (key$7215 in x$7247);}}}};var accum$5434;var accum$5438;var accum$5664;var accum$5668;var $5288$5290;var binsearch$5291;var $5289$5292;var __lt____gt__$5293;var repr$5294;var fs$5295;var Source$5296;var Location$5297;var highlight$5298;var highlight_lines$5299;var clamp$5300;var morsel$5301;var highlight_locations$5302;var highlight_locations_same_source$5303;var merge_locations$5304;var __lt____lt____colon__$5305;var __plus____plus____colon__$5306;var format_error$5307;var display_error$5308;($5288$5290=require("./util"));(binsearch$5291=$5288$5290.binsearch);($5289$5292=require("./pp"));(__lt____gt__$5293=$5289$5292["<>"]);(repr$5294=$5289$5292.repr);(fs$5295=require("fs"));(Source$5296=function(){var $index$5370;var $length$5365;var temp$5360;var curr$5352;var it$0$5346;var text$5341;var url$5342;var t0$5337;var $5330$5332;($5330$5332=arguments);(t0$5337=$5330$5332.length);if(((t0$5337>=1)&&(t0$5337<=2))){(text$5341=$5330$5332[0]);(url$5342=function(){if((1>=t0$5337)){return false;}else{return $5330$5332[1];}}());(it$0$5346=function(){if((!$5228(Source$5296)(this))){return Object.create(Source$5296.prototype);}else{return this;}}());(it$0$5346["text"]=text$5341);(it$0$5346["url"]=url$5342);(it$0$5346["counts"]=[]);(curr$5352=0);(temp$5360=text$5341.split("\n"));($length$5365=temp$5360.length);($index$5370=0);$5353:for(;($index$5370<$length$5365);($index$5370++)){var line$5386;var m$5378;(m$5378=temp$5360[$index$5370]);(line$5386=m$5378);it$0$5346.counts.push(curr$5352);(curr$5352=(curr$5352+(line$5386.length+1)));}it$0$5346.counts.push(curr$5352);(it$0$5346["nlines"]=(it$0$5346.counts.length-1));return it$0$5346;}else{$6818($5330$5332);}});(Source$5296.prototype["linecol"]=function(pos$5395){var line$5408;var col$5409;var self$5403;var it$0$5398;(it$0$5398=this);(self$5403=this);(line$5408=binsearch$5291(it$0$5398.counts,pos$5395));(col$5409=(pos$5395-$5243(it$0$5398.counts,(line$5408-1))));return [line$5408,col$5409];});(Source$5296.prototype["highlight_lines"]=function(l1$5419,l2$5420,spans$5421){var self$5429;var it$0$5424;(it$0$5424=this);(self$5429=this);return highlight_lines$5299(it$0$5424.text,it$0$5424.counts,[(l1$5419-1),(l2$5420-1)],spans$5421);});$5244(Source$5296,$5244(((accum$5434=({})),((accum$5434["::name"]="Source"),accum$5434)),((accum$5438=({})),((accum$5438["::egclass"]=true),accum$5438))));Source$5296;(Location$5297=function(source$5444,start$5445,end$5446){var it$0$5449;(it$0$5449=function(){if((!$5228(Location$5297)(this))){return Object.create(Location$5297.prototype);}else{return this;}}());(it$0$5449["source"]=(source$5444||Source$5296("",null)));(it$0$5449["start"]=start$5445);(it$0$5449["end"]=end$5446);return it$0$5449;});(Location$5297.prototype["text"]=function(){var self$5466;var it$0$5461;(it$0$5461=this);(self$5466=this);return it$0$5461.source.text.slice(it$0$5461.start,it$0$5461.end);});(Location$5297.prototype["linerange"]=function(){var l2$5515;var t0$5506;var t1$5507;var l1$5498;var $5481$5499;var t0$5492;var t1$5493;var t2$5494;var $5480$5487;var self$5482;var it$0$5475;(it$0$5475=this);(self$5482=this);($5480$5487=it$0$5475.linecol());if((($5480$5487 instanceof Array)&&((t0$5492=$5480$5487.length),((t0$5492===2)&&((t1$5493=$5480$5487[0]),((t1$5493 instanceof Array)&&((t2$5494=t1$5493.length),(t2$5494===2)))))))){(l1$5498=t1$5493[0]);t1$5493[1];($5481$5499=$5480$5487[1]);if(($5481$5499===null)){return [l1$5498,l1$5498];}else{(t0$5506=$5481$5499);if(((t0$5506 instanceof Array)&&((t1$5507=t0$5506.length),(t1$5507===2)))){(l2$5515=t0$5506[0]);t0$5506[1];return [l1$5498,l2$5515];}else{$6818($5481$5499,"/home/olivier/git/earl-grey/src/location.eg",975,980);}}}else{$6818($5480$5487);}});(Location$5297.prototype["linecol"]=function(){var start$5538;var end$5539;var self$5533;var it$0$5528;(it$0$5528=this);(self$5533=this);(start$5538=it$0$5528.source.linecol(it$0$5528.start));(end$5539=function(){if((it$0$5528.start===it$0$5528.end)){return null;}else{return it$0$5528.source.linecol((it$0$5528.end-1));}}());return [start$5538,end$5539];});(Location$5297.prototype["ref"]=function(){var otherwise$5627;var $5608$5616;var $5607$5610;var l2$5599;var c2$5600;var t0$5588;var t1$5589;var t2$5590;var t3$5591;var l1$5576;var c1$5577;var $5557$5578;var t0$5568;var t1$5569;var t2$5570;var t3$5571;var t4$5572;var $5556$5563;var self$5558;var it$0$5551;(it$0$5551=this);(self$5558=this);($5556$5563=it$0$5551.linecol());if((($5556$5563 instanceof Array)&&((t0$5568=$5556$5563.length),((t0$5568===2)&&((t1$5569=$5556$5563[0]),((t1$5569 instanceof Array)&&((t2$5570=t1$5569.length),((t2$5570===2)&&((t3$5571=[true,String(t1$5569[0])]),(t3$5571[0]&&((l1$5576=t3$5571[1]),((t4$5572=[true,String(t1$5569[1])]),t4$5572[0])))))))))))){(c1$5577=t4$5572[1]);($5557$5578=$5556$5563[1]);if(($5557$5578===null)){return ((l1$5576+":")+c1$5577);}else{(t0$5588=$5557$5578);if(((t0$5588 instanceof Array)&&((t1$5589=t0$5588.length),((t1$5589===2)&&((t2$5590=[true,String(t0$5588[0])]),(t2$5590[0]&&((l2$5599=t2$5590[1]),((t3$5591=[true,String(t0$5588[1])]),t3$5591[0])))))))){(c2$5600=t3$5591[1]);($5607$5610=null);$5607$5610;if(((l1$5576===l2$5599)&&(c1$5577===c2$5600))){return ((l1$5576+":")+c1$5577);}else{if((l1$5576===l2$5599)){return ((((l1$5576+":")+c1$5577)+"-")+c2$5600);}else{(otherwise$5627=$5607$5610);return ((((((l1$5576+":")+c1$5577)+"-")+l1$5576)+":")+c2$5600);}}}else{$6818($5557$5578,"/home/olivier/git/earl-grey/src/location.eg",1317,1322);}}}else{$6818($5556$5563);}});(Location$5297.prototype["highlight"]=function(){var self$5657;var it$0$5652;var cls$5647;var context$5648;var t0$5643;var $5636$5638;($5636$5638=arguments);(t0$5643=$5636$5638.length);if(((t0$5643>=0)&&(t0$5643<=2))){(cls$5647=function(){if((0>=t0$5643)){return "hl1";}else{return $5636$5638[0];}}());(context$5648=function(){if((1>=t0$5643)){return 0;}else{return $5636$5638[1];}}());(it$0$5652=this);(self$5657=this);return highlight_locations$5302([[it$0$5652,cls$5647]],context$5648);}else{$6818($5636$5638);}});$5244(Location$5297,$5244(((accum$5664=({})),((accum$5664["::name"]="Location"),accum$5664)),((accum$5668=({})),((accum$5668["::egclass"]=true),accum$5668))));Location$5297;(highlight$5298=function(){var $index$5708;var $length$5703;var temp$5698;var acc$5693;var text$5685;var spans$5686;var offset$5687;var t0$5681;var $5674$5676;($5674$5676=arguments);(t0$5681=$5674$5676.length);if(((t0$5681>=2)&&(t0$5681<=3))){(text$5685=$5674$5676[0]);(spans$5686=$5674$5676[1]);(offset$5687=function(){if((2>=t0$5681)){return 0;}else{return $5674$5676[2];}}());return $7022([],(((acc$5693=[])),(((temp$5698=morsel$5301(spans$5686))),((($length$5703=temp$5698.length)),((($index$5708=0)),function(){$5690:for(;($index$5708<$length$5703);($index$5708++)){var xstart$5733;var xend$5734;var start$5726;var end$5727;var attributes$5728;var t0$5721;var t1$5722;var m$5716;(m$5716=temp$5698[$index$5708]);(t0$5721=m$5716);if(((t0$5721 instanceof Array)&&((t1$5722=t0$5721.length),(t1$5722===3)))){(start$5726=t0$5721[0]);(end$5727=t0$5721[1]);(attributes$5728=t0$5721[2]);acc$5693.push((((xstart$5733=Math.max((start$5726-offset$5687),0))),((xend$5734=Math.min((end$5727-offset$5687),text$5685.length))),$7022(attributes$5728.slice(0,1),[text$5685.slice(xstart$5733,xend$5734)])));}else{$6818(m$5716,"/home/olivier/git/earl-grey/src/location.eg",1864,2076);}}}()))),acc$5693));}else{$6818($5674$5676);}});(highlight_lines$5299=function(text$5750,linelocs$5751,$5748$5752,spans$5753){var t0$5758;var t1$5759;var $index$5782;var $length$5777;var temp$5772;var acc$5767;var l1$5755;var l2$5756;(t0$5758=$5748$5752);if(((t0$5758 instanceof Array)&&((t1$5759=t0$5758.length),(t1$5759===2)))){(l1$5755=t0$5758[0]);(l2$5756=t0$5758[1]);}else{$6818($5748$5752);}return $7022(["+span"],(((acc$5767=[])),(((temp$5772=$7177(l1$5755,l2$5756))),((($length$5777=temp$5772.length)),((($index$5782=0)),function(){$5764:for(;($index$5782<$length$5777);($index$5782++)){var start$5801;var end$5802;var lineno$5798;var m$5790;(m$5790=temp$5772[$index$5782]);(lineno$5798=m$5790);acc$5767.push((((start$5801=$5243(linelocs$5751,lineno$5798))),((end$5802=$5243(linelocs$5751,(lineno$5798+1)))),$7022(["+span"],[$7022(["lineno"],(lineno$5798+1)),$7022(["source"],highlight$5298(text$5750,[[start$5801,end$5802,[]]].concat(clamp$5300(spans$5753,start$5801,end$5802))))])));}}()))),acc$5767));});(clamp$5300=function(spans$5813,bot$5814,top$5815){var $index$5835;var $length$5830;var temp$5825;var acc$5820;(acc$5820=[]);(temp$5825=spans$5813);($length$5830=temp$5825.length);($index$5835=0);$5817:for(;($index$5835<$length$5830);($index$5835++)){var start$5853;var end$5854;var attr$5855;var t0$5848;var t1$5849;var m$5843;(m$5843=temp$5825[$index$5835]);(t0$5848=m$5843);if(((t0$5848 instanceof Array)&&((t1$5849=t0$5848.length),((t1$5849===3)&&((start$5853=t0$5848[0]),((end$5854=t0$5848[1]),((attr$5855=t0$5848[2]),((end$5854>=bot$5814)&&(start$5853<=top$5815))))))))){acc$5820.push([Math.max(start$5853,bot$5814),Math.min(end$5854,top$5815),attr$5855]);}else{false;}}return acc$5820;});(morsel$5301=function(spans$5868){var jump$5871;var jumptill$5872;var process_elements$5873;var thespans$5874;(jump$5871=function(active$5878,bot$5879,top$5880){var $index$5908;var $length$5903;var temp$5898;var acc$5893;var $index$5948;var $length$5943;var temp$5938;var e$5883;var attributes$5884;(e$5883=$5243(Math.min,[top$5880].concat((((acc$5893=[])),(((temp$5898=active$5878)),((($length$5903=temp$5898.length)),((($index$5908=0)),function(){$5890:for(;($index$5908<$length$5903);($index$5908++)){var x$5926;var t0$5921;var t1$5922;var m$5916;(m$5916=temp$5898[$index$5908]);(t0$5921=m$5916);if(((t0$5921 instanceof Array)&&((t1$5922=t0$5921.length),(t1$5922===3)))){t0$5921[0];(x$5926=t0$5921[1]);t0$5921[2];acc$5893.push(x$5926);}else{$6818(m$5916,"/home/olivier/git/earl-grey/src/location.eg",3399,3442);}}}()))),acc$5893))));(attributes$5884=[]);(temp$5938=active$5878);($length$5943=temp$5938.length);($index$5948=0);$5885:for(;($index$5948<$length$5943);($index$5948++)){var X$5966;var t0$5961;var t1$5962;var m$5956;(m$5956=temp$5938[$index$5948]);(t0$5961=m$5956);if(((t0$5961 instanceof Array)&&((t1$5962=t0$5961.length),(t1$5962===3)))){t0$5961[0];t0$5961[1];(X$5966=t0$5961[2]);(attributes$5884=attributes$5884.concat(X$5966));}else{$6818(m$5956,"/home/olivier/git/earl-grey/src/location.eg",3464,3505);}}return [e$5883,[bot$5879,e$5883,attributes$5884]];});(jumptill$5872=function(active$5976,bot$5977,top$5978){var t0$5987;var t1$5988;var $index$6013;var $length$6008;var temp$6003;var acc$5998;var t0$6044;var t1$6045;var newbot$5981;var span$5982;var newactive$5983;var spans$5984;var remainder$5985;if((bot$5977===top$5978)){return [[],active$5976];}else{(t0$5987=jump$5871(active$5976,bot$5977,top$5978));if(((t0$5987 instanceof Array)&&((t1$5988=t0$5987.length),(t1$5988===2)))){(newbot$5981=t0$5987[0]);(span$5982=t0$5987[1]);}else{$6818(jump$5871(active$5976,bot$5977,top$5978),"/home/olivier/git/earl-grey/src/location.eg",3741,3775);}(newactive$5983=(((acc$5998=[])),(((temp$6003=active$5976)),((($length$6008=temp$6003.length)),((($index$6013=0)),function(){$5995:for(;($index$6013<$length$6008);($index$6013++)){var x$6031;var e$6032;var attr$6033;var t0$6026;var t1$6027;var m$6021;(m$6021=temp$6003[$index$6013]);(t0$6026=m$6021);(x$6031=t0$6026);if(((t0$6026 instanceof Array)&&((t1$6027=t0$6026.length),((t1$6027===3)&&(t0$6026[0],((e$6032=t0$6026[1]),((attr$6033=t0$6026[2]),(e$6032>newbot$5981)))))))){acc$5998.push(x$6031);}else{false;}}}()))),acc$5998));(t0$6044=jumptill$5872(newactive$5983,newbot$5981,top$5978));if(((t0$6044 instanceof Array)&&((t1$6045=t0$6044.length),(t1$6045===2)))){(spans$5984=t0$6044[0]);(remainder$5985=t0$6044[1]);}else{$6818(jumptill$5872(newactive$5983,newbot$5981,top$5978),"/home/olivier/git/earl-grey/src/location.eg",3890,3934);}return [[span$5982].concat(spans$5984),remainder$5985];}});(process_elements$5873=function(start$6054,active$6055,rem$6056){var $index$6121;var $length$6116;var temp$6111;var acc$6106;var t0$6150;var t1$6151;var top$6098;var bot$6099;var spans$6100;var t0$6178;var t1$6179;var spans$6175;var newactive$6176;var start$6158;var active$6159;var next$6160;var target$6161;var end$6162;var attr$6163;var rest$6164;var start$6089;var active$6090;var $6059$6074;var $6060$6075;var $6061$6076;var t0$6068;var t1$6069;var t2$6070;var t3$6071;var t4$6072;var $6058$6063;($6058$6063=[start$6054,active$6055,rem$6056]);if((($6059$6074=($6058$6063 instanceof Array))&&((t0$6068=$6058$6063.length),(($6061$6076=(t0$6068===3))&&($6058$6063[0],((t1$6069=$6058$6063[1]),((t1$6069 instanceof Array)&&((t2$6070=t1$6069.length),((t2$6070===0)&&((t3$6071=$6058$6063[2]),((t3$6071 instanceof Array)&&((t4$6072=t3$6071.length),(t4$6072===0))))))))))))){return [];}else{if(($6061$6076&&((start$6089=$6058$6063[0]),((active$6090=$6058$6063[1]),((t1$6069=$6058$6063[2]),((t1$6069 instanceof Array)&&((t2$6070=t1$6069.length),(t2$6070===0)))))))){(top$6098=$5243(Math.max,(((acc$6106=[])),(((temp$6111=active$6090)),((($length$6116=temp$6111.length)),((($index$6121=0)),function(){$6103:for(;($index$6121<$length$6116);($index$6121++)){var e$6139;var t0$6134;var t1$6135;var m$6129;(m$6129=temp$6111[$index$6121]);(t0$6134=m$6129);if(((t0$6134 instanceof Array)&&((t1$6135=t0$6134.length),(t1$6135===3)))){t0$6134[0];(e$6139=t0$6134[1]);t0$6134[2];acc$6106.push(e$6139);}else{$6818(m$6129,"/home/olivier/git/earl-grey/src/location.eg",4119,4157);}}}()))),acc$6106)));(bot$6099=Math.min(start$6089,top$6098));(t0$6150=jumptill$5872(active$6090,start$6089,top$6098));if(((t0$6150 instanceof Array)&&((t1$6151=t0$6150.length),(t1$6151===2)))){(spans$6100=t0$6150[0]);t0$6150[1];}else{$6818(jumptill$5872(active$6090,start$6089,top$6098),"/home/olivier/git/earl-grey/src/location.eg",4210,4248);}return spans$6100;}else{if(($6061$6076&&((start$6158=$6058$6063[0]),((active$6159=$6058$6063[1]),((t1$6069=$6058$6063[2]),((t1$6069 instanceof Array)&&((t2$6070=t1$6069.length),((t2$6070>=1)&&((t3$6071=t1$6069[0]),((next$6160=t3$6071),((t3$6071 instanceof Array)&&((t4$6072=t3$6071.length),(t4$6072===3))))))))))))){(target$6161=t3$6071[0]);(end$6162=t3$6071[1]);(attr$6163=t3$6071[2]);(rest$6164=Array.prototype.slice.call(t1$6069,1));(t0$6178=jumptill$5872(active$6159,start$6158,target$6161));if(((t0$6178 instanceof Array)&&((t1$6179=t0$6178.length),(t1$6179===2)))){(spans$6175=t0$6178[0]);(newactive$6176=t0$6178[1]);}else{$6818(jumptill$5872(active$6159,start$6158,target$6161),"/home/olivier/git/earl-grey/src/location.eg",4352,4393);}return spans$6175.concat(process_elements$5873(target$6161,[next$6160].concat(newactive$6176),rest$6164));}else{$6818($6058$6063);}}}});(thespans$5874=spans$5868.sort(function($6189$6192,$6190$6193){var t0$6200;var t1$6201;var t0$6207;var t1$6208;var s1$6195;var e1$6196;var s2$6197;var e2$6198;(t0$6200=$6189$6192);if(((t0$6200 instanceof Array)&&((t1$6201=t0$6200.length),(t1$6201===3)))){(s1$6195=t0$6200[0]);(e1$6196=t0$6200[1]);t0$6200[2];}else{$6818($6189$6192);}(t0$6207=$6190$6193);if(((t0$6207 instanceof Array)&&((t1$6208=t0$6207.length),(t1$6208===3)))){(s2$6197=t0$6207[0]);(e2$6198=t0$6207[1]);t0$6207[2];}else{$6818($6190$6193);}if((s1$6195===s2$6197)){return (e1$6196-e2$6198);}else{return (s1$6195-s2$6197);}}));return process_elements$5873(thespans$5874[0][0],[],thespans$5874);});(highlight_locations$5302=function(){var $index$6252;var $length$6247;var temp$6242;var $index$6301;var $length$6296;var temp$6291;var acc$6286;var srcs$6234;var locations$6229;var context$6230;var t0$6225;var $6218$6220;($6218$6220=arguments);(t0$6225=$6218$6220.length);if(((t0$6225>=1)&&(t0$6225<=2))){(locations$6229=$6218$6220[0]);(context$6230=function(){if((1>=t0$6225)){return 0;}else{return $6218$6220[1];}}());(srcs$6234=({}));(temp$6242=locations$6229);($length$6247=temp$6242.length);($index$6252=0);$6235:for(;($index$6252<$length$6247);($index$6252++)){var key$6276;var loc$6270;var cls$6271;var t0$6265;var t1$6266;var m$6260;(m$6260=temp$6242[$index$6252]);(t0$6265=m$6260);if(((t0$6265 instanceof Array)&&((t1$6266=t0$6265.length),(t1$6266===2)))){(loc$6270=t0$6265[0]);(cls$6271=t0$6265[1]);(key$6276=String((loc$6270.source&&loc$6270.source.url)));if((!$5243(srcs$6234,key$6276))){(srcs$6234[key$6276]=[]);}$5243(srcs$6234,key$6276).push([loc$6270,cls$6271]);}else{$6818(m$6260,"/home/olivier/git/earl-grey/src/location.eg",4739,4909);}}return $7022(["+div"],(((acc$6286=[])),(((temp$6291=$7196(srcs$6234))),((($length$6296=temp$6291.length)),((($index$6301=0)),function(){$6283:for(;($index$6301<$length$6296);($index$6301++)){var locs$6319;var t0$6314;var t1$6315;var m$6309;(m$6309=temp$6291[$index$6301]);(t0$6314=m$6309);if(((t0$6314 instanceof Array)&&((t1$6315=t0$6314.length),(t1$6315===2)))){t0$6314[0];(locs$6319=t0$6314[1]);acc$6286.push(highlight_locations_same_source$5303(locs$6319,context$6230));}else{$6818(m$6309,"/home/olivier/git/earl-grey/src/location.eg",4914,5008);}}}()))),acc$6286));}else{$6818($6218$6220);}});(highlight_locations_same_source$5303=function(){var $index$6373;var $length$6368;var temp$6363;var acc$6358;var t0$6403;var t1$6404;var $index$6433;var $length$6428;var temp$6423;var acc$6418;var $index$6476;var $length$6471;var temp$6466;var acc$6461;var loc$6347;var src$6348;var l1$6349;var l2$6350;var first$6351;var last$6352;var locations$6342;var context$6343;var t0$6338;var $6331$6333;($6331$6333=arguments);(t0$6338=$6331$6333.length);if(((t0$6338>=1)&&(t0$6338<=2))){(locations$6342=$6331$6333[0]);(context$6343=function(){if((1>=t0$6338)){return 0;}else{return $6331$6333[1];}}());(loc$6347=merge_locations$5304((((acc$6358=[])),(((temp$6363=locations$6342)),((($length$6368=temp$6363.length)),((($index$6373=0)),function(){$6355:for(;($index$6373<$length$6368);($index$6373++)){var x$6391;var cls$6392;var t0$6386;var t1$6387;var m$6381;(m$6381=temp$6363[$index$6373]);(t0$6386=m$6381);if(((t0$6386 instanceof Array)&&((t1$6387=t0$6386.length),(t1$6387===2)))){(x$6391=t0$6386[0]);(cls$6392=t0$6386[1]);acc$6358.push(x$6391);}else{$6818(m$6381,"/home/olivier/git/earl-grey/src/location.eg",5091,5119);}}}()))),acc$6358)));(src$6348=loc$6347.source);(t0$6403=loc$6347.linerange());if(((t0$6403 instanceof Array)&&((t1$6404=t0$6403.length),(t1$6404===2)))){(l1$6349=t0$6403[0]);(l2$6350=t0$6403[1]);}else{$6818(loc$6347.linerange(),"/home/olivier/git/earl-grey/src/location.eg",5155,5174);}(first$6351=Math.max(1,(l1$6349-context$6343)));(last$6352=Math.min(src$6348.nlines,(l2$6350+context$6343)));return $7022(["+div","location"],[$7022(["+div","source"],[$7022(["sourcefile"],(src$6348.url||"???")),(((acc$6418=[])),(((temp$6423=locations$6342)),((($length$6428=temp$6423.length)),((($index$6433=0)),function(){$6415:for(;($index$6433<$length$6428);($index$6433++)){var loc$6451;var cls$6452;var t0$6446;var t1$6447;var m$6441;(m$6441=temp$6423[$index$6433]);(t0$6446=m$6441);if(((t0$6446 instanceof Array)&&((t1$6447=t0$6446.length),(t1$6447===2)))){(loc$6451=t0$6446[0]);(cls$6452=t0$6446[1]);acc$6418.push($7022([cls$6452,"sourcepos"],loc$6451.ref()));}else{$6818(m$6441,"/home/olivier/git/earl-grey/src/location.eg",5339,5409);}}}()))),acc$6418)]),src$6348.highlight_lines(first$6351,last$6352,(((acc$6461=[])),(((temp$6466=locations$6342)),((($length$6471=temp$6466.length)),((($index$6476=0)),function(){$6458:for(;($index$6476<$length$6471);($index$6476++)){var loc$6494;var cls$6495;var t0$6489;var t1$6490;var m$6484;(m$6484=temp$6466[$index$6476]);(t0$6489=m$6484);if(((t0$6489 instanceof Array)&&((t1$6490=t0$6489.length),(t1$6490===2)))){(loc$6494=t0$6489[0]);(cls$6495=t0$6489[1]);acc$6461.push([loc$6494.start,loc$6494.end,[cls$6495]]);}else{$6818(m$6484,"/home/olivier/git/earl-grey/src/location.eg",5464,5522);}}}()))),acc$6461))]);}else{$6818($6331$6333);}});(merge_locations$5304=function($6506$6508){var $index$6565;var $length$6560;var temp$6555;var acc$6550;var $index$6604;var $length$6599;var temp$6594;var acc$6589;var start$6543;var end$6544;var locs$6539;var loc$6534;var $6511$6525;var $6512$6526;var t0$6523;var $6510$6518;var ph$6513;(ph$6513=$6506$6508);($6510$6518=ph$6513);if((($6511$6525=($6510$6518 instanceof Array))&&((t0$6523=$6510$6518.length),(t0$6523===0)))){return Location$5297(null,0,0);}else{if(($6511$6525&&(t0$6523===1))){(loc$6534=$6510$6518[0]);return loc$6534;}else{if(($6511$6525&&(t0$6523>=0))){(locs$6539=Array.prototype.slice.call($6510$6518,0));(start$6543=$5243(Math.min,(((acc$6550=[])),(((temp$6555=locs$6539)),((($length$6560=temp$6555.length)),((($index$6565=0)),function(){$6547:for(;($index$6565<$length$6560);($index$6565++)){var loc$6581;var m$6573;(m$6573=temp$6555[$index$6565]);(loc$6581=m$6573);acc$6550.push(loc$6581.start);}}()))),acc$6550)));(end$6544=$5243(Math.max,(((acc$6589=[])),(((temp$6594=locs$6539)),((($length$6599=temp$6594.length)),((($index$6604=0)),function(){$6586:for(;($index$6604<$length$6599);($index$6604++)){var loc$6620;var m$6612;(m$6612=temp$6594[$index$6604]);(loc$6620=m$6612);acc$6589.push(loc$6620.end);}}()))),acc$6589)));return Location$5297(locs$6539[0].source,start$6543,end$6544);}else{$6818($6510$6518);}}}});(__lt____lt____colon__$5305=function(x$6629,y$6630){if((!$5228(Location$5297)(x$6629.location))){(x$6629["location"]=function(){if(((!y$6630)||$5228(Location$5297)(y$6630))){return y$6630;}else{return y$6630.location;}}());}return x$6629;});(__plus____plus____colon__$5306=function(x$6638,y$6639){var rval$6643;(x$6638=function(){if(((!x$6638)||$5228(Location$5297)(x$6638))){return x$6638;}else{return x$6638.location;}}());(y$6639=function(){if(((!y$6639)||$5228(Location$5297)(y$6639))){return y$6639;}else{return y$6639.location;}}());(rval$6643=false);try{(rval$6643=merge_locations$5304([x$6638,y$6639]));}catch(excv$6649){var e$6655;(e$6655=excv$6649);(rval$6643=(void 0));}return rval$6643;});(format_error$5307=function(){var $index$6731;var $length$6726;var temp$6721;var acc$6716;var hls$6706;var locs$6707;var rval$6784;var loc$6800;var data$6780;var other$6806;var url$6773;var start$6774;var end$6775;var loc$6767;var args$6700;var fmt_args$6691;var $6663$6687;var $6664$6688;var $6665$6689;var t0$6683;var t1$6684;var t2$6685;var e$6677;var context$6678;var $6662$6679;var t0$6672;var t1$6673;var $6661$6667;($6661$6667=arguments);(t0$6672=$6661$6667.length);if(((t0$6672>=1)&&(t0$6672<=2))){(t1$6673=$6661$6667[0]);(e$6677=t1$6673);($6662$6679=t1$6673);(context$6678=function(){if((1>=t0$6672)){return 0;}else{return $6661$6667[1];}}());(fmt_args$6691=function(e$6695){if((e$6695.args&&e$6695.args.length)){return $7022(["error_args"],repr$5294(e$6695.args));}else{return "";}});(t0$6683=$6662$6679);if(($5228($6831(["syntax"]))(t0$6683)&&($7211(t0$6683,"args")&&((t1$6684=t0$6683.args),((t1$6684 instanceof Array)&&((t2$6685=t1$6684.length),(t2$6685===1))))))){(args$6700=t1$6684[0]);(hls$6706=["hl1","hl2","hl3","hl4"]);(locs$6707=(((acc$6716=[])),(((temp$6721=$7000($7196(args$6700)))),((($length$6726=temp$6721.length)),((($index$6731=0)),function(){$6713:for(;($index$6731<$length$6726);($index$6731++)){var i$6751;var key$6752;var arg$6753;var t0$6744;var t1$6745;var t2$6746;var t3$6747;var m$6739;(m$6739=temp$6721[$index$6731]);(t0$6744=m$6739);if(((t0$6744 instanceof Array)&&((t1$6745=t0$6744.length),((t1$6745===2)&&((i$6751=t0$6744[0]),((t2$6746=t0$6744[1]),((t2$6746 instanceof Array)&&((t3$6747=t2$6746.length),((t3$6747===2)&&((key$6752=t2$6746[0]),((arg$6753=t2$6746[1]),(arg$6753&&arg$6753.location)))))))))))){acc$6716.push([arg$6753.location,$5243(hls$6706,(i$6751%4))]);}else{false;}}}()))),acc$6716));return $7022(["+div"],[$7022(["error"],[$7022(["error_type"],e$6677.name),$7022(["error_message"],e$6677.message)]),$7022(["error_args","syntax"],repr$5294(args$6700)),highlight_locations$5302(locs$6707,context$6678)]);}else{if((($6664$6688=$7211(t0$6683,"location"))&&((t1$6684=t0$6683.location),$5228(Location$5297)(t1$6684)))){(loc$6767=t1$6684);return $7022(["+div"],[$7022(["error"],[$7022(["error_type"],e$6677.name),$7022(["error_message"],e$6677.message)]),fmt_args$6691(e$6677),highlight_locations$5302([[loc$6767,"hl1"]],context$6678),$7022(["traceback"],(e$6677.stack||""))]);}else{if(($6664$6688&&((t1$6684 instanceof Array)&&((t2$6685=t1$6684.length),((t2$6685===4)&&(t1$6684[0]==="location")))))){(url$6773=t1$6684[1]);(start$6774=t1$6684[2]);(end$6775=t1$6684[3]);(data$6780=(((rval$6784=false)),(function(){try{(rval$6784=fs$5295.readFileSync(url$6773,"utf8"));}catch(excv$6790){var e$6796;(e$6796=excv$6790);(rval$6784=null);}}(),rval$6784)));if(data$6780){(loc$6800=Location$5297(Source$5296(data$6780,url$6773),start$6774,end$6775));return $7022(["+div"],[$7022(["error"],[$7022(["error_type"],e$6677.name),$7022(["error_message"],e$6677.message)]),fmt_args$6691(e$6677),highlight_locations$5302([[loc$6800,"hl1"]],context$6678),$7022(["traceback"],($7022([],e$6677.stack)||""))]);}else{return $7022(["+div"],[$7022(["error"],[$7022(["error_type"],e$6677.name),$7022(["error_message"],e$6677.message)]),fmt_args$6691(e$6677),$7022(["traceback"],($7022([],e$6677.stack)||e$6677))]);}}else{(other$6806=$6662$6679);return $7022(["+div"],[$7022(["error"],[$7022(["error_type"],e$6677.name),$7022(["error_message"],e$6677.message)]),fmt_args$6691(e$6677),$7022(["traceback"],$7022([],e$6677.stack))]);}}}}else{$6818($6661$6667);}});(display_error$5308=function(e$6814){return __lt____gt__$5293(null,format_error$5307(e$6814));});(exports["Source"]=Source$5296);(exports["Location"]=Location$5297);(exports["highlight"]=highlight$5298);(exports["highlight_locations"]=highlight_locations$5302);(exports["merge_locations"]=merge_locations$5304);(exports["<<:"]=__lt____lt____colon__$5305);(exports["++:"]=__plus____plus____colon__$5306);(exports["format_error"]=format_error$5307);(exports["display_error"]=display_error$5308);

},{"./pp":11,"./util":14,"fs":15}],8:[function(require,module,exports){
var $7410=function(type$7412){var f$7415;(f$7415=type$7412["::check"]);if((f$7415===(void 0))){return function(value$7420){return (value$7420 instanceof type$7412);};}else{return function(value$7423){return f$7415.call(type$7412,value$7423);};}};
var $7425=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $7426=function(dest$7428,values$7429){var k$7434;(k$7434=null);$7432:for(k$7434 in values$7429){if(values$7429.hasOwnProperty(k$7434)){(dest$7428[k$7434]=values$7429[k$7434]);}}return dest$7428;};
var $7438=function($7439$7441){var ph$7445;(ph$7445=$7439$7441);var $7443$7450;($7443$7450=ph$7445);var bridge$7444$7455;var x$7459;(bridge$7444$7455=$7443$7450);if((((typeof(bridge$7444$7455)==="string")&&((x$7459=bridge$7444$7455),true))||((typeof(bridge$7444$7455)==="number")&&((x$7459=bridge$7444$7455),true)))){return ["value",x$7459];}else{var other$7466;(other$7466=$7443$7450);return other$7466["::serialize_ast"]();}};
var send$7250;(send$7250=function(obj$7255,$7253$7256){var ph$7260;var msg$7261;var t0$7263;(t0$7263=$7253$7256);(msg$7261=t0$7263);(ph$7260=t0$7263);var $7258$7267;($7258$7267=ph$7260);var bridge$7259$7272;(bridge$7259$7272=$7258$7267);if(((typeof(bridge$7259$7272)==="string")||(typeof(bridge$7259$7272)==="number"))){return obj$7255[msg$7261];}else{var other$7280;(other$7280=$7258$7267);return obj$7255["::send"](msg$7261);}});(Array[":::project"]=function($7283$7285){var ph$7288;var value$7289;var t0$7291;(t0$7291=$7283$7285);(value$7289=t0$7291);(ph$7288=t0$7291);var $7287$7295;($7287$7295=ph$7288);if($7410(Array)($7287$7295)){return [true,value$7289];}else{$7287$7295;return [true,[value$7289]];}});(Array.prototype["::check"]=function(value$7309){if((value$7309 instanceof Array)){var i$7314;(i$7314=0);$7312:for(;(i$7314<this.length);(i$7314++)){if(($7425(this,i$7314)!==$7425(value$7309,i$7314))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $7426(this.slice(0),this);});(Array.prototype[":::project"]=function(value$7325){if((value$7325 instanceof Array)){var i$7330;(i$7330=0);$7328:for(;(i$7330<this.length);(i$7330++)){if(($7425(this,i$7330)!==$7425(value$7325,i$7330))){return [true,[value$7325]];}}return [true,value$7325.slice(this.length)];}else{return [true,[value$7325]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($7438));});(RegExp.prototype["::check"]=function($7340$7342){var ph$7345;(ph$7345=$7340$7342);var $7344$7350;($7344$7350=ph$7345);var value$7358;if((typeof($7344$7350)==="string")){(value$7358=$7344$7350);if(value$7358.match(this)){return true;}else{return false;}}else{var other$7363;(other$7363=$7344$7350);return false;}});(RegExp.prototype[":::project"]=function($7365$7367){var ph$7370;(ph$7370=$7365$7367);var $7369$7375;($7369$7375=ph$7370);var value$7383;if((typeof($7369$7375)==="string")){(value$7383=$7369$7375);var $7386$7388;($7386$7388=value$7383.match(this));var m$7396;if(($7386$7388===null)){(m$7396=$7386$7388);return [false,null];}else{var m$7401;(m$7401=$7386$7388);return [true,m$7401];}}else{var other$7405;(other$7405=$7369$7375);return [false,null];}});(Function.prototype["::send"]=function(args$7408){return this.apply(this,args$7408);});
var $7909=function(arr$7911){var results$7915;var l$7916;(results$7915=[]);(l$7916=arr$7911.length);var i$7924;(i$7924=0);$7914:for(;(i$7924<l$7916);(i$7924++)){results$7915.push([i$7924,$7425(arr$7911,i$7924)]);}return results$7915;};
var $7740=function(){var $7741$7743;($7741$7743=function(tags$7747){var it$0$7750;(it$0$7750=function(){if((!$7410($7741$7743)(this))){return Object.create($7741$7743.prototype);}else{return this;}}());(it$0$7750["tags"]=tags$7747);return it$0$7750;});($7741$7743.prototype["create"]=function(){var $7759$7761;($7759$7761=arguments);var t0$7766;var message$7770;var args$7771;(t0$7766=$7759$7761.length);if((t0$7766>=0)){(message$7770=function(){if((0>=t0$7766)){return "";}else{return $7759$7761[0];}}());(args$7771=Array.prototype.slice.call($7759$7761,1));var it$0$7775;(it$0$7775=this);var self$7780;(self$7780=this);var e$7785;(e$7785=Error(message$7770));(e$7785["::tags"]=it$0$7775.tags);(e$7785["args"]=args$7771);var temp$7793;(temp$7793=$7909(args$7771));var $length$7798;($length$7798=temp$7793.length);var $index$7803;($index$7803=0);$7786:for(;($index$7803<$length$7798);($index$7803++)){var m$7811;(m$7811=temp$7793[$index$7803]);var t0$7816;var t1$7817;var i$7821;var arg$7822;(t0$7816=m$7811);if(((t0$7816 instanceof Array)&&((t1$7817=t0$7816.length),(t1$7817===2)))){(i$7821=t0$7816[0]);(arg$7822=t0$7816[1]);(e$7785[i$7821]=arg$7822);}else{$7727(m$7811);}}(e$7785["length"]=args$7771.length);(e$7785["name"]=["E"].concat(it$0$7775.tags).join("."));return e$7785;}else{$7727($7759$7761);}});($7741$7743.prototype["::check"]=function(e$7833){var it$0$7836;(it$0$7836=this);var self$7841;(self$7841=this);var tags$7846;if(((!e$7833)||(!$7410(Error)(e$7833)))){return false;}(tags$7846=(e$7833["::tags"]||[]));var temp$7855;(temp$7855=it$0$7836.tags);var $length$7860;($length$7860=temp$7855.length);var $index$7865;($index$7865=0);$7847:for(;($index$7865<$length$7860);($index$7865++)){var m$7873;(m$7873=temp$7855[$index$7865]);var tag$7881;(tag$7881=m$7873);if((tags$7846.indexOf(tag$7881)===-1)){return false;}else{false;}}return true;});($7741$7743.prototype["::deconstruct"]=function(e$7889){var it$0$7892;(it$0$7892=this);var self$7897;(self$7897=this);return e$7889.args;});$7426($7741$7743,$7426(function(){var accum$7902;(accum$7902=({}));(accum$7902["::name"]="$7741");return accum$7902;}(),function(){var accum$7906;(accum$7906=({}));(accum$7906["::egclass"]=true);return accum$7906;}()));return $7741$7743;}();
var $7727=function(value$7729,url$7730,start$7731,end$7732){var err$7735;(err$7735=$7740(["match"]).create("Could not find a match for value",({"value":value$7729})));if(url$7730){(err$7735["location"]=["location",url$7730,start$7731,end$7732]);}throw err$7735;};var hoist$7470;var hoistable$7471;var not_hoistable$7472;var hoist_helper$7473;(hoist$7470=function(expr$7477){var t0$7483;var t1$7484;var b$7480;var inner$7481;(t0$7483=hoist_helper$7473(expr$7477));if(((t0$7483 instanceof Array)&&((t1$7484=t0$7483.length),(t1$7484===2)))){(b$7480=t0$7483[0]);(inner$7481=t0$7483[1]);}else{$7727(hoist_helper$7473(expr$7477),"/home/olivier/git/earl-grey/src/opt.eg",50,72);}return ["scope",inner$7481,b$7480];});(hoistable$7471=["send","array","object","multi","if","assign","js_break","js_continue","js_return","js_delete","js_throw","js_try","js_new"]);(not_hoistable$7472=["void","js_while","js_for","js_for_in","js_label"]);(hoist_helper$7473=function($7498$7500){var t0$7511;var x$7533;var x$7538;var bridge$7504$7530;var x$7543;var t0$7559;var t1$7560;var newbody$7556;var inner$7557;var t0$7575;var t1$7576;var newbody$7572;var inner$7573;var $index$7615;var $length$7610;var temp$7605;var acc$7600;var accum$7590;var newargs$7591;var $index$7674;var $length$7669;var temp$7664;var acc$7659;var newargs$7653;var other$7723;var type$7646;var args$7647;var type$7583;var args$7584;var vars$7567;var body$7568;var vars$7550;var body$7551;var $7505$7523;var $7506$7524;var $7507$7525;var bridge$7503$7520;var t0$7521;var $7502$7515;var ph$7508;var expr$7509;(t0$7511=$7498$7500);(expr$7509=t0$7511);(ph$7508=t0$7511);($7502$7515=ph$7508);(bridge$7503$7520=$7502$7515);if((((bridge$7504$7530=bridge$7503$7520),((((x$7533=bridge$7504$7530)),((x$7533 instanceof Array)&&(x$7533[0]==="symbol")))||(((x$7538=bridge$7504$7530)),((x$7538 instanceof Array)&&(x$7538[0]==="value")))))||(((x$7543=bridge$7503$7520)),((x$7543 instanceof Array)&&(x$7543[0]==="variable"))))){return [expr$7509,[]];}else{if((($7505$7523=($7502$7515 instanceof Array))&&((t0$7521=$7502$7515.length),(($7507$7525=(t0$7521===3))&&($7502$7515[0]==="scope"))))){(vars$7550=$7502$7515[1]);(body$7551=$7502$7515[2]);(t0$7559=hoist_helper$7473(body$7551));if(((t0$7559 instanceof Array)&&((t1$7560=t0$7559.length),(t1$7560===2)))){(newbody$7556=t0$7559[0]);(inner$7557=t0$7559[1]);}else{$7727(hoist_helper$7473(body$7551),"/home/olivier/git/earl-grey/src/opt.eg",447,472);}return [newbody$7556,inner$7557.concat(vars$7550)];}else{if(($7507$7525&&($7502$7515[0]==="lambda"))){(vars$7567=$7502$7515[1]);(body$7568=$7502$7515[2]);(t0$7575=hoist_helper$7473(body$7568));if(((t0$7575 instanceof Array)&&((t1$7576=t0$7575.length),(t1$7576===2)))){(newbody$7572=t0$7575[0]);(inner$7573=t0$7575[1]);}else{$7727(hoist_helper$7473(body$7568),"/home/olivier/git/earl-grey/src/opt.eg",581,606);}return [["lambda",vars$7567,["scope",inner$7573,newbody$7572]],[]];}else{if(($7505$7523&&(($7507$7525=(t0$7521>=1))&&((type$7583=$7502$7515[0]),((args$7584=Array.prototype.slice.call($7502$7515,1)),(hoistable$7471.indexOf(type$7583)!==-1)))))){(accum$7590=[]);(newargs$7591=(((acc$7600=[])),(((temp$7605=args$7584)),((($length$7610=temp$7605.length)),((($index$7615=0)),function(){$7597:for(;($index$7615<$length$7610);($index$7615++)){var t0$7637;var t1$7638;var b$7634;var inner$7635;var arg$7631;var m$7623;(m$7623=temp$7605[$index$7615]);(arg$7631=m$7623);acc$7600.push((((t0$7637=hoist_helper$7473(arg$7631)),function(){if(((t0$7637 instanceof Array)&&((t1$7638=t0$7637.length),(t1$7638===2)))){(b$7634=t0$7637[0]);(inner$7635=t0$7637[1]);}else{return $7727(hoist_helper$7473(arg$7631),"/home/olivier/git/earl-grey/src/opt.eg",779,806);}}()),(accum$7590=accum$7590.concat(inner$7635)),b$7634));}}()))),acc$7600));return [[type$7583].concat(newargs$7591),accum$7590];}else{if(($7507$7525&&((type$7646=$7502$7515[0]),((args$7647=Array.prototype.slice.call($7502$7515,1)),(not_hoistable$7472.indexOf(type$7646)!==-1))))){(newargs$7653=(((acc$7659=[])),(((temp$7664=args$7647)),((($length$7669=temp$7664.length)),((($index$7674=0)),function(){$7656:for(;($index$7674<$length$7669);($index$7674++)){var t0$7697;var t1$7698;var other$7718;var t0$7709;var $7693$7704;var b$7694;var inner$7695;var arg$7690;var m$7682;(m$7682=temp$7664[$index$7674]);(arg$7690=m$7682);acc$7659.push((((t0$7697=hoist_helper$7473(arg$7690)),function(){if(((t0$7697 instanceof Array)&&((t1$7698=t0$7697.length),(t1$7698===2)))){(b$7694=t0$7697[0]);(inner$7695=t0$7697[1]);}else{return $7727(hoist_helper$7473(arg$7690),"/home/olivier/git/earl-grey/src/opt.eg",981,1008);}}()),((($7693$7704=inner$7695)),function(){if((($7693$7704 instanceof Array)&&((t0$7709=$7693$7704.length),(t0$7709===0)))){return b$7694;}else{(other$7718=$7693$7704);return ["scope",inner$7695,b$7694];}}())));}}()))),acc$7659));return [[type$7646].concat(newargs$7653),[]];}else{(other$7723=$7502$7515);throw $7740(["syntax","illegal"]).create("Illegal node -- this should not happen.",({"node":other$7723}));}}}}}});(exports["hoist"]=hoist$7470);

},{}],9:[function(require,module,exports){
var $8092=function(type$8094){var f$8097;(f$8097=type$8094["::check"]);if((f$8097===(void 0))){return function(value$8102){return (value$8102 instanceof type$8094);};}else{return function(value$8105){return f$8097.call(type$8094,value$8105);};}};
var $8107=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $8108=function(dest$8110,values$8111){var k$8116;(k$8116=null);$8114:for(k$8116 in values$8111){if(values$8111.hasOwnProperty(k$8116)){(dest$8110[k$8116]=values$8111[k$8116]);}}return dest$8110;};
var $8120=function($8121$8123){var ph$8127;(ph$8127=$8121$8123);var $8125$8132;($8125$8132=ph$8127);var bridge$8126$8137;var x$8141;(bridge$8126$8137=$8125$8132);if((((typeof(bridge$8126$8137)==="string")&&((x$8141=bridge$8126$8137),true))||((typeof(bridge$8126$8137)==="number")&&((x$8141=bridge$8126$8137),true)))){return ["value",x$8141];}else{var other$8148;(other$8148=$8125$8132);return other$8148["::serialize_ast"]();}};
var send$7932;(send$7932=function(obj$7937,$7935$7938){var ph$7942;var msg$7943;var t0$7945;(t0$7945=$7935$7938);(msg$7943=t0$7945);(ph$7942=t0$7945);var $7940$7949;($7940$7949=ph$7942);var bridge$7941$7954;(bridge$7941$7954=$7940$7949);if(((typeof(bridge$7941$7954)==="string")||(typeof(bridge$7941$7954)==="number"))){return obj$7937[msg$7943];}else{var other$7962;(other$7962=$7940$7949);return obj$7937["::send"](msg$7943);}});(Array[":::project"]=function($7965$7967){var ph$7970;var value$7971;var t0$7973;(t0$7973=$7965$7967);(value$7971=t0$7973);(ph$7970=t0$7973);var $7969$7977;($7969$7977=ph$7970);if($8092(Array)($7969$7977)){return [true,value$7971];}else{$7969$7977;return [true,[value$7971]];}});(Array.prototype["::check"]=function(value$7991){if((value$7991 instanceof Array)){var i$7996;(i$7996=0);$7994:for(;(i$7996<this.length);(i$7996++)){if(($8107(this,i$7996)!==$8107(value$7991,i$7996))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $8108(this.slice(0),this);});(Array.prototype[":::project"]=function(value$8007){if((value$8007 instanceof Array)){var i$8012;(i$8012=0);$8010:for(;(i$8012<this.length);(i$8012++)){if(($8107(this,i$8012)!==$8107(value$8007,i$8012))){return [true,[value$8007]];}}return [true,value$8007.slice(this.length)];}else{return [true,[value$8007]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($8120));});(RegExp.prototype["::check"]=function($8022$8024){var ph$8027;(ph$8027=$8022$8024);var $8026$8032;($8026$8032=ph$8027);var value$8040;if((typeof($8026$8032)==="string")){(value$8040=$8026$8032);if(value$8040.match(this)){return true;}else{return false;}}else{var other$8045;(other$8045=$8026$8032);return false;}});(RegExp.prototype[":::project"]=function($8047$8049){var ph$8052;(ph$8052=$8047$8049);var $8051$8057;($8051$8057=ph$8052);var value$8065;if((typeof($8051$8057)==="string")){(value$8065=$8051$8057);var $8068$8070;($8068$8070=value$8065.match(this));var m$8078;if(($8068$8070===null)){(m$8078=$8068$8070);return [false,null];}else{var m$8083;(m$8083=$8068$8070);return [true,m$8083];}}else{var other$8087;(other$8087=$8051$8057);return [false,null];}});(Function.prototype["::send"]=function(args$8090){return this.apply(this,args$8090);});
var $10229=function(arr$10231){var results$10235;var l$10236;(results$10235=[]);(l$10236=arr$10231.length);var i$10244;(i$10244=0);$10234:for(;(i$10244<l$10236);(i$10244++)){results$10235.push([i$10244,$8107(arr$10231,i$10244)]);}return results$10235;};
var $10060=function(){var $10061$10063;($10061$10063=function(tags$10067){var it$0$10070;(it$0$10070=function(){if((!$8092($10061$10063)(this))){return Object.create($10061$10063.prototype);}else{return this;}}());(it$0$10070["tags"]=tags$10067);return it$0$10070;});($10061$10063.prototype["create"]=function(){var $10079$10081;($10079$10081=arguments);var t0$10086;var message$10090;var args$10091;(t0$10086=$10079$10081.length);if((t0$10086>=0)){(message$10090=function(){if((0>=t0$10086)){return "";}else{return $10079$10081[0];}}());(args$10091=Array.prototype.slice.call($10079$10081,1));var it$0$10095;(it$0$10095=this);var self$10100;(self$10100=this);var e$10105;(e$10105=Error(message$10090));(e$10105["::tags"]=it$0$10095.tags);(e$10105["args"]=args$10091);var temp$10113;(temp$10113=$10229(args$10091));var $length$10118;($length$10118=temp$10113.length);var $index$10123;($index$10123=0);$10106:for(;($index$10123<$length$10118);($index$10123++)){var m$10131;(m$10131=temp$10113[$index$10123]);var t0$10136;var t1$10137;var i$10141;var arg$10142;(t0$10136=m$10131);if(((t0$10136 instanceof Array)&&((t1$10137=t0$10136.length),(t1$10137===2)))){(i$10141=t0$10136[0]);(arg$10142=t0$10136[1]);(e$10105[i$10141]=arg$10142);}else{$10047(m$10131);}}(e$10105["length"]=args$10091.length);(e$10105["name"]=["E"].concat(it$0$10095.tags).join("."));return e$10105;}else{$10047($10079$10081);}});($10061$10063.prototype["::check"]=function(e$10153){var it$0$10156;(it$0$10156=this);var self$10161;(self$10161=this);var tags$10166;if(((!e$10153)||(!$8092(Error)(e$10153)))){return false;}(tags$10166=(e$10153["::tags"]||[]));var temp$10175;(temp$10175=it$0$10156.tags);var $length$10180;($length$10180=temp$10175.length);var $index$10185;($index$10185=0);$10167:for(;($index$10185<$length$10180);($index$10185++)){var m$10193;(m$10193=temp$10175[$index$10185]);var tag$10201;(tag$10201=m$10193);if((tags$10166.indexOf(tag$10201)===-1)){return false;}else{false;}}return true;});($10061$10063.prototype["::deconstruct"]=function(e$10209){var it$0$10212;(it$0$10212=this);var self$10217;(self$10217=this);return e$10209.args;});$8108($10061$10063,$8108(function(){var accum$10222;(accum$10222=({}));(accum$10222["::name"]="$10061");return accum$10222;}(),function(){var accum$10226;(accum$10226=({}));(accum$10226["::egclass"]=true);return accum$10226;}()));return $10061$10063;}();
var $10047=function(value$10049,url$10050,start$10051,end$10052){var err$10055;(err$10055=$10060(["match"]).create("Could not find a match for value",({"value":value$10049})));if(url$10050){(err$10055["location"]=["location",url$10050,start$10051,end$10052]);}throw err$10055;};
var $10251=function(obj$10253){var results$10257;(results$10257=[]);var k$10262;(k$10262=null);$10256:for(k$10262 in obj$10253){if(Object.prototype.hasOwnProperty.call(obj$10253,k$10262)){results$10257.push([k$10262,$8107(obj$10253,k$10262)]);}}return results$10257;};
var $10266=function(arrays$10268){var results$10271;(results$10271=[]);var temp$10279;(temp$10279=arrays$10268);var $length$10284;($length$10284=temp$10279.length);var $index$10289;($index$10289=0);$10272:for(;($index$10289<$length$10284);($index$10289++)){var m$10297;(m$10297=temp$10279[$index$10289]);var a$10305;(a$10305=m$10297);(results$10271=results$10271.concat(a$10305));}return results$10271;};
var $10307=function(type$10309){return function(value$10312){var f$10315;(f$10315=type$10309[":::project"]);if((f$10315===(void 0))){(f$10315=type$10309["::project"]);if((f$10315===(void 0))){return [true,type$10309(value$10312)];}else{var rval$10321;(rval$10321=false);try{(rval$10321=[true,f$10315(value$10312)]);}catch(excv$10327){var e$10333;(e$10333=excv$10327);(rval$10321=[false,null]);}return rval$10321;}}else{return f$10315.call(type$10309,value$10312);}};};
var $10456=Object.keys;
var $10457=function($10458$10460,key$10461){var ph$10465;(ph$10465=$10458$10460);var $10463$10470;($10463$10470=ph$10465);var bridge$10464$10475;(bridge$10464$10475=$10463$10470);if(((bridge$10464$10475===null)||(bridge$10464$10475===(void 0)))){return false;}else{var x$10483;if((typeof($10463$10470)==="string")){(x$10483=$10463$10470);return (key$10461 in String.prototype);}else{var x$10488;if((typeof($10463$10470)==="number")){(x$10488=$10463$10470);return (key$10461 in Number.prototype);}else{var x$10493;(x$10493=$10463$10470);return (key$10461 in x$10493);}}}};
var $10335=function($10336$10338,b$10339){var ph$10345;var a$10346;var t0$10348;(t0$10348=$10336$10338);(a$10346=t0$10348);(ph$10345=t0$10348);var $10341$10352;($10341$10352=ph$10345);var bridge$10342$10357;if(($10341$10352===b$10339)){return true;}else{(bridge$10342$10357=$10341$10352);if((function(){var bridge$10343$10367;(bridge$10343$10367=bridge$10342$10357);return (function(){var bridge$10344$10370;(bridge$10344$10370=bridge$10343$10367);return ((typeof(bridge$10344$10370)==="number")||(typeof(bridge$10344$10370)==="string"));}()||(bridge$10343$10367===null));}()||(bridge$10342$10357===(void 0)))){return false;}else{if($8092(Array)($10341$10352)){if(((!$8092(Array)(b$10339))||(a$10346.length!==b$10339.length))){return false;}var i$10381;(i$10381=0);$10378:for(;(i$10381<a$10346.length);(i$10381++)){if((!$10335(a$10346[i$10381],b$10339[i$10381]))){return false;}}return true;}else{$10341$10352;if(((Object.getPrototypeOf(a$10346)===Object.prototype)&&(Object.getPrototypeOf(b$10339)===Object.prototype))){var ka$10394;(ka$10394=$10456(a$10346));if((!$10335(ka$10394.sort(),$10456(b$10339).sort()))){return false;}var temp$10403;(temp$10403=ka$10394);var $length$10408;($length$10408=temp$10403.length);var $index$10413;($index$10413=0);$10395:for(;($index$10413<$length$10408);($index$10413++)){var m$10421;(m$10421=temp$10403[$index$10413]);var k$10429;(k$10429=m$10421);if((!$10335(a$10346[k$10429],b$10339[k$10429]))){return false;}}return true;}else{if($10457($10341$10352,"::serialize")){$10341$10352["::serialize"];var $10436$10438;($10436$10438=b$10339);if($10457($10436$10438,"::serialize")){$10436$10438["::serialize"];return $10335(a$10346["::serialize"](),b$10339["::serialize"]());}else{var otherwise$10450;(otherwise$10450=$10436$10438);return false;}}else{var otherwise$10454;(otherwise$10454=$10341$10352);return false;}}}}}};
var $10495=function(pairs$10497){var rval$10500;(rval$10500=({}));var temp$10508;(temp$10508=pairs$10497);var $length$10513;($length$10513=temp$10508.length);var $index$10518;($index$10518=0);$10501:for(;($index$10518<$length$10513);($index$10518++)){var m$10526;(m$10526=temp$10508[$index$10518]);var t0$10531;var t1$10532;var k$10536;var v$10537;(t0$10531=m$10526);if(((t0$10531 instanceof Array)&&((t1$10532=t0$10531.length),(t1$10532===2)))){(k$10536=t0$10531[0]);(v$10537=t0$10531[1]);(rval$10500[k$10536]=v$10537);}else{$10047(m$10526);}}return rval$10500;};var accum$8568;var accum$8572;var accum$8754;var accum$9101;var accum$9105;var accum$9269;var accum$9273;var accum$9277;var accum$9281;var accum$9285;var accum$9292;var accum$9296;var accum$9300;var accum$9304;var accum$9308;var eg_groups$9114;var eg_prio$9115;var $8152$8153;var __lt____lt____colon__$8154;var __plus____plus____colon__$8155;var transform$8156;var OperatorGroups$8157;var parse_op_description$8158;var eg_groups$8159;var SimplePriority$8160;var MAX$8161;var eg_order$8162;var DONE$8163;var NONE$8164;var LEFT$8165;var RIGHT$8166;var BOTH$8167;var oparse$8168;var finalize$8169;var parse$8170;($8152$8153=require("./location"));(__lt____lt____colon__$8154=$8152$8153["<<:"]);(__plus____plus____colon__$8155=$8152$8153["++:"]);(transform$8156=function(expr$8183,cb$8184){var rval$8198;var tr$8187;var result$8188;(tr$8187=function(x$8192){return transform$8156(x$8192,cb$8184);});(result$8188=(((rval$8198=false)),(function(){try{(rval$8198=cb$8184.call(tr$8187,expr$8183));}catch(excv$8204){var name$8244;var args$8245;var v$8239;var s$8234;var $8213$8224;var $8214$8225;var $8215$8226;var t0$8222;var $8212$8217;var e$8210;(e$8210=excv$8204);(rval$8198=((($8212$8217=expr$8183)),function(){if((($8213$8224=($8212$8217 instanceof Array))&&((t0$8222=$8212$8217.length),((t0$8222===1)&&($8212$8217[0]==="void"))))){return ["void"];}else{if(($8213$8224&&(($8215$8226=(t0$8222===2))&&($8212$8217[0]==="symbol")))){(s$8234=$8212$8217[1]);return expr$8183;}else{if(($8215$8226&&($8212$8217[0]==="value"))){(v$8239=$8212$8217[1]);return expr$8183;}else{if(($8213$8224&&(t0$8222>=1))){(name$8244=$8212$8217[0]);(args$8245=Array.prototype.slice.call($8212$8217,1));return [name$8244].concat(args$8245.map(tr$8187));}else{$10047($8212$8217);}}}}}()));}}(),rval$8198)));return __lt____lt____colon__$8154(result$8188,expr$8183);});(OperatorGroups$8157=function(groups$8255){var $index$8288;var $length$8283;var temp$8278;var acc$8273;var $index$8330;var $length$8325;var temp$8320;var acc$8315;var $index$8407;var $length$8402;var temp$8397;var acc$8392;var itg$8264;var it$0$8258;(it$0$8258=function(){if((!$8092(OperatorGroups$8157)(this))){return Object.create(OperatorGroups$8157.prototype);}else{return this;}}());(itg$8264=$10251(groups$8255));(it$0$8258["gnames"]=(((acc$8273=[])),(((temp$8278=itg$8264)),((($length$8283=temp$8278.length)),((($index$8288=0)),function(){$8270:for(;($index$8288<$length$8283);($index$8288++)){var name$8306;var t0$8301;var t1$8302;var m$8296;(m$8296=temp$8278[$index$8288]);(t0$8301=m$8296);if(((t0$8301 instanceof Array)&&((t1$8302=t0$8301.length),(t1$8302===2)))){(name$8306=t0$8301[0]);t0$8301[1];acc$8273.push(name$8306);}else{$10047(m$8296,"/home/olivier/git/earl-grey/src/parse.eg",504,530);}}}()))),acc$8273));(it$0$8258["groups"]=(((acc$8315=[])),(((temp$8320=itg$8264)),((($length$8325=temp$8320.length)),((($index$8330=0)),function(){$8312:for(;($index$8330<$length$8325);($index$8330++)){var $index$8371;var $length$8366;var temp$8361;var acc$8356;var name$8348;var descrs$8349;var t0$8343;var t1$8344;var m$8338;(m$8338=temp$8320[$index$8330]);(t0$8343=m$8338);if(((t0$8343 instanceof Array)&&((t1$8344=t0$8343.length),(t1$8344===2)))){(name$8348=t0$8343[0]);(descrs$8349=t0$8343[1]);acc$8315.push($10266((((acc$8356=[])),(((temp$8361=descrs$8349)),((($length$8366=temp$8361.length)),((($index$8371=0)),function(){$8353:for(;($index$8371<$length$8366);($index$8371++)){var descr$8387;var m$8379;(m$8379=temp$8361[$index$8371]);(descr$8387=m$8379);acc$8356.push(parse_op_description$8158(descr$8387));}}()))),acc$8356)));}else{$10047(m$8338,"/home/olivier/git/earl-grey/src/parse.eg",548,645);}}}()))),acc$8315));(it$0$8258["fns"]=[]);(it$0$8258["to_gid"]=({"IFX":({"wide":({}),"short":({})}),"PFX":({"wide":({}),"short":({})}),"SFX":({"wide":({}),"short":({})})}));(acc$8392=[]);(temp$8397=$10229(it$0$8258.groups));($length$8402=temp$8397.length);($index$8407=0);$8265:for(;($index$8407<$length$8402);($index$8407++)){var $index$8448;var $length$8443;var temp$8438;var acc$8433;var i$8425;var group$8426;var t0$8420;var t1$8421;var m$8415;(m$8415=temp$8397[$index$8407]);(t0$8420=m$8415);if(((t0$8420 instanceof Array)&&((t1$8421=t0$8420.length),(t1$8421===2)))){(i$8425=t0$8420[0]);(group$8426=t0$8420[1]);acc$8392.push((((acc$8433=[])),(((temp$8438=group$8426)),((($length$8443=temp$8438.length)),((($index$8448=0)),function(){$8430:for(;($index$8448<$length$8443);($index$8448++)){var f$8474;var fixity$8466;var width$8467;var name$8468;var t0$8461;var t1$8462;var m$8456;(m$8456=temp$8438[$index$8448]);(t0$8461=m$8456);if(((t0$8461 instanceof Array)&&((t1$8462=t0$8461.length),(t1$8462===3)))){(fixity$8466=t0$8461[0]);(width$8467=t0$8461[1]);(name$8468=t0$8461[2]);acc$8433.push(($8107($8107(it$0$8258.to_gid,fixity$8466),width$8467)[name$8468]=i$8425));}else{(f$8474=m$8456);acc$8433.push(it$0$8258.fns.push([f$8474,i$8425]));}}}()))),acc$8433));}else{$10047(m$8415,"/home/olivier/git/earl-grey/src/parse.eg",812,1014);}}acc$8392;return it$0$8258;});(OperatorGroups$8157.prototype["get_name"]=function(o$8482){var self$8490;var it$0$8485;(it$0$8485=this);(self$8490=this);return $8107(it$0$8485.gnames,it$0$8485.get(o$8482));});(OperatorGroups$8157.prototype["get"]=function($8496$8498){var t0$8505;var t1$8506;var $index$8541;var $length$8536;var temp$8531;var attempt$8522;var self$8517;var it$0$8512;var o$8500;var fixity$8501;var width$8502;var name$8503;(t0$8505=$8496$8498);(o$8500=t0$8505);if(((t0$8505 instanceof Array)&&((t1$8506=t0$8505.length),(t1$8506===3)))){(fixity$8501=t0$8505[0]);(width$8502=t0$8505[1]);(name$8503=t0$8505[2]);}else{$10047($8496$8498);}(it$0$8512=this);(self$8517=this);(attempt$8522=$8107($8107($8107(it$0$8512.to_gid,fixity$8501),width$8502),name$8503));if((attempt$8522===(void 0))){(temp$8531=it$0$8512.fns);($length$8536=temp$8531.length);($index$8541=0);$8527:for(;($index$8541<$length$8536);($index$8541++)){var f$8559;var i$8560;var t0$8554;var t1$8555;var m$8549;(m$8549=temp$8531[$index$8541]);(t0$8554=m$8549);if(((t0$8554 instanceof Array)&&((t1$8555=t0$8554.length),(t1$8555===2)))){(f$8559=t0$8554[0]);(i$8560=t0$8554[1]);if(f$8559(o$8500)){return i$8560;}}else{$10047(m$8549,"/home/olivier/git/earl-grey/src/parse.eg",1193,1276);}}throw $10060(["syntax","unknown_operator"]).create(("Unknown operator: "+[true,String(o$8500)][1]),({"operator":o$8500}));}else{return attempt$8522;}});$8108(OperatorGroups$8157,$8108(((accum$8568=({})),((accum$8568["::name"]="OperatorGroups"),accum$8568)),((accum$8572=({})),((accum$8572["::egclass"]=true),accum$8572))));OperatorGroups$8157;(parse_op_description$8158=function($8577$8579){var otherwise$8644;var $8625$8633;var $8624$8627;var otherwise$8669;var $8650$8658;var $8649$8652;var t0$8621;var t1$8622;var fixity$8618;var short$8619;var other$8673;var x$8608;var w1$8609;var op$8610;var w2$8611;var y$8612;var f$8603;var rx$8597;var t0$8592;var t1$8593;var t2$8594;var $8581$8587;var ph$8582;(ph$8582=$8577$8579);($8581$8587=ph$8582);(rx$8597=RegExp("(?:^((?:X?))((?:[ _]?))((?:[^ _Y]*))((?:[ _]?))((?:Y?))$)",""));if($8092(Function)($8581$8587)){(f$8603=$8581$8587);return f$8603;}else{(t0$8592=$10307(rx$8597)($8581$8587));if((t0$8592[0]&&((t1$8593=t0$8592[1]),((t2$8594=t1$8593.length),(t2$8594===6))))){t1$8593[0];(x$8608=t1$8593[1]);(w1$8609=t1$8593[2]);(op$8610=t1$8593[3]);(w2$8611=t1$8593[4]);(y$8612=t1$8593[5]);(t0$8621=((($8624$8627=null)),($8624$8627,function(){if((x$8608==="")){return ["PFX",(w2$8611==="")];}else{if((y$8612==="")){return ["SFX",(w1$8609==="")];}else{(otherwise$8644=$8624$8627);return ["IFX",((w1$8609==="")||(w2$8611===""))];}}}())));if(((t0$8621 instanceof Array)&&((t1$8622=t0$8621.length),(t1$8622===2)))){(fixity$8618=t0$8621[0]);(short$8619=t0$8621[1]);}else{$10047(((($8649$8652=null)),($8649$8652,function(){if((x$8608==="")){return ["PFX",(w2$8611==="")];}else{if((y$8612==="")){return ["SFX",(w1$8609==="")];}else{(otherwise$8669=$8649$8652);return ["IFX",((w1$8609==="")||(w2$8611===""))];}}}())),"/home/olivier/git/earl-grey/src/parse.eg",1647,1865);}if(((w1$8609==="_")||(w2$8611==="_"))){return [[fixity$8618,"short",op$8610],[fixity$8618,"wide",op$8610]];}else{return [[fixity$8618,function(){if(short$8619){return "short";}else{return "wide";}}(),op$8610]];}}else{(other$8673=$8581$8587);throw $10060(["invalid_op_description"]).create(("Invalid operator description: "+other$8673));}}});(eg_groups$8159=OperatorGroups$8157($8108(({"tokenpfx":[".Y","#Y","@Y"],"sjuxt":["XWHITEY"],"ifx":[function($8678$8680){var t0$8693;var $8682$8688;var ph$8683;(ph$8683=$8678$8680);($8682$8688=ph$8683);if((($8682$8688 instanceof Array)&&((t0$8693=$8682$8688.length),((t0$8693===3)&&(($8682$8688[0]==="IFX")&&($8682$8688[1]==="short")))))){$8682$8688[2];return true;}else{$8682$8688;return false;}}],"pfx":[function($8703$8705){var t0$8718;var $8707$8713;var ph$8708;(ph$8708=$8703$8705);($8707$8713=ph$8708);if((($8707$8713 instanceof Array)&&((t0$8718=$8707$8713.length),((t0$8718===3)&&(($8707$8713[0]==="PFX")&&($8707$8713[1]==="short")))))){$8707$8713[2];return true;}else{$8707$8713;return false;}}],"sfx":[function($8728$8730){var t0$8743;var $8732$8738;var ph$8733;(ph$8733=$8728$8730);($8732$8738=ph$8733);if((($8732$8738 instanceof Array)&&((t0$8743=$8732$8738.length),((t0$8743===3)&&(($8732$8738[0]==="SFX")&&($8732$8738[1]==="short")))))){$8732$8738[2];return true;}else{$8732$8738;return false;}}],"pow":["X ** Y"],"mul":["X * Y","X / Y","X // Y","X mod Y","+ Y","- Y"],"add":["X + Y","X - Y"],"cmp":["X < Y","X <= Y","X == Y","X > Y","X >= Y","X != Y"],"cat":["X ++ Y"],"union":["X & Y"],"range":["X .. Y","X ..",".. Y"],"in":["X in Y"],"wjuxt":["X WHITE Y"],"colon":["X_:_Y"],"and":"X and Y","or":"X or Y","not":"not Y"}),$8108(((accum$8754=({})),((accum$8754["with"]=["X with Y"]),accum$8754)),({"decl":["X -> Y","X = Y","X := Y","X => Y","X where Y","X when Y","X each Y"],"brack":["X_,_Y","(_Y","[_Y","{_Y","X_)","X_]","X_}"],"custom":[function(x$8758){return true;}]})))));(SimplePriority$8160=function(groups$8764,priorities$8765){var $index$8800;var $length$8795;var temp$8790;var acc$8785;var _i$8774;var tracks$8775;var it$0$8768;(it$0$8768=function(){if((!$8092(SimplePriority$8160)(this))){return Object.create(SimplePriority$8160.prototype);}else{return this;}}());(it$0$8768["groups"]=groups$8764);(_i$8774=0);(tracks$8775=({}));(it$0$8768["prio"]=(((acc$8785=[])),(((temp$8790=groups$8764.gnames)),((($length$8795=temp$8790.length)),((($index$8800=0)),function(){$8782:for(;($index$8800<$length$8795);($index$8800++)){var t0$8826;var t1$8827;var t2$8828;var t3$8829;var t4$8830;var t5$8831;var t6$8832;var t7$8833;var $index$8868;var $length$8863;var temp$8858;var acc$8853;var $index$8954;var $length$8949;var temp$8944;var acc$8939;var t0$8847;var t1$8848;var ltracks$8819;var lp$8820;var rtracks$8821;var rp$8822;var lt$8823;var rt$8824;var name$8816;var m$8808;(m$8808=temp$8790[$index$8800]);(name$8816=m$8808);acc$8785.push((((t0$8826=$8107(priorities$8765,name$8816)),function(){if(((t0$8826 instanceof Array)&&((t1$8827=t0$8826.length),((t1$8827===2)&&((t2$8828=t0$8826[0]),((t2$8828 instanceof Array)&&((t3$8829=t2$8828.length),((t3$8829===2)&&((t4$8830=$10307(Array)(t2$8828[0])),(t4$8830[0]&&((ltracks$8819=t4$8830[1]),((lp$8820=t2$8828[1]),((t5$8831=t0$8826[1]),((t5$8831 instanceof Array)&&((t6$8832=t5$8831.length),((t6$8832===2)&&((t7$8833=$10307(Array)(t5$8831[0])),t7$8833[0]))))))))))))))))){(rtracks$8821=t7$8833[1]);(rp$8822=t5$8831[1]);}else{return $10047($8107(priorities$8765,name$8816),"/home/olivier/git/earl-grey/src/parse.eg",3552,3578);}}()),((t0$8847=(((acc$8853=[])),(((temp$8858=[ltracks$8819,rtracks$8821])),((($length$8863=temp$8858.length)),((($index$8868=0)),function(){$8850:for(;($index$8868<$length$8863);($index$8868++)){var $index$8905;var $length$8900;var temp$8895;var rval$8887;var tr$8884;var m$8876;(m$8876=temp$8858[$index$8868]);(tr$8884=m$8876);acc$8853.push((((rval$8887=0)),(((temp$8895=tr$8884)),((($length$8900=temp$8895.length)),((($index$8905=0)),function(){$8888:for(;($index$8905<$length$8900);($index$8905++)){var t$8931;var t$8925;var m$8913;(m$8913=temp$8895[$index$8905]);if((m$8913==="all")){(rval$8887=(Math.pow(2,31)-1));}else{(t$8925=m$8913);if((!$8107(tracks$8775,t$8925))){(rval$8887=(rval$8887|Math.pow(2,_i$8774)));(tracks$8775[t$8925]=(_i$8774++));}else{(t$8931=m$8913);(rval$8887=(rval$8887|Math.pow(2,$8107(tracks$8775,t$8931))));}}}}()))),rval$8887));}}()))),acc$8853)),function(){if(((t0$8847 instanceof Array)&&((t1$8848=t0$8847.length),(t1$8848===2)))){(lt$8823=t0$8847[0]);(rt$8824=t0$8847[1]);}else{return $10047((((acc$8939=[])),(((temp$8944=[ltracks$8819,rtracks$8821])),((($length$8949=temp$8944.length)),((($index$8954=0)),function(){$8936:for(;($index$8954<$length$8949);($index$8954++)){var $index$8991;var $length$8986;var temp$8981;var rval$8973;var tr$8970;var m$8962;(m$8962=temp$8944[$index$8954]);(tr$8970=m$8962);acc$8939.push((((rval$8973=0)),(((temp$8981=tr$8970)),((($length$8986=temp$8981.length)),((($index$8991=0)),function(){$8974:for(;($index$8991<$length$8986);($index$8991++)){var t$9017;var t$9011;var m$8999;(m$8999=temp$8981[$index$8991]);if((m$8999==="all")){(rval$8973=(Math.pow(2,31)-1));}else{(t$9011=m$8999);if((!$8107(tracks$8775,t$9011))){(rval$8973=(rval$8973|Math.pow(2,_i$8774)));(tracks$8775[t$9011]=(_i$8774++));}else{(t$9017=m$8999);(rval$8973=(rval$8973|Math.pow(2,$8107(tracks$8775,t$9017))));}}}}()))),rval$8973));}}()))),acc$8939),"/home/olivier/git/earl-grey/src/parse.eg",3588,3909);}}()),[[lt$8823,lp$8820],[rt$8824,rp$8822]]));}}()))),acc$8785));return it$0$8768;});(SimplePriority$8160.prototype["compare"]=function(op1$9023,op2$9024){var t0$9052;var t1$9053;var t2$9054;var t3$9055;var t0$9064;var t1$9065;var t2$9066;var t3$9067;var $9038$9081;var $9037$9075;var i1$9039;var i2$9040;var code1$9041;var ord1$9042;var code2$9043;var ord2$9044;var self$9032;var it$0$9027;(it$0$9027=this);(self$9032=this);(i1$9039=it$0$9027.groups.get(op1$9023));(i2$9040=it$0$9027.groups.get(op2$9024));(t0$9052=$8107(it$0$9027.prio,i1$9039));if(((t0$9052 instanceof Array)&&((t1$9053=t0$9052.length),((t1$9053===2)&&(t0$9052[0],((t2$9054=t0$9052[1]),((t2$9054 instanceof Array)&&((t3$9055=t2$9054.length),(t3$9055===2))))))))){(code1$9041=t2$9054[0]);(ord1$9042=t2$9054[1]);}else{$10047($8107(it$0$9027.prio,i1$9039),"/home/olivier/git/earl-grey/src/parse.eg",4036,4053);}(t0$9064=$8107(it$0$9027.prio,i2$9040));if(((t0$9064 instanceof Array)&&((t1$9065=t0$9064.length),((t1$9065===2)&&((t2$9066=t0$9064[0]),((t2$9066 instanceof Array)&&((t3$9067=t2$9066.length),(t3$9067===2)))))))){(code2$9043=t2$9066[0]);(ord2$9044=t2$9066[1]);t0$9064[1];}else{$10047($8107(it$0$9027.prio,i2$9040),"/home/olivier/git/earl-grey/src/parse.eg",4073,4090);}($9037$9075=null);$9037$9075;if(((code1$9041&code2$9043)===0)){throw $10060(["syntax","order"]).create("Cannot mix operators in the given order",({"left":op1$9023,"right":op2$9024}));}else{if((ord1$9042>ord2$9044)){return LEFT$8165;}else{if((ord1$9042<ord2$9044)){return RIGHT$8166;}else{if((ord1$9042===ord2$9044)){return BOTH$8167;}else{$10047($9037$9075);}}}}});$8108(SimplePriority$8160,$8108(((accum$9101=({})),((accum$9101["::name"]="SimplePriority"),accum$9101)),((accum$9105=({})),((accum$9105["::egclass"]=true),accum$9105))));SimplePriority$8160;(MAX$8161=(1/0));(eg_order$8162=(((eg_groups$9114=OperatorGroups$8157($8108(({"sh_ifx":[function($9118$9120){var t0$9133;var $9122$9128;var ph$9123;(ph$9123=$9118$9120);($9122$9128=ph$9123);if((($9122$9128 instanceof Array)&&((t0$9133=$9122$9128.length),((t0$9133===3)&&(($9122$9128[0]==="IFX")&&($9122$9128[1]==="short")))))){$9122$9128[2];return true;}else{$9122$9128;return false;}}],"sh_pfx":[function($9143$9145){var t0$9158;var $9147$9153;var ph$9148;(ph$9148=$9143$9145);($9147$9153=ph$9148);if((($9147$9153 instanceof Array)&&((t0$9158=$9147$9153.length),((t0$9158===3)&&(($9147$9153[0]==="PFX")&&($9147$9153[1]==="short")))))){$9147$9153[2];return true;}else{$9147$9153;return false;}}],"sh_sfx":[function($9168$9170){var t0$9183;var $9172$9178;var ph$9173;(ph$9173=$9168$9170);($9172$9178=ph$9173);if((($9172$9178 instanceof Array)&&((t0$9183=$9172$9178.length),((t0$9183===3)&&(($9172$9178[0]==="SFX")&&($9172$9178[1]==="short")))))){$9172$9178[2];return true;}else{$9172$9178;return false;}}],"wi_ifx":[function($9193$9195){var t0$9208;var $9197$9203;var ph$9198;(ph$9198=$9193$9195);($9197$9203=ph$9198);if((($9197$9203 instanceof Array)&&((t0$9208=$9197$9203.length),((t0$9208===3)&&(($9197$9203[0]==="IFX")&&($9197$9203[1]==="wide")))))){$9197$9203[2];return true;}else{$9197$9203;return false;}}],"wi_pfx":[function($9218$9220){var t0$9233;var $9222$9228;var ph$9223;(ph$9223=$9218$9220);($9222$9228=ph$9223);if((($9222$9228 instanceof Array)&&((t0$9233=$9222$9228.length),((t0$9233===3)&&(($9222$9228[0]==="PFX")&&($9222$9228[1]==="wide")))))){$9222$9228[2];return true;}else{$9222$9228;return false;}}],"wi_sfx":[function($9243$9245){var t0$9258;var $9247$9253;var ph$9248;(ph$9248=$9243$9245);($9247$9253=ph$9248);if((($9247$9253 instanceof Array)&&((t0$9258=$9247$9253.length),((t0$9258===3)&&(($9247$9253[0]==="SFX")&&($9247$9253[1]==="wide")))))){$9247$9253[2];return true;}else{$9247$9253;return false;}}],"comma":["X_,_Y"],"obrack":["(_Y","[_Y","{_Y"],"cbrack":["X_)","X_]","X_}"]}),$8108(((accum$9269=({})),((accum$9269["with"]=["X with Y"]),accum$9269)),$8108(({"lowprio":["X each Y","X each? Y","X where Y","X !! Y","X -> Y","X => Y","X = Y","X := Y","X += Y","X -= Y","X *= Y","X /= Y","X <<= Y","X >>= Y","X >>>= Y","X ++= Y","X ?= Y","X or= Y","X and= Y","X each= Y","X % Y"]}),$8108(((accum$9273=({})),((accum$9273["when"]=["X when Y"]),accum$9273)),$8108(((accum$9277=({})),((accum$9277["or"]=["X or Y"]),accum$9277)),$8108(((accum$9281=({})),((accum$9281["and"]=["X and Y"]),accum$9281)),$8108(((accum$9285=({})),((accum$9285["not"]=["not Y"]),accum$9285)),({"cmp":["X == Y","X != Y","X >= Y","X <= Y","X > Y","X < Y"],"binxor":["X ^. Y"],"binor":["X |. Y"],"binand":["X &. Y"],"shift":["X << Y","X >> Y","X >>> Y"],"add":["X + Y","X - Y"],"mul":["X * Y","X / Y","X // Y","X mod Y"],"exp":["X ** Y"],"sjuxt":["XWHITEY"],"wjuxt":["X WHITE Y"],"colon":["X_:_Y"],"pfx":["._Y","#_Y","@_Y"],"when2":["when Y"],"pp":["<> Y"],"pipe":["X |> Y"]}))))))))))),((eg_prio$9115=$8108(({"comma":[["all",1],["all",1]],"obrack":[["all",MAX$8161],["all",1]],"cbrack":[["all",1],["all",MAX$8161]]}),$8108(((accum$9292=({})),((accum$9292["with"]=[["all",1999],["all",10]]),accum$9292)),$8108(({"lowprio":[["all",11],["all",10]]}),$8108(((accum$9296=({})),((accum$9296["when"]=[["all",100],["all",101]]),accum$9296)),$8108(((accum$9300=({})),((accum$9300["or"]=[["all",110],["all",111]]),accum$9300)),$8108(((accum$9304=({})),((accum$9304["and"]=[["all",120],["all",121]]),accum$9304)),$8108(((accum$9308=({})),((accum$9308["not"]=[["all",MAX$8161],["all",131]]),accum$9308)),({"cmp":[["all",200],["all",201]],"binxor":[["all",400],["all",401]],"binor":[["all",410],["all",411]],"binand":[["all",420],["all",421]],"shift":[["arith",500],["arith",501]],"add":[["arith",550],["arith",551]],"mul":[["arith",560],["arith",561]],"exp":[["arith",571],["arith",570]],"wjuxt":[["all",13],["all",12]],"colon":[["all",12],["all",10]],"sjuxt":[["all",2000],["all",2001]],"pfx":[["all",MAX$8161],["all",3000]],"pp":[["all",MAX$8161],["all",5]],"when2":[["all",MAX$8161],["all",101]],"pipe":[["pipe",550],["pipe",551]],"sh_ifx":[["all",1800],["all",1801]],"sh_pfx":[["all",MAX$8161],["all",1901]],"sh_sfx":[["all",1900],["all",MAX$8161]],"wi_ifx":[["customl",900],["customr",901]],"wi_pfx":[["all",MAX$8161],["all",901]],"wi_sfx":[["all",900],["all",MAX$8161]]})))))))))),SimplePriority$8160(eg_groups$9114,eg_prio$9115)));(DONE$8163=-1);(NONE$8164=0);(LEFT$8165=1);(RIGHT$8166=2);(BOTH$8167=3);(oparse$8168=function(next$9331,order$9332,finalize$9333){var between$9336;var right_op$9337;var stack$9338;var left_op$9339;var current$9340;(between$9336=finalize$9333(next$9331()));(right_op$9337=next$9331());(stack$9338=[]);(left_op$9339=null);(current$9340=null);$9341:while(true){var v$9381;var other$9397;var $9360$9366;var o$9361;(o$9361=function(){if(((!left_op$9339)&&(!right_op$9337))){return DONE$8163;}else{return ((((!left_op$9339)&&RIGHT$8166)||((!right_op$9337)&&LEFT$8165))||order$9332(left_op$9339,right_op$9337));}}());($9360$9366=o$9361);if(($9360$9366===DONE$8163)){return between$9336;}else{if(($9360$9366===LEFT$8165)){current$9340.push(between$9336);(between$9336=finalize$9333(current$9340));(v$9381=stack$9338.pop());(left_op$9339=v$9381[0]);(current$9340=v$9381[1]);}else{if(($9360$9366===RIGHT$8166)){stack$9338.push([left_op$9339,current$9340]);(left_op$9339=right_op$9337);(current$9340=[[right_op$9337],between$9336]);(between$9336=finalize$9333(next$9331()));(right_op$9337=next$9331());}else{if(($9360$9366===BOTH$8167)){current$9340[0].push(right_op$9337);current$9340.push(between$9336);(left_op$9339=right_op$9337);(between$9336=finalize$9333(next$9331()));(right_op$9337=next$9331());}else{(other$9397=$9360$9366);throw $10060(["should_never_happen"]).create("undefined priority",({"left":left_op$9339,"right":right_op$9337}));}}}}}});(finalize$8169=function($9402$9404){var t0$9413;var $index$9490;var $length$9485;var temp$9480;var $index$9520;var $length$9515;var temp$9510;var $index$9559;var $length$9554;var temp$9549;var acc$9544;var other$9787;var args$9782;var f$9770;var orig_args$9771;var args$9772;var $9745$9757;var $9746$9758;var t0$9753;var t1$9754;var t2$9755;var $9744$9748;var inserted$9640;var result$9641;var t0$9795;var f$9808;var other$9867;var x$9860;var $9841$9851;var $9842$9852;var t0$9849;var $9840$9844;var result$9805;var f$9883;var oloc$9950;var abloc$9951;var oabloc$9952;var rval$9953;var a$9945;var b$9946;var $9457$9930;var $9458$9931;var $9459$9932;var $9460$9933;var t0$9923;var t1$9924;var t2$9925;var t3$9926;var t4$9927;var t5$9928;var $index$9997;var $length$9992;var temp$9987;var acc$9982;var tokens$9975;var msg$9976;var op_strings$9970;var args$9971;var $9456$9919;var commas$9872;var commas$9791;var target$9626;var _b$9627;var body$9628;var f$9618;var body$9619;var f$9606;var arg$9607;var body$9608;var $9461$9597;var $9462$9598;var $9463$9599;var $9464$9600;var $9465$9601;var $9466$9602;var $9467$9603;var t0$9586;var t1$9587;var t2$9588;var t3$9589;var t4$9590;var t5$9591;var t6$9592;var t7$9593;var t8$9594;var bridge$9455$9595;var $9454$9581;var sumloc$9468;var orig_ops$9469;var op$9470;var other$10030;var ops$9449;var args$9450;var value$9440;var value$9435;var value$9429;var $9407$9424;var $9408$9425;var $9409$9426;var t0$9422;var $9406$9417;var ph$9410;var token$9411;(t0$9413=$9402$9404);(token$9411=t0$9413);(ph$9410=t0$9413);($9406$9417=ph$9410);if((($9407$9424=($9406$9417 instanceof Array))&&((t0$9422=$9406$9417.length),(($9409$9426=(t0$9422===2))&&($9406$9417[0]==="ID"))))){(value$9429=$9406$9417[1]);return __lt____lt____colon__$8154(["symbol",value$9429],token$9411);}else{if(($9409$9426&&($9406$9417[0]==="NUM"))){(value$9435=$9406$9417[1]);return __lt____lt____colon__$8154(["value",value$9435],token$9411);}else{if(($9409$9426&&($9406$9417[0]==="STR"))){(value$9440=$9406$9417[1]);return __lt____lt____colon__$8154(["value",value$9440],token$9411);}else{if(($9407$9424&&((t0$9422===1)&&($9406$9417[0]==="VOID")))){return __lt____lt____colon__$8154(["void"],token$9411);}else{if(($9407$9424&&(t0$9422>=1))){(ops$9449=$9406$9417[0]);(args$9450=Array.prototype.slice.call($9406$9417,1));(sumloc$9468=ops$9449[0].location);(temp$9480=ops$9449.slice(1));($length$9485=temp$9480.length);($index$9490=0);$9471:for(;($index$9490<$length$9485);($index$9490++)){var op$9506;var m$9498;(m$9498=temp$9480[$index$9490]);(op$9506=m$9498);(sumloc$9468=__plus____plus____colon__$8155(sumloc$9468,op$9506));}(temp$9510=args$9450);($length$9515=temp$9510.length);($index$9520=0);$9473:for(;($index$9520<$length$9515);($index$9520++)){var arg$9536;var m$9528;(m$9528=temp$9510[$index$9520]);(arg$9536=m$9528);(sumloc$9468=__plus____plus____colon__$8155(sumloc$9468,arg$9536));}(orig_ops$9469=ops$9449);(ops$9449=(((acc$9544=[])),(((temp$9549=ops$9449)),((($length$9554=temp$9549.length)),((($index$9559=0)),function(){$9541:for(;($index$9559<$length$9554);($index$9559++)){var o$9575;var m$9567;(m$9567=temp$9549[$index$9559]);(o$9575=m$9567);acc$9544.push(o$9575[2]);}}()))),acc$9544));(op$9470=ops$9449[0]);($9454$9581=[ops$9449,args$9450]);if((($9461$9597=($9454$9581 instanceof Array))&&((t0$9586=$9454$9581.length),(($9463$9599=(t0$9586===2))&&((t1$9587=$9454$9581[0]),(($9465$9601=(t1$9587 instanceof Array))&&((t2$9588=t1$9587.length),((t2$9588===2)&&((t1$9587[0]==="WHITE")&&((t1$9587[1]===":")&&((t3$9589=$9454$9581[1]),((t3$9589 instanceof Array)&&((t4$9590=t3$9589.length),(t4$9590===3)))))))))))))){(f$9606=t3$9589[0]);(arg$9607=t3$9589[1]);(body$9608=t3$9589[2]);return __lt____lt____colon__$8154(["send",f$9606,__lt____lt____colon__$8154(["data",arg$9607,body$9608],__plus____plus____colon__$8155(arg$9607,body$9608))],sumloc$9468);}else{if(($9465$9601&&(($9467$9603=(t2$9588===1))&&((t1$9587[0]===":")&&((t3$9589=$9454$9581[1]),((t3$9589 instanceof Array)&&((t4$9590=t3$9589.length),(t4$9590===2)))))))){(f$9618=t3$9589[0]);(body$9619=t3$9589[1]);return __lt____lt____colon__$8154(["send",f$9618,__lt____lt____colon__$8154(["data",body$9619],body$9619)],sumloc$9468);}else{if(($9467$9603&&((t1$9587[0]==="with")&&((t3$9589=$9454$9581[1]),((t3$9589 instanceof Array)&&((t4$9590=t3$9589.length),((t4$9590===2)&&((target$9626=t3$9589[0]),((t5$9591=t3$9589[1]),((_b$9627=t5$9591),((t6$9592=$10307(["multi"])(t5$9591)),(t6$9592[0]&&((t7$9593=t6$9592[1]),((t8$9594=t7$9593.length),(t8$9594>=0))))))))))))))){(body$9628=Array.prototype.slice.call(t7$9593,0));(inserted$9640=false);(result$9641=transform$8156(target$9626,function($9647$9649){var t0$9655;var $index$9715;var $length$9710;var temp$9705;var tr$9693;var res$9694;var args$9688;var x$9676;var f$9677;var a$9678;var b$9679;var t0$9664;var t1$9665;var t2$9666;var $9651$9659;var ph$9652;var expr$9653;(t0$9655=$9647$9649);(expr$9653=t0$9655);(ph$9652=t0$9655);($9651$9659=ph$9652);if((($9651$9659 instanceof Array)&&((t0$9664=$9651$9659.length),((t0$9664===2)&&(($9651$9659[0]==="symbol")&&($9651$9659[1]==="...")))))){(inserted$9640=true);return __lt____lt____colon__$8154(["multi"].concat(body$9628),_b$9627);}else{(x$9676=$9651$9659);if((x$9676.fromop&&(($9651$9659 instanceof Array)&&((t0$9664=$9651$9659.length),((t0$9664===3)&&(($9651$9659[0]==="send")&&((f$9677=$9651$9659[1]),((t1$9665=$9651$9659[2]),((t1$9665 instanceof Array)&&((t2$9666=t1$9665.length),((t2$9666===3)&&(t1$9665[0]==="data")))))))))))){(a$9678=t1$9665[1]);(b$9679=t1$9665[2]);return ["send",this(f$9677),__lt____lt____colon__$8154(["data",this(a$9678),this(b$9679)],__plus____plus____colon__$8155(a$9678,b$9679))];}else{if((($9651$9659 instanceof Array)&&((t0$9664=$9651$9659.length),((t0$9664>=1)&&($9651$9659[0]==="data"))))){(args$9688=Array.prototype.slice.call($9651$9659,1));(tr$9693=this);(res$9694=["data"]);(temp$9705=args$9688);($length$9710=temp$9705.length);($index$9715=0);$9695:for(;($index$9715<$length$9710);($index$9715++)){var other$9739;var t0$9728;var t1$9729;var m$9723;(m$9723=temp$9705[$index$9715]);(t0$9728=m$9723);if(((t0$9728 instanceof Array)&&((t1$9729=t0$9728.length),((t1$9729===2)&&((t0$9728[0]==="symbol")&&(t0$9728[1]==="...")))))){(inserted$9640=true);(res$9694=res$9694.concat(body$9628));}else{(other$9739=m$9723);res$9694.push(__lt____lt____colon__$8154(tr$9693(other$9739),other$9739));}}return __lt____lt____colon__$8154(res$9694,expr$9653);}else{$10047($9651$9659);}}}}));if((!inserted$9640)){($9744$9748=target$9626);if((($9744$9748 instanceof Array)&&((t0$9753=$9744$9748.length),((t0$9753===1)&&($9744$9748[0]==="void"))))){return __lt____lt____colon__$8154(["data"].concat(body$9628),sumloc$9468);}else{$9744$9748;if(target$9626.fromop){return __lt____lt____colon__$8154(["send",target$9626,__lt____lt____colon__$8154(["data"].concat(body$9628),_b$9627)],sumloc$9468);}else{if((($9745$9757=($9744$9748 instanceof Array))&&((t0$9753=$9744$9748.length),((t0$9753===3)&&(($9744$9748[0]==="send")&&((f$9770=$9744$9748[1]),((t1$9754=$9744$9748[2]),((orig_args$9771=t1$9754),((t1$9754 instanceof Array)&&((t2$9755=t1$9754.length),((t2$9755>=1)&&(t1$9754[0]==="data")))))))))))){(args$9772=Array.prototype.slice.call(t1$9754,1));return __lt____lt____colon__$8154(["send",f$9770,__lt____lt____colon__$8154(["data"].concat(args$9772).concat(body$9628),__plus____plus____colon__$8155(orig_args$9771,_b$9627))],sumloc$9468);}else{if(($9745$9757&&((t0$9753>=1)&&($9744$9748[0]==="data")))){(args$9782=Array.prototype.slice.call($9744$9748,1));return __lt____lt____colon__$8154(target$9626.concat(body$9628),sumloc$9468);}else{(other$9787=$9744$9748);return __lt____lt____colon__$8154(["send",target$9626,__lt____lt____colon__$8154(["data"].concat(body$9628),_b$9627)],sumloc$9468);}}}}}else{return __lt____lt____colon__$8154(result$9641,sumloc$9468);}}else{if(($9463$9599&&((bridge$9455$9595=$9454$9581[0]),((((bridge$9455$9595 instanceof Array)&&((t0$9795=bridge$9455$9595.length),((t0$9795>=2)&&((bridge$9455$9595[0]==="[")&&((commas$9791=Array.prototype.slice.call(bridge$9455$9595,1,-1)),(bridge$9455$9595[(t0$9795-1)]==="]"))))))||((commas$9791=bridge$9455$9595),true))&&($9454$9581[1],commas$9791.every(function(x$9801){return $10335(x$9801,",");})))))){if((op$9470==="[")){(args$9450=args$9450.slice(1,-1));}(args$9450=(((f$9808=function($9811$9813){var other$9835;var t0$9826;var $9815$9821;var ph$9816;(ph$9816=$9811$9813);($9815$9821=ph$9816);if((($9815$9821 instanceof Array)&&((t0$9826=$9815$9821.length),((t0$9826===1)&&($9815$9821[0]==="void"))))){return false;}else{(other$9835=$9815$9821);return true;}})),args$9450.filter(f$9808)));(result$9805=((($9840$9844=args$9450)),function(){if((($9841$9851=($9840$9844 instanceof Array))&&((t0$9849=$9840$9844.length),(t0$9849===0)))){return ["value",(void 0)];}else{if(($9841$9851&&(t0$9849===1))){(x$9860=$9840$9844[0]);if(((!isNaN(sumloc$9468.start))&&(!isNaN(sumloc$9468.end)))){(x$9860["location"]=sumloc$9468);}return x$9860;}else{(other$9867=$9840$9844);return ["multi"].concat(args$9450);}}}()));return __lt____lt____colon__$8154(result$9805,sumloc$9468);}else{if(($9463$9599&&((t1$9587=$9454$9581[0]),(($9465$9601=(t1$9587 instanceof Array))&&((t2$9588=t1$9587.length),((t2$9588>=2)&&((t1$9587[0]==="{")&&((commas$9872=Array.prototype.slice.call(t1$9587,1,-1)),((t1$9587[(t2$9588-1)]==="}")&&($9454$9581[1],commas$9872.every(function(x$9879){return $10335(x$9879,",");}))))))))))){(f$9883=function($9886$9888){var other$9910;var t0$9901;var $9890$9896;var ph$9891;(ph$9891=$9886$9888);($9890$9896=ph$9891);if((($9890$9896 instanceof Array)&&((t0$9901=$9890$9896.length),((t0$9901===1)&&($9890$9896[0]==="void"))))){return false;}else{(other$9910=$9890$9896);return true;}});return __lt____lt____colon__$8154(["data"].concat(args$9450.slice(1,-1).filter(f$9883)),sumloc$9468);}else{if(($9465$9601&&(($9467$9603=(t2$9588===1))&&(t1$9587[0]==="WHITE")))){$9454$9581[1];return __lt____lt____colon__$8154(["send"].concat(args$9450),sumloc$9468);}else{if($9467$9603){t1$9587[0];($9456$9919=$9454$9581[1]);(t0$9923=$9456$9919);if((($9458$9931=(t0$9923 instanceof Array))&&((t1$9924=t0$9923.length),(($9460$9933=(t1$9924===2))&&((t2$9925=t0$9923[0]),((t2$9925 instanceof Array)&&((t3$9926=t2$9925.length),((t3$9926===1)&&((t2$9925[0]==="void")&&((t4$9927=t0$9923[1]),((t4$9927 instanceof Array)&&((t5$9928=t4$9927.length),((t5$9928===1)&&(t4$9927[0]==="void")))))))))))))){return __lt____lt____colon__$8154(["symbol",op$9470],orig_ops$9469[0]);}else{if($9460$9933){(a$9945=t0$9923[0]);(b$9946=t0$9923[1]);(oloc$9950=orig_ops$9469[0].location);(abloc$9951=__plus____plus____colon__$8155(a$9945,b$9946));(oabloc$9952=__plus____plus____colon__$8155(orig_ops$9469[0],abloc$9951));(rval$9953=__lt____lt____colon__$8154(["send",__lt____lt____colon__$8154(["symbol",op$9470],oloc$9950),__lt____lt____colon__$8154(["data",a$9945,b$9946],abloc$9951)],__plus____plus____colon__$8155(oloc$9950,abloc$9951)));(rval$9953["fromop"]=true);return rval$9953;}else{$10047($9456$9919,"/home/olivier/git/earl-grey/src/parse.eg",17200,17205);}}}else{if($9463$9599){(op_strings$9970=$9454$9581[0]);(args$9971=$9454$9581[1]);(tokens$9975=$10495((((acc$9982=[])),(((temp$9987=$10229(orig_ops$9469))),((($length$9992=temp$9987.length)),((($index$9997=0)),function(){$9979:for(;($index$9997<$length$9992);($index$9997++)){var i$10015;var op$10016;var t0$10010;var t1$10011;var m$10005;(m$10005=temp$9987[$index$9997]);(t0$10010=m$10005);if(((t0$10010 instanceof Array)&&((t1$10011=t0$10010.length),(t1$10011===2)))){(i$10015=t0$10010[0]);(op$10016=t0$10010[1]);acc$9982.push([("token"+String((i$10015+1))),op$10016]);}else{$10047(m$10005,"/home/olivier/git/earl-grey/src/parse.eg",17717,17816);}}}()))),acc$9982)));(msg$9976="Mismatched/missing brackets/tokens");throw $10060(["syntax","mismatch"]).create(msg$9976,tokens$9975);}else{$10047($9454$9581);}}}}}}}}}else{(other$10030=$9406$9417);throw $10060(["should_never_happen"]).create("unknown node (B)",({"node":token$9411}));}}}}}});(parse$8170=function(tokens$10036){var next$10039;(next$10039=function(){return tokens$10036.shift();});return oparse$8168(next$10039,eg_order$8162.compare.bind(eg_order$8162),finalize$8169);});(exports["parse"]=parse$8170);(exports["oparse"]=oparse$8168);(exports["finalize"]=finalize$8169);(exports["DONE"]=DONE$8163);(exports["NONE"]=NONE$8164);(exports["LEFT"]=LEFT$8165);(exports["RIGHT"]=RIGHT$8166);(exports["BOTH"]=BOTH$8167);

},{"./location":7}],10:[function(require,module,exports){
var $10704=function(type$10706){var f$10709;(f$10709=type$10706["::check"]);if((f$10709===(void 0))){return function(value$10714){return (value$10714 instanceof type$10706);};}else{return function(value$10717){return f$10709.call(type$10706,value$10717);};}};
var $10719=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $10720=function(dest$10722,values$10723){var k$10728;(k$10728=null);$10726:for(k$10728 in values$10723){if(values$10723.hasOwnProperty(k$10728)){(dest$10722[k$10728]=values$10723[k$10728]);}}return dest$10722;};
var $10732=function($10733$10735){var ph$10739;(ph$10739=$10733$10735);var $10737$10744;($10737$10744=ph$10739);var bridge$10738$10749;var x$10753;(bridge$10738$10749=$10737$10744);if((((typeof(bridge$10738$10749)==="string")&&((x$10753=bridge$10738$10749),true))||((typeof(bridge$10738$10749)==="number")&&((x$10753=bridge$10738$10749),true)))){return ["value",x$10753];}else{var other$10760;(other$10760=$10737$10744);return other$10760["::serialize_ast"]();}};
var send$10544;(send$10544=function(obj$10549,$10547$10550){var ph$10554;var msg$10555;var t0$10557;(t0$10557=$10547$10550);(msg$10555=t0$10557);(ph$10554=t0$10557);var $10552$10561;($10552$10561=ph$10554);var bridge$10553$10566;(bridge$10553$10566=$10552$10561);if(((typeof(bridge$10553$10566)==="string")||(typeof(bridge$10553$10566)==="number"))){return obj$10549[msg$10555];}else{var other$10574;(other$10574=$10552$10561);return obj$10549["::send"](msg$10555);}});(Array[":::project"]=function($10577$10579){var ph$10582;var value$10583;var t0$10585;(t0$10585=$10577$10579);(value$10583=t0$10585);(ph$10582=t0$10585);var $10581$10589;($10581$10589=ph$10582);if($10704(Array)($10581$10589)){return [true,value$10583];}else{$10581$10589;return [true,[value$10583]];}});(Array.prototype["::check"]=function(value$10603){if((value$10603 instanceof Array)){var i$10608;(i$10608=0);$10606:for(;(i$10608<this.length);(i$10608++)){if(($10719(this,i$10608)!==$10719(value$10603,i$10608))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $10720(this.slice(0),this);});(Array.prototype[":::project"]=function(value$10619){if((value$10619 instanceof Array)){var i$10624;(i$10624=0);$10622:for(;(i$10624<this.length);(i$10624++)){if(($10719(this,i$10624)!==$10719(value$10619,i$10624))){return [true,[value$10619]];}}return [true,value$10619.slice(this.length)];}else{return [true,[value$10619]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($10732));});(RegExp.prototype["::check"]=function($10634$10636){var ph$10639;(ph$10639=$10634$10636);var $10638$10644;($10638$10644=ph$10639);var value$10652;if((typeof($10638$10644)==="string")){(value$10652=$10638$10644);if(value$10652.match(this)){return true;}else{return false;}}else{var other$10657;(other$10657=$10638$10644);return false;}});(RegExp.prototype[":::project"]=function($10659$10661){var ph$10664;(ph$10664=$10659$10661);var $10663$10669;($10663$10669=ph$10664);var value$10677;if((typeof($10663$10669)==="string")){(value$10677=$10663$10669);var $10680$10682;($10680$10682=value$10677.match(this));var m$10690;if(($10680$10682===null)){(m$10690=$10680$10682);return [false,null];}else{var m$10695;(m$10695=$10680$10682);return [true,m$10695];}}else{var other$10699;(other$10699=$10663$10669);return [false,null];}});(Function.prototype["::send"]=function(args$10702){return this.apply(this,args$10702);});
var $13708=function(arr$13710){var results$13714;var l$13715;(results$13714=[]);(l$13715=arr$13710.length);var i$13723;(i$13723=0);$13713:for(;(i$13723<l$13715);(i$13723++)){results$13714.push([i$13723,$10719(arr$13710,i$13723)]);}return results$13714;};
var $13730=function(value$13732,url$13733,start$13734,end$13735){var err$13738;(err$13738=$13539(["match"]).create("Could not find a match for value",({"value":value$13732})));if(url$13733){(err$13738["location"]=["location",url$13733,start$13734,end$13735]);}throw err$13738;};
var $13539=function(){var $13540$13542;($13540$13542=function(tags$13546){var it$0$13549;(it$0$13549=function(){if((!$10704($13540$13542)(this))){return Object.create($13540$13542.prototype);}else{return this;}}());(it$0$13549["tags"]=tags$13546);return it$0$13549;});($13540$13542.prototype["create"]=function(){var $13558$13560;($13558$13560=arguments);var t0$13565;var message$13569;var args$13570;(t0$13565=$13558$13560.length);if((t0$13565>=0)){(message$13569=function(){if((0>=t0$13565)){return "";}else{return $13558$13560[0];}}());(args$13570=Array.prototype.slice.call($13558$13560,1));var it$0$13574;(it$0$13574=this);var self$13579;(self$13579=this);var e$13584;(e$13584=Error(message$13569));(e$13584["::tags"]=it$0$13574.tags);(e$13584["args"]=args$13570);var temp$13592;(temp$13592=$13708(args$13570));var $length$13597;($length$13597=temp$13592.length);var $index$13602;($index$13602=0);$13585:for(;($index$13602<$length$13597);($index$13602++)){var m$13610;(m$13610=temp$13592[$index$13602]);var t0$13615;var t1$13616;var i$13620;var arg$13621;(t0$13615=m$13610);if(((t0$13615 instanceof Array)&&((t1$13616=t0$13615.length),(t1$13616===2)))){(i$13620=t0$13615[0]);(arg$13621=t0$13615[1]);(e$13584[i$13620]=arg$13621);}else{$13730(m$13610);}}(e$13584["length"]=args$13570.length);(e$13584["name"]=["E"].concat(it$0$13574.tags).join("."));return e$13584;}else{$13730($13558$13560);}});($13540$13542.prototype["::check"]=function(e$13632){var it$0$13635;(it$0$13635=this);var self$13640;(self$13640=this);var tags$13645;if(((!e$13632)||(!$10704(Error)(e$13632)))){return false;}(tags$13645=(e$13632["::tags"]||[]));var temp$13654;(temp$13654=it$0$13635.tags);var $length$13659;($length$13659=temp$13654.length);var $index$13664;($index$13664=0);$13646:for(;($index$13664<$length$13659);($index$13664++)){var m$13672;(m$13672=temp$13654[$index$13664]);var tag$13680;(tag$13680=m$13672);if((tags$13645.indexOf(tag$13680)===-1)){return false;}else{false;}}return true;});($13540$13542.prototype["::deconstruct"]=function(e$13688){var it$0$13691;(it$0$13691=this);var self$13696;(self$13696=this);return e$13688.args;});$10720($13540$13542,$10720(function(){var accum$13701;(accum$13701=({}));(accum$13701["::name"]="$13540");return accum$13701;}(),function(){var accum$13705;(accum$13705=({}));(accum$13705["::egclass"]=true);return accum$13705;}()));return $13540$13542;}();
var $13815=function($13816$13818,key$13819){var ph$13823;(ph$13823=$13816$13818);var $13821$13828;($13821$13828=ph$13823);var bridge$13822$13833;(bridge$13822$13833=$13821$13828);if(((bridge$13822$13833===null)||(bridge$13822$13833===(void 0)))){return false;}else{var x$13841;if((typeof($13821$13828)==="string")){(x$13841=$13821$13828);return (key$13819 in String.prototype);}else{var x$13846;if((typeof($13821$13828)==="number")){(x$13846=$13821$13828);return (key$13819 in Number.prototype);}else{var x$13851;(x$13851=$13821$13828);return (key$13819 in x$13851);}}}};
var $13759=function($13760$13762){var ph$13768;var x$13769;var t0$13771;(t0$13771=$13760$13762);(x$13769=t0$13771);(ph$13768=t0$13771);var $13764$13775;($13764$13775=ph$13768);var bridge$13765$13780;(bridge$13765$13780=$13764$13775);if((function(){var bridge$13766$13786;(bridge$13766$13786=bridge$13765$13780);return (function(){var bridge$13767$13789;(bridge$13767$13789=bridge$13766$13786);return ((bridge$13767$13789===(void 0))||(bridge$13767$13789===null));}()||(typeof(bridge$13766$13786)==="string"));}()||(typeof(bridge$13765$13780)==="number"))){return x$13769;}else{if($13815($13764$13775,"::clone")){$13764$13775["::clone"];return x$13769["::clone"]();}else{$13764$13775;if((Object.getPrototypeOf(x$13769)===Object.prototype)){var dest$13802;(dest$13802=({}));var k$13807;(k$13807=null);$13801:for(k$13807 in x$13769){if(Object.prototype.hasOwnProperty.call(x$13769,k$13807)){(dest$13802[k$13807]=x$13769[k$13807]);}}return dest$13802;}else{var other$13813;(other$13813=$13764$13775);throw $13539(["clone"]).create("Object cannot be cloned",({"obj":x$13769}));}}}};
var $13743=function(a$13745,b$13746){var dest$13750;(dest$13750=$13759(a$13745));var k$13755;(k$13755=null);$13749:for(k$13755 in b$13746){if(Object.prototype.hasOwnProperty.call(b$13746,k$13755)){(dest$13750[k$13755]=b$13746[k$13755]);}}return dest$13750;};
var $13853=Object.keys;
var $13854=function(type$13856){return function(value$13859){var f$13862;(f$13862=type$13856[":::project"]);if((f$13862===(void 0))){(f$13862=type$13856["::project"]);if((f$13862===(void 0))){return [true,type$13856(value$13859)];}else{var rval$13868;(rval$13868=false);try{(rval$13868=[true,f$13862(value$13859)]);}catch(excv$13874){var e$13880;(e$13880=excv$13874);(rval$13868=[false,null]);}return rval$13868;}}else{return f$13862.call(type$13856,value$13859);}};};
var $13882=function(xs$13884,ys$13885){var acc$13890;(acc$13890=[]);var temp$13895;(temp$13895=$13708(xs$13884));var $length$13900;($length$13900=temp$13895.length);var $index$13905;($index$13905=0);$13887:for(;($index$13905<$length$13900);($index$13905++)){var m$13913;(m$13913=temp$13895[$index$13905]);var t0$13918;var t1$13919;var i$13923;var x$13924;(t0$13918=m$13913);if(((t0$13918 instanceof Array)&&((t1$13919=t0$13918.length),(t1$13919===2)))){(i$13923=t0$13918[0]);(x$13924=t0$13918[1]);acc$13890.push([x$13924,$10719(ys$13885,i$13923)]);}else{$13730(m$13913);}}return acc$13890;};
var $13930=function(from$13932,to$13933){var rval$13937;(rval$13937=[]);var i$13942;(i$13942=from$13932);$13936:for(;(i$13942<=to$13933);(i$13942++)){rval$13937.push(i$13942);}return rval$13937;};var accum$11477;var accum$11481;var accum$12083;var accum$12087;var $10764$10768;var __lt____gt__$10769;var $10765$10770;var __lt____lt____colon__$10771;var util$10772;var GenSym$10773;var gensym$10774;var neighbours$10775;var classify$10776;var classify_contiguous$10777;var identity$10778;var $10767$10779;var checker_db$10780;var PatternParser$10781;var PatternProcessor$10782;var assemble_conditions$10783;var assemble_pattern$10784;var inject_below_uses$10785;var parse_pattern$10786;var checkall$10787;var same_block$10788;var parse_clauses$10789;var opt_clauses$10790;var weave_clauses$10791;($10764$10768=require("./pp"));(__lt____gt__$10769=$10764$10768["<>"]);($10765$10770=require("./location"));(__lt____lt____colon__$10771=$10765$10770["<<:"]);(util$10772=require("./util"));(GenSym$10773=util$10772.GenSym);(gensym$10774=util$10772.gensym);(neighbours$10775=util$10772.neighbours);(classify$10776=util$10772.classify);(classify_contiguous$10777=util$10772.classify_contiguous);(identity$10778=util$10772.identity);($10767$10779=require("./expand"));(checker_db$10780=$10767$10779.checker_db);(PatternParser$10781=function(scope$10834,pattern$10835,opt$10836){var it$0$10839;(it$0$10839=function(){if((!$10704(PatternParser$10781)(this))){return Object.create(PatternParser$10781.prototype);}else{return this;}}());(it$0$10839["opt"]=opt$10836);(it$0$10839["arguments"]=[]);(it$0$10839["vars"]=[]);(it$0$10839["specials"]=({}));(it$0$10839["pattern"]=it$0$10839.expand(scope$10834,pattern$10835,(opt$10836.tags||({})),true,it$0$10839.opt.indexable));return it$0$10839;});(PatternParser$10781.prototype["parse_specs"]=function(scope$10849,specs$10850,tags$10851){var $index$10897;var $length$10892;var temp$10887;var acc$10882;var rest$10864;var has_defaults$10865;var rval$10866;var self$10859;var it$0$10854;(it$0$10854=this);(self$10859=this);(rest$10864=(void 0));(has_defaults$10865=false);(rval$10866=classify$10776("fw","bw","keys","defaults",(((acc$10882=[])),(((temp$10887=scope$10849.step_all(["pattern"],specs$10850))),((($length$10892=temp$10887.length)),((($index$10897=0)),function(){$10875:for(;($index$10897<$length$10892);($index$10897++)){var v$10949;var v$10944;var variable$10937;var value$10938;var key$10931;var subp$10932;var key$10926;var variable$10919;var $10877$10913;var $10878$10914;var $10879$10915;var $10880$10916;var t0$10910;var t1$10911;var m$10905;(m$10905=temp$10887[$index$10897]);(t0$10910=m$10905);if((($10878$10914=(t0$10910 instanceof Array))&&((t1$10911=t0$10910.length),(($10880$10916=(t1$10911===2))&&(t0$10910[0]==="dynsplice"))))){(variable$10919=t0$10910[1]);acc$10882.push(((rest$10864=it$0$10854.expand(scope$10849,variable$10919,tags$10851)),["ignore"]));}else{if(($10880$10916&&(t0$10910[0]==="assoc"))){(key$10926=t0$10910[1]);acc$10882.push(["keys",[key$10926,it$0$10854.expand(scope$10849,key$10926,tags$10851)]]);}else{if(($10878$10914&&(($10880$10916=(t1$10911===3))&&(t0$10910[0]==="assoc")))){(key$10931=t0$10910[1]);(subp$10932=t0$10910[2]);acc$10882.push(["keys",[key$10931,it$0$10854.expand(scope$10849,subp$10932,tags$10851)]]);}else{if(($10880$10916&&(t0$10910[0]==="default"))){(variable$10937=t0$10910[1]);(value$10938=t0$10910[2]);acc$10882.push(((has_defaults$10865=true),function(){if(rest$10864){throw $13539(["syntax","pattern"]).create("No default arguments after rest arg.");}else{return ["defaults",[it$0$10854.expand(scope$10849,variable$10937,tags$10851),value$10938]];}}()));}else{(v$10944=m$10905);if(((rest$10864===(void 0))&&(!has_defaults$10865))){acc$10882.push(["fw",it$0$10854.expand(scope$10849,v$10944,tags$10851)]);}else{(v$10949=m$10905);acc$10882.push(["bw",it$0$10854.expand(scope$10849,v$10949,tags$10851)]);}}}}}}}()))),acc$10882)));(rval$10866["rest"]=rest$10864);return rval$10866;});(PatternParser$10781.prototype["expand"]=function(){var x$11015;var x$11024;var x$11040;var x$11045;var variable$11051;var variable$11063;var x$11098;var msg$11105;var msg$11120;var $index$11153;var $length$11148;var temp$11143;var acc$11138;var $index$11257;var $length$11252;var temp$11247;var acc$11242;var $index$11288;var $length$11283;var temp$11278;var t0$11349;var t1$11350;var t2$11351;var $index$11379;var $length$11374;var temp$11369;var acc$11364;var patts$11358;var canon$11177;var normalize$11178;var pps$11179;var vars$11180;var patt$11438;var msg$11459;var other$11456;var keys$11444;var fw$11426;var bw$11427;var defaults$11428;var rest$11429;var $11405$11423;var t0$11416;var t1$11417;var t2$11418;var t3$11419;var t4$11420;var t5$11421;var $11404$11411;var specs$11406;var other$11471;var mode$11465;var subp$11466;var args$11400;var xs$11173;var xs$11132;var x$11126;var f$11111;var arg$11112;var f$11092;var arguments$11093;var checker$11086;var subp$11087;var projector$11080;var subp$11081;var condition$11074;var subp$11075;var v$11069;var v$11057;var type$11031;var $10993$11007;var $10994$11008;var $10995$11009;var $10996$11010;var t0$11003;var bridge$10992$11004;var t1$11005;var $10991$10998;var expr$10984;var rval$10985;var self$10979;var it$0$10974;var scope$10966;var pattern$10967;var tags$10968;var toplevel$10969;var checked$10970;var t0$10962;var $10955$10957;($10955$10957=arguments);(t0$10962=$10955$10957.length);if(((t0$10962>=3)&&(t0$10962<=5))){(scope$10966=$10955$10957[0]);(pattern$10967=$10955$10957[1]);(tags$10968=$10955$10957[2]);(toplevel$10969=function(){if((3>=t0$10962)){return false;}else{return $10955$10957[3];}}());(checked$10970=function(){if((4>=t0$10962)){return false;}else{return $10955$10957[4];}}());(it$0$10974=this);(self$10979=this);(expr$10984=scope$10966.step(["pattern"],pattern$10967));(rval$10985=((($10991$10998=expr$10984)),function(){if((((x$11015=$10991$10998)),((x$11015 instanceof Array)&&(x$11015[0]==="void")))){return ["check",checker_db$10780.null,["ignore"]];}else{if((((x$11024=$10991$10998)),((x$11024 instanceof Array)&&(x$11024[0]==="ignore")))){return expr$10984;}else{if((($10991$10998 instanceof Array)&&((t0$11003=$10991$10998.length),((t0$11003===2)&&($10991$10998[0]==="special"))))){(type$11031=$10991$10998[1]);(it$0$10974.specials[type$11031]=true);return expr$10984;}else{(bridge$10992$11004=$10991$10998);if(((((x$11040=bridge$10992$11004)),((x$11040 instanceof Array)&&(x$11040[0]==="symbol")))||(((x$11045=bridge$10992$11004)),((x$11045 instanceof Array)&&(x$11045[0]==="variable"))))){(variable$11051=$13743(expr$10984,tags$10968));it$0$10974.vars.push(variable$11051);return ["assign",variable$11051];}else{if((($10993$11007=($10991$10998 instanceof Array))&&((t0$11003=$10991$10998.length),(($10995$11009=(t0$11003===2))&&(($10996$11010=($10991$10998[0]==="value"))&&((v$11057=$10991$10998[1]),it$0$10974.opt.strings_as_variables)))))){(variable$11063=__lt____lt____colon__$10771($13743(["symbol",v$11057],tags$10968),expr$10984));it$0$10974.vars.push(variable$11063);return ["assign",variable$11063];}else{if($10996$11010){(v$11069=$10991$10998[1]);return ["check",checker_db$10780(v$11069),["ignore"]];}else{if(($10993$11007&&(($10995$11009=(t0$11003===3))&&($10991$10998[0]==="test")))){(condition$11074=$10991$10998[1]);(subp$11075=$10991$10998[2]);return ["test",condition$11074,it$0$10974.expand(scope$10966,subp$11075,tags$10968,toplevel$10969,false)];}else{if(($10995$11009&&($10991$10998[0]==="project"))){(projector$11080=$10991$10998[1]);(subp$11081=$10991$10998[2]);return ["project",projector$11080,it$0$10974.expand(scope$10966,subp$11081,tags$10968,toplevel$10969,true)];}else{if(($10995$11009&&($10991$10998[0]==="check"))){(checker$11086=$10991$10998[1]);(subp$11087=$10991$10998[2]);return ["check",checker$11086,it$0$10974.expand(scope$10966,subp$11087,tags$10968,toplevel$10969,true)];}else{if(($10995$11009&&(($10996$11010=($10991$10998[0]==="send"))&&((f$11092=$10991$10998[1]),((t1$11005=$10991$10998[2]),(((x$11098=t1$11005)),((x$11098 instanceof Array)&&(x$11098[0]==="data")))))))){(arguments$11093=t1$11005);if(toplevel$10969){it$0$10974.arguments.unshift(arguments$11093);return it$0$10974.expand(scope$10966,f$11092,tags$10968,true,false);}else{(msg$11105="Function arguments can only be declared as a top level pattern.");throw $13539(["syntax","pattern"]).create(msg$11105,({"node":expr$10984,"arg":arguments$11093}));}}else{if($10996$11010){(f$11111=$10991$10998[1]);(arg$11112=$10991$10998[2]);return ["assign",expr$10984];}else{$10991$10998;if((!it$0$10974.opt.allow_nested)){(msg$11120="Nested patterns are not allowed here.");throw $13539(["syntax","pattern"]).create(msg$11120,({"node":expr$10984}));}else{if((($10993$11007=($10991$10998 instanceof Array))&&((t0$11003=$10991$10998.length),((t0$11003===2)&&($10991$10998[0]==="neg"))))){(x$11126=$10991$10998[1]);return ["neg",it$0$10974.expand(scope$10966,x$11126,tags$10968)];}else{if(($10993$11007&&(($10995$11009=(t0$11003>=1))&&($10991$10998[0]==="all")))){(xs$11132=Array.prototype.slice.call($10991$10998,1));return ["all"].concat((((acc$11138=[])),(((temp$11143=xs$11132)),((($length$11148=temp$11143.length)),((($index$11153=0)),function(){$11135:for(;($index$11153<$length$11148);($index$11153++)){var x$11169;var m$11161;(m$11161=temp$11143[$index$11153]);(x$11169=m$11161);acc$11138.push(it$0$10974.expand(scope$10966,x$11169,tags$10968));}}()))),acc$11138));}else{if(($10995$11009&&($10991$10998[0]==="any"))){(xs$11173=Array.prototype.slice.call($10991$10998,1));(canon$11177=function(all$11186){return all$11186.sort().join(",");});(normalize$11178=function(vars$11192){var $index$11212;var $length$11207;var temp$11202;var acc$11197;return canon$11177((((acc$11197=[])),(((temp$11202=vars$11192)),((($length$11207=temp$11202.length)),((($index$11212=0)),function(){$11194:for(;($index$11212<$length$11207);($index$11212++)){var v$11230;var t0$11225;var t1$11226;var m$11220;(m$11220=temp$11202[$index$11212]);(t0$11225=m$11220);if(((t0$11225 instanceof Array)&&((t1$11226=t0$11225.length),((t1$11226===2)&&(t0$11225[0]==="symbol"))))){(v$11230=t0$11225[1]);acc$11197.push(v$11230);}else{$13730(m$11220,"/home/olivier/git/earl-grey/src/pattern.eg",3853,3910);}}}()))),acc$11197));});(pps$11179=(((acc$11242=[])),(((temp$11247=xs$11173)),((($length$11252=temp$11247.length)),((($index$11257=0)),function(){$11239:for(;($index$11257<$length$11252);($index$11257++)){var x$11273;var m$11265;(m$11265=temp$11247[$index$11257]);(x$11273=m$11265);acc$11242.push(PatternParser$10781(scope$10966,x$11273,$13743(it$0$10974.opt,({"tags":tags$10968}))));}}()))),acc$11242));(temp$11278=neighbours$10775(pps$11179));($length$11283=temp$11278.length);($index$11288=0);$11181:for(;($index$11288<$length$11283);($index$11288++)){var $index$11326;var $length$11321;var temp$11316;var pp1$11306;var pp2$11307;var t0$11301;var t1$11302;var m$11296;(m$11296=temp$11278[$index$11288]);(t0$11301=m$11296);if(((t0$11301 instanceof Array)&&((t1$11302=t0$11301.length),(t1$11302===2)))){(pp1$11306=t0$11301[0]);(pp2$11307=t0$11301[1]);(temp$11316=pps$11179);($length$11321=temp$11316.length);($index$11326=0);$11312:for(;($index$11326<$length$11321);($index$11326++)){var pp$11342;var m$11334;(m$11334=temp$11316[$index$11326]);(pp$11342=m$11334);normalize$11178(pp$11342.vars);}if((normalize$11178(pp1$11306.vars)!==normalize$11178(pp2$11307.vars))){throw $13539(["syntax","pattern"]).create("Both branches of 'or' must contain the same variables",({"vars1":__lt____lt____colon__$10771(pp1$11306.vars.sort(),pp1$11306.pattern),"vars2":__lt____lt____colon__$10771(pp2$11307.vars.sort(),pp2$11307.pattern)}));}if((canon$11177($13853(pp1$11306.specials))!==canon$11177($13853(pp2$11307.specials)))){throw $13539(["syntax","pattern"]).create("Both branches of 'or' must contain the same special tokens",({"special1":__lt____lt____colon__$10771($13853(pp1$11306.specials).sort(),pp1$11306.pattern),"special2":__lt____lt____colon__$10771($13853(pp2$11307.specials).sort(),pp2$11307.pattern)}));}}else{$13730(m$11296,"/home/olivier/git/earl-grey/src/pattern.eg",4002,4799);}}(t0$11349=pps$11179);if(((t0$11349 instanceof Array)&&((t1$11350=t0$11349.length),((t1$11350>=1)&&((t2$11351=t0$11349[0]),$13815(t2$11351,"vars")))))){(vars$11180=t2$11351.vars);Array.prototype.slice.call(t0$11349,1);}else{$13730(pps$11179,"/home/olivier/git/earl-grey/src/pattern.eg",4816,4819);}(it$0$10974["vars"]=it$0$10974.vars.concat(vars$11180));(patts$11358=(((acc$11364=[])),(((temp$11369=pps$11179)),((($length$11374=temp$11369.length)),((($index$11379=0)),function(){$11361:for(;($index$11379<$length$11374);($index$11379++)){var pp$11395;var m$11387;(m$11387=temp$11369[$index$11379]);(pp$11395=m$11387);acc$11364.push(pp$11395.pattern);}}()))),acc$11364));return ["any"].concat(patts$11358);}else{if(($10995$11009&&($10991$10998[0]==="data"))){(args$11400=Array.prototype.slice.call($10991$10998,1));(specs$11406=it$0$10974.parse_specs(scope$10966,args$11400,tags$10968));($11404$11411=specs$11406);if((($11405$11423=$13815($11404$11411,"keys"))&&((t0$11416=$11404$11411.keys),((t0$11416 instanceof Array)&&((t1$11417=t0$11416.length),((t1$11417===0)&&($13815($11404$11411,"fw")&&((fw$11426=$11404$11411.fw),($13815($11404$11411,"bw")&&((bw$11427=$11404$11411.bw),($13815($11404$11411,"defaults")&&((defaults$11428=$11404$11411.defaults),$13815($11404$11411,"rest"))))))))))))){(rest$11429=$11404$11411.rest);(patt$11438=__lt____lt____colon__$10771(["array_pattern",fw$11426,bw$11427,defaults$11428,rest$11429],pattern$10967));if(checked$10970){return patt$11438;}else{return ["check",checker_db$10780.Array,patt$11438];}}else{if(($11405$11423&&((keys$11444=$11404$11411.keys),($13815($11404$11411,"fw")&&((t0$11416=$11404$11411.fw),((t0$11416 instanceof Array)&&((t1$11417=t0$11416.length),((t1$11417===0)&&($13815($11404$11411,"bw")&&((t2$11418=$11404$11411.bw),((t2$11418 instanceof Array)&&((t3$11419=t2$11418.length),((t3$11419===0)&&($13815($11404$11411,"defaults")&&((t4$11420=$11404$11411.defaults),((t4$11420 instanceof Array)&&((t5$11421=t4$11420.length),((t5$11421===0)&&($13815($11404$11411,"rest")&&($11404$11411.rest===(void 0))))))))))))))))))))){return ["object_pattern"].concat(keys$11444);}else{(other$11456=$11404$11411);(msg$11459="Pattern must be an array or an object.");throw $13539(["syntax","pattern"]).create(msg$11459,({"node":expr$10984,"specs":specs$11406}));}}}else{if(($10993$11007&&((t0$11003===3)&&($10991$10998[0]==="mode")))){(mode$11465=$10991$10998[1]);(subp$11466=$10991$10998[2]);return it$0$10974.expand(scope$10966,subp$11466,$13743(tags$10968,({"declare_mode":mode$11465})),toplevel$10969,checked$10970);}else{(other$11471=$10991$10998);throw $13539(["syntax","pattern"]).create("Illegal pattern",({"node":other$11471}));}}}}}}}}}}}}}}}}}}()));return (it$0$10974.opt.wrap_pattern||identity$10778)(__lt____lt____colon__$10771(rval$10985,pattern$10967),toplevel$10969);}else{$13730($10955$10957);}});$10720(PatternParser$10781,$10720(((accum$11477=({})),((accum$11477["::name"]="PatternParser"),accum$11477)),((accum$11481=({})),((accum$11481["::egclass"]=true),accum$11481))));PatternParser$10781;(PatternProcessor$10782=function(){var it$0$11489;(it$0$11489=function(){if((!$10704(PatternProcessor$10782)(this))){return Object.create(PatternProcessor$10782.prototype);}else{return this;}}());(it$0$11489["temps"]=[]);(it$0$11489["parts"]=[]);(it$0$11489["gen"]=GenSym$10773("t"));return it$0$11489;});(PatternProcessor$10782.prototype["do"]=function(part$11499){var self$11507;var it$0$11502;(it$0$11502=this);(self$11507=this);return it$0$11502.parts.push(["do",part$11499]);});(PatternProcessor$10782.prototype["check"]=function(){var self$11535;var it$0$11530;var part$11525;var tags$11526;var t0$11521;var $11514$11516;($11514$11516=arguments);(t0$11521=$11514$11516.length);if(((t0$11521>=1)&&(t0$11521<=2))){(part$11525=$11514$11516[0]);(tags$11526=function(){if((1>=t0$11521)){return ({});}else{return $11514$11516[1];}}());(it$0$11530=this);(self$11535=this);return it$0$11530.parts.push($13743(["check",part$11525],tags$11526));}else{$13730($11514$11516);}});(PatternProcessor$10782.prototype["temp"]=function(){var x$11583;var x$11588;var init$11595;var bridge$11566$11577;var $11565$11572;var self$11567;var it$0$11560;var x$11555;var v$11556;var t0$11551;var $11544$11546;($11544$11546=arguments);(t0$11551=$11544$11546.length);if(((t0$11551>=1)&&(t0$11551<=2))){(x$11555=$11544$11546[0]);(v$11556=function(){if((1>=t0$11551)){return null;}else{return $11544$11546[1];}}());(it$0$11560=this);(self$11567=this);($11565$11572=x$11555);(bridge$11566$11577=$11565$11572);if((((((x$11583=bridge$11566$11577)),((x$11583 instanceof Array)&&(x$11583[0]==="variable")))||(((x$11588=bridge$11566$11577)),((x$11588 instanceof Array)&&(x$11588[0]==="symbol"))))&&($13815($11565$11572,"single_assignment")&&($11565$11572.single_assignment&&(!v$11556))))){return x$11555;}else{(init$11595=$11565$11572);(v$11556=(v$11556||["symbol",it$0$11560.gen()]));(v$11556["single_assignment"]=true);it$0$11560.temps.push(v$11556);it$0$11560.do(["send",["symbol",":="],["data",v$11556,init$11595]]);return v$11556;}}else{$13730($11544$11546);}});(PatternProcessor$10782.prototype["process"]=function(pattern$11603,rhs$11604,fns$11605){var x$11642;var x$11671;var t$11683;var t$11694;var pp$11704;var $index$11732;var $length$11727;var temp$11722;var t$11714;var $index$11790;var $length$11785;var temp$11780;var acc$11775;var fn$11761;var parts$11762;var t$11756;var $index$11842;var $length$11837;var temp$11832;var acc$11827;var t$11820;var otherwise$11941;var $11923$11925;var $index$11955;var $length$11950;var temp$11945;var $index$11992;var $length$11987;var temp$11982;var end$12034;var pos$12029;var $index$12054;var $length$12049;var temp$12044;var acc$12039;var nfw$11881;var nbw$11882;var ndflt$11883;var extract_length$11884;var check_length$11885;var lo$11886;var hi$11887;var t$11888;var len$11889;var fw$11874;var bw$11875;var dflt$11876;var rest$11877;var subp$11816;var xs$11752;var xs$11710;var patt$11700;var projector$11689;var subp$11690;var checker$11678;var subp$11679;var checker$11667;var condition$11660;var subp$11661;var kind$11655;var sym$11649;var $11622$11634;var $11623$11635;var $11624$11636;var $11625$11637;var t0$11632;var $11621$11627;var rval$11618;var self$11613;var it$0$11608;(it$0$11608=this);(self$11613=this);(rval$11618=((($11621$11627=pattern$11603)),function(){if((((x$11642=$11621$11627)),((x$11642 instanceof Array)&&(x$11642[0]==="ignore")))){return it$0$11608.do(rhs$11604);}else{if((($11622$11634=($11621$11627 instanceof Array))&&((t0$11632=$11621$11627.length),(($11624$11636=(t0$11632===2))&&($11621$11627[0]==="assign"))))){(sym$11649=$11621$11627[1]);return it$0$11608.parts.push(fns$11605.assign(sym$11649,rhs$11604));}else{if(($11624$11636&&($11621$11627[0]==="special"))){(kind$11655=$11621$11627[1]);return it$0$11608.process(fns$11605.special(pattern$11603,rhs$11604),rhs$11604,fns$11605);}else{if(($11622$11634&&(($11624$11636=(t0$11632===3))&&($11621$11627[0]==="test")))){(condition$11660=$11621$11627[1]);(subp$11661=$11621$11627[2]);it$0$11608.process(subp$11661,rhs$11604,fns$11605);return it$0$11608.check(condition$11660,({"test":true}));}else{if(($11624$11636&&(($11625$11637=($11621$11627[0]==="check"))&&((checker$11667=$11621$11627[1]),(((x$11671=$11621$11627[2])),((x$11671 instanceof Array)&&(x$11671[0]==="ignore"))))))){return it$0$11608.check(["send",checker$11667,["data",rhs$11604]]);}else{if($11625$11637){(checker$11678=$11621$11627[1]);(subp$11679=$11621$11627[2]);(t$11683=it$0$11608.temp(rhs$11604));it$0$11608.check(["send",checker$11678,["data",t$11683]]);return it$0$11608.process(subp$11679,t$11683,fns$11605);}else{if(($11624$11636&&($11621$11627[0]==="project"))){(projector$11689=$11621$11627[1]);(subp$11690=$11621$11627[2]);(t$11694=it$0$11608.temp(["send",projector$11689,["data",rhs$11604]]));it$0$11608.check(["send",t$11694,["value",0]]);return it$0$11608.process(subp$11690,["send",t$11694,["value",1]],fns$11605);}else{if(($11622$11634&&((t0$11632===2)&&($11621$11627[0]==="neg")))){(patt$11700=$11621$11627[1]);return it$0$11608.check(["send",["symbol","not"],["data",["void"],(((pp$11704=PatternProcessor$10782())),pp$11704.process(patt$11700,rhs$11604,fns$11605),assemble_conditions$10783(pp$11704))]]);}else{if(($11622$11634&&(($11624$11636=(t0$11632>=1))&&($11621$11627[0]==="all")))){(xs$11710=Array.prototype.slice.call($11621$11627,1));(t$11714=it$0$11608.temp(rhs$11604));(temp$11722=xs$11710);($length$11727=temp$11722.length);($index$11732=0);$11715:for(;($index$11732<$length$11727);($index$11732++)){var x$11748;var m$11740;(m$11740=temp$11722[$index$11732]);(x$11748=m$11740);it$0$11608.process(x$11748,t$11714,fns$11605);}return null;}else{if(($11624$11636&&($11621$11627[0]==="any"))){(xs$11752=Array.prototype.slice.call($11621$11627,1));(t$11756=it$0$11608.temp(rhs$11604,["symbol",gensym$10774("bridge")]));return it$0$11608.check((((fn$11761=function(x$11766,rest$11767){return ["send",["symbol","or"],["data",x$11766,rest$11767]];})),((parts$11762=(((acc$11775=[])),(((temp$11780=xs$11752)),((($length$11785=temp$11780.length)),((($index$11790=0)),function(){$11772:for(;($index$11790<$length$11785);($index$11790++)){var pp$11809;var x$11806;var m$11798;(m$11798=temp$11780[$index$11790]);(x$11806=m$11798);acc$11775.push((((pp$11809=PatternProcessor$10782())),pp$11809.process(x$11806,t$11756,fns$11605),assemble_conditions$10783(pp$11809)));}}()))),acc$11775))),util$10772.construct(parts$11762,fn$11761,["symbol","false"])));}else{if(($11624$11636&&($11621$11627[0]==="object_pattern"))){(subp$11816=Array.prototype.slice.call($11621$11627,1));(t$11820=it$0$11608.temp(rhs$11604));(acc$11827=[]);(temp$11832=subp$11816);($length$11837=temp$11832.length);($index$11842=0);$11821:for(;($index$11842<$length$11837);($index$11842++)){var k$11862;var v$11863;var t0$11855;var t1$11856;var t2$11857;var t3$11858;var m$11850;(m$11850=temp$11832[$index$11842]);(t0$11855=m$11850);if(((t0$11855 instanceof Array)&&((t1$11856=t0$11855.length),((t1$11856===2)&&((t2$11857=t0$11855[0]),((t2$11857 instanceof Array)&&((t3$11858=t2$11857.length),((t3$11858===2)&&(t2$11857[0]==="value"))))))))){(k$11862=t2$11857[1]);(v$11863=t0$11855[1]);acc$11827.push((it$0$11608.check(["send",["symbol","___hasprop"],["data",t$11820,["value",k$11862]]]),it$0$11608.process(v$11863,["send",t$11820,["value",k$11862]],fns$11605)));}else{$13730(m$11850,"/home/olivier/git/earl-grey/src/pattern.eg",8142,8274);}}return acc$11827;}else{if(($11622$11634&&((t0$11632===5)&&($11621$11627[0]==="array_pattern")))){(fw$11874=$11621$11627[1]);(bw$11875=$11621$11627[2]);(dflt$11876=$11621$11627[3]);(rest$11877=$11621$11627[4]);(nfw$11881=fw$11874.length);(nbw$11882=bw$11875.length);(ndflt$11883=dflt$11876.length);(extract_length$11884=true);(check_length$11885=true);(lo$11886=(nfw$11881+nbw$11882));(hi$11887=(lo$11886+ndflt$11883));(t$11888=it$0$11608.temp(rhs$11604));(len$11889=it$0$11608.temp(["send",t$11888,["send",["symbol","."],["data",["void"],["symbol","length"]]]]));it$0$11608.check(((($11923$11925=rest$11877)),function(){if($11923$11925){return ["send",["symbol",">="],["data",len$11889,["value",lo$11886]]];}else{$11923$11925;if((lo$11886===hi$11887)){return ["send",["symbol","==="],["data",len$11889,["value",lo$11886]]];}else{(otherwise$11941=$11923$11925);return ["send",["symbol","and"],["data",["send",["symbol",">="],["data",len$11889,["value",lo$11886]]],["send",["symbol","<="],["data",len$11889,["value",hi$11887]]]]];}}}()));(temp$11945=$13708(fw$11874));($length$11950=temp$11945.length);($index$11955=0);$11890:for(;($index$11955<$length$11950);($index$11955++)){var i$11973;var m$11974;var t0$11968;var t1$11969;var m$11963;(m$11963=temp$11945[$index$11955]);(t0$11968=m$11963);if(((t0$11968 instanceof Array)&&((t1$11969=t0$11968.length),(t1$11969===2)))){(i$11973=t0$11968[0]);(m$11974=t0$11968[1]);it$0$11608.process(m$11974,["send",t$11888,["value",i$11973]],fns$11605);}else{$13730(m$11963,"/home/olivier/git/earl-grey/src/pattern.eg",9006,9092);}}(temp$11982=$13708(dflt$11876));($length$11987=temp$11982.length);($index$11992=0);$11892:for(;($index$11992<$length$11987);($index$11992++)){var idx$12022;var i$12012;var patt$12013;var value$12014;var t0$12005;var t1$12006;var t2$12007;var t3$12008;var m$12000;(m$12000=temp$11982[$index$11992]);(t0$12005=m$12000);if(((t0$12005 instanceof Array)&&((t1$12006=t0$12005.length),((t1$12006===2)&&((i$12012=t0$12005[0]),((t2$12007=t0$12005[1]),((t2$12007 instanceof Array)&&((t3$12008=t2$12007.length),(t3$12008===2))))))))){(patt$12013=t2$12007[0]);(value$12014=t2$12007[1]);(idx$12022=(i$12012+nfw$11881));it$0$11608.process(patt$12013,["send",["symbol","if"],["data",["send",["symbol",">="],["data",["value",(idx$12022+nbw$11882)],len$11889]],value$12014,["send",t$11888,["value",idx$12022]]]],fns$11605);}else{$13730(m$12000,"/home/olivier/git/earl-grey/src/pattern.eg",9092,9261);}}if((rest$11877!==(void 0))){(pos$12029=(nfw$11881+ndflt$11883));(end$12034=function(){if((nbw$11882>0)){return [["value",(-nbw$11882)]];}else{return [];}}());it$0$11608.process(rest$11877,["send",["send",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["send",["symbol","."],["data",["void"],["symbol","slice"]]]],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",t$11888,["value",pos$12029]].concat(end$12034)],fns$11605);}else{[];}(acc$12039=[]);(temp$12044=$13708(bw$11875));($length$12049=temp$12044.length);($index$12054=0);$11894:for(;($index$12054<$length$12049);($index$12054++)){var i$12072;var m$12073;var t0$12067;var t1$12068;var m$12062;(m$12062=temp$12044[$index$12054]);(t0$12067=m$12062);if(((t0$12067 instanceof Array)&&((t1$12068=t0$12067.length),(t1$12068===2)))){(i$12072=t0$12067[0]);(m$12073=t0$12067[1]);acc$12039.push(it$0$11608.process(m$12073,["send",["symbol","___js_fetch"],["data",t$11888,["send",["symbol","-"],["data",len$11889,["value",(nbw$11882-i$12072)]]]]],fns$11605));}else{$13730(m$12062,"/home/olivier/git/earl-grey/src/pattern.eg",9712,9863);}}return acc$12039;}else{$13730($11621$11627);}}}}}}}}}}}}}()));return rval$11618;});$10720(PatternProcessor$10782,$10720(((accum$12083=({})),((accum$12083["::name"]="PatternProcessor"),accum$12083)),((accum$12087=({})),((accum$12087["::egclass"]=true),accum$12087))));PatternProcessor$10782;(assemble_conditions$10783=function(pp$12093){var $index$12175;var $length$12170;var temp$12165;var acc$12160;var decls$12154;var construct$12096;(construct$12096=function($12099$12101){var x$12144;var rest$12145;var x$12137;var x$12129;var rest$12130;var $12104$12120;var $12105$12121;var t0$12116;var t1$12117;var t2$12118;var $12103$12111;var ph$12106;(ph$12106=$12099$12101);($12103$12111=ph$12106);if((($12104$12120=($12103$12111 instanceof Array))&&((t0$12116=$12103$12111.length),(t0$12116===0)))){return ["value",true];}else{if(($12104$12120&&((t0$12116>=1)&&((t1$12117=$12103$12111[0]),((t1$12117 instanceof Array)&&((t2$12118=t1$12117.length),((t2$12118===2)&&(t1$12117[0]==="do")))))))){(x$12129=t1$12117[1]);(rest$12130=Array.prototype.slice.call($12103$12111,1));return ["multi",x$12129,construct$12096(rest$12130)];}else{if(($12104$12120&&((t0$12116===1)&&((t1$12117=$12103$12111[0]),((t1$12117 instanceof Array)&&((t2$12118=t1$12117.length),((t2$12118===2)&&(t1$12117[0]==="check")))))))){(x$12137=t1$12117[1]);return x$12137;}else{if(($12104$12120&&((t0$12116>=1)&&((t1$12117=$12103$12111[0]),((t1$12117 instanceof Array)&&((t2$12118=t1$12117.length),((t2$12118===2)&&(t1$12117[0]==="check")))))))){(x$12144=t1$12117[1]);(rest$12145=Array.prototype.slice.call($12103$12111,1));return ["send",["symbol","and"],["data",x$12144,construct$12096(rest$12145)]];}else{$13730($12103$12111);}}}}});if(pp$12093.temps.length){(decls$12154=(((acc$12160=[])),(((temp$12165=pp$12093.temps)),((($length$12170=temp$12165.length)),((($index$12175=0)),function(){$12157:for(;($index$12175<$length$12170);($index$12175++)){var t$12191;var m$12183;(m$12183=temp$12165[$index$12175]);(t$12191=m$12183);acc$12160.push(["declare",t$12191]);}}()))),acc$12160));return ["multi"].concat(decls$12154).concat([construct$12096(pp$12093.parts)]);}else{return construct$12096(pp$12093.parts);}});(assemble_pattern$10784=function(){var $index$12245;var $length$12240;var temp$12235;var $index$12294;var $length$12289;var temp$12284;var test$12387;var lead$12215;var trail$12216;var construct$12217;var parts$12209;var t$12210;var f$12211;var t0$12205;var $12198$12200;($12198$12200=arguments);(t0$12205=$12198$12200.length);if(((t0$12205>=2)&&(t0$12205<=3))){(parts$12209=$12198$12200[0]);(t$12210=$12198$12200[1]);(f$12211=function(){if((2>=t0$12205)){return null;}else{return $12198$12200[2];}}());(lead$12215=[]);(temp$12235=parts$12209.slice(0));($length$12240=temp$12235.length);($index$12245=0);$12218:for(;($index$12245<$length$12240);($index$12245++)){var x$12274;var x$12267;var $12220$12261;var $12221$12262;var $12222$12263;var $12223$12264;var t0$12258;var t1$12259;var m$12253;(m$12253=temp$12235[$index$12245]);(t0$12258=m$12253);if((($12221$12262=(t0$12258 instanceof Array))&&((t1$12259=t0$12258.length),(($12223$12264=(t1$12259===2))&&(t0$12258[0]==="do"))))){(x$12267=t0$12258[1]);lead$12215.push(x$12267);parts$12209.shift();}else{if(($12223$12264&&(t0$12258[0]==="check"))){(x$12274=t0$12258[1]);break $12218;}else{$13730(m$12253,"/home/olivier/git/earl-grey/src/pattern.eg",10324,10434);}}}(trail$12216=[]);(temp$12284=parts$12209.slice(0).reverse());($length$12289=temp$12284.length);($index$12294=0);$12224:for(;($index$12294<$length$12289);($index$12294++)){var x$12323;var x$12316;var $12226$12310;var $12227$12311;var $12228$12312;var $12229$12313;var t0$12307;var t1$12308;var m$12302;(m$12302=temp$12284[$index$12294]);(t0$12307=m$12302);if((($12227$12311=(t0$12307 instanceof Array))&&((t1$12308=t0$12307.length),(($12229$12313=(t1$12308===2))&&(t0$12307[0]==="do"))))){(x$12316=t0$12307[1]);trail$12216.unshift(x$12316);parts$12209.pop();}else{if(($12229$12313&&(t0$12307[0]==="check"))){(x$12323=t0$12307[1]);break $12224;}else{$13730(m$12302,"/home/olivier/git/earl-grey/src/pattern.eg",10448,10570);}}}(construct$12217=function($12330$12332){var other$12383;var x$12375;var rest$12376;var x$12368;var x$12360;var rest$12361;var $12335$12351;var $12336$12352;var t0$12347;var t1$12348;var t2$12349;var $12334$12342;var ph$12337;(ph$12337=$12330$12332);($12334$12342=ph$12337);if((($12335$12351=($12334$12342 instanceof Array))&&((t0$12347=$12334$12342.length),(t0$12347===0)))){return ["value",true];}else{if(($12335$12351&&((t0$12347>=1)&&((t1$12348=$12334$12342[0]),((t1$12348 instanceof Array)&&((t2$12349=t1$12348.length),((t2$12349===2)&&(t1$12348[0]==="do")))))))){(x$12360=t1$12348[1]);(rest$12361=Array.prototype.slice.call($12334$12342,1));return ["multi",x$12360,construct$12217(rest$12361)];}else{if(($12335$12351&&((t0$12347===1)&&((t1$12348=$12334$12342[0]),((t1$12348 instanceof Array)&&((t2$12349=t1$12348.length),((t2$12349===2)&&(t1$12348[0]==="check")))))))){(x$12368=t1$12348[1]);return x$12368;}else{if(($12335$12351&&((t0$12347>=1)&&((t1$12348=$12334$12342[0]),((t1$12348 instanceof Array)&&((t2$12349=t1$12348.length),((t2$12349===2)&&(t1$12348[0]==="check")))))))){(x$12375=t1$12348[1]);(rest$12376=Array.prototype.slice.call($12334$12342,1));return ["send",["symbol","and"],["data",x$12375,construct$12217(rest$12376)]];}else{(other$12383=$12334$12342);throw $13539(["oops"]).create("?!?",other$12383);}}}}});if(parts$12209.length){(test$12387=construct$12217(parts$12209));return ["multi"].concat(lead$12215).concat([function(){if(f$12211){return ["send",["symbol","if"],["data",test$12387,["multi"].concat(trail$12216).concat([t$12210]),f$12211]];}else{return ["send",["symbol","if"],["data",test$12387,["multi"].concat(trail$12216).concat([t$12210])]];}}()]);}else{return ["multi"].concat(lead$12215).concat(trail$12216).concat([t$12210]);}}else{$13730($12198$12200);}});(inject_below_uses$10785=function($12396$12398,fn$12399){var other$12423;var scope$12416;var x$12417;var t0$12412;var $12401$12407;var ph$12402;(ph$12402=$12396$12398);($12401$12407=ph$12402);if((($12401$12407 instanceof Array)&&((t0$12412=$12401$12407.length),((t0$12412===3)&&($12401$12407[0]==="use"))))){(scope$12416=$12401$12407[1]);(x$12417=$12401$12407[2]);return ["use",scope$12416,inject_below_uses$10785(x$12417,fn$12399)];}else{(other$12423=$12401$12407);return fn$12399(other$12423);}});(parse_pattern$10786=function(scope$12429,pattern$12430,rhs$12431,opt$12432){var t0$12443;var $index$12482;var $length$12477;var temp$12472;var acc$12467;var parse$12435;var target$12436;var proc$12437;(parse$12435=PatternParser$10781(scope$12429,pattern$12430,opt$12432));if(((!opt$12432.allow_arguments)&&parse$12435.arguments.length)){throw $13539(["syntax","pattern","arguments"]).create("Arguments cannot be declared in this pattern",({"args":parse$12435.arguments[0]}));}(t0$12443=$13854((opt$12432.wrap_target||identity$10778))(function(){if(parse$12435.arguments.length){return inject_below_uses$10785(rhs$12431,function(x$12446){return util$10772.construct(parse$12435.arguments.concat([x$12446]),function(args$12449,rest$12450){return ["send",["symbol","->"],["data",args$12449,rest$12450]];});});}else{return rhs$12431;}}()));if(t0$12443[0]){(target$12436=t0$12443[1]);}else{$13730(function(){if(parse$12435.arguments.length){return inject_below_uses$10785(rhs$12431,function(x$12455){return util$10772.construct(parse$12435.arguments.concat([x$12455]),function(args$12458,rest$12459){return ["send",["symbol","->"],["data",args$12458,rest$12459]];});});}else{return rhs$12431;}}(),"/home/olivier/git/earl-grey/src/pattern.eg",11963,12396);}(proc$12437=PatternProcessor$10782());proc$12437.process(parse$12435.pattern,target$12436,opt$12432);if(opt$12432.finalize){return ["splice"].concat(opt$12432.declare(scope$12429,parse$12435.vars)).concat([["multi"].concat((((acc$12467=[])),(((temp$12472=proc$12437.temps)),((($length$12477=temp$12472.length)),((($index$12482=0)),function(){$12464:for(;($index$12482<$length$12477);($index$12482++)){var t$12498;var m$12490;(m$12490=temp$12472[$index$12482]);(t$12498=m$12490);acc$12467.push(["declare",t$12498]);}}()))),acc$12467)).concat([assemble_pattern$10784(proc$12437.parts,opt$12432.success(target$12436),opt$12432.failure(target$12436))])]);}else{return [parse$12435.vars,proc$12437.temps,proc$12437.parts];}});(checkall$10787=["send","data","multi","assign","void","check","do"]);(same_block$10788=function($12506$12508,ban1$12509,ban2$12510){var $index$12611;var $length$12606;var temp$12601;var other$12632;var type1$12584;var args1$12585;var type2$12586;var args2$12587;var m1$12575;var m2$12576;var v1$12566;var v2$12567;var s1$12557;var s2$12558;var v1$12545;var v2$12546;var $12513$12536;var $12514$12537;var $12515$12538;var $12516$12539;var $12517$12540;var $12518$12541;var $12519$12542;var t0$12530;var t1$12531;var t2$12532;var t3$12533;var t4$12534;var $12512$12525;var ph$12520;(ph$12520=$12506$12508);($12512$12525=ph$12520);if((($12513$12536=($12512$12525 instanceof Array))&&((t0$12530=$12512$12525.length),(($12515$12538=(t0$12530===2))&&((t1$12531=$12512$12525[0]),(($12517$12540=(t1$12531 instanceof Array))&&((t2$12532=t1$12531.length),(($12519$12542=(t2$12532===2))&&((t1$12531[0]==="variable")&&((v1$12545=t1$12531[1]),((t3$12533=$12512$12525[1]),((t3$12533 instanceof Array)&&((t4$12534=t3$12533.length),((t4$12534===2)&&(t3$12533[0]==="variable"))))))))))))))){(v2$12546=t3$12533[1]);return (v1$12545===v2$12546);}else{if(($12519$12542&&((t1$12531[0]==="symbol")&&((s1$12557=t1$12531[1]),((t3$12533=$12512$12525[1]),((t3$12533 instanceof Array)&&((t4$12534=t3$12533.length),((t4$12534===2)&&(t3$12533[0]==="symbol"))))))))){(s2$12558=t3$12533[1]);return (((!$10719(ban1$12509,s1$12557))&&(!$10719(ban2$12510,s2$12558)))&&(s1$12557===s2$12558));}else{if(($12519$12542&&((t1$12531[0]==="value")&&((v1$12566=t1$12531[1]),((t3$12533=$12512$12525[1]),((t3$12533 instanceof Array)&&((t4$12534=t3$12533.length),((t4$12534===2)&&(t3$12533[0]==="value"))))))))){(v2$12567=t3$12533[1]);return (v1$12566===v2$12567);}else{if(($12519$12542&&((t1$12531[0]==="macro")&&((m1$12575=t1$12531[1]),((t3$12533=$12512$12525[1]),((t3$12533 instanceof Array)&&((t4$12534=t3$12533.length),((t4$12534===2)&&(t3$12533[0]==="macro"))))))))){(m2$12576=t3$12533[1]);return (m1$12575===m2$12576);}else{if(($12517$12540&&((t2$12532>=1)&&((type1$12584=t1$12531[0]),((args1$12585=Array.prototype.slice.call(t1$12531,1)),((t3$12533=$12512$12525[1]),((t3$12533 instanceof Array)&&((t4$12534=t3$12533.length),((t4$12534>=1)&&((type2$12586=t3$12533[0]),((args2$12587=Array.prototype.slice.call(t3$12533,1)),(checkall$10787.indexOf(type1$12584)!==-1)))))))))))){if(((type1$12584===type2$12586)&&(args1$12585.length===args2$12587.length))){(temp$12601=$13882(args1$12585,args2$12587));($length$12606=temp$12601.length);($index$12611=0);$12597:for(;($index$12611<$length$12606);($index$12611++)){var pair$12627;var m$12619;(m$12619=temp$12601[$index$12611]);(pair$12627=m$12619);if((!same_block$10788(pair$12627,ban1$12509,ban2$12510))){return false;}}return true;}else{return false;}}else{(other$12632=$12512$12525);return false;}}}}}});(parse_clauses$10789=function(scope$12638,target$12639,stmts$12640,opt$12641){var $index$12671;var $length$12666;var temp$12661;var acc$12656;var $index$12847;var $length$12842;var temp$12837;var acc$12832;var $index$12894;var $length$12889;var temp$12884;var acc$12879;var decls$12873;var all_temps$12644;var the_parts$12645;var unique_temps$12646;(all_temps$12644=[]);(the_parts$12645=(((acc$12656=[])),(((temp$12661=scope$12638.step_all(["clause"],stmts$12640))),((($length$12666=temp$12661.length)),((($index$12671=0)),function(){$12652:for(;($index$12671<$length$12666);($index$12671++)){var accum$12746;var accum$12757;var t0$12742;var t1$12743;var $index$12780;var $length$12775;var temp$12770;var bod$12807;var placeholder$12696;var special_fn$12697;var vars$12698;var temps$12699;var blocks$12700;var vars2$12701;var x$12816;var other$12823;var b$12813;var pattern$12690;var body$12691;var $12654$12687;var t0$12684;var t1$12685;var m$12679;(m$12679=temp$12661[$index$12671]);(t0$12684=m$12679);if(((t0$12684 instanceof Array)&&((t1$12685=t0$12684.length),((t1$12685===3)&&(t0$12684[0]==="clause"))))){(pattern$12690=t0$12684[1]);(body$12691=t0$12684[2]);acc$12656.push((((placeholder$12696=(void 0))),((special_fn$12697=function($12709$12711,value$12712){var t0$12718;var t1$12719;var other$12738;var $12714$12725;var ph$12715;var expr$12716;(t0$12718=$12709$12711);if(((t0$12718 instanceof Array)&&((t1$12719=t0$12718.length),((t1$12719===2)&&(t0$12718[0]==="special"))))){(ph$12715=t0$12718[1]);(expr$12716=t0$12718);}else{$13730($12709$12711);}($12714$12725=ph$12715);if(($12714$12725==="match")){(placeholder$12696=__lt____lt____colon__$10771(["symbol",scope$12638.gensym("ph")],expr$12716));return ["assign",placeholder$12696];}else{(other$12738=$12714$12725);throw $13539(["syntax","pattern","special"]).create("Special token cannot be used here",({"special":expr$12716}));}})),((t0$12742=parse_pattern$10786(scope$12638,pattern$12690,target$12639,$13743(opt$12641,$10720(({"allow_arguments":false,"allow_nested":true,"special":special_fn$12697}),$10720(((accum$12746=({})),((accum$12746["assign"]=function(v$12750,value$12751){return ["do",__lt____lt____colon__$10771(["assign",v$12750,value$12751],v$12750)];}),accum$12746)),({"finalize":false})))))),function(){if(((t0$12742 instanceof Array)&&((t1$12743=t0$12742.length),(t1$12743===3)))){(vars$12698=t0$12742[0]);(temps$12699=t0$12742[1]);(blocks$12700=t0$12742[2]);}else{return $13730(parse_pattern$10786(scope$12638,pattern$12690,target$12639,$13743(opt$12641,$10720(({"allow_arguments":false,"allow_nested":true,"special":special_fn$12697}),$10720(((accum$12757=({})),((accum$12757["assign"]=function(v$12761,value$12762){return ["do",__lt____lt____colon__$10771(["assign",v$12761,value$12762],v$12761)];}),accum$12757)),({"finalize":false}))))),"/home/olivier/git/earl-grey/src/pattern.eg",14023,14370);}}()),(all_temps$12644=all_temps$12644.concat(temps$12699)),function(){if(placeholder$12696){return vars$12698.push(placeholder$12696);}}(),((vars2$12701=({}))),(((temp$12770=vars$12698)),((($length$12775=temp$12770.length)),((($index$12780=0)),function(){$12702:for(;($index$12780<$length$12775);($index$12780++)){var other$12804;var xxx$12798;var t0$12793;var t1$12794;var m$12788;(m$12788=temp$12770[$index$12780]);(t0$12793=m$12788);if(((t0$12793 instanceof Array)&&((t1$12794=t0$12793.length),((t1$12794===2)&&(t0$12793[0]==="symbol"))))){(xxx$12798=t0$12793[1]);(vars2$12701[xxx$12798]=true);}else{(other$12804=m$12788);throw $13539(["syntax","unexpected"]).create();}}}()))),(((bod$12807=function(){if(placeholder$12696){return parse_clauses$10789(scope$12638,placeholder$12696,$13854(["multi"])(body$12691)[1],opt$12641);}else{if(opt$12641.wrap){return opt$12641.wrap(body$12691);}else{return body$12691;}}}())),["clause",vars$12698,vars2$12701,blocks$12700,bod$12807])));}else{if((((x$12816=t0$12684)),((x$12816 instanceof Array)&&(x$12816[0]==="block")))){(b$12813=t0$12684);acc$12656.push(b$12813);}else{(other$12823=m$12679);acc$12656.push(function(){throw $13539(["syntax","clause"]).create("Illegal clause",({"clause":other$12823}));}());}}}}()))),acc$12656));if(opt$12641.fallback){the_parts$12645.push(["block",opt$12641.fallback(target$12639)]);}(unique_temps$12646=$13853(util$10772.mkset((((acc$12832=[])),(((temp$12837=all_temps$12644)),((($length$12842=temp$12837.length)),((($index$12847=0)),function(){$12829:for(;($index$12847<$length$12842);($index$12847++)){var t$12865;var t0$12860;var t1$12861;var m$12855;(m$12855=temp$12837[$index$12847]);(t0$12860=m$12855);if(((t0$12860 instanceof Array)&&((t1$12861=t0$12860.length),((t1$12861===2)&&(t0$12860[0]==="symbol"))))){(t$12865=t0$12860[1]);acc$12832.push(t$12865);}else{$13730(m$12855,"/home/olivier/git/earl-grey/src/pattern.eg",15180,15210);}}}()))),acc$12832))));(decls$12873=(((acc$12879=[])),(((temp$12884=unique_temps$12646)),((($length$12889=temp$12884.length)),((($index$12894=0)),function(){$12876:for(;($index$12894<$length$12889);($index$12894++)){var t$12910;var m$12902;(m$12902=temp$12884[$index$12894]);(t$12910=m$12902);acc$12879.push(["declare",["symbol",t$12910]]);}}()))),acc$12879));return ["multi"].concat(decls$12873).concat([weave_clauses$10791(the_parts$12645)]);});(opt_clauses$10790=function(clauses$12917){var $index$12946;var $length$12941;var temp$12936;var acc$12931;var $index$13081;var $length$13076;var temp$13071;var acc$13066;var $index$13126;var $length$13121;var temp$13116;var acc$13111;var $index$13170;var $length$13165;var temp$13160;var acc$13155;var shares$12920;var max$12921;var temps$12922;var shared_last$12923;var idx_last$12924;var new_clauses$12925;(shares$12920=(((acc$12931=[])),(((temp$12936=$13708(clauses$12917.slice(1)))),((($length$12941=temp$12936.length)),((($index$12946=0)),function(){$12928:for(;($index$12946<$length$12941);($index$12946++)){var t0$12985;var t1$12986;var $index$13009;var $length$13004;var temp$12999;var varsd0$12978;var blocks0$12979;var share$12980;var idx$12981;var i$12966;var vars$12967;var varsd$12968;var blocks$12969;var body$12970;var t0$12959;var t1$12960;var t2$12961;var t3$12962;var m$12954;(m$12954=temp$12936[$index$12946]);(t0$12959=m$12954);if(((t0$12959 instanceof Array)&&((t1$12960=t0$12959.length),((t1$12960===2)&&((i$12966=t0$12959[0]),((t2$12961=t0$12959[1]),((t2$12961 instanceof Array)&&((t3$12962=t2$12961.length),((t3$12962===5)&&(t2$12961[0]==="clause")))))))))){(vars$12967=t2$12961[1]);(varsd$12968=t2$12961[2]);(blocks$12969=t2$12961[3]);(body$12970=t2$12961[4]);acc$12931.push((((t0$12985=$10719(clauses$12917,i$12966)),function(){if(((t0$12985 instanceof Array)&&((t1$12986=t0$12985.length),((t1$12986===5)&&(t0$12985[0]==="clause"))))){t0$12985[1];(varsd0$12978=t0$12985[2]);(blocks0$12979=t0$12985[3]);t0$12985[4];}else{return $13730($10719(clauses$12917,i$12966),"/home/olivier/git/earl-grey/src/pattern.eg",15483,15503);}}()),((share$12980=0)),((idx$12981=0)),(((temp$12999=blocks$12969)),((($length$13004=temp$12999.length)),((($index$13009=0)),function(){$12982:for(;($index$13009<$length$13004);($index$13009++)){var x$13040;var x$13049;var other$13056;var $13028$13030;var b$13025;var m$13017;(m$13017=temp$12999[$index$13009]);(b$13025=m$13017);if(same_block$10788([$10719(blocks0$12979,share$12980),b$13025],varsd0$12978,varsd$12968)){(share$12980++);($13028$13030=b$13025);if((((x$13040=$13028$13030)),((x$13040 instanceof Array)&&(x$13040[0]==="do")))){null;}else{if((((x$13049=$13028$13030)),((x$13049 instanceof Array)&&(x$13049[0]==="check")))){(idx$12981=share$12980);}else{(other$13056=$13028$13030);__lt____gt__$10769(null,other$13056);}}}else{break $12982;}}}()))),[share$12980,idx$12981]));}else{$13730(m$12954,"/home/olivier/git/earl-grey/src/pattern.eg",15359,15880);}}}()))),acc$12931));(max$12921=$10719(Math.max,(((acc$13066=[])),(((temp$13071=shares$12920)),((($length$13076=temp$13071.length)),((($index$13081=0)),function(){$13063:for(;($index$13081<$length$13076);($index$13081++)){var x$13099;var t0$13094;var t1$13095;var m$13089;(m$13089=temp$13071[$index$13081]);(t0$13094=m$13089);if(((t0$13094 instanceof Array)&&((t1$13095=t0$13094.length),(t1$13095===2)))){(x$13099=t0$13094[0]);t0$13094[1];acc$13066.push(x$13099);}else{$13730(m$13089,"/home/olivier/git/earl-grey/src/pattern.eg",15894,15923);}}}()))),acc$13066)));shares$12920.push([0,0]);(temps$12922=(((acc$13111=[])),(((temp$13116=$13930(1,max$12921))),((($length$13121=temp$13116.length)),((($index$13126=0)),function(){$13108:for(;($index$13126<$length$13121);($index$13126++)){var m$13134;(m$13134=temp$13116[$index$13126]);m$13134;acc$13111.push(["symbol",gensym$10774()]);}}()))),acc$13111));(shared_last$12923=0);(idx_last$12924=0);(new_clauses$12925=(((acc$13155=[])),(((temp$13160=$13708(clauses$12917))),((($length$13165=temp$13160.length)),((($index$13170=0)),function(){$13152:for(;($index$13170<$length$13165);($index$13170++)){var t0$13208;var t1$13209;var $index$13244;var $length$13239;var temp$13234;var acc$13229;var rest$13293;var newblocks$13289;var share$13202;var idx$13203;var shared$13204;var n_to_share$13205;var to_share$13206;var other$13300;var i$13190;var vars$13191;var varsd$13192;var blocks$13193;var body$13194;var t0$13183;var t1$13184;var t2$13185;var t3$13186;var m$13178;(m$13178=temp$13160[$index$13170]);(t0$13183=m$13178);if(((t0$13183 instanceof Array)&&((t1$13184=t0$13183.length),((t1$13184===2)&&((i$13190=t0$13183[0]),((t2$13185=t0$13183[1]),((t2$13185 instanceof Array)&&((t3$13186=t2$13185.length),((t3$13186===5)&&(t2$13185[0]==="clause")))))))))){(vars$13191=t2$13185[1]);(varsd$13192=t2$13185[2]);(blocks$13193=t2$13185[3]);(body$13194=t2$13185[4]);acc$13155.push((((t0$13208=$10719(shares$12920,i$13190)),function(){if(((t0$13208 instanceof Array)&&((t1$13209=t0$13208.length),(t1$13209===2)))){(share$13202=t0$13208[0]);(idx$13203=t0$13208[1]);}else{return $13730($10719(shares$12920,i$13190),"/home/olivier/git/earl-grey/src/pattern.eg",16144,16163);}}()),((shared$13204=function(){if(idx_last$12924){return [["check",$10719(temps$12922,(idx_last$12924-1))]];}else{return [];}}())),((n_to_share$13205=Math.max(shared_last$12923,share$13202))),((to_share$13206=(((acc$13229=[])),(((temp$13234=$13708(blocks$13193.slice(shared_last$12923,n_to_share$13205)))),((($length$13239=temp$13234.length)),((($index$13244=0)),function(){$13222:for(;($index$13244<$length$13239);($index$13244++)){var j$13278;var x$13279;var j$13268;var x$13269;var $13224$13262;var $13225$13263;var $13226$13264;var $13227$13265;var t0$13257;var t1$13258;var t2$13259;var t3$13260;var m$13252;(m$13252=temp$13234[$index$13244]);(t0$13257=m$13252);if((($13225$13263=(t0$13257 instanceof Array))&&((t1$13258=t0$13257.length),(($13227$13265=(t1$13258===2))&&((j$13268=t0$13257[0]),((t2$13259=t0$13257[1]),((t2$13259 instanceof Array)&&((t3$13260=t2$13259.length),((t3$13260===2)&&(t2$13259[0]==="check")))))))))){(x$13269=t2$13259[1]);acc$13229.push(["check",["assign",$10719(temps$12922,(shared_last$12923+j$13268)),x$13269]]);}else{if(($13227$13265&&((j$13278=t0$13257[0]),((t2$13259=t0$13257[1]),((t2$13259 instanceof Array)&&((t3$13260=t2$13259.length),((t3$13260===2)&&(t2$13259[0]==="do")))))))){(x$13279=t2$13259[1]);acc$13229.push(["do",x$13279]);}else{$13730(m$13252,"/home/olivier/git/earl-grey/src/pattern.eg",16292,16463);}}}}()))),acc$13229))),(shared_last$12923=share$13202),(idx_last$12924=idx$13203),(((newblocks$13289=(((rest$13293=blocks$13193.slice(n_to_share$13205))),shared$13204.concat(to_share$13206).concat(rest$13293)))),["clause",vars$13191,varsd$13192,newblocks$13289,body$13194])));}else{(other$13300=m$13178);acc$13155.push(function(){throw $13539(["oops"]).create("what",({"value":other$13300}));}());}}}()))),acc$13155));return [temps$12922,new_clauses$12925];});(weave_clauses$10791=function(parts$13307){var $index$13353;var $length$13348;var temp$13343;var $index$13519;var $length$13514;var temp$13509;var acc$13504;var groups$13310;var reassemble$13311;var new_temps$13312;var helper$13313;(groups$13310=classify_contiguous$10777(parts$13307,function($13322$13324){var t0$13328;var t1$13329;var cls$13326;(t0$13328=$13322$13324);if(((t0$13328 instanceof Array)&&((t1$13329=t0$13328.length),(t1$13329>=1)))){(cls$13326=t0$13328[0]);Array.prototype.slice.call(t0$13328,1);}else{$13730($13322$13324);}return cls$13326;}));(reassemble$13311=[]);(new_temps$13312=[]);(temp$13343=groups$13310);($length$13348=temp$13343.length);($index$13353=0);$13314:for(;($index$13353<$length$13348);($index$13353++)){var t0$13383;var t1$13384;var ts$13380;var new_clauses$13381;var elems$13391;var elems$13375;var $13316$13369;var $13317$13370;var $13318$13371;var $13319$13372;var t0$13366;var t1$13367;var m$13361;(m$13361=temp$13343[$index$13353]);(t0$13366=m$13361);if((($13317$13370=(t0$13366 instanceof Array))&&((t1$13367=t0$13366.length),(($13319$13372=(t1$13367>=1))&&(t0$13366[0]==="clause"))))){(elems$13375=Array.prototype.slice.call(t0$13366,1));(t0$13383=opt_clauses$10790(elems$13375));if(((t0$13383 instanceof Array)&&((t1$13384=t0$13383.length),(t1$13384===2)))){(ts$13380=t0$13383[0]);(new_clauses$13381=t0$13383[1]);}else{$13730(opt_clauses$10790(elems$13375),"/home/olivier/git/earl-grey/src/pattern.eg",16958,16986);}(new_temps$13312=new_temps$13312.concat(ts$13380));(reassemble$13311=reassemble$13311.concat(new_clauses$13381));}else{if(($13319$13372&&(t0$13366[0]==="block"))){(elems$13391=Array.prototype.slice.call(t0$13366,1));(reassemble$13311=reassemble$13311.concat(elems$13391));}else{$13730(m$13361,"/home/olivier/git/earl-grey/src/pattern.eg",16892,17097);}}}(helper$13313=function($13398$13400){var $index$13479;var $length$13474;var temp$13469;var acc$13464;var decls$13458;var vars$13450;var varsd$13451;var blocks$13452;var body$13453;var rest$13454;var body$13439;var rest$13440;var $13403$13426;var $13404$13427;var $13405$13428;var $13406$13429;var $13407$13430;var $13408$13431;var t0$13419;var t1$13420;var t2$13421;var t3$13422;var t4$13423;var t5$13424;var $13402$13414;var ph$13409;(ph$13409=$13398$13400);($13402$13414=ph$13409);if((($13403$13426=($13402$13414 instanceof Array))&&((t0$13419=$13402$13414.length),(t0$13419===0)))){return ["multi"];}else{if(($13403$13426&&(($13405$13428=(t0$13419>=1))&&((t1$13420=$13402$13414[0]),(($13407$13430=(t1$13420 instanceof Array))&&((t2$13421=t1$13420.length),((t2$13421===2)&&((t1$13420[0]==="block")&&((t3$13422=$13854(["multi"])(t1$13420[1])),(t3$13422[0]&&((t4$13423=t3$13422[1]),((t5$13424=t4$13423.length),(t5$13424>=0))))))))))))){(body$13439=Array.prototype.slice.call(t4$13423,0));(rest$13440=Array.prototype.slice.call($13402$13414,1));return ["multi"].concat(body$13439).concat([helper$13313(rest$13440)]);}else{if(($13407$13430&&((t2$13421===5)&&(t1$13420[0]==="clause")))){(vars$13450=t1$13420[1]);(varsd$13451=t1$13420[2]);(blocks$13452=t1$13420[3]);(body$13453=t1$13420[4]);(rest$13454=Array.prototype.slice.call($13402$13414,1));(decls$13458=(((acc$13464=[])),(((temp$13469=vars$13450)),((($length$13474=temp$13469.length)),((($index$13479=0)),function(){$13461:for(;($index$13479<$length$13474);($index$13479++)){var v$13495;var m$13487;(m$13487=temp$13469[$index$13479]);(v$13495=m$13487);acc$13464.push(["declare",v$13495]);}}()))),acc$13464));return ["tagscope","back",["multi"].concat(decls$13458).concat([assemble_pattern$10784(blocks$13452,body$13453,["use","back",helper$13313(rest$13454)])])];}else{$13730($13402$13414);}}}});return ["multi"].concat((((acc$13504=[])),(((temp$13509=new_temps$13312)),((($length$13514=temp$13509.length)),((($index$13519=0)),function(){$13501:for(;($index$13519<$length$13514);($index$13519++)){var t$13535;var m$13527;(m$13527=temp$13509[$index$13519]);(t$13535=m$13527);acc$13504.push(["declare",t$13535]);}}()))),acc$13504)).concat([helper$13313(reassemble$13311)]);});(exports["PatternParser"]=PatternParser$10781);(exports["PatternProcessor"]=PatternProcessor$10782);(exports["parse_clauses"]=parse_clauses$10789);(exports["parse_pattern"]=parse_pattern$10786);

},{"./expand":5,"./location":7,"./pp":11,"./util":14}],11:[function(require,module,exports){
var $14110=function(type$14112){var f$14115;(f$14115=type$14112["::check"]);if((f$14115===(void 0))){return function(value$14120){return (value$14120 instanceof type$14112);};}else{return function(value$14123){return f$14115.call(type$14112,value$14123);};}};
var $14125=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $14126=function(dest$14128,values$14129){var k$14134;(k$14134=null);$14132:for(k$14134 in values$14129){if(values$14129.hasOwnProperty(k$14134)){(dest$14128[k$14134]=values$14129[k$14134]);}}return dest$14128;};
var $14138=function($14139$14141){var ph$14145;(ph$14145=$14139$14141);var $14143$14150;($14143$14150=ph$14145);var bridge$14144$14155;var x$14159;(bridge$14144$14155=$14143$14150);if((((typeof(bridge$14144$14155)==="string")&&((x$14159=bridge$14144$14155),true))||((typeof(bridge$14144$14155)==="number")&&((x$14159=bridge$14144$14155),true)))){return ["value",x$14159];}else{var other$14166;(other$14166=$14143$14150);return other$14166["::serialize_ast"]();}};
var send$13950;(send$13950=function(obj$13955,$13953$13956){var ph$13960;var msg$13961;var t0$13963;(t0$13963=$13953$13956);(msg$13961=t0$13963);(ph$13960=t0$13963);var $13958$13967;($13958$13967=ph$13960);var bridge$13959$13972;(bridge$13959$13972=$13958$13967);if(((typeof(bridge$13959$13972)==="string")||(typeof(bridge$13959$13972)==="number"))){return obj$13955[msg$13961];}else{var other$13980;(other$13980=$13958$13967);return obj$13955["::send"](msg$13961);}});(Array[":::project"]=function($13983$13985){var ph$13988;var value$13989;var t0$13991;(t0$13991=$13983$13985);(value$13989=t0$13991);(ph$13988=t0$13991);var $13987$13995;($13987$13995=ph$13988);if($14110(Array)($13987$13995)){return [true,value$13989];}else{$13987$13995;return [true,[value$13989]];}});(Array.prototype["::check"]=function(value$14009){if((value$14009 instanceof Array)){var i$14014;(i$14014=0);$14012:for(;(i$14014<this.length);(i$14014++)){if(($14125(this,i$14014)!==$14125(value$14009,i$14014))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $14126(this.slice(0),this);});(Array.prototype[":::project"]=function(value$14025){if((value$14025 instanceof Array)){var i$14030;(i$14030=0);$14028:for(;(i$14030<this.length);(i$14030++)){if(($14125(this,i$14030)!==$14125(value$14025,i$14030))){return [true,[value$14025]];}}return [true,value$14025.slice(this.length)];}else{return [true,[value$14025]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($14138));});(RegExp.prototype["::check"]=function($14040$14042){var ph$14045;(ph$14045=$14040$14042);var $14044$14050;($14044$14050=ph$14045);var value$14058;if((typeof($14044$14050)==="string")){(value$14058=$14044$14050);if(value$14058.match(this)){return true;}else{return false;}}else{var other$14063;(other$14063=$14044$14050);return false;}});(RegExp.prototype[":::project"]=function($14065$14067){var ph$14070;(ph$14070=$14065$14067);var $14069$14075;($14069$14075=ph$14070);var value$14083;if((typeof($14069$14075)==="string")){(value$14083=$14069$14075);var $14086$14088;($14086$14088=value$14083.match(this));var m$14096;if(($14086$14088===null)){(m$14096=$14086$14088);return [false,null];}else{var m$14101;(m$14101=$14086$14088);return [true,m$14101];}}else{var other$14105;(other$14105=$14069$14075);return [false,null];}});(Function.prototype["::send"]=function(args$14108){return this.apply(this,args$14108);});
var $14890=function(type$14892){return function(value$14895){var f$14898;(f$14898=type$14892[":::project"]);if((f$14898===(void 0))){(f$14898=type$14892["::project"]);if((f$14898===(void 0))){return [true,type$14892(value$14895)];}else{var rval$14904;(rval$14904=false);try{(rval$14904=[true,f$14898(value$14895)]);}catch(excv$14910){var e$14916;(e$14916=excv$14910);(rval$14904=[false,null]);}return rval$14904;}}else{return f$14898.call(type$14892,value$14895);}};};
var $15100=function(arr$15102){var results$15106;var l$15107;(results$15106=[]);(l$15107=arr$15102.length);var i$15115;(i$15115=0);$15105:for(;(i$15115<l$15107);(i$15115++)){results$15106.push([i$15115,$14125(arr$15102,i$15115)]);}return results$15106;};
var $14931=function(){var $14932$14934;($14932$14934=function(tags$14938){var it$0$14941;(it$0$14941=function(){if((!$14110($14932$14934)(this))){return Object.create($14932$14934.prototype);}else{return this;}}());(it$0$14941["tags"]=tags$14938);return it$0$14941;});($14932$14934.prototype["create"]=function(){var $14950$14952;($14950$14952=arguments);var t0$14957;var message$14961;var args$14962;(t0$14957=$14950$14952.length);if((t0$14957>=0)){(message$14961=function(){if((0>=t0$14957)){return "";}else{return $14950$14952[0];}}());(args$14962=Array.prototype.slice.call($14950$14952,1));var it$0$14966;(it$0$14966=this);var self$14971;(self$14971=this);var e$14976;(e$14976=Error(message$14961));(e$14976["::tags"]=it$0$14966.tags);(e$14976["args"]=args$14962);var temp$14984;(temp$14984=$15100(args$14962));var $length$14989;($length$14989=temp$14984.length);var $index$14994;($index$14994=0);$14977:for(;($index$14994<$length$14989);($index$14994++)){var m$15002;(m$15002=temp$14984[$index$14994]);var t0$15007;var t1$15008;var i$15012;var arg$15013;(t0$15007=m$15002);if(((t0$15007 instanceof Array)&&((t1$15008=t0$15007.length),(t1$15008===2)))){(i$15012=t0$15007[0]);(arg$15013=t0$15007[1]);(e$14976[i$15012]=arg$15013);}else{$14918(m$15002);}}(e$14976["length"]=args$14962.length);(e$14976["name"]=["E"].concat(it$0$14966.tags).join("."));return e$14976;}else{$14918($14950$14952);}});($14932$14934.prototype["::check"]=function(e$15024){var it$0$15027;(it$0$15027=this);var self$15032;(self$15032=this);var tags$15037;if(((!e$15024)||(!$14110(Error)(e$15024)))){return false;}(tags$15037=(e$15024["::tags"]||[]));var temp$15046;(temp$15046=it$0$15027.tags);var $length$15051;($length$15051=temp$15046.length);var $index$15056;($index$15056=0);$15038:for(;($index$15056<$length$15051);($index$15056++)){var m$15064;(m$15064=temp$15046[$index$15056]);var tag$15072;(tag$15072=m$15064);if((tags$15037.indexOf(tag$15072)===-1)){return false;}else{false;}}return true;});($14932$14934.prototype["::deconstruct"]=function(e$15080){var it$0$15083;(it$0$15083=this);var self$15088;(self$15088=this);return e$15080.args;});$14126($14932$14934,$14126(function(){var accum$15093;(accum$15093=({}));(accum$15093["::name"]="$14932");return accum$15093;}(),function(){var accum$15097;(accum$15097=({}));(accum$15097["::egclass"]=true);return accum$15097;}()));return $14932$14934;}();
var $14918=function(value$14920,url$14921,start$14922,end$14923){var err$14926;(err$14926=$14931(["match"]).create("Could not find a match for value",({"value":value$14920})));if(url$14921){(err$14926["location"]=["location",url$14921,start$14922,end$14923]);}throw err$14926;};
var $14763=function(){var $14764$14766;($14764$14766=function($14769$14772,$14770$14773){var classes$14775;var children$14776;var t0$14778;(t0$14778=$14890(Array)($14769$14772));if(t0$14778[0]){(classes$14775=t0$14778[1]);}else{$14918($14769$14772);}var t0$14783;(t0$14783=$14890(Array)($14770$14773));if(t0$14783[0]){(children$14776=t0$14783[1]);}else{$14918($14770$14773);}var it$0$14788;(it$0$14788=function(){if((!$14110($14764$14766)(this))){return Object.create($14764$14766.prototype);}else{return this;}}());(it$0$14788["classes"]=classes$14775.sort());(it$0$14788["children"]=children$14776);return it$0$14788;});$14126(function(){var accum$14796;(accum$14796=({}));(accum$14796["::check"]=function(x$14800){return ((x$14800&&x$14800.classes)&&x$14800.children);});return accum$14796;}(),$14126(function(){var accum$14803;(accum$14803=({}));(accum$14803["::deconstruct"]=function(x$14807){return [x$14807.classes,x$14807.children];});return accum$14803;}(),$14126(function(){var accum$14810;(accum$14810=({}));(accum$14810["::name"]="$14764");return accum$14810;}(),function(){var accum$14814;(accum$14814=({}));(accum$14814["::egclass"]=true);return accum$14814;}())));($14764$14766.prototype["::check"]=function(n$14820){var it$0$14823;(it$0$14823=this);var self$14828;(self$14828=this);var temp$14837;(temp$14837=it$0$14823.classes);var $length$14842;($length$14842=temp$14837.length);var $index$14847;($index$14847=0);$14833:for(;($index$14847<$length$14842);($index$14847++)){var m$14855;(m$14855=temp$14837[$index$14847]);var c$14863;(c$14863=m$14855);if((n$14820.classes.indexOf(c$14863)===-1)){return false;}else{false;}}return true;});$14126($14764$14766,$14126(function(){var accum$14869;(accum$14869=({}));(accum$14869["::check"]=function(x$14873){return ((x$14873&&x$14873.classes)&&x$14873.children);});return accum$14869;}(),$14126(function(){var accum$14876;(accum$14876=({}));(accum$14876["::deconstruct"]=function(x$14880){return [x$14880.classes,x$14880.children];});return accum$14876;}(),$14126(function(){var accum$14883;(accum$14883=({}));(accum$14883["::name"]="$14764");return accum$14883;}(),function(){var accum$14887;(accum$14887=({}));(accum$14887["::egclass"]=true);return accum$14887;}()))));return $14764$14766;}();
var $15122=function(obj$15124){var results$15128;(results$15128=[]);var k$15133;(k$15133=null);$15127:for(k$15133 in obj$15124){if(Object.prototype.hasOwnProperty.call(obj$15124,k$15133)){results$15128.push([k$15133,$14125(obj$15124,k$15133)]);}}return results$15128;};
var $15137=function($15138$15140,key$15141){var ph$15145;(ph$15145=$15138$15140);var $15143$15150;($15143$15150=ph$15145);var bridge$15144$15155;(bridge$15144$15155=$15143$15150);if(((bridge$15144$15155===null)||(bridge$15144$15155===(void 0)))){return false;}else{var x$15163;if((typeof($15143$15150)==="string")){(x$15163=$15143$15150);return (key$15141 in String.prototype);}else{var x$15168;if((typeof($15143$15150)==="number")){(x$15168=$15143$15150);return (key$15141 in Number.prototype);}else{var x$15173;(x$15173=$15143$15150);return (key$15141 in x$15173);}}}};var pr_terminus$14170;var pr$14171;var __lt____gt__$14172;var repr$14173;var escape_html$14174;var quotify$14175;var HTML$14176;(pr_terminus$14170=function(node$14180){var r$14183;var pre$14184;var post$14185;(r$14183=HTML$14176(node$14180,"span"));(pre$14184=(String.fromCharCode(27)+"[?0;7y+h <div class=\"ug\">"));(post$14185=("</div>"+String.fromCharCode(7)));return console.log(((pre$14184+r$14183)+post$14185));});(pr$14171=function($14198$14200,r$14201){var x$14222;var n$14217;var $14203$14209;var ph$14204;(ph$14204=$14198$14200);($14203$14209=ph$14204);if($14110($14763)($14203$14209)){(n$14217=$14203$14209);return pr_terminus$14170(n$14217);}else{(x$14222=$14203$14209);return pr_terminus$14170((r$14201||repr$14173)(x$14222));}});(__lt____gt__$14172=function($14227$14229,x$14230){if(($14227$14229===null)){}else{$14918($14227$14229);}return pr$14171(x$14230);});(repr$14173=function(){var $index$14315;var $length$14310;var temp$14305;var acc$14300;var $index$14359;var $length$14354;var temp$14349;var acc$14344;var other$14386;var entries$14294;var $14242$14267;var t0$14265;var x$14255;var recur$14256;var $14241$14257;var t0$14249;var t1$14250;var t2$14251;var $14240$14244;($14240$14244=arguments);(t0$14249=$14240$14244.length);if((((t0$14249>=1)&&(t0$14249<=2))&&((t1$14250=$14240$14244[0]),((x$14255=t1$14250),(($14241$14257=t1$14250),((t2$14251=function(){if((1>=t0$14249)){return repr$14173;}else{return $14240$14244[1];}}()),$14110(Function)(t2$14251))))))){(recur$14256=t2$14251);if(($14241$14257===true)){return $14763(["special","true"],"true");}else{if(($14241$14257===false)){return $14763(["special","false"],"false");}else{if(($14241$14257===null)){return $14763(["special","nil"],"null");}else{if(($14241$14257===(void 0))){return $14763(["special","nil"],"undefined");}else{if((typeof($14241$14257)==="number")){return $14763(["num"],String(x$14255));}else{if((typeof($14241$14257)==="string")){return $14763(["str"],x$14255);}else{(t0$14265=$14241$14257);if($14110(Array)(t0$14265)){(entries$14294=t0$14265);return $14763(["sequence"],(((acc$14300=[])),(((temp$14305=entries$14294)),((($length$14310=temp$14305.length)),((($index$14315=0)),function(){$14297:for(;($index$14315<$length$14310);($index$14315++)){var x$14331;var m$14323;(m$14323=temp$14305[$index$14315]);(x$14331=m$14323);acc$14300.push(recur$14256(x$14331,repr$14173));}}()))),acc$14300));}else{$14241$14257;if(x$14255["::repr"]){return x$14255["::repr"](recur$14256);}else{if((Object.getPrototypeOf(x$14255)===Object.prototype)){return $14763(["+table","object"],(((acc$14344=[])),(((temp$14349=$15122(x$14255))),((($length$14354=temp$14349.length)),((($index$14359=0)),function(){$14341:for(;($index$14359<$length$14354);($index$14359++)){var k$14377;var v$14378;var t0$14372;var t1$14373;var m$14367;(m$14367=temp$14349[$index$14359]);(t0$14372=m$14367);if(((t0$14372 instanceof Array)&&((t1$14373=t0$14372.length),(t1$14373===2)))){(k$14377=t0$14372[0]);(v$14378=t0$14372[1]);acc$14344.push($14763(["+tr"],[$14763(["+th"],recur$14256(k$14377,repr$14173)),$14763(["+td"],recur$14256(v$14378,repr$14173))]));}else{$14918(m$14367,"/home/olivier/git/earl-grey/src/pp.eg",959,1289);}}}()))),acc$14344));}else{(other$14386=$14241$14257);return $14763(["unknown"],other$14386.toString());}}}}}}}}}}else{$14918($14240$14244);}});(escape_html$14174=function($14393$14395){var t0$14399;var repl$14404;var s$14397;(t0$14399=[true,String($14393$14395)]);if(t0$14399[0]){(s$14397=t0$14399[1]);}else{$14918($14393$14395);}(repl$14404=({"&":"&amp;","<":"&lt;",">":"&gt;"}));return s$14397.replace(RegExp("[&<>]","g"),function(x$14409){return $14125(repl$14404,x$14409);});});(quotify$14175=function($14414$14416){var t0$14420;var s$14418;(t0$14420=[true,String($14414$14416)]);if(t0$14420[0]){(s$14418=t0$14420[1]);}else{$14918($14414$14416);}return s$14418.replace(RegExp("[\"\\\\]","g"),function(x$14425){return ("\\"+x$14425);});});(HTML$14176=function($14430$14432,default_tag$14433){var $index$14476;var $length$14471;var temp$14466;var acc$14461;var $index$14541;var $length$14536;var temp$14531;var $index$14618;var $length$14613;var temp$14608;var acc$14603;var $index$14673;var $length$14668;var temp$14663;var acc$14658;var $index$14719;var $length$14714;var temp$14709;var acc$14704;var other$14699;var $14643$14645;var x$14753;var other$14750;var $14502$14738;var tag$14503;var _classes$14504;var id$14505;var kv$14506;var sub$14507;var accum$14508;var other$14759;var classes$14496;var children$14497;var children$14454;var s$14449;var $14435$14441;var ph$14436;(ph$14436=$14430$14432);($14435$14441=ph$14436);if((typeof($14435$14441)==="string")){(s$14449=$14435$14441);return escape_html$14174(s$14449);}else{if($14110(Array)($14435$14441)){(children$14454=$14435$14441);return (((acc$14461=[])),(((temp$14466=children$14454)),((($length$14471=temp$14466.length)),((($index$14476=0)),function(){$14458:for(;($index$14476<$length$14471);($index$14476++)){var child$14492;var m$14484;(m$14484=temp$14466[$index$14476]);(child$14492=m$14484);acc$14461.push(HTML$14176(child$14492,default_tag$14433));}}()))),acc$14461).join("");}else{if(($14110($14763)($14435$14441)&&($15137($14435$14441,"classes")&&((classes$14496=$14435$14441.classes),$15137($14435$14441,"children"))))){(children$14497=$14435$14441.children);(tag$14503=(default_tag$14433||"span"));(_classes$14504=[]);(id$14505=null);(kv$14506=[]);(sub$14507=[]);(temp$14531=classes$14496);($length$14536=temp$14531.length);($index$14541=0);$14509:for(;($index$14541<$length$14536);($index$14541++)){var s$14589;var m$14582;var m$14575;var k$14570;var k$14563;var v$14564;var $14511$14558;var $14512$14559;var $14513$14560;var t0$14554;var t1$14555;var t2$14556;var m$14549;(m$14549=temp$14531[$index$14541]);(t0$14554=m$14549);if((($14512$14559=(t0$14554 instanceof Array))&&((t1$14555=t0$14554.length),((t1$14555===3)&&(t0$14554[0]==="assoc"))))){(k$14563=t0$14554[1]);(v$14564=t0$14554[2]);kv$14506.push([k$14563,v$14564]);}else{if(($14512$14559&&((t1$14555===2)&&(t0$14554[0]==="assoc")))){(k$14570=t0$14554[1]);kv$14506.push([k$14570,(void 0)]);}else{(t0$14554=$14890(RegExp("(?:^\\+((?:.*)))",""))(m$14549));if((t0$14554[0]&&((t1$14555=t0$14554[1]),((t2$14556=t1$14555.length),(t2$14556===2))))){t1$14555[0];(m$14575=t1$14555[1]);(tag$14503=m$14575);}else{(t0$14554=$14890(RegExp("(?:^#((?:.*)))",""))(m$14549));if((t0$14554[0]&&((t1$14555=t0$14554[1]),((t2$14556=t1$14555.length),(t2$14556===2))))){t1$14555[0];(m$14582=t1$14555[1]);(id$14505=m$14582);}else{(t0$14554=m$14549);if((typeof(t0$14554)==="string")){(s$14589=t0$14554);_classes$14504.push(s$14589);}else{$14918(m$14549,"/home/olivier/git/earl-grey/src/pp.eg",1860,2181);}}}}}}(accum$14508=function(){if((tag$14503==="raw")){return [];}else{return ["<",tag$14503];}}());if(id$14505){(accum$14508=accum$14508.concat(" id=\"",id$14505,"\""));}if(_classes$14504.length){(accum$14508=accum$14508.concat(" class=\"",quotify$14175(_classes$14504.join(" ")),"\""));}if(kv$14506){(acc$14603=[]);(temp$14608=kv$14506);($length$14613=temp$14608.length);($index$14618=0);$14600:for(;($index$14618<$length$14613);($index$14618++)){var k$14636;var v$14637;var t0$14631;var t1$14632;var m$14626;(m$14626=temp$14608[$index$14618]);(t0$14631=m$14626);if(((t0$14631 instanceof Array)&&((t1$14632=t0$14631.length),(t1$14632===2)))){(k$14636=t0$14631[0]);(v$14637=t0$14631[1]);acc$14603.push((accum$14508=accum$14508.concat(function(){if((v$14637!==null)){return [" ",k$14636,"=\"",quotify$14175(v$14637),"\""];}else{return [" ",k$14636];}}())));}else{$14918(m$14626,"/home/olivier/git/earl-grey/src/pp.eg",2435,2632);}}acc$14603;}(children$14497=((($14643$14645=tag$14503)),function(){if(($14643$14645==="raw")){(acc$14658=[]);(temp$14663=children$14497);($length$14668=temp$14663.length);($index$14673=0);$14655:for(;($index$14673<$length$14668);($index$14673++)){var c$14695;var s$14690;var t0$14686;var m$14681;(m$14681=temp$14663[$index$14673]);(t0$14686=m$14681);if((typeof(t0$14686)==="string")){(s$14690=t0$14686);acc$14658.push(s$14690);}else{(c$14695=m$14681);acc$14658.push(HTML$14176(c$14695,default_tag$14433));}}return acc$14658;}else{(other$14699=$14643$14645);(acc$14704=[]);(temp$14709=children$14497);($length$14714=temp$14709.length);($index$14719=0);$14701:for(;($index$14719<$length$14714);($index$14719++)){var c$14735;var m$14727;(m$14727=temp$14709[$index$14719]);(c$14735=m$14727);acc$14704.push(HTML$14176(c$14735,default_tag$14433));}return acc$14704;}}()));($14502$14738=tag$14503);if(($14502$14738==="raw")){return accum$14508.concat(children$14497).join("");}else{(other$14750=$14502$14738);(x$14753=[">"].concat(children$14497).concat(["</",tag$14503,">"]));return accum$14508.concat(x$14753).join("");}}else{(other$14759=$14435$14441);return HTML$14176([true,String(other$14759)][1],default_tag$14433);}}}});(exports["pr_terminus"]=pr_terminus$14170);(exports["pr"]=pr$14171);(exports["<>"]=__lt____gt__$14172);(exports["repr"]=repr$14173);

},{}],12:[function(require,module,exports){
var $16400=function(type$16402){var f$16405;(f$16405=type$16402["::check"]);if((f$16405===(void 0))){return function(value$16410){return (value$16410 instanceof type$16402);};}else{return function(value$16413){return f$16405.call(type$16402,value$16413);};}};
var $16415=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $16416=function(dest$16418,values$16419){var k$16424;(k$16424=null);$16422:for(k$16424 in values$16419){if(values$16419.hasOwnProperty(k$16424)){(dest$16418[k$16424]=values$16419[k$16424]);}}return dest$16418;};
var $16428=function($16429$16431){var ph$16435;(ph$16435=$16429$16431);var $16433$16440;($16433$16440=ph$16435);var bridge$16434$16445;var x$16449;(bridge$16434$16445=$16433$16440);if((((typeof(bridge$16434$16445)==="string")&&((x$16449=bridge$16434$16445),true))||((typeof(bridge$16434$16445)==="number")&&((x$16449=bridge$16434$16445),true)))){return ["value",x$16449];}else{var other$16456;(other$16456=$16433$16440);return other$16456["::serialize_ast"]();}};
var send$16240;(send$16240=function(obj$16245,$16243$16246){var ph$16250;var msg$16251;var t0$16253;(t0$16253=$16243$16246);(msg$16251=t0$16253);(ph$16250=t0$16253);var $16248$16257;($16248$16257=ph$16250);var bridge$16249$16262;(bridge$16249$16262=$16248$16257);if(((typeof(bridge$16249$16262)==="string")||(typeof(bridge$16249$16262)==="number"))){return obj$16245[msg$16251];}else{var other$16270;(other$16270=$16248$16257);return obj$16245["::send"](msg$16251);}});(Array[":::project"]=function($16273$16275){var ph$16278;var value$16279;var t0$16281;(t0$16281=$16273$16275);(value$16279=t0$16281);(ph$16278=t0$16281);var $16277$16285;($16277$16285=ph$16278);if($16400(Array)($16277$16285)){return [true,value$16279];}else{$16277$16285;return [true,[value$16279]];}});(Array.prototype["::check"]=function(value$16299){if((value$16299 instanceof Array)){var i$16304;(i$16304=0);$16302:for(;(i$16304<this.length);(i$16304++)){if(($16415(this,i$16304)!==$16415(value$16299,i$16304))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $16416(this.slice(0),this);});(Array.prototype[":::project"]=function(value$16315){if((value$16315 instanceof Array)){var i$16320;(i$16320=0);$16318:for(;(i$16320<this.length);(i$16320++)){if(($16415(this,i$16320)!==$16415(value$16315,i$16320))){return [true,[value$16315]];}}return [true,value$16315.slice(this.length)];}else{return [true,[value$16315]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($16428));});(RegExp.prototype["::check"]=function($16330$16332){var ph$16335;(ph$16335=$16330$16332);var $16334$16340;($16334$16340=ph$16335);var value$16348;if((typeof($16334$16340)==="string")){(value$16348=$16334$16340);if(value$16348.match(this)){return true;}else{return false;}}else{var other$16353;(other$16353=$16334$16340);return false;}});(RegExp.prototype[":::project"]=function($16355$16357){var ph$16360;(ph$16360=$16355$16357);var $16359$16365;($16359$16365=ph$16360);var value$16373;if((typeof($16359$16365)==="string")){(value$16373=$16359$16365);var $16376$16378;($16376$16378=value$16373.match(this));var m$16386;if(($16376$16378===null)){(m$16386=$16376$16378);return [false,null];}else{var m$16391;(m$16391=$16376$16378);return [true,m$16391];}}else{var other$16395;(other$16395=$16359$16365);return [false,null];}});(Function.prototype["::send"]=function(args$16398){return this.apply(this,args$16398);});
var $23057=function($23058$23060,key$23061){var ph$23065;(ph$23065=$23058$23060);var $23063$23070;($23063$23070=ph$23065);var bridge$23064$23075;(bridge$23064$23075=$23063$23070);if(((bridge$23064$23075===null)||(bridge$23064$23075===(void 0)))){return false;}else{var x$23083;if((typeof($23063$23070)==="string")){(x$23083=$23063$23070);return (key$23061 in String.prototype);}else{var x$23088;if((typeof($23063$23070)==="number")){(x$23088=$23063$23070);return (key$23061 in Number.prototype);}else{var x$23093;(x$23093=$23063$23070);return (key$23061 in x$23093);}}}};
var $23264=function(arr$23266){var results$23270;var l$23271;(results$23270=[]);(l$23271=arr$23266.length);var i$23279;(i$23279=0);$23269:for(;(i$23279<l$23271);(i$23279++)){results$23270.push([i$23279,$16415(arr$23266,i$23279)]);}return results$23270;};
var $23286=function(value$23288,url$23289,start$23290,end$23291){var err$23294;(err$23294=$23095(["match"]).create("Could not find a match for value",({"value":value$23288})));if(url$23289){(err$23294["location"]=["location",url$23289,start$23290,end$23291]);}throw err$23294;};
var $23095=function(){var $23096$23098;($23096$23098=function(tags$23102){var it$0$23105;(it$0$23105=function(){if((!$16400($23096$23098)(this))){return Object.create($23096$23098.prototype);}else{return this;}}());(it$0$23105["tags"]=tags$23102);return it$0$23105;});($23096$23098.prototype["create"]=function(){var $23114$23116;($23114$23116=arguments);var t0$23121;var message$23125;var args$23126;(t0$23121=$23114$23116.length);if((t0$23121>=0)){(message$23125=function(){if((0>=t0$23121)){return "";}else{return $23114$23116[0];}}());(args$23126=Array.prototype.slice.call($23114$23116,1));var it$0$23130;(it$0$23130=this);var self$23135;(self$23135=this);var e$23140;(e$23140=Error(message$23125));(e$23140["::tags"]=it$0$23130.tags);(e$23140["args"]=args$23126);var temp$23148;(temp$23148=$23264(args$23126));var $length$23153;($length$23153=temp$23148.length);var $index$23158;($index$23158=0);$23141:for(;($index$23158<$length$23153);($index$23158++)){var m$23166;(m$23166=temp$23148[$index$23158]);var t0$23171;var t1$23172;var i$23176;var arg$23177;(t0$23171=m$23166);if(((t0$23171 instanceof Array)&&((t1$23172=t0$23171.length),(t1$23172===2)))){(i$23176=t0$23171[0]);(arg$23177=t0$23171[1]);(e$23140[i$23176]=arg$23177);}else{$23286(m$23166);}}(e$23140["length"]=args$23126.length);(e$23140["name"]=["E"].concat(it$0$23130.tags).join("."));return e$23140;}else{$23286($23114$23116);}});($23096$23098.prototype["::check"]=function(e$23188){var it$0$23191;(it$0$23191=this);var self$23196;(self$23196=this);var tags$23201;if(((!e$23188)||(!$16400(Error)(e$23188)))){return false;}(tags$23201=(e$23188["::tags"]||[]));var temp$23210;(temp$23210=it$0$23191.tags);var $length$23215;($length$23215=temp$23210.length);var $index$23220;($index$23220=0);$23202:for(;($index$23220<$length$23215);($index$23220++)){var m$23228;(m$23228=temp$23210[$index$23220]);var tag$23236;(tag$23236=m$23228);if((tags$23201.indexOf(tag$23236)===-1)){return false;}else{false;}}return true;});($23096$23098.prototype["::deconstruct"]=function(e$23244){var it$0$23247;(it$0$23247=this);var self$23252;(self$23252=this);return e$23244.args;});$16416($23096$23098,$16416(function(){var accum$23257;(accum$23257=({}));(accum$23257["::name"]="$23096");return accum$23257;}(),function(){var accum$23261;(accum$23261=({}));(accum$23261["::egclass"]=true);return accum$23261;}()));return $23096$23098;}();
var $23315=function($23316$23318){var ph$23324;var x$23325;var t0$23327;(t0$23327=$23316$23318);(x$23325=t0$23327);(ph$23324=t0$23327);var $23320$23331;($23320$23331=ph$23324);var bridge$23321$23336;(bridge$23321$23336=$23320$23331);if((function(){var bridge$23322$23342;(bridge$23322$23342=bridge$23321$23336);return (function(){var bridge$23323$23345;(bridge$23323$23345=bridge$23322$23342);return ((bridge$23323$23345===(void 0))||(bridge$23323$23345===null));}()||(typeof(bridge$23322$23342)==="string"));}()||(typeof(bridge$23321$23336)==="number"))){return x$23325;}else{if($23057($23320$23331,"::clone")){$23320$23331["::clone"];return x$23325["::clone"]();}else{$23320$23331;if((Object.getPrototypeOf(x$23325)===Object.prototype)){var dest$23358;(dest$23358=({}));var k$23363;(k$23363=null);$23357:for(k$23363 in x$23325){if(Object.prototype.hasOwnProperty.call(x$23325,k$23363)){(dest$23358[k$23363]=x$23325[k$23363]);}}return dest$23358;}else{var other$23369;(other$23369=$23320$23331);throw $23095(["clone"]).create("Object cannot be cloned",({"obj":x$23325}));}}}};
var $23299=function(a$23301,b$23302){var dest$23306;(dest$23306=$23315(a$23301));var k$23311;(k$23311=null);$23305:for(k$23311 in b$23302){if(Object.prototype.hasOwnProperty.call(b$23302,k$23311)){(dest$23306[k$23311]=b$23302[k$23311]);}}return dest$23306;};
var $23371=function(type$23373){return function(value$23376){var f$23379;(f$23379=type$23373[":::project"]);if((f$23379===(void 0))){(f$23379=type$23373["::project"]);if((f$23379===(void 0))){return [true,type$23373(value$23376)];}else{var rval$23385;(rval$23385=false);try{(rval$23385=[true,f$23379(value$23376)]);}catch(excv$23391){var e$23397;(e$23397=excv$23391);(rval$23385=[false,null]);}return rval$23385;}}else{return f$23379.call(type$23373,value$23376);}};};
var $23399=function(obj$23401){var results$23405;(results$23405=[]);var k$23410;(k$23410=null);$23404:for(k$23410 in obj$23401){if(Object.prototype.hasOwnProperty.call(obj$23401,k$23410)){results$23405.push([k$23410,$16415(obj$23401,k$23410)]);}}return results$23405;};
var $23414=function(xs$23416,ys$23417){var acc$23422;(acc$23422=[]);var temp$23427;(temp$23427=$23264(xs$23416));var $length$23432;($length$23432=temp$23427.length);var $index$23437;($index$23437=0);$23419:for(;($index$23437<$length$23432);($index$23437++)){var m$23445;(m$23445=temp$23427[$index$23437]);var t0$23450;var t1$23451;var i$23455;var x$23456;(t0$23450=m$23445);if(((t0$23450 instanceof Array)&&((t1$23451=t0$23450.length),(t1$23451===2)))){(i$23455=t0$23450[0]);(x$23456=t0$23450[1]);acc$23422.push([x$23456,$16415(ys$23417,i$23455)]);}else{$23286(m$23445);}}return acc$23422;};var accum$16611;var accum$16615;var $index$16652;var $length$16647;var temp$16642;var accum$17236;var accum$17271;var accum$17366;var accum$17377;var accum$17384;var accum$17413;var accum$17421;var accum$17432;var accum$17678;var accum$17732;var accum$17796;var accum$17858;var accum$17878;var accum$17950;var accum$18034;var accum$18062;var accum$18112;var accum$18159;var accum$18206;var accum$18244;var accum$18350;var accum$18457;var accum$18586;var accum$18606;var accum$19012;var accum$19148;var accum$19239;var t0$19311;var accum$19309;var t0$19457;var accum$19455;var t0$19511;var accum$19509;var t0$19653;var accum$19651;var t0$19893;var accum$19891;var accum$20053;var accum$20188;var accum$20208;var accum$20228;var t0$20342;var accum$20340;var accum$20500;var t0$20522;var accum$20520;var t0$20538;var accum$20536;var t0$20554;var accum$20552;var t0$20570;var accum$20568;var accum$20584;var accum$20609;var accum$20851;var accum$21073;var accum$21211;var accum$21404;var accum$21503;var accum$21852;var accum$22051;var $index$22126;var $length$22121;var temp$17674;var accum$22903;var accum$22907;var mac$22917;var $index$23028;var $length$23023;var temp$23018;var $16460$16465;var __lt____gt__$16466;var $16461$16467;var __lt____lt____colon__$16468;var util$16469;var neighbours$16470;var uuid$16471;var $16463$16472;var PatternParser$16473;var PatternProcessor$16474;var parse_pattern$16475;var parse_clauses$16476;var mt$16477;var Expander$16478;var Scope$16479;var Env$16480;var nullenv$16481;var mac1$16482;var checker_db$16483;var generic_nodes$16484;var Embedded$16485;var stdenv$16486;var mkstdenv$16487;var expander$16488;var expand$16489;var topscope$16490;var embed_location$16491;var error_embed_location$16492;var match_error$16493;var drop_ctx$16494;var expr_mac$16495;var overridable$16496;var protected_value$16497;var setup_label$16498;var break_mac$16499;var continue_mac$16500;var var_operator$16501;var accum_flags$16502;var pattern_constructors$16503;var disregard_specials$16504;var pattern_handlers$16505;var build_loop$16506;var partial_pattern$16507;var make_assigner$16508;var blocktest_wrap$16509;var blocktest_mac$16510;var qqstruct$16511;var qq$16512;var RegexBuilder$16513;var build_regexp$16514;var errf_macro$16515;var stdprelude$16516;($16460$16465=require("./pp"));(__lt____gt__$16466=$16460$16465["<>"]);($16461$16467=require("./location"));(__lt____lt____colon__$16468=$16461$16467["<<:"]);(util$16469=require("./util"));(neighbours$16470=util$16469.neighbours);(uuid$16471=util$16469.uuid);($16463$16472=require("./pattern"));(PatternParser$16473=$16463$16472.PatternParser);(PatternProcessor$16474=$16463$16472.PatternProcessor);(parse_pattern$16475=$16463$16472.parse_pattern);(parse_clauses$16476=$16463$16472.parse_clauses);(mt$16477=require("./expand"));(Expander$16478=mt$16477.Expander);(Scope$16479=mt$16477.Scope);(Env$16480=mt$16477.Env);(nullenv$16481=mt$16477.nullenv);(mac1$16482=mt$16477["mac1"]);(checker_db$16483=mt$16477.checker_db);(generic_nodes$16484=["if","js_while","js_for","js_for_in","js_label","js_break","js_continue","js_return","js_delete","js_throw","js_try","js_new"]);(Embedded$16485=function(code$16586){var it$0$16589;(it$0$16589=function(){if((!$16400(Embedded$16485)(this))){return Object.create(Embedded$16485.prototype);}else{return this;}}());(it$0$16589["code"]=mkstdenv$16487().convert(code$16586));(it$0$16589["::id"]=uuid$16471());return it$0$16589;});(Embedded$16485.prototype["::serialize_ast"]=function(){var self$16606;var it$0$16601;(it$0$16601=this);(self$16606=this);return expand$16489(["top"],topscope$16490,it$0$16601.code);});$16416(Embedded$16485,$16416(((accum$16611=({})),((accum$16611["::name"]="Embedded"),accum$16611)),((accum$16615=({})),((accum$16615["::egclass"]=true),accum$16615))));Embedded$16485;(stdenv$16486=Env$16480());(mkstdenv$16487=function(){var e$16626;(e$16626=Env$16480());(e$16626.scopes["top"]=stdenv$16486.scopes.top);return e$16626;});(expander$16488=Expander$16478(mkstdenv$16487,generic_nodes$16484));(expand$16489=expander$16488.expand.bind(expander$16488));(topscope$16490=Scope$16479(null,"top",expander$16488));(temp$16642=["+","-","*","/","mod","&.","|.","^.","and","or","not","===","!==","<",">","<=",">=","<<",">>",">>>","in","instanceof","--","++","true","false","null","undefined","typeof","String","Array","Number","Boolean","Object","RegExp","Function","Date","parseInt","parseFloat","Math","Error","TypeError","ReferenceError","console","process","eval","setTimeout","clearTimeout","___js_fetch","___node","arguments","this","exports"]);($length$16647=temp$16642.length);($index$16652=0);$16517:for(;($index$16652<$length$16647);($index$16652++)){var k$16668;var m$16660;(m$16660=temp$16642[$index$16652]);(k$16668=m$16660);stdenv$16486.bind(topscope$16490,k$16668,["variable",k$16668]);}(embed_location$16491=function($16672$16674){var other$16703;var url$16692;var start$16693;var end$16694;var t0$16687;var t1$16688;var $16676$16682;var ph$16677;(ph$16677=$16672$16674);($16676$16682=ph$16677);if(($23057($16676$16682,"location")&&((t0$16687=$16676$16682.location),($23057(t0$16687,"source")&&((t1$16688=t0$16687.source),($23057(t1$16688,"url")&&((url$16692=t1$16688.url),($23057(t0$16687,"start")&&((start$16693=t0$16687.start),$23057(t0$16687,"end")))))))))){(end$16694=t0$16687.end);return ["send",["send",["symbol","#"],["data",["void"],["symbol","location"]]],["data",["value",url$16692],["value",start$16693],["value",end$16694]]];}else{(other$16703=$16676$16682);return ["send",["send",["symbol","#"],["data",["void"],["symbol","location"]]],["data",["symbol","null"],["value",0],["value",0]]];}});(error_embed_location$16492=function(error$16709,target$16710){return ["send",["symbol","throw"],["send",["symbol","&:"],["data",error$16709,["data",["send",["symbol","="],["data",["symbol","location"],embed_location$16491(target$16710)]]]]]];});(match_error$16493=function($16715$16717){var t0$16723;var other$16748;var url$16737;var start$16738;var end$16739;var t0$16732;var t1$16733;var $16719$16727;var ph$16720;var target$16721;(t0$16723=$16715$16717);(target$16721=t0$16723);(ph$16720=t0$16723);($16719$16727=ph$16720);if(($23057($16719$16727,"location")&&((t0$16732=$16719$16727.location),($23057(t0$16732,"source")&&((t1$16733=t0$16732.source),($23057(t1$16733,"url")&&((url$16737=t1$16733.url),($23057(t0$16732,"start")&&((start$16738=t0$16732.start),$23057(t0$16732,"end")))))))))){(end$16739=t0$16732.end);return ["send",["symbol","___match_error"],["data",target$16721,["value",url$16737],["value",start$16738],["value",end$16739]]];}else{(other$16748=$16719$16727);return ["send",["symbol","___match_error"],["data",other$16748]];}});(drop_ctx$16494=function(f$16754){return function(context$16757,scope$16758,form$16759,arg$16760){var rval$16763;(rval$16763=false);try{(rval$16763=f$16754(context$16757,scope$16758,form$16759,arg$16760));}catch(excv$16769){var t0$16786;var e$16791;var t0$16772;var t1$16773;var t2$16774;var t3$16775;var t4$16776;(t0$16772=excv$16769);if(($16400($23095(["match"]))(t0$16772)&&($23057(t0$16772,"args")&&((t1$16773=t0$16772.args),((t1$16773 instanceof Array)&&((t2$16774=t1$16773.length),((t2$16774===1)&&((t3$16775=t1$16773[0]),($23057(t3$16775,"value")&&((t4$16776=t3$16775.value),((t4$16776===context$16757)&&(!((t4$16776 instanceof Array)&&((t0$16786=t4$16776.length),((t0$16786===2)&&((t4$16776[0]==="expr")&&(t4$16776[1]==="expr"))))))))))))))))){(rval$16763=["nostep",form$16759]);}else{(e$16791=excv$16769);(rval$16763=function(){throw e$16791;}());}}return rval$16763;};});(expr_mac$16495=function(f$16797){return function($16799$16801,scope$16802,form$16803,arg$16804){var t0$16824;var t0$16827;var otherwise$16832;var bridge$16807$16818;var $16806$16813;var ph$16808;(ph$16808=$16799$16801);($16806$16813=ph$16808);(bridge$16807$16818=$16806$16813);if((((bridge$16807$16818 instanceof Array)&&((t0$16824=bridge$16807$16818.length),((t0$16824===2)&&((bridge$16807$16818[0]==="expr")&&(bridge$16807$16818[1]==="expr")))))||((bridge$16807$16818 instanceof Array)&&((t0$16827=bridge$16807$16818.length),((t0$16827===2)&&((bridge$16807$16818[0]==="expr")&&(bridge$16807$16818[1]==="head"))))))){return f$16797(scope$16802,form$16803,arg$16804);}else{(otherwise$16832=$16806$16813);return ["nostep",form$16803];}};});(overridable$16496=function(f$16838){return function($16840$16842,scope$16843,form$16844,arg$16845){var t0$16851;var x$16866;var other$16878;var t0$16860;var $16847$16855;var ph$16848;var context$16849;(t0$16851=$16840$16842);(context$16849=t0$16851);(ph$16848=t0$16851);($16847$16855=ph$16848);if((((x$16866=$16847$16855)),((x$16866 instanceof Array)&&(x$16866[0]==="pattern")))){return ["nostep",form$16844];}else{if((($16847$16855 instanceof Array)&&((t0$16860=$16847$16855.length),((t0$16860===2)&&(($16847$16855[0]==="expr")&&($16847$16855[1]==="multi")))))){return ["nostep",form$16844];}else{(other$16878=$16847$16855);return f$16838(context$16849,scope$16843,form$16844,arg$16845);}}};});(protected_value$16497=function(name$16884,value$16885){return function($16887$16889,scope$16890,form$16891,arg$16892){var x$16910;var other$16935;var t0$16926;var $16919$16921;var other$16917;var $16894$16900;var ph$16895;(ph$16895=$16887$16889);($16894$16900=ph$16895);if((((x$16910=$16894$16900)),((x$16910 instanceof Array)&&(x$16910[0]==="pattern")))){throw $23095(["syntax","pattern"]).create((("'"+name$16884)+"' is not a valid pattern and cannot be redeclared"));}else{(other$16917=$16894$16900);($16919$16921=arg$16892);if((($16919$16921 instanceof Array)&&((t0$16926=$16919$16921.length),((t0$16926===1)&&($16919$16921[0]==="void"))))){return ["value",value$16885];}else{(other$16935=$16919$16921);return ["send",["value",value$16885],arg$16892];}}};});(setup_label$16498=function(label$16941,env$16942,body$16943){return ["bind",$23299(["symbol","break"],({"env":env$16942})),["macro",break_mac$16499(label$16941)],["bind",$23299(["symbol","continue"],({"env":env$16942})),["macro",continue_mac$16500(label$16941)],["js_label",["value",label$16941],body$16943]]];});(break_mac$16499=function(default_label$16949){return overridable$16496(function(context$16953,scope$16954,form$16955,$16951$16956){var t0$16966;var v$16997;var v$16992;var $16959$16977;var $16960$16978;var $16961$16979;var $16962$16980;var t0$16975;var $16958$16970;var ph$16963;var expr$16964;(t0$16966=$16951$16956);(expr$16964=t0$16966);(ph$16963=t0$16966);($16958$16970=ph$16963);if((($16959$16977=($16958$16970 instanceof Array))&&((t0$16975=$16958$16970.length),(($16961$16979=(t0$16975===1))&&(($16962$16980=($16958$16970[0]==="void"))&&default_label$16949))))){return ["js_break",["value",default_label$16949]];}else{if($16962$16980){return ["js_break"];}else{if(($16959$16977&&(($16961$16979=(t0$16975===2))&&($16958$16970[0]==="value")))){(v$16992=$16958$16970[1]);return ["js_break",expr$16964];}else{if(($16961$16979&&($16958$16970[0]==="symbol"))){(v$16997=$16958$16970[1]);return ["js_break",["value",v$16997]];}else{$23286($16958$16970);}}}}});});(continue_mac$16500=function(default_label$17006){return overridable$16496(function(context$17010,scope$17011,form$17012,$17008$17013){var t0$17023;var v$17054;var v$17049;var $17016$17034;var $17017$17035;var $17018$17036;var $17019$17037;var t0$17032;var $17015$17027;var ph$17020;var expr$17021;(t0$17023=$17008$17013);(expr$17021=t0$17023);(ph$17020=t0$17023);($17015$17027=ph$17020);if((($17016$17034=($17015$17027 instanceof Array))&&((t0$17032=$17015$17027.length),(($17018$17036=(t0$17032===1))&&(($17019$17037=($17015$17027[0]==="void"))&&default_label$17006))))){return ["js_continue",["value",default_label$17006]];}else{if($17019$17037){return ["js_continue"];}else{if(($17016$17034&&(($17018$17036=(t0$17032===2))&&($17015$17027[0]==="value")))){(v$17049=$17015$17027[1]);return ["js_continue",expr$17021];}else{if(($17018$17036&&($17015$17027[0]==="symbol"))){(v$17054=$17015$17027[1]);return ["js_continue",["value",v$17054]];}else{$23286($17015$17027);}}}}});});(var_operator$16501=function(name$17063){return function(context$17066,scope$17067,form$17068,expr$17069){var t0$17079;var x$17106;var other$17123;var s$17117;var t0$17112;var t1$17113;var $17073$17103;var $17074$17094;var $17075$17095;var t0$17092;var $17072$17087;var env$17076;var sym$17077;(t0$17079=form$17068);if($23057(t0$17079,"env")){(env$17076=t0$17079.env);}else{$23286(form$17068,"/home/olivier/git/earl-grey/src/stdenv.eg",3522,3526);}(sym$17077=$23299(["symbol",name$17063],({"env":env$17076})));($17072$17087=expr$17069);if((($17074$17094=($17072$17087 instanceof Array))&&((t0$17092=$17072$17087.length),((t0$17092===1)&&($17072$17087[0]==="void"))))){return sym$17077;}else{if(($17074$17094&&((t0$17092===3)&&(($17072$17087[0]==="data")&&(((x$17106=$17072$17087[1])),((x$17106 instanceof Array)&&(x$17106[0]==="void"))))))){($17073$17103=$17072$17087[2]);(t0$17112=$17073$17103);if(((t0$17112 instanceof Array)&&((t1$17113=t0$17112.length),((t1$17113===2)&&(t0$17112[0]==="symbol"))))){(s$17117=t0$17112[1]);return ["send",sym$17077,["value",s$17117]];}else{(other$17123=$17073$17103);return ["send",sym$17077,other$17123];}}else{$23286($17072$17087);}}};});(accum_flags$16502=function(){var make$17147;var mac$17142;var also_values$17143;var t0$17138;var $17131$17133;($17131$17133=arguments);(t0$17138=$17131$17133.length);if(((t0$17138>=1)&&(t0$17138<=2))){(mac$17142=$17131$17133[0]);(also_values$17143=function(){if((1>=t0$17138)){return true;}else{return $17131$17133[1];}}());(make$17147=function(flags$17151){return function(context$17155,scope$17156,form$17157,$17153$17158){var other$17207;var flag$17194;var flag$17187;var $17161$17183;var $17162$17184;var t0$17173;var t1$17174;var t2$17175;var t3$17176;var t4$17177;var t5$17178;var t6$17179;var t7$17180;var t8$17181;var $17160$17168;var ph$17163;(ph$17163=$17153$17158);($17160$17168=ph$17163);if((($17161$17183=($17160$17168 instanceof Array))&&((t0$17173=$17160$17168.length),((t0$17173===2)&&(($17160$17168[0]==="value")&&((flag$17187=$17160$17168[1]),also_values$17143)))))){return ["macro",make$17147(flags$17151.concat([flag$17187]))];}else{if(($17161$17183&&((t0$17173===3)&&(($17160$17168[0]==="send")&&((t1$17174=$17160$17168[1]),((t1$17174 instanceof Array)&&((t2$17175=t1$17174.length),((t2$17175===2)&&((t1$17174[0]==="symbol")&&((t1$17174[1]===".")&&((t3$17176=$17160$17168[2]),((t3$17176 instanceof Array)&&((t4$17177=t3$17176.length),((t4$17177===3)&&((t3$17176[0]==="data")&&((t5$17178=t3$17176[1]),((t5$17178 instanceof Array)&&((t6$17179=t5$17178.length),((t6$17179===1)&&((t5$17178[0]==="void")&&((t7$17180=t3$17176[2]),((t7$17180 instanceof Array)&&((t8$17181=t7$17180.length),((t8$17181===2)&&(t7$17180[0]==="symbol"))))))))))))))))))))))))){(flag$17194=t7$17180[1]);return ["macro",make$17147(flags$17151.concat([flag$17194]))];}else{(other$17207=$17160$17168);return mac$17142(context$17155,scope$17156,form$17157,other$17207,flags$17151);}}};});return make$17147([]);}else{$23286($17131$17133);}});(pattern_constructors$16503=({}));(disregard_specials$16504=function($17218$17220,value$17221){var t0$17226;var t1$17227;var kind$17223;var expr$17224;(t0$17226=$17218$17220);if(((t0$17226 instanceof Array)&&((t1$17227=t0$17226.length),((t1$17227===2)&&(t0$17226[0]==="special"))))){(kind$17223=t0$17226[1]);(expr$17224=t0$17226);}else{$23286($17218$17220);}throw $23095(["syntax","pattern","special"]).create("Special token cannot be used here",({"special":expr$17224}));});(pattern_handlers$16505=({"declare_variables":$16416(({"allow_nested":true,"allow_arguments":true,"special":disregard_specials$16504}),$16416(((accum$17236=({})),((accum$17236["assign"]=function($17239$17241,value$17242,tags$17243){var t0$17249;var v$17268;var name$17262;var t0$17258;var $17245$17253;var ph$17246;var v$17247;(t0$17249=$17239$17241);(v$17247=t0$17249);(ph$17246=t0$17249);($17245$17253=ph$17246);if((($17245$17253 instanceof Array)&&((t0$17258=$17245$17253.length),((t0$17258===2)&&($17245$17253[0]==="symbol"))))){(name$17262=$17245$17253[1]);return ["do",__lt____lt____colon__$16468(["assign",v$17247,$16416(value$17242,({"name":name$17262}))],v$17247)];}else{(v$17268=$17245$17253);return ["do",__lt____lt____colon__$16468(["assign",v$17268,value$17242],v$17268)];}}),accum$17236)),$16416(({"finalize":true,"tags":({"declare_mode":"unqualified"})}),$16416(((accum$17271=({})),((accum$17271["declare"]=function(scope$17275,vars$17276){var $index$17296;var $length$17291;var temp$17286;var acc$17281;(acc$17281=[]);(temp$17286=vars$17276);($length$17291=temp$17286.length);($index$17296=0);$17278:for(;($index$17296<$length$17291);($index$17296++)){var msg$17359;var other$17356;var $17338$17340;var $17314$17316;var v$17312;var m$17304;(m$17304=temp$17286[$index$17296]);(v$17312=m$17304);acc$17281.push(((($17314$17316=v$17312.declare_mode)),function(){if(($17314$17316==="set")){return ["splice"];}else{if(($17314$17316==="let")){return ["declare",$23299(v$17312,({"mutable":false}))];}else{if(($17314$17316==="var")){return ["declare",$23299(v$17312,({"mutable":true}))];}else{if(($17314$17316==="unqualified")){($17338$17340=v$17312.env.resolve(scope$17275,v$17312[1]));if(($17338$17340===(void 0))){return ["declare",$23299(v$17312,({"mutable":false}))];}else{if(($23057($17338$17340,"mutable")&&$17338$17340.mutable)){return ["splice"];}else{(other$17356=$17338$17340);(msg$17359="Variable was declared read-only. Declare with 'var' to make it mutable.");throw $23095(["syntax","redeclaring"]).create(msg$17359,({"variable":v$17312}));}}}else{$23286($17314$17316);}}}}}()));}return acc$17281;}),accum$17271)),$16416(((accum$17366=({})),((accum$17366["success"]=function($17369$17371){$17369$17371;return ["multi"];}),accum$17366)),((accum$17377=({})),((accum$17377["failure"]=function(target$17381){return match_error$16493(target$17381);}),accum$17377))))))),"build_object":$16416(({"strings_as_variables":true,"allow_nested":true,"allow_arguments":true,"special":disregard_specials$16504}),$16416(((accum$17384=({})),((accum$17384["assign"]=function($17387$17391,value$17392,$17389$17393){var t0$17400;var t0$17404;var bridge$17388$17397;var v$17395;(bridge$17388$17397=$17387$17391);if((((bridge$17388$17397 instanceof Array)&&((t0$17400=bridge$17388$17397.length),((t0$17400===2)&&((bridge$17388$17397[0]==="symbol")&&((v$17395=bridge$17388$17397[1]),true)))))||((bridge$17388$17397 instanceof Array)&&((t0$17404=bridge$17388$17397.length),((t0$17404===2)&&((bridge$17388$17397[0]==="value")&&((v$17395=bridge$17388$17397[1]),true))))))){}else{$23286($17387$17391);}$17389$17393;return ["do",__lt____lt____colon__$16468(["assign",["send",["symbol","accum"],["value",v$17395]],value$17392],v$17395)];}),accum$17384)),$16416(({"finalize":true}),$16416(((accum$17413=({})),((accum$17413["declare"]=function(scope$17417,vars$17418){return [["declare",["symbol","accum"],["data",["symbol","="]]]];}),accum$17413)),$16416(((accum$17421=({})),((accum$17421["success"]=function($17424$17426){$17424$17426;return ["symbol","accum"];}),accum$17421)),((accum$17432=({})),((accum$17432["failure"]=function(target$17436){return match_error$16493(target$17436);}),accum$17432)))))))}));(build_loop$16506=function(scope$17442,env$17443,form$17444,li$17445,clauses$17446,wrap$17447,pre$17448,post$17449,opt$17450){var t0$17470;var t0$17507;var accum$17550;var lbl$17453;var i$17454;var len$17455;var first_mac$17456;var last_mac$17457;var newscope$17458;var m$17459;(lbl$17453=function(){if(env$17443){return $23299(["value",scope$17442.gensym()],({"env":env$17443}));}else{return ["value",scope$17442.gensym()];}}());(i$17454=$23299(["symbol","$index"],({"env":env$17443})));(len$17455=$23299(["symbol","$length"],({"env":env$17443})));(t0$17470=$23371(drop_ctx$16494)(function($17472$17474,scope$17475,form$17476,subp$17477){var x$17482;if((((x$17482=$17472$17474)),((x$17482 instanceof Array)&&(x$17482[0]==="pattern")))){}else{$23286($17472$17474);}return ["test",["send",["symbol","==="],["data",i$17454,["value",0]]],subp$17477];}));if(t0$17470[0]){(first_mac$17456=t0$17470[1]);}else{$23286(function($17490$17492,scope$17493,form$17494,subp$17495){var x$17500;if((((x$17500=$17490$17492)),((x$17500 instanceof Array)&&(x$17500[0]==="pattern")))){}else{$23286($17490$17492);}return ["test",["send",["symbol","==="],["data",i$17454,["value",0]]],subp$17495];});}(t0$17507=$23371(drop_ctx$16494)(function($17509$17511,scope$17512,form$17513,subp$17514){var x$17519;if((((x$17519=$17509$17511)),((x$17519 instanceof Array)&&(x$17519[0]==="pattern")))){}else{$23286($17509$17511);}return ["test",["send",["symbol","==="],["data",i$17454,["send",["symbol","-"],["data",len$17455,["value",1]]]]],subp$17514];}));if(t0$17507[0]){(last_mac$17457=t0$17507[1]);}else{$23286(function($17527$17529,scope$17530,form$17531,subp$17532){var x$17537;if((((x$17537=$17527$17529)),((x$17537 instanceof Array)&&(x$17537[0]==="pattern")))){}else{$23286($17527$17529);}return ["test",["send",["symbol","==="],["data",i$17454,["send",["symbol","-"],["data",len$17455,["value",1]]]]],subp$17532];});}(newscope$17458=Scope$16479(scope$17442));env$17443.bind(newscope$17458,"first",["macro",first_mac$17456]);env$17443.bind(newscope$17458,"last",["macro",last_mac$17457]);(m$17459=__lt____lt____colon__$16468(["symbol","m"],form$17444));return ["multi",pre$17448,["send",["symbol","let"],["data",["multi",["send",["symbol","="],["data",["symbol","temp"],li$17445]],["send",["symbol","="],["data",len$17455,["send",["symbol","temp"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]]],["send",["send",["symbol","for"],lbl$17453],["data",["multi",["send",["symbol","="],["data",["send",["symbol","let"],i$17454],["value",0]]],["send",["symbol","<"],["data",i$17454,len$17455]],["send",["symbol","++"],["data",i$17454,["void"]]]],["multi",["send",["symbol","="],["data",m$17459,["send",["symbol","___js_fetch"],["data",["symbol","temp"],i$17454]]]],parse_clauses$16476(newscope$17458,m$17459,clauses$17446,$23299(opt$17450,((accum$17550=({})),((accum$17550["wrap"]=function(x$17554){return wrap$17447(x$17554,i$17454);}),accum$17550))))]]]]],post$17449];});(partial_pattern$16507=function(operator$17560){var x$17578;var $17566$17568;var op$17563;(op$17563=((($17566$17568=operator$17560)),function(){if((((x$17578=$17566$17568)),((x$17578 instanceof Array)&&(x$17578[0]==="symbol")))){return operator$17560;}else{if((typeof($17566$17568)==="string")){return ["variable",operator$17560];}else{$23286($17566$17568);}}}()));return function(context$17591,scope$17592,form$17593,expr$17594){var x$17621;var m$17631;var other$17647;var val$17617;var $17597$17612;var $17598$17613;var $17599$17614;var t0$17606;var t1$17607;var t2$17608;var t3$17609;var t4$17610;var $17596$17601;($17596$17601=[context$17591,expr$17594]);if((($17597$17612=($17596$17601 instanceof Array))&&((t0$17606=$17596$17601.length),(($17599$17614=(t0$17606===2))&&((((x$17621=$17596$17601[0])),((x$17621 instanceof Array)&&(x$17621[0]==="pattern")))&&((t1$17607=$17596$17601[1]),((t1$17607 instanceof Array)&&((t2$17608=t1$17607.length),((t2$17608===3)&&((t1$17607[0]==="data")&&((t3$17609=t1$17607[1]),((t3$17609 instanceof Array)&&((t4$17610=t3$17609.length),((t4$17610===1)&&(t3$17609[0]==="void"))))))))))))))){(val$17617=t1$17607[2]);(m$17631=mac1$16482(function(x$17635){return ["send",op$17563,["data",x$17635,val$17617]];}));return ["check",m$17631,["ignore"]];}else{if(($17599$17614&&($17596$17601[0],((t1$17607=$17596$17601[1]),((t1$17607 instanceof Array)&&((t2$17608=t1$17607.length),((t2$17608===1)&&(t1$17607[0]==="void")))))))){return op$17563;}else{(other$17647=$17596$17601);return ["send",op$17563,expr$17594];}}};});(make_assigner$16508=function(op$17653){return function(context$17657,scope$17658,form$17659,$17655$17660){var t0$17665;var t1$17666;var a$17662;var b$17663;(t0$17665=$17655$17660);if(((t0$17665 instanceof Array)&&((t1$17666=t0$17665.length),((t1$17666===3)&&(t0$17665[0]==="data"))))){(a$17662=t0$17665[1]);(b$17663=t0$17665[2]);}else{$23286($17655$17660);}return ["assign",a$17662,["send",["symbol",op$17653],["data",a$17662,b$17663]]];};});(temp$17674=$23399($16416(({"true":protected_value$16497("true",true),"false":protected_value$16497("false",false),"null":protected_value$16497("null",null),"undefined":protected_value$16497("undefined",(void 0)),"===":partial_pattern$16507("==="),"!==":partial_pattern$16507("!=="),"==":partial_pattern$16507(["symbol","___equal"]),"!=":partial_pattern$16507(["symbol","___nequal"]),"<=":partial_pattern$16507("<="),">=":partial_pattern$16507(">="),"<":partial_pattern$16507("<"),">":partial_pattern$16507(">")}),$16416(((accum$17678=({})),((accum$17678["-"]=function(context$17683,scope$17684,form$17685,$17681$17686){var t0$17694;var other$17729;var n$17714;var $17689$17710;var $17690$17711;var t0$17703;var t1$17704;var t2$17705;var t3$17706;var t4$17707;var t5$17708;var $17688$17698;var ph$17691;var expr$17692;(t0$17694=$17681$17686);(expr$17692=t0$17694);(ph$17691=t0$17694);($17688$17698=ph$17691);if((($17689$17710=($17688$17698 instanceof Array))&&((t0$17703=$17688$17698.length),((t0$17703===3)&&(($17688$17698[0]==="data")&&((t1$17704=$17688$17698[1]),((t1$17704 instanceof Array)&&((t2$17705=t1$17704.length),((t2$17705===1)&&((t1$17704[0]==="void")&&((t3$17706=$17688$17698[2]),((t3$17706 instanceof Array)&&((t4$17707=t3$17706.length),((t4$17707===2)&&((t3$17706[0]==="value")&&((t5$17708=t3$17706[1]),(typeof(t5$17708)==="number"))))))))))))))))){(n$17714=t5$17708);return ["value",(-n$17714)];}else{if(($17689$17710&&((t0$17703===1)&&($17688$17698[0]==="void")))){return ["variable","-"];}else{(other$17729=$17688$17698);return ["send",["variable","-"],expr$17692];}}}),accum$17678)),$16416(((accum$17732=({})),((accum$17732["++"]=function(context$17737,scope$17738,form$17739,$17735$17740){var other$17793;var x$17783;var y$17784;var x$17775;var x$17767;var $17743$17761;var $17744$17762;var $17745$17763;var $17746$17764;var t0$17757;var t1$17758;var t2$17759;var $17742$17752;var ph$17747;(ph$17747=$17735$17740);($17742$17752=ph$17747);if((($17743$17761=($17742$17752 instanceof Array))&&((t0$17757=$17742$17752.length),(($17745$17763=(t0$17757===3))&&(($17746$17764=($17742$17752[0]==="data"))&&((t1$17758=$17742$17752[1]),((t1$17758 instanceof Array)&&((t2$17759=t1$17758.length),((t2$17759===1)&&(t1$17758[0]==="void")))))))))){(x$17767=$17742$17752[2]);return ["send",["variable","++"],["data",["void"],x$17767]];}else{if(($17746$17764&&((x$17775=$17742$17752[1]),((t1$17758=$17742$17752[2]),((t1$17758 instanceof Array)&&((t2$17759=t1$17758.length),((t2$17759===1)&&(t1$17758[0]==="void")))))))){return ["send",["variable","++"],["data",x$17775,["void"]]];}else{if($17746$17764){(x$17783=$17742$17752[1]);(y$17784=$17742$17752[2]);return ["send",["send",x$17783,["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",y$17784]];}else{if(($17743$17761&&((t0$17757===1)&&($17742$17752[0]==="void")))){return ["send",["symbol","->"],["data",["data",["symbol","x"],["symbol","y"]],["send",["send",["symbol","x"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",["symbol","y"]]]]];}else{(other$17793=$17742$17752);return ["send",["symbol","___build_array"],["data",other$17793]];}}}}}),accum$17732)),$16416(((accum$17796=({})),((accum$17796[".."]=function(context$17801,scope$17802,form$17803,$17799$17804){var x$17847;var y$17848;var x$17839;var x$17831;var $17807$17825;var $17808$17826;var $17809$17827;var $17810$17828;var t0$17821;var t1$17822;var t2$17823;var $17806$17816;var ph$17811;(ph$17811=$17799$17804);($17806$17816=ph$17811);if((($17807$17825=($17806$17816 instanceof Array))&&((t0$17821=$17806$17816.length),(($17809$17827=(t0$17821===3))&&(($17810$17828=($17806$17816[0]==="data"))&&((t1$17822=$17806$17816[1]),((t1$17822 instanceof Array)&&((t2$17823=t1$17822.length),((t2$17823===1)&&(t1$17822[0]==="void")))))))))){(x$17831=$17806$17816[2]);return ["send",["symbol","range"],["data",["value",1],x$17831]];}else{if(($17810$17828&&((x$17839=$17806$17816[1]),((t1$17822=$17806$17816[2]),((t1$17822 instanceof Array)&&((t2$17823=t1$17822.length),((t2$17823===1)&&(t1$17822[0]==="void")))))))){return ["send",["symbol","range"],["data",x$17839]];}else{if($17810$17828){(x$17847=$17806$17816[1]);(y$17848=$17806$17816[2]);return ["send",["symbol","range"],["data",x$17847,y$17848]];}else{if(($17807$17825&&((t0$17821===1)&&($17806$17816[0]==="void")))){return ["symbol","range"];}else{$23286($17806$17816);}}}}}),accum$17796)),$16416(((accum$17858=({})),((accum$17858["//"]=function(context$17863,scope$17864,form$17865,$17861$17866){var t0$17871;var t1$17872;var a$17868;var b$17869;(t0$17871=$17861$17866);if(((t0$17871 instanceof Array)&&((t1$17872=t0$17871.length),((t1$17872===3)&&(t0$17871[0]==="data"))))){(a$17868=t0$17871[1]);(b$17869=t0$17871[2]);}else{$23286($17861$17866);}return ["send",["send",["symbol","Math"],["send",["symbol","."],["data",["void"],["symbol","floor"]]]],["data",["send",["symbol","/"],["data",a$17868,b$17869]]]];}),accum$17858)),$16416(((accum$17878=({})),((accum$17878["*"]=function(context$17882,scope$17883,form$17884,expr$17885){var x$17913;var x$17926;var t0$17931;var other$17947;var val$17922;var $17889$17905;var $17890$17906;var $17891$17907;var t0$17898;var t1$17899;var t2$17900;var bridge$17888$17901;var t3$17902;var t4$17903;var $17887$17893;($17887$17893=[context$17882,expr$17885]);if((($17889$17905=($17887$17893 instanceof Array))&&((t0$17898=$17887$17893.length),(($17891$17907=(t0$17898===2))&&((((x$17913=$17887$17893[0])),((x$17913 instanceof Array)&&(x$17913[0]==="pattern")))&&((t1$17899=$17887$17893[1]),((t1$17899 instanceof Array)&&((t2$17900=t1$17899.length),((t2$17900===1)&&(t1$17899[0]==="void")))))))))){return ["dynsplice",["ignore"]];}else{if(($17891$17907&&((bridge$17888$17901=$17887$17893[0]),(((((x$17926=bridge$17888$17901)),((x$17926 instanceof Array)&&(x$17926[0]==="pattern")))||((bridge$17888$17901 instanceof Array)&&((t0$17931=bridge$17888$17901.length),((t0$17931===2)&&((bridge$17888$17901[0]==="expr")&&(bridge$17888$17901[1]==="data"))))))&&((t1$17899=$17887$17893[1]),((t1$17899 instanceof Array)&&((t2$17900=t1$17899.length),((t2$17900===3)&&((t1$17899[0]==="data")&&((t3$17902=t1$17899[1]),((t3$17902 instanceof Array)&&((t4$17903=t3$17902.length),((t4$17903===1)&&(t3$17902[0]==="void")))))))))))))){(val$17922=t1$17899[2]);return ["dynsplice",val$17922];}else{if(($17891$17907&&($17887$17893[0],((t1$17899=$17887$17893[1]),((t1$17899 instanceof Array)&&((t2$17900=t1$17899.length),((t2$17900===1)&&(t1$17899[0]==="void")))))))){return ["variable","*"];}else{(other$17947=$17887$17893);return ["send",["variable","*"],expr$17885];}}}}),accum$17878)),$16416(((accum$17950=({})),((accum$17950["**"]=function(context$17954,scope$17955,form$17956,expr$17957){var x$17993;var x$18006;var t0$18011;var a$18027;var b$18028;var val$18002;var $17961$17981;var $17962$17982;var $17963$17983;var $17964$17984;var $17965$17985;var $17966$17986;var $17967$17987;var t0$17974;var t1$17975;var t2$17976;var bridge$17960$17977;var t3$17978;var t4$17979;var $17959$17969;($17959$17969=[context$17954,expr$17957]);if((($17961$17981=($17959$17969 instanceof Array))&&((t0$17974=$17959$17969.length),(($17963$17983=(t0$17974===2))&&((((x$17993=$17959$17969[0])),((x$17993 instanceof Array)&&(x$17993[0]==="pattern")))&&((t1$17975=$17959$17969[1]),((t1$17975 instanceof Array)&&((t2$17976=t1$17975.length),((t2$17976===1)&&(t1$17975[0]==="void")))))))))){return ["objsplice",["ignore"]];}else{if(($17963$17983&&((bridge$17960$17977=$17959$17969[0]),(((((x$18006=bridge$17960$17977)),((x$18006 instanceof Array)&&(x$18006[0]==="pattern")))||((bridge$17960$17977 instanceof Array)&&((t0$18011=bridge$17960$17977.length),((t0$18011===2)&&((bridge$17960$17977[0]==="expr")&&(bridge$17960$17977[1]==="data"))))))&&((t1$17975=$17959$17969[1]),((t1$17975 instanceof Array)&&((t2$17976=t1$17975.length),((t2$17976===3)&&((t1$17975[0]==="data")&&((t3$17978=t1$17975[1]),((t3$17978 instanceof Array)&&((t4$17979=t3$17978.length),((t4$17979===1)&&(t3$17978[0]==="void")))))))))))))){(val$18002=t1$17975[2]);return ["objsplice",val$18002];}else{if(($17963$17983&&($17959$17969[0],((t1$17975=$17959$17969[1]),(($17966$17986=(t1$17975 instanceof Array))&&((t2$17976=t1$17975.length),((t2$17976===1)&&(t1$17975[0]==="void")))))))){return ["send",["symbol","Math"],["send",["symbol","."],["data",["void"],["symbol","pow"]]]];}else{if(($17966$17986&&((t2$17976===3)&&(t1$17975[0]==="data")))){(a$18027=t1$17975[1]);(b$18028=t1$17975[2]);return ["send",["send",["symbol","Math"],["send",["symbol","."],["data",["void"],["symbol","pow"]]]],["data",a$18027,b$18028]];}else{$23286($17959$17969);}}}}}),accum$17950)),$16416(((accum$18034=({})),((accum$18034["_"]=function($18037$18040,scope$18041,form$18042,$18038$18043){var x$18048;var t0$18055;var t1$18056;if((((x$18048=$18037$18040)),((x$18048 instanceof Array)&&(x$18048[0]==="pattern")))){}else{$23286($18037$18040);}(t0$18055=$18038$18043);if(((t0$18055 instanceof Array)&&((t1$18056=t0$18055.length),((t1$18056===1)&&(t0$18055[0]==="void"))))){}else{$23286($18038$18043);}return ["ignore"];}),accum$18034)),$16416(((accum$18062=({})),((accum$18062["not"]=function($18065$18068,scope$18069,form$18070,$18066$18071){var t0$18081;var t1$18082;var t2$18083;var t3$18084;var x$18102;var other$18109;var $18073$18092;var ph$18074;var rhs$18075;var arg$18076;(ph$18074=$18065$18068);(t0$18081=$18066$18071);if(((t0$18081 instanceof Array)&&((t1$18082=t0$18081.length),((t1$18082===3)&&((t0$18081[0]==="data")&&((t2$18083=t0$18081[1]),((t2$18083 instanceof Array)&&((t3$18084=t2$18083.length),((t3$18084===1)&&(t2$18083[0]==="void")))))))))){(rhs$18075=t0$18081[2]);(arg$18076=t0$18081);}else{$23286($18066$18071);}($18073$18092=ph$18074);if((((x$18102=$18073$18092)),((x$18102 instanceof Array)&&(x$18102[0]==="pattern")))){return ["neg",rhs$18075];}else{(other$18109=$18073$18092);return ["send",["variable","not"],arg$18076];}}),accum$18062)),$16416(((accum$18112=({})),((accum$18112["and"]=function($18115$18118,scope$18119,form$18120,$18116$18121){var t0$18132;var t1$18133;var x$18149;var other$18156;var $18123$18139;var ph$18124;var lhs$18125;var rhs$18126;var arg$18127;(ph$18124=$18115$18118);(t0$18132=$18116$18121);if(((t0$18132 instanceof Array)&&((t1$18133=t0$18132.length),((t1$18133===3)&&(t0$18132[0]==="data"))))){(lhs$18125=t0$18132[1]);(rhs$18126=t0$18132[2]);(arg$18127=t0$18132);}else{$23286($18116$18121);}($18123$18139=ph$18124);if((((x$18149=$18123$18139)),((x$18149 instanceof Array)&&(x$18149[0]==="pattern")))){return ["all",lhs$18125,rhs$18126];}else{(other$18156=$18123$18139);return ["send",["variable","and"],arg$18127];}}),accum$18112)),$16416(((accum$18159=({})),((accum$18159["or"]=function($18162$18165,scope$18166,form$18167,$18163$18168){var t0$18179;var t1$18180;var x$18196;var other$18203;var $18170$18186;var ph$18171;var lhs$18172;var rhs$18173;var arg$18174;(ph$18171=$18162$18165);(t0$18179=$18163$18168);if(((t0$18179 instanceof Array)&&((t1$18180=t0$18179.length),((t1$18180===3)&&(t0$18179[0]==="data"))))){(lhs$18172=t0$18179[1]);(rhs$18173=t0$18179[2]);(arg$18174=t0$18179);}else{$23286($18163$18168);}($18170$18186=ph$18171);if((((x$18196=$18170$18186)),((x$18196 instanceof Array)&&(x$18196[0]==="pattern")))){return ["any",lhs$18172,rhs$18173];}else{(other$18203=$18170$18186);return ["send",["variable","or"],arg$18174];}}),accum$18159)),$16416(((accum$18206=({})),((accum$18206["when"]=function(context$18211,scope$18212,form$18213,$18209$18214){var t0$18220;var t1$18221;var other$18241;var t0$18232;var $18216$18227;var ph$18217;var condition$18218;(t0$18220=$18209$18214);if(((t0$18220 instanceof Array)&&((t1$18221=t0$18220.length),((t1$18221===3)&&(t0$18220[0]==="data"))))){(ph$18217=t0$18220[1]);(condition$18218=t0$18220[2]);}else{$23286($18209$18214);}($18216$18227=ph$18217);if((($18216$18227 instanceof Array)&&((t0$18232=$18216$18227.length),((t0$18232===1)&&($18216$18227[0]==="void"))))){return ["test",condition$18218,["ignore"]];}else{(other$18241=$18216$18227);return ["test",condition$18218,other$18241];}}),accum$18206)),$16416(((accum$18244=({})),((accum$18244["."]=function(context$18249,scope$18250,form$18251,$18247$18252){var t0$18256;var t1$18257;var t2$18258;var t3$18259;var f$18267;var expr$18254;(t0$18256=$18247$18252);if(((t0$18256 instanceof Array)&&((t1$18257=t0$18256.length),((t1$18257===3)&&((t0$18256[0]==="data")&&((t2$18258=t0$18256[1]),((t2$18258 instanceof Array)&&((t3$18259=t2$18258.length),((t3$18259===1)&&(t2$18258[0]==="void")))))))))){(expr$18254=t0$18256[2]);}else{$23286($18247$18252);}(f$18267=function($18270$18272){var t0$18294;var t0$18298;var $index$18326;var $length$18321;var temp$18316;var acc$18311;var other$18346;var args$18304;var x$18291;var bridge$18275$18286;var t0$18287;var $18274$18281;var ph$18276;(ph$18276=$18270$18272);($18274$18281=ph$18276);(bridge$18275$18286=$18274$18281);if((((bridge$18275$18286 instanceof Array)&&((t0$18294=bridge$18275$18286.length),((t0$18294===2)&&((bridge$18275$18286[0]==="symbol")&&((x$18291=bridge$18275$18286[1]),true)))))||((bridge$18275$18286 instanceof Array)&&((t0$18298=bridge$18275$18286.length),((t0$18298===2)&&((bridge$18275$18286[0]==="value")&&((x$18291=bridge$18275$18286[1]),true))))))){return ["value",x$18291];}else{if((($18274$18281 instanceof Array)&&((t0$18287=$18274$18281.length),((t0$18287>=1)&&($18274$18281[0]==="data"))))){(args$18304=Array.prototype.slice.call($18274$18281,1));return ["data"].concat((((acc$18311=[])),(((temp$18316=args$18304)),((($length$18321=temp$18316.length)),((($index$18326=0)),function(){$18308:for(;($index$18326<$length$18321);($index$18326++)){var arg$18342;var m$18334;(m$18334=temp$18316[$index$18326]);(arg$18342=m$18334);acc$18311.push(f$18267(arg$18342));}}()))),acc$18311));}else{(other$18346=$18274$18281);throw $23095(["syntax","dot"]).create("Argument to '.' must be a symbol or an array",({"argument":other$18346}));}}});return f$18267(expr$18254);}),accum$18244)),$16416(((accum$18350=({})),((accum$18350["="]=function(context$18354,scope$18355,form$18356,expr$18357){var t0$18385;var t1$18386;var lhs$18382;var rhs$18383;var lhs$18429;var rhs$18430;var s$18421;var rhs$18422;var $18396$18410;var $18397$18411;var $18398$18412;var $18399$18413;var t0$18406;var t1$18407;var t2$18408;var $18395$18401;var x$18439;var t0$18448;var t1$18449;var lhs$18445;var rhs$18446;var $18360$18372;var $18361$18373;var $18362$18374;var $18363$18375;var t0$18370;var $18359$18365;($18359$18365=context$18354);if((($18360$18372=($18359$18365 instanceof Array))&&((t0$18370=$18359$18365.length),(($18362$18374=(t0$18370===2))&&(($18363$18375=($18359$18365[0]==="expr"))&&($18359$18365[1]==="multi")))))){(t0$18385=expr$18357);if(((t0$18385 instanceof Array)&&((t1$18386=t0$18385.length),((t1$18386===3)&&(t0$18385[0]==="data"))))){(lhs$18382=t0$18385[1]);(rhs$18383=t0$18385[2]);}else{$23286(expr$18357,"/home/olivier/git/earl-grey/src/stdenv.eg",11304,11308);}return parse_pattern$16475(scope$18355,lhs$18382,__lt____lt____colon__$16468(["use",scope$18355,rhs$18383],rhs$18383),pattern_handlers$16505.declare_variables);}else{if(($18363$18375&&($18359$18365[1]==="data"))){($18395$18401=expr$18357);if((($18396$18410=($18395$18401 instanceof Array))&&((t0$18406=$18395$18401.length),((t0$18406===1)&&($18395$18401[0]==="void"))))){return ["assoc"];}else{if(($18396$18410&&(($18398$18412=(t0$18406===3))&&(($18399$18413=($18395$18401[0]==="data"))&&((t1$18407=$18395$18401[1]),((t1$18407 instanceof Array)&&((t2$18408=t1$18407.length),((t2$18408===2)&&(t1$18407[0]==="symbol"))))))))){(s$18421=t1$18407[1]);(rhs$18422=$18395$18401[2]);return ["assoc",["value",s$18421],rhs$18422];}else{if($18399$18413){(lhs$18429=$18395$18401[1]);(rhs$18430=$18395$18401[2]);return ["objsplice",["multi",parse_pattern$16475(scope$18355,lhs$18429,__lt____lt____colon__$16468(["use",scope$18355,rhs$18430],rhs$18430),pattern_handlers$16505.build_object)]];}else{$23286($18395$18401);}}}}else{if((((x$18439=$18359$18365)),((x$18439 instanceof Array)&&(x$18439[0]==="pattern")))){(t0$18448=expr$18357);if(((t0$18448 instanceof Array)&&((t1$18449=t0$18448.length),((t1$18449===3)&&(t0$18448[0]==="data"))))){(lhs$18445=t0$18448[1]);(rhs$18446=t0$18448[2]);}else{$23286(expr$18357,"/home/olivier/git/earl-grey/src/stdenv.eg",11941,11945);}return ["default",lhs$18445,rhs$18446];}else{$23286($18359$18365);}}}}),accum$18350)),$16416(((accum$18457=({})),((accum$18457["=>"]=function($18460$18464,scope$18465,$18461$18466,$18462$18467){var t0$18478;var t0$18483;var t1$18484;var x$18500;var x$18530;var t0$18536;var t0$18540;var t0$18551;var t0$18555;var k$18546;var rhs$18547;var k$18526;var $18508$18521;var $18509$18522;var $18510$18523;var t0$18517;var bridge$18506$18518;var bridge$18507$18519;var $18505$18512;var x$18565;var t0$18573;var t1$18574;var t2$18575;var stmts$18571;var other$18583;var $18469$18490;var ph$18470;var env$18471;var lhs$18472;var rhs$18473;(ph$18470=$18460$18464);(t0$18478=$18461$18466);if($23057(t0$18478,"env")){(env$18471=t0$18478.env);}else{$23286($18461$18466);}(t0$18483=$18462$18467);if(((t0$18483 instanceof Array)&&((t1$18484=t0$18483.length),((t1$18484===3)&&(t0$18483[0]==="data"))))){(lhs$18472=t0$18483[1]);(rhs$18473=t0$18483[2]);}else{$23286($18462$18467);}($18469$18490=ph$18470);if((((x$18500=$18469$18490)),((x$18500 instanceof Array)&&(x$18500[0]==="pattern")))){($18505$18512=[lhs$18472,rhs$18473]);if((($18508$18521=($18505$18512 instanceof Array))&&((t0$18517=$18505$18512.length),(($18510$18523=(t0$18517===2))&&((((x$18530=$18505$18512[0])),((x$18530 instanceof Array)&&(x$18530[0]==="void")))&&((bridge$18506$18518=$18505$18512[1]),(((bridge$18506$18518 instanceof Array)&&((t0$18536=bridge$18506$18518.length),((t0$18536===2)&&((bridge$18506$18518[0]==="symbol")&&((k$18526=bridge$18506$18518[1]),true)))))||((bridge$18506$18518 instanceof Array)&&((t0$18540=bridge$18506$18518.length),((t0$18540===2)&&((bridge$18506$18518[0]==="value")&&((k$18526=bridge$18506$18518[1]),true)))))))))))){return ["assoc",["value",k$18526],$23299(__lt____lt____colon__$16468(["symbol",k$18526],rhs$18473),({"env":env$18471}))];}else{if(($18510$18523&&((bridge$18507$18519=$18505$18512[0]),(((bridge$18507$18519 instanceof Array)&&((t0$18551=bridge$18507$18519.length),((t0$18551===2)&&((bridge$18507$18519[0]==="symbol")&&((k$18546=bridge$18507$18519[1]),true)))))||((bridge$18507$18519 instanceof Array)&&((t0$18555=bridge$18507$18519.length),((t0$18555===2)&&((bridge$18507$18519[0]==="value")&&((k$18546=bridge$18507$18519[1]),true))))))))){(rhs$18547=$18505$18512[1]);return ["assoc",["value",k$18546],rhs$18547];}else{$23286($18505$18512);}}}else{if((((x$18565=$18469$18490)),((x$18565 instanceof Array)&&(x$18565[0]==="test")))){(t0$18573=$23371(["multi"])(rhs$18473));if((t0$18573[0]&&((t1$18574=t0$18573[1]),((t2$18575=t1$18574.length),(t2$18575>=0))))){(stmts$18571=Array.prototype.slice.call(t1$18574,0));}else{$23286(rhs$18473,"/home/olivier/git/earl-grey/src/stdenv.eg",12428,12431);}return ["blocktest",lhs$18472,stmts$18571];}else{(other$18583=$18469$18490);return ["assoc",lhs$18472,rhs$18473];}}}),accum$18457)),$16416(((accum$18586=({})),((accum$18586[":="]=function(context$18591,scope$18592,form$18593,$18589$18594){var t0$18599;var t1$18600;var lhs$18596;var rhs$18597;(t0$18599=$18589$18594);if(((t0$18599 instanceof Array)&&((t1$18600=t0$18599.length),((t1$18600===3)&&(t0$18599[0]==="data"))))){(lhs$18596=t0$18599[1]);(rhs$18597=t0$18599[2]);}else{$23286($18589$18594);}return ["assign",lhs$18596,rhs$18597];}),accum$18586)),$16416(({"+=":make_assigner$16508("+"),"-=":make_assigner$16508("-"),"*=":make_assigner$16508("*"),"/=":make_assigner$16508("/"),"<<=":make_assigner$16508("<<"),">>=":make_assigner$16508(">>"),">>>=":make_assigner$16508(">>>"),"++=":make_assigner$16508("++"),"?=":make_assigner$16508("match"),"or=":make_assigner$16508("or"),"and=":make_assigner$16508("and"),"each=":make_assigner$16508("each")}),$16416(((accum$18606=({})),((accum$18606["->"]=function($18609$18611,scope$18612,form$18613,expr$18614){var x$18634;var t0$18643;var t1$18644;var lhs$18640;var rhs$18641;var $index$18748;var $length$18743;var temp$18738;var acc$18733;var decls$18722;var newargs$18723;var body$18839;var a$18834;var other$18831;var fw$18712;var t0$18704;var t1$18705;var t2$18706;var t3$18707;var t4$18708;var $18693$18699;var pp$18694;var other$18851;var args$18845;var rhs$18846;var args$18684;var arg$18685;var rhs$18686;var $18654$18673;var $18655$18674;var $18656$18675;var $18657$18676;var $18658$18677;var $18659$18678;var $18660$18679;var $18661$18680;var $18662$18681;var t0$18669;var t1$18670;var t2$18671;var $18653$18664;var other$18651;var $18616$18622;var ph$18617;(ph$18617=$18609$18611);($18616$18622=ph$18617);if(form$18613.name){console.log(form$18613.name);}if((((x$18634=$18616$18622)),((x$18634 instanceof Array)&&(x$18634[0]==="clause")))){(t0$18643=expr$18614);if(((t0$18643 instanceof Array)&&((t1$18644=t0$18643.length),((t1$18644===3)&&(t0$18643[0]==="data"))))){(lhs$18640=t0$18643[1]);(rhs$18641=t0$18643[2]);}else{$23286(expr$18614,"/home/olivier/git/earl-grey/src/stdenv.eg",13120,13124);}return ["clause",lhs$18640,rhs$18641];}else{(other$18651=$18616$18622);($18653$18664=expr$18614);if((($18654$18673=($18653$18664 instanceof Array))&&((t0$18669=$18653$18664.length),(($18656$18675=(t0$18669===3))&&(($18657$18676=($18653$18664[0]==="data"))&&((t1$18670=$18653$18664[1]),(($18659$18678=(t1$18670 instanceof Array))&&((t2$18671=t1$18670.length),(($18661$18680=(t2$18671>=1))&&($18662$18681=(t1$18670[0]==="data"))))))))))){(args$18684=Array.prototype.slice.call(t1$18670,1));(arg$18685=t1$18670);(rhs$18686=$18653$18664[2]);(pp$18694=PatternParser$16473(scope$18612,arg$18685,({"indexable":true,"allow_nested":true})));($18693$18699=pp$18694.pattern);if((($18693$18699 instanceof Array)&&((t0$18704=$18693$18699.length),((t0$18704===5)&&(($18693$18699[0]==="array_pattern")&&((fw$18712=$18693$18699[1]),((t1$18705=$18693$18699[2]),((t1$18705 instanceof Array)&&((t2$18706=t1$18705.length),((t2$18706===0)&&((t3$18707=$18693$18699[3]),((t3$18707 instanceof Array)&&((t4$18708=t3$18707.length),((t4$18708===0)&&($18693$18699[4]===(void 0)))))))))))))))){(decls$18722=function(){if(pp$18694.specials.match){return [["declare",["symbol","ph"]]];}else{return [];}}());(newargs$18723=(((acc$18733=[])),(((temp$18738=$23414(fw$18712,args$18684))),((($length$18743=temp$18738.length)),((($index$18748=0)),function(){$18729:for(;($index$18748<$length$18743);($index$18748++)){var newv$18792;var other$18789;var expr$18779;var v$18780;var t0$18772;var t1$18773;var t2$18774;var t3$18775;var arg$18766;var $18731$18767;var t0$18761;var t1$18762;var m$18756;(m$18756=temp$18738[$index$18748]);(t0$18761=m$18756);if(((t0$18761 instanceof Array)&&((t1$18762=t0$18761.length),(t1$18762===2)))){($18731$18767=t0$18761[0]);(arg$18766=t0$18761[1]);(t0$18772=$18731$18767);if(((t0$18772 instanceof Array)&&((t1$18773=t0$18772.length),((t1$18773===2)&&((t0$18772[0]==="assign")&&((t2$18774=t0$18772[1]),((expr$18779=t2$18774),((t2$18774 instanceof Array)&&((t3$18775=t2$18774.length),((t3$18775===2)&&(t2$18774[0]==="symbol"))))))))))){(v$18780=t2$18774[1]);acc$18733.push(expr$18779);}else{(other$18789=$18731$18767);acc$18733.push((((newv$18792=$23299(["symbol",scope$18612.gensym("temp")],({"env":stdenv$16486})))),decls$18722.push(parse_pattern$16475(scope$18612,arg$18766,newv$18792,$23299(pattern_handlers$16505.declare_variables,({"tags":({"declare_mode":"let"}),"special":function($18796$18798,value$18799){var t0$18805;var t1$18806;var other$18824;var $18801$18812;var ph$18802;var expr$18803;(t0$18805=$18796$18798);if(((t0$18805 instanceof Array)&&((t1$18806=t0$18805.length),((t1$18806===2)&&(t0$18805[0]==="special"))))){(ph$18802=t0$18805[1]);(expr$18803=t0$18805);}else{$23286($18796$18798);}($18801$18812=ph$18802);if(($18801$18812==="match")){return ["assign",["symbol","ph"]];}else{(other$18824=$18801$18812);throw $23095(["syntax","pattern","special"]).create("Special token cannot be used here",({"special":expr$18803}));}}})))),newv$18792));}}else{$23286(m$18756,"/home/olivier/git/earl-grey/src/stdenv.eg",13596,14623);}}}()))),acc$18733));return ["lambda",newargs$18723,["multi"].concat(decls$18722).concat([function(){if(pp$18694.specials.match){return ["send",["symbol","match"],["data",["symbol","ph"],rhs$18686]];}else{return rhs$18686;}}()])];}else{(other$18831=$18693$18699);(a$18834=__lt____lt____colon__$16468(["symbol","arguments"],arg$18685));(body$18839=["send",["send",["symbol","match"],["send",["symbol","."],["data",["void"],["symbol","indexable"]]]],["data",a$18834,["send",["symbol","->"],["data",arg$18685,rhs$18686]]]]);return ["lambda",[],body$18839];}}else{if($18662$18681){(args$18845=Array.prototype.slice.call(t1$18670,1));(rhs$18846=$18653$18664[2]);return ["lambda",args$18845,rhs$18846];}else{(other$18851=$18653$18664);throw $23095(["syntax","lambda"]).create("Bad lambda syntax",({"node":other$18851}));}}}}),accum$18606)),$16416(({"match":accum_flags$16502(function($18853$18855,scope$18856,form$18857,expr$18858,flags$18859){var x$18877;var other$18898;var t0$18889;var $18882$18884;var v$18946;var b$18947;var b$18937;var $18920$18933;var $18921$18934;var t0$18928;var t1$18929;var t2$18930;var t3$18931;var $18919$18923;var v$18986;var b$18987;var b$18977;var $18960$18973;var $18961$18974;var t0$18968;var t1$18969;var t2$18970;var t3$18971;var $18959$18963;var t0$18916;var t1$18917;var accum$19001;var mbody$18997;var opt$18905;var to_match$18906;var value$18907;var body$18908;var other$18902;var $18861$18867;var ph$18862;(ph$18862=$18853$18855);($18861$18867=ph$18862);if((((x$18877=$18861$18867)),((x$18877 instanceof Array)&&(x$18877[0]==="pattern")))){($18882$18884=expr$18858);if((($18882$18884 instanceof Array)&&((t0$18889=$18882$18884.length),((t0$18889===1)&&($18882$18884[0]==="void"))))){return ["special","match"];}else{(other$18898=$18882$18884);return ["all",__lt____lt____colon__$16468(other$18898,expr$18858),__lt____lt____colon__$16468(["special","match"],form$18857)];}}else{(other$18902=$18861$18867);(opt$18905=util$16469.mkset(flags$18859));(to_match$18906=$23299(["symbol",scope$18856.gensym("m")],({"single_assignment":true})));(t0$18916=((($18919$18923=expr$18858)),function(){if((($18920$18933=($18919$18923 instanceof Array))&&((t0$18928=$18919$18923.length),((t0$18928===2)&&(($18919$18923[0]==="data")&&((t1$18929=$23371(["multi"])($18919$18923[1])),(t1$18929[0]&&((t2$18930=t1$18929[1]),((t3$18931=t2$18930.length),(t3$18931>=0)))))))))){(b$18937=Array.prototype.slice.call(t2$18930,0));return [["value",null],b$18937];}else{if(($18920$18933&&((t0$18928===3)&&(($18919$18923[0]==="data")&&((v$18946=$18919$18923[1]),((t1$18929=$23371(["multi"])($18919$18923[2])),(t1$18929[0]&&((t2$18930=t1$18929[1]),((t3$18931=t2$18930.length),(t3$18931>=0)))))))))){(b$18947=Array.prototype.slice.call(t2$18930,0));return [v$18946,b$18947];}else{$23286($18919$18923);}}}()));if(((t0$18916 instanceof Array)&&((t1$18917=t0$18916.length),(t1$18917===2)))){(value$18907=t0$18916[0]);(body$18908=t0$18916[1]);}else{$23286(((($18959$18963=expr$18858)),function(){if((($18960$18973=($18959$18963 instanceof Array))&&((t0$18968=$18959$18963.length),((t0$18968===2)&&(($18959$18963[0]==="data")&&((t1$18969=$23371(["multi"])($18959$18963[1])),(t1$18969[0]&&((t2$18970=t1$18969[1]),((t3$18971=t2$18970.length),(t3$18971>=0)))))))))){(b$18977=Array.prototype.slice.call(t2$18970,0));return [["value",null],b$18977];}else{if(($18960$18973&&((t0$18968===3)&&(($18959$18963[0]==="data")&&((v$18986=$18959$18963[1]),((t1$18969=$23371(["multi"])($18959$18963[2])),(t1$18969[0]&&((t2$18970=t1$18969[1]),((t3$18971=t2$18970.length),(t3$18971>=0)))))))))){(b$18987=Array.prototype.slice.call(t2$18970,0));return [v$18986,b$18987];}else{$23286($18959$18963);}}}()),"/home/olivier/git/earl-grey/src/stdenv.eg",15558,15677);}(mbody$18997=parse_clauses$16476(scope$18856,to_match$18906,body$18908,$23299(opt$18905,$16416(((accum$19001=({})),((accum$19001["fallback"]=function(target$19005){return match_error$16493(target$19005);}),accum$19001)),({"wrap":function(x$19008){return x$19008;}})))));return ["send",["symbol","let"],["data",["send",["symbol","="],["data",to_match$18906,value$18907]],mbody$18997]];}})}),$16416(((accum$19012=({})),((accum$19012["each"]=function($19015$19019,scope$19020,$19016$19021,$19017$19022){var t0$19038;var t0$19043;var t1$19044;var t2$19045;var t3$19046;var t4$19047;var x$19123;var other$19142;var ends_with_test$19069;var _build_loop$19070;var $19025$19064;var $19026$19065;var $19027$19066;var $19028$19067;var t0$19062;var $19024$19057;var ph$19029;var form$19030;var env$19031;var li$19032;var clauses$19033;(ph$19029=$19015$19019);(t0$19038=$19016$19021);(form$19030=t0$19038);if($23057(t0$19038,"env")){(env$19031=t0$19038.env);}else{$23286($19016$19021);}(t0$19043=$19017$19022);if(((t0$19043 instanceof Array)&&((t1$19044=t0$19043.length),((t1$19044===3)&&((t0$19043[0]==="data")&&((li$19032=t0$19043[1]),((t2$19045=$23371(["multi"])(t0$19043[2])),(t2$19045[0]&&((t3$19046=t2$19045[1]),((t4$19047=t3$19046.length),(t4$19047>=0))))))))))){(clauses$19033=Array.prototype.slice.call(t3$19046,0));}else{$23286($19017$19022);}($19024$19057=ph$19029);(ends_with_test$19069=false);(_build_loop$19070=function(wrap$19077,pre$19078,post$19079){var accum$19082;var accum$19112;return build_loop$16506(scope$19020,env$19031,form$19030,li$19032,clauses$19033,wrap$19077,pre$19078,post$19079,$16416(((accum$19082=({})),((accum$19082["wrap_pattern"]=function(x$19086,toplevel$19087){var x$19102;var other$19109;var $19090$19092;(ends_with_test$19069=((($19090$19092=x$19086)),function(){if((((x$19102=$19090$19092)),((x$19102 instanceof Array)&&(x$19102[0]==="test")))){return toplevel$19087;}else{(other$19109=$19090$19092);return false;}}()));return x$19086;}),accum$19082)),((accum$19112=({})),((accum$19112["fallback"]=function(target$19116){if(ends_with_test$19069){return ["symbol","false"];}else{return match_error$16493(target$19116);}}),accum$19112))));});if((((x$19123=$19024$19057)),((x$19123 instanceof Array)&&(x$19123[0]==="test")))){return $23299(["test_factory",li$19032,clauses$19033],({"env":env$19031}));}else{if((($19025$19064=($19024$19057 instanceof Array))&&((t0$19062=$19024$19057.length),(($19027$19066=(t0$19062===2))&&(($19028$19067=($19024$19057[0]==="expr"))&&($19024$19057[1]==="multi")))))){return ["nostep",form$19030];}else{if(($19028$19067&&($19024$19057[1]==="ignore"))){return _build_loop$19070(function(x$19138){return x$19138;},["splice"],["splice"]);}else{(other$19142=$19024$19057);return _build_loop$19070(function(x$19145){return ["send",["send",["symbol","acc"],["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",x$19145]];},["send",["symbol","="],["data",["symbol","acc"],["data"]]],["symbol","acc"]);}}}}),accum$19012)),$16416(((accum$19148=({})),((accum$19148["each?"]=function($19151$19155,scope$19156,$19152$19157,$19153$19158){var t0$19174;var t0$19179;var t1$19180;var t2$19181;var t3$19182;var t4$19183;var x$19208;var other$19230;var $19161$19200;var $19162$19201;var $19163$19202;var $19164$19203;var t0$19198;var $19160$19193;var ph$19165;var form$19166;var env$19167;var li$19168;var clauses$19169;(ph$19165=$19151$19155);(t0$19174=$19152$19157);(form$19166=t0$19174);if($23057(t0$19174,"env")){(env$19167=t0$19174.env);}else{$23286($19152$19157);}(t0$19179=$19153$19158);if(((t0$19179 instanceof Array)&&((t1$19180=t0$19179.length),((t1$19180===3)&&((t0$19179[0]==="data")&&((li$19168=t0$19179[1]),((t2$19181=$23371(["multi"])(t0$19179[2])),(t2$19181[0]&&((t3$19182=t2$19181[1]),((t4$19183=t3$19182.length),(t4$19183>=0))))))))))){(clauses$19169=Array.prototype.slice.call(t3$19182,0));}else{$23286($19153$19158);}($19160$19193=ph$19165);if((((x$19208=$19160$19193)),((x$19208 instanceof Array)&&(x$19208[0]==="test")))){return $23299(["test_factory",li$19168,clauses$19169],({"env":env$19167}));}else{if((($19161$19200=($19160$19193 instanceof Array))&&((t0$19198=$19160$19193.length),(($19163$19202=(t0$19198===2))&&(($19164$19203=($19160$19193[0]==="expr"))&&($19160$19193[1]==="multi")))))){return ["nostep",form$19166];}else{if(($19164$19203&&($19160$19193[1]==="ignore"))){return build_loop$16506(scope$19156,env$19167,form$19166,li$19168,clauses$19169,function(x$19223){return x$19223;},["splice"],["splice"],({"fallback":function(target$19226){return ["symbol","false"];}}));}else{(other$19230=$19160$19193);return build_loop$16506(scope$19156,env$19167,form$19166,li$19168,clauses$19169,function(x$19233){return ["send",["send",["symbol","acc"],["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",x$19233]];},["send",["symbol","="],["data",["symbol","acc"],["data"]]],["symbol","acc"],({"fallback":function(target$19236){return ["symbol","false"];}}));}}}}),accum$19148)),$16416(((accum$19239=({})),((accum$19239["!!"]=function($19242$19245,scope$19246,form$19247,$19243$19248){var t0$19262;var t1$19263;var t2$19264;var t3$19265;var t4$19266;var other$19302;var $19251$19283;var $19252$19284;var $19253$19285;var $19254$19286;var t0$19281;var $19250$19276;var ph$19255;var expr$19256;var clauses$19257;(ph$19255=$19242$19245);(t0$19262=$19243$19248);if(((t0$19262 instanceof Array)&&((t1$19263=t0$19262.length),((t1$19263===3)&&((t0$19262[0]==="data")&&((expr$19256=t0$19262[1]),((t2$19264=$23371(["multi"])(t0$19262[2])),(t2$19264[0]&&((t3$19265=t2$19264[1]),((t4$19266=t3$19265.length),(t4$19266>=0))))))))))){(clauses$19257=Array.prototype.slice.call(t3$19265,0));}else{$23286($19243$19248);}($19250$19276=ph$19255);if((($19251$19283=($19250$19276 instanceof Array))&&((t0$19281=$19250$19276.length),(($19253$19285=(t0$19281===2))&&(($19254$19286=($19250$19276[0]==="expr"))&&($19250$19276[1]==="multi")))))){return ["nostep",form$19247];}else{if(($19254$19286&&($19250$19276[1]==="ignore"))){clauses$19257.push(mkstdenv$16487().convert(["send",["symbol","->"],["data",["symbol","e"],["send",["symbol","throw"],["symbol","e"]]]]));return ["js_try",expr$19256,["send",["symbol","->"],["data",["data",["symbol","excv"]],parse_clauses$16476(scope$19246,["symbol","excv"],clauses$19257,({"wrap":function(x$19298){return x$19298;}}))]],["void"]];}else{(other$19302=$19250$19276);clauses$19257.push(mkstdenv$16487().convert(["send",["symbol","->"],["data",["symbol","e"],["send",["symbol","throw"],["symbol","e"]]]]));return ["send",["symbol","let"],["data",["send",["symbol","="],["data",["symbol","rval"],["symbol","false"]]],["multi",["js_try",["send",["symbol",":="],["data",["symbol","rval"],expr$19256]],["send",["symbol","->"],["data",["data",["symbol","excv"]],parse_clauses$16476(scope$19246,["symbol","excv"],clauses$19257,({"wrap":function(x$19306){return ["send",["symbol",":="],["data",["symbol","rval"],x$19306]];}}))]],["void"]],["symbol","rval"]]]];}}}),accum$19239)),$16416(({"@":var_operator$16501(expander$16488.gensym("it"))}),$16416(((accum$19309=({})),((t0$19311=$23371(expr_mac$16495)(function(scope$19315,form$19316,$19313$19317){var t0$19323;var t1$19324;var t2$19325;var t3$19326;var t4$19327;var t5$19328;var it$19340;var construct$19341;var defn$19319;var env$19320;var body$19321;(t0$19323=$19313$19317);if(((t0$19323 instanceof Array)&&((t1$19324=t0$19323.length),((t1$19324===3)&&((t0$19323[0]==="data")&&((t2$19325=t0$19323[1]),((defn$19319=t2$19325),($23057(t2$19325,"env")&&((env$19320=t2$19325.env),((t3$19326=$23371(["multi"])(t0$19323[2])),(t3$19326[0]&&((t4$19327=t3$19326[1]),((t5$19328=t4$19327.length),(t5$19328>=0)))))))))))))){(body$19321=Array.prototype.slice.call(t4$19327,0));}else{$23286($19313$19317);}(it$19340=$23299(["symbol","@"],({"env":env$19320})));(construct$19341=function($19347$19349){var x$19376;var rest$19377;var x$19370;var $19352$19366;var $19353$19367;var t0$19364;var $19351$19359;var ph$19354;(ph$19354=$19347$19349);($19351$19359=ph$19354);if((($19352$19366=($19351$19359 instanceof Array))&&((t0$19364=$19351$19359.length),(t0$19364===1)))){(x$19370=$19351$19359[0]);return x$19370;}else{if(($19352$19366&&(t0$19364>=1))){(x$19376=$19351$19359[0]);(rest$19377=Array.prototype.slice.call($19351$19359,1));return ["send",["symbol","let"],["data",["send",["symbol","="],["data",it$19340,x$19376]],construct$19341(rest$19377)]];}else{$23286($19351$19359);}}});return construct$19341([defn$19319].concat(body$19321));})),function(){if(t0$19311[0]){(accum$19309["chain"]=t0$19311[1]);return accum$19309;}else{return $23286(function(scope$19386,form$19387,$19384$19388){var t0$19394;var t1$19395;var t2$19396;var t3$19397;var t4$19398;var t5$19399;var it$19411;var construct$19412;var defn$19390;var env$19391;var body$19392;(t0$19394=$19384$19388);if(((t0$19394 instanceof Array)&&((t1$19395=t0$19394.length),((t1$19395===3)&&((t0$19394[0]==="data")&&((t2$19396=t0$19394[1]),((defn$19390=t2$19396),($23057(t2$19396,"env")&&((env$19391=t2$19396.env),((t3$19397=$23371(["multi"])(t0$19394[2])),(t3$19397[0]&&((t4$19398=t3$19397[1]),((t5$19399=t4$19398.length),(t5$19399>=0)))))))))))))){(body$19392=Array.prototype.slice.call(t4$19398,0));}else{$23286($19384$19388);}(it$19411=$23299(["symbol","@"],({"env":env$19391})));(construct$19412=function($19418$19420){var x$19447;var rest$19448;var x$19441;var $19423$19437;var $19424$19438;var t0$19435;var $19422$19430;var ph$19425;(ph$19425=$19418$19420);($19422$19430=ph$19425);if((($19423$19437=($19422$19430 instanceof Array))&&((t0$19435=$19422$19430.length),(t0$19435===1)))){(x$19441=$19422$19430[0]);return x$19441;}else{if(($19423$19437&&(t0$19435>=1))){(x$19447=$19422$19430[0]);(rest$19448=Array.prototype.slice.call($19422$19430,1));return ["send",["symbol","let"],["data",["send",["symbol","="],["data",it$19411,x$19447]],construct$19412(rest$19448)]];}else{$23286($19422$19430);}}});return construct$19412([defn$19390].concat(body$19392));});}}())),$16416(((accum$19455=({})),((t0$19457=$23371(expr_mac$16495)(function(scope$19461,form$19462,$19459$19463){var t0$19469;var t1$19470;var t2$19471;var it$19479;var defn$19465;var env$19466;var body$19467;(t0$19469=$19459$19463);if(((t0$19469 instanceof Array)&&((t1$19470=t0$19469.length),((t1$19470===3)&&((t0$19469[0]==="data")&&((t2$19471=t0$19469[1]),((defn$19465=t2$19471),$23057(t2$19471,"env")))))))){(env$19466=t2$19471.env);(body$19467=t0$19469[2]);}else{$23286($19459$19463);}(it$19479=$23299(["symbol","@"],({"env":env$19466})));return ["send",["symbol","let"],["data",["send",["symbol","="],["data",it$19479,defn$19465]],body$19467]];})),function(){if(t0$19457[0]){(accum$19455["using"]=t0$19457[1]);return accum$19455;}else{return $23286(function(scope$19486,form$19487,$19484$19488){var t0$19494;var t1$19495;var t2$19496;var it$19504;var defn$19490;var env$19491;var body$19492;(t0$19494=$19484$19488);if(((t0$19494 instanceof Array)&&((t1$19495=t0$19494.length),((t1$19495===3)&&((t0$19494[0]==="data")&&((t2$19496=t0$19494[1]),((defn$19490=t2$19496),$23057(t2$19496,"env")))))))){(env$19491=t2$19496.env);(body$19492=t0$19494[2]);}else{$23286($19484$19488);}(it$19504=$23299(["symbol","@"],({"env":env$19491})));return ["send",["symbol","let"],["data",["send",["symbol","="],["data",it$19504,defn$19490]],body$19492]];});}}())),$16416(((accum$19509=({})),((t0$19511=$23371(overridable$16496)(function($19513$19516,scope$19517,form$19518,$19514$19519){var t0$19528;var t1$19529;var x$19545;var x$19554;var t0$19562;var t1$19563;var t2$19564;var stmts$19560;var x$19574;var $19521$19535;var ph$19522;var body$19523;(ph$19522=$19513$19516);(t0$19528=$19514$19519);if(((t0$19528 instanceof Array)&&((t1$19529=t0$19528.length),((t1$19529===2)&&(t0$19528[0]==="data"))))){(body$19523=t0$19528[1]);}else{$23286($19514$19519);}($19521$19535=ph$19522);if((((x$19545=$19521$19535)),((x$19545 instanceof Array)&&(x$19545[0]==="clause")))){return ["block",body$19523];}else{if((((x$19554=$19521$19535)),((x$19554 instanceof Array)&&(x$19554[0]==="test")))){(t0$19562=$23371(["multi"])(body$19523));if((t0$19562[0]&&((t1$19563=t0$19562[1]),((t2$19564=t1$19563.length),(t2$19564>=0))))){(stmts$19560=Array.prototype.slice.call(t1$19563,0));}else{$23286(body$19523,"/home/olivier/git/earl-grey/src/stdenv.eg",20030,20034);}return ["do",["splice"].concat(stmts$19560)];}else{if((((x$19574=$19521$19535)),((x$19574 instanceof Array)&&(x$19574[0]==="expr")))){return ["multi",body$19523];}else{$23286($19521$19535);}}}})),function(){if(t0$19511[0]){(accum$19509["do"]=t0$19511[1]);return accum$19509;}else{return $23286(function($19582$19585,scope$19586,form$19587,$19583$19588){var t0$19597;var t1$19598;var x$19614;var x$19623;var t0$19631;var t1$19632;var t2$19633;var stmts$19629;var x$19643;var $19590$19604;var ph$19591;var body$19592;(ph$19591=$19582$19585);(t0$19597=$19583$19588);if(((t0$19597 instanceof Array)&&((t1$19598=t0$19597.length),((t1$19598===2)&&(t0$19597[0]==="data"))))){(body$19592=t0$19597[1]);}else{$23286($19583$19588);}($19590$19604=ph$19591);if((((x$19614=$19590$19604)),((x$19614 instanceof Array)&&(x$19614[0]==="clause")))){return ["block",body$19592];}else{if((((x$19623=$19590$19604)),((x$19623 instanceof Array)&&(x$19623[0]==="test")))){(t0$19631=$23371(["multi"])(body$19592));if((t0$19631[0]&&((t1$19632=t0$19631[1]),((t2$19633=t1$19632.length),(t2$19633>=0))))){(stmts$19629=Array.prototype.slice.call(t1$19632,0));}else{$23286(body$19592,"/home/olivier/git/earl-grey/src/stdenv.eg",20030,20034);}return ["do",["splice"].concat(stmts$19629)];}else{if((((x$19643=$19590$19604)),((x$19643 instanceof Array)&&(x$19643[0]==="expr")))){return ["multi",body$19592];}else{$23286($19590$19604);}}}});}}())),$16416(((accum$19651=({})),((t0$19653=$23371(expr_mac$16495)(function(scope$19657,form$19658,$19655$19659){var other$19768;var s1$19755;var b$19756;var a$19736;var b$19737;var a$19724;var $19663$19719;var $19664$19720;var $19665$19721;var t0$19704;var t1$19705;var t2$19706;var t3$19707;var t4$19708;var t5$19709;var t6$19710;var t7$19711;var t8$19712;var t9$19713;var t10$19714;var t11$19715;var t12$19716;var t13$19717;var test$19695;var $19662$19696;var test$19687;var a$19688;var b$19689;var $19666$19683;var $19667$19684;var t0$19678;var t1$19679;var t2$19680;var t3$19681;var $19661$19673;var ph$19668;(ph$19668=$19655$19659);($19661$19673=ph$19668);if((($19666$19683=($19661$19673 instanceof Array))&&((t0$19678=$19661$19673.length),((t0$19678===4)&&($19661$19673[0]==="data"))))){(test$19687=$19661$19673[1]);(a$19688=$19661$19673[2]);(b$19689=$19661$19673[3]);return ["if",test$19687,a$19688,b$19689];}else{if(($19666$19683&&((t0$19678===3)&&(($19661$19673[0]==="data")&&((test$19695=$19661$19673[1]),((t1$19679=$23371(["multi"])($19661$19673[2])),(t1$19679[0]&&((t2$19680=t1$19679[1]),((t3$19681=t2$19680.length),(t3$19681>=0)))))))))){($19662$19696=Array.prototype.slice.call(t2$19680,0));(t0$19704=$19662$19696);if((($19664$19720=(t0$19704 instanceof Array))&&((t1$19705=t0$19704.length),((t1$19705===1)&&((t2$19706=t0$19704[0]),((t2$19706 instanceof Array)&&((t3$19707=t2$19706.length),((t3$19707===3)&&((t2$19706[0]==="send")&&((t4$19708=t2$19706[1]),((t4$19708 instanceof Array)&&((t5$19709=t4$19708.length),((t5$19709===2)&&((t4$19708[0]==="symbol")&&((t4$19708[1]==="then")&&((t6$19710=t2$19706[2]),((t6$19710 instanceof Array)&&((t7$19711=t6$19710.length),((t7$19711===2)&&(t6$19710[0]==="data")))))))))))))))))))){(a$19724=t6$19710[1]);return ["if",test$19695,a$19724,["value",(void 0)]];}else{if(($19664$19720&&((t1$19705===2)&&((t2$19706=t0$19704[0]),((t2$19706 instanceof Array)&&((t3$19707=t2$19706.length),((t3$19707===3)&&((t2$19706[0]==="send")&&((t4$19708=t2$19706[1]),((t4$19708 instanceof Array)&&((t5$19709=t4$19708.length),((t5$19709===2)&&((t4$19708[0]==="symbol")&&((t4$19708[1]==="then")&&((t6$19710=t2$19706[2]),((t6$19710 instanceof Array)&&((t7$19711=t6$19710.length),((t7$19711===2)&&((t6$19710[0]==="data")&&((a$19736=t6$19710[1]),((t8$19712=t0$19704[1]),((t8$19712 instanceof Array)&&((t9$19713=t8$19712.length),((t9$19713===3)&&((t8$19712[0]==="send")&&((t10$19714=t8$19712[1]),((t10$19714 instanceof Array)&&((t11$19715=t10$19714.length),((t11$19715===2)&&((t10$19714[0]==="symbol")&&((t10$19714[1]==="else")&&((t12$19716=t8$19712[2]),((t12$19716 instanceof Array)&&((t13$19717=t12$19716.length),((t13$19717===2)&&(t12$19716[0]==="data")))))))))))))))))))))))))))))))))))){(b$19737=t12$19716[1]);return ["if",test$19695,a$19736,b$19737];}else{if(($19664$19720&&((t1$19705>=1)&&((s1$19755=Array.prototype.slice.call(t0$19704,0,-1)),((t2$19706=t0$19704[(t1$19705-1)]),((t2$19706 instanceof Array)&&((t3$19707=t2$19706.length),((t3$19707===3)&&((t2$19706[0]==="send")&&((t4$19708=t2$19706[1]),((t4$19708 instanceof Array)&&((t5$19709=t4$19708.length),((t5$19709===2)&&((t4$19708[0]==="symbol")&&((t4$19708[1]==="else")&&((t6$19710=t2$19706[2]),((t6$19710 instanceof Array)&&((t7$19711=t6$19710.length),((t7$19711===2)&&(t6$19710[0]==="data")))))))))))))))))))){(b$19756=t6$19710[1]);return ["if",test$19695,["multi"].concat(s1$19755),b$19756];}else{(other$19768=$19662$19696);return ["if",test$19695,["multi"].concat(other$19768),["value",(void 0)]];}}}}else{$23286($19661$19673);}}})),function(){if(t0$19653[0]){(accum$19651["if"]=t0$19653[1]);return accum$19651;}else{return $23286(function(scope$19775,form$19776,$19773$19777){var other$19886;var s1$19873;var b$19874;var a$19854;var b$19855;var a$19842;var $19781$19837;var $19782$19838;var $19783$19839;var t0$19822;var t1$19823;var t2$19824;var t3$19825;var t4$19826;var t5$19827;var t6$19828;var t7$19829;var t8$19830;var t9$19831;var t10$19832;var t11$19833;var t12$19834;var t13$19835;var test$19813;var $19780$19814;var test$19805;var a$19806;var b$19807;var $19784$19801;var $19785$19802;var t0$19796;var t1$19797;var t2$19798;var t3$19799;var $19779$19791;var ph$19786;(ph$19786=$19773$19777);($19779$19791=ph$19786);if((($19784$19801=($19779$19791 instanceof Array))&&((t0$19796=$19779$19791.length),((t0$19796===4)&&($19779$19791[0]==="data"))))){(test$19805=$19779$19791[1]);(a$19806=$19779$19791[2]);(b$19807=$19779$19791[3]);return ["if",test$19805,a$19806,b$19807];}else{if(($19784$19801&&((t0$19796===3)&&(($19779$19791[0]==="data")&&((test$19813=$19779$19791[1]),((t1$19797=$23371(["multi"])($19779$19791[2])),(t1$19797[0]&&((t2$19798=t1$19797[1]),((t3$19799=t2$19798.length),(t3$19799>=0)))))))))){($19780$19814=Array.prototype.slice.call(t2$19798,0));(t0$19822=$19780$19814);if((($19782$19838=(t0$19822 instanceof Array))&&((t1$19823=t0$19822.length),((t1$19823===1)&&((t2$19824=t0$19822[0]),((t2$19824 instanceof Array)&&((t3$19825=t2$19824.length),((t3$19825===3)&&((t2$19824[0]==="send")&&((t4$19826=t2$19824[1]),((t4$19826 instanceof Array)&&((t5$19827=t4$19826.length),((t5$19827===2)&&((t4$19826[0]==="symbol")&&((t4$19826[1]==="then")&&((t6$19828=t2$19824[2]),((t6$19828 instanceof Array)&&((t7$19829=t6$19828.length),((t7$19829===2)&&(t6$19828[0]==="data")))))))))))))))))))){(a$19842=t6$19828[1]);return ["if",test$19813,a$19842,["value",(void 0)]];}else{if(($19782$19838&&((t1$19823===2)&&((t2$19824=t0$19822[0]),((t2$19824 instanceof Array)&&((t3$19825=t2$19824.length),((t3$19825===3)&&((t2$19824[0]==="send")&&((t4$19826=t2$19824[1]),((t4$19826 instanceof Array)&&((t5$19827=t4$19826.length),((t5$19827===2)&&((t4$19826[0]==="symbol")&&((t4$19826[1]==="then")&&((t6$19828=t2$19824[2]),((t6$19828 instanceof Array)&&((t7$19829=t6$19828.length),((t7$19829===2)&&((t6$19828[0]==="data")&&((a$19854=t6$19828[1]),((t8$19830=t0$19822[1]),((t8$19830 instanceof Array)&&((t9$19831=t8$19830.length),((t9$19831===3)&&((t8$19830[0]==="send")&&((t10$19832=t8$19830[1]),((t10$19832 instanceof Array)&&((t11$19833=t10$19832.length),((t11$19833===2)&&((t10$19832[0]==="symbol")&&((t10$19832[1]==="else")&&((t12$19834=t8$19830[2]),((t12$19834 instanceof Array)&&((t13$19835=t12$19834.length),((t13$19835===2)&&(t12$19834[0]==="data")))))))))))))))))))))))))))))))))))){(b$19855=t12$19834[1]);return ["if",test$19813,a$19854,b$19855];}else{if(($19782$19838&&((t1$19823>=1)&&((s1$19873=Array.prototype.slice.call(t0$19822,0,-1)),((t2$19824=t0$19822[(t1$19823-1)]),((t2$19824 instanceof Array)&&((t3$19825=t2$19824.length),((t3$19825===3)&&((t2$19824[0]==="send")&&((t4$19826=t2$19824[1]),((t4$19826 instanceof Array)&&((t5$19827=t4$19826.length),((t5$19827===2)&&((t4$19826[0]==="symbol")&&((t4$19826[1]==="else")&&((t6$19828=t2$19824[2]),((t6$19828 instanceof Array)&&((t7$19829=t6$19828.length),((t7$19829===2)&&(t6$19828[0]==="data")))))))))))))))))))){(b$19874=t6$19828[1]);return ["if",test$19813,["multi"].concat(s1$19873),b$19874];}else{(other$19886=$19780$19814);return ["if",test$19813,["multi"].concat(other$19886),["value",(void 0)]];}}}}else{$23286($19779$19791);}}});}}())),$16416(((accum$19891=({})),((t0$19893=$23371(expr_mac$16495)(function(scope$19897,form$19898,$19895$19899){var t0$19906;var t0$19924;var t1$19925;var t2$19926;var t3$19927;var t4$19928;var t5$19929;var t6$19930;var t7$19931;var t8$19932;var t0$19944;var test$19966;var body$19967;var label$19921;var bridge$19902$19916;var t0$19917;var $19901$19911;var ph$19903;var env$19904;(t0$19906=$19895$19899);if($23057(t0$19906,"env")){(env$19904=t0$19906.env);(ph$19903=t0$19906);}else{$23286($19895$19899);}($19901$19911=ph$19903);(bridge$19902$19916=$19901$19911);if((((bridge$19902$19916 instanceof Array)&&((t0$19924=bridge$19902$19916.length),((t0$19924===3)&&((bridge$19902$19916[0]==="send")&&((t1$19925=bridge$19902$19916[1]),((t1$19925 instanceof Array)&&((t2$19926=t1$19925.length),((t2$19926===2)&&((t1$19925[0]==="symbol")&&((t1$19925[1]===".")&&((t3$19927=bridge$19902$19916[2]),((t3$19927 instanceof Array)&&((t4$19928=t3$19927.length),((t4$19928===3)&&((t3$19927[0]==="data")&&((t5$19929=t3$19927[1]),((t5$19929 instanceof Array)&&((t6$19930=t5$19929.length),((t6$19930===1)&&((t5$19929[0]==="void")&&((t7$19931=t3$19927[2]),((t7$19931 instanceof Array)&&((t8$19932=t7$19931.length),((t8$19932===2)&&((t7$19931[0]==="symbol")&&((label$19921=t7$19931[1]),true))))))))))))))))))))))))))||((bridge$19902$19916 instanceof Array)&&((t0$19944=bridge$19902$19916.length),((t0$19944===2)&&((bridge$19902$19916[0]==="value")&&((label$19921=bridge$19902$19916[1]),true))))))){return ["macro",function(context$19950,scope$19951,form$19952,$19948$19953){var t0$19958;var t1$19959;var test$19955;var body$19956;(t0$19958=$19948$19953);if(((t0$19958 instanceof Array)&&((t1$19959=t0$19958.length),((t1$19959===3)&&(t0$19958[0]==="data"))))){(test$19955=t0$19958[1]);(body$19956=t0$19958[2]);}else{$23286($19948$19953);}return setup_label$16498(label$19921,env$19904,["js_while",test$19955,body$19956]);}];}else{if((($19901$19911 instanceof Array)&&((t0$19917=$19901$19911.length),((t0$19917===3)&&($19901$19911[0]==="data"))))){(test$19966=$19901$19911[1]);(body$19967=$19901$19911[2]);return setup_label$16498(scope$19897.gensym(),env$19904,["js_while",test$19966,body$19967]);}else{$23286($19901$19911);}}})),function(){if(t0$19893[0]){(accum$19891["while"]=t0$19893[1]);return accum$19891;}else{return $23286(function(scope$19976,form$19977,$19974$19978){var t0$19985;var t0$20003;var t1$20004;var t2$20005;var t3$20006;var t4$20007;var t5$20008;var t6$20009;var t7$20010;var t8$20011;var t0$20023;var test$20045;var body$20046;var label$20000;var bridge$19981$19995;var t0$19996;var $19980$19990;var ph$19982;var env$19983;(t0$19985=$19974$19978);if($23057(t0$19985,"env")){(env$19983=t0$19985.env);(ph$19982=t0$19985);}else{$23286($19974$19978);}($19980$19990=ph$19982);(bridge$19981$19995=$19980$19990);if((((bridge$19981$19995 instanceof Array)&&((t0$20003=bridge$19981$19995.length),((t0$20003===3)&&((bridge$19981$19995[0]==="send")&&((t1$20004=bridge$19981$19995[1]),((t1$20004 instanceof Array)&&((t2$20005=t1$20004.length),((t2$20005===2)&&((t1$20004[0]==="symbol")&&((t1$20004[1]===".")&&((t3$20006=bridge$19981$19995[2]),((t3$20006 instanceof Array)&&((t4$20007=t3$20006.length),((t4$20007===3)&&((t3$20006[0]==="data")&&((t5$20008=t3$20006[1]),((t5$20008 instanceof Array)&&((t6$20009=t5$20008.length),((t6$20009===1)&&((t5$20008[0]==="void")&&((t7$20010=t3$20006[2]),((t7$20010 instanceof Array)&&((t8$20011=t7$20010.length),((t8$20011===2)&&((t7$20010[0]==="symbol")&&((label$20000=t7$20010[1]),true))))))))))))))))))))))))))||((bridge$19981$19995 instanceof Array)&&((t0$20023=bridge$19981$19995.length),((t0$20023===2)&&((bridge$19981$19995[0]==="value")&&((label$20000=bridge$19981$19995[1]),true))))))){return ["macro",function(context$20029,scope$20030,form$20031,$20027$20032){var t0$20037;var t1$20038;var test$20034;var body$20035;(t0$20037=$20027$20032);if(((t0$20037 instanceof Array)&&((t1$20038=t0$20037.length),((t1$20038===3)&&(t0$20037[0]==="data"))))){(test$20034=t0$20037[1]);(body$20035=t0$20037[2]);}else{$23286($20027$20032);}return setup_label$16498(label$20000,env$19983,["js_while",test$20034,body$20035]);}];}else{if((($19980$19990 instanceof Array)&&((t0$19996=$19980$19990.length),((t0$19996===3)&&($19980$19990[0]==="data"))))){(test$20045=$19980$19990[1]);(body$20046=$19980$19990[2]);return setup_label$16498(scope$19976.gensym(),env$19983,["js_while",test$20045,body$20046]);}else{$23286($19980$19990);}}});}}())),$16416(((accum$20053=({})),((accum$20053["for"]=function(context$20058,scope$20059,form$20060,$20056$20061){var t0$20068;var t0$20138;var t1$20139;var t2$20140;var t3$20141;var t4$20142;var t5$20143;var t6$20144;var t7$20145;var t8$20146;var t0$20158;var spec$20180;var body$20181;var label$20135;var setup_for$20081;var bridge$20064$20077;var t0$20078;var $20063$20072;var ph$20065;var expr$20066;(t0$20068=$20056$20061);(expr$20066=t0$20068);(ph$20065=t0$20068);($20063$20072=ph$20065);(setup_for$20081=function(label$20086,env$20087,$20084$20088,body$20089){var a$20122;var b$20123;var a$20114;var b$20115;var c$20116;var $20092$20110;var $20093$20111;var t0$20104;var t1$20105;var t2$20106;var t3$20107;var t4$20108;var $20091$20099;var ph$20094;(ph$20094=$20084$20088);($20091$20099=ph$20094);if((($20092$20110=($20091$20099 instanceof Array))&&((t0$20104=$20091$20099.length),((t0$20104===4)&&($20091$20099[0]==="multi"))))){(a$20114=$20091$20099[1]);(b$20115=$20091$20099[2]);(c$20116=$20091$20099[3]);return ["multi",a$20114,setup_label$16498(label$20086,env$20087,["js_for",["multi"],b$20115,c$20116,body$20089])];}else{if(($20092$20110&&((t0$20104===3)&&(($20091$20099[0]==="send")&&((t1$20105=$20091$20099[1]),((t1$20105 instanceof Array)&&((t2$20106=t1$20105.length),((t2$20106===2)&&((t1$20105[0]==="symbol")&&((t1$20105[1]==="in")&&((t3$20107=$20091$20099[2]),((t3$20107 instanceof Array)&&((t4$20108=t3$20107.length),((t4$20108===3)&&(t3$20107[0]==="data"))))))))))))))){(a$20122=t3$20107[1]);(b$20123=t3$20107[2]);return ["multi",["declare",a$20122,["value",null]],setup_label$16498(label$20086,env$20087,["js_for_in",a$20122,b$20123,body$20089])];}else{$23286($20091$20099);}}});(bridge$20064$20077=$20063$20072);if((((bridge$20064$20077 instanceof Array)&&((t0$20138=bridge$20064$20077.length),((t0$20138===3)&&((bridge$20064$20077[0]==="send")&&((t1$20139=bridge$20064$20077[1]),((t1$20139 instanceof Array)&&((t2$20140=t1$20139.length),((t2$20140===2)&&((t1$20139[0]==="symbol")&&((t1$20139[1]===".")&&((t3$20141=bridge$20064$20077[2]),((t3$20141 instanceof Array)&&((t4$20142=t3$20141.length),((t4$20142===3)&&((t3$20141[0]==="data")&&((t5$20143=t3$20141[1]),((t5$20143 instanceof Array)&&((t6$20144=t5$20143.length),((t6$20144===1)&&((t5$20143[0]==="void")&&((t7$20145=t3$20141[2]),((t7$20145 instanceof Array)&&((t8$20146=t7$20145.length),((t8$20146===2)&&((t7$20145[0]==="symbol")&&((label$20135=t7$20145[1]),true))))))))))))))))))))))))))||((bridge$20064$20077 instanceof Array)&&((t0$20158=bridge$20064$20077.length),((t0$20158===2)&&((bridge$20064$20077[0]==="value")&&((label$20135=bridge$20064$20077[1]),true))))))){return ["macro",function(context$20164,scope$20165,form$20166,$20162$20167){var t0$20172;var t1$20173;var spec$20169;var body$20170;(t0$20172=$20162$20167);if(((t0$20172 instanceof Array)&&((t1$20173=t0$20172.length),((t1$20173===3)&&(t0$20172[0]==="data"))))){(spec$20169=t0$20172[1]);(body$20170=t0$20172[2]);}else{$23286($20162$20167);}return setup_for$20081(label$20135,expr$20066.env,spec$20169,body$20170);}];}else{if((($20063$20072 instanceof Array)&&((t0$20078=$20063$20072.length),((t0$20078===3)&&($20063$20072[0]==="data"))))){(spec$20180=$20063$20072[1]);(body$20181=$20063$20072[2]);return setup_for$20081(scope$20059.gensym(),form$20060.env,spec$20180,body$20181);}else{$23286($20063$20072);}}}),accum$20053)),$16416(((accum$20188=({})),((accum$20188["var"]=function($20191$20193,scope$20194,form$20195,argument$20196){var x$20201;if((((x$20201=$20191$20193)),((x$20201 instanceof Array)&&(x$20201[0]==="pattern")))){}else{$23286($20191$20193);}return ["mode","var",argument$20196];}),accum$20188)),$16416(((accum$20208=({})),((accum$20208["set"]=function($20211$20213,scope$20214,form$20215,argument$20216){var x$20221;if((((x$20221=$20211$20213)),((x$20221 instanceof Array)&&(x$20221[0]==="pattern")))){}else{$23286($20211$20213);}return ["mode","set",argument$20216];}),accum$20208)),$16416(((accum$20228=({})),((accum$20228["let"]=function($20231$20233,scope$20234,form$20235,argument$20236){var x$20254;var construct$20286;var bindings$20277;var body$20278;var t0$20270;var t1$20271;var t2$20272;var t3$20273;var $20263$20265;var other$20261;var $20238$20244;var ph$20239;(ph$20239=$20231$20233);($20238$20244=ph$20239);if((((x$20254=$20238$20244)),((x$20254 instanceof Array)&&(x$20254[0]==="pattern")))){return ["mode","let",argument$20236];}else{(other$20261=$20238$20244);($20263$20265=argument$20236);if((($20263$20265 instanceof Array)&&((t0$20270=$20263$20265.length),((t0$20270===3)&&(($20263$20265[0]==="data")&&((t1$20271=$23371(["multi"])($20263$20265[1])),(t1$20271[0]&&((t2$20272=t1$20271[1]),((t3$20273=t2$20272.length),(t3$20273>=0)))))))))){(bindings$20277=Array.prototype.slice.call(t2$20272,0));(body$20278=$20263$20265[2]);(construct$20286=function($20289$20291){var bind$20323;var val$20324;var xs$20325;var $20294$20314;var $20295$20315;var t0$20306;var t1$20307;var t2$20308;var t3$20309;var t4$20310;var t5$20311;var t6$20312;var $20293$20301;var ph$20296;(ph$20296=$20289$20291);($20293$20301=ph$20296);if((($20294$20314=($20293$20301 instanceof Array))&&((t0$20306=$20293$20301.length),(t0$20306===0)))){return body$20278;}else{if(($20294$20314&&((t0$20306>=1)&&((t1$20307=$20293$20301[0]),((t1$20307 instanceof Array)&&((t2$20308=t1$20307.length),((t2$20308===3)&&((t1$20307[0]==="send")&&((t3$20309=t1$20307[1]),((t3$20309 instanceof Array)&&((t4$20310=t3$20309.length),((t4$20310===2)&&((t3$20309[0]==="symbol")&&((t3$20309[1]==="=")&&((t5$20311=t1$20307[2]),((t5$20311 instanceof Array)&&((t6$20312=t5$20311.length),((t6$20312===3)&&(t5$20311[0]==="data"))))))))))))))))))){(bind$20323=t5$20311[1]);(val$20324=t5$20311[2]);(xs$20325=Array.prototype.slice.call($20293$20301,1));return $23299(["multi",["send",["symbol","="],["data",["send",["symbol","let"],bind$20323],val$20324]],construct$20286(xs$20325)],({"nonrecursive":true}));}else{$23286($20293$20301);}}});return construct$20286(bindings$20277);}else{$23286($20263$20265);}}}),accum$20228)),$16416(((accum$20340=({})),((t0$20342=$23371(expr_mac$16495)(function(scope$20346,form$20347,$20344$20348){var t0$20353;var t1$20354;var t2$20355;var t3$20356;var t4$20357;var $index$20387;var $length$20382;var temp$20377;var acc$20372;var let_bindings$20366;var bindings$20350;var body$20351;(t0$20353=$20344$20348);if(((t0$20353 instanceof Array)&&((t1$20354=t0$20353.length),((t1$20354===3)&&((t0$20353[0]==="data")&&((t2$20355=$23371(["multi"])(t0$20353[1])),(t2$20355[0]&&((t3$20356=t2$20355[1]),((t4$20357=t3$20356.length),(t4$20357>=0)))))))))){(bindings$20350=Array.prototype.slice.call(t3$20356,0));(body$20351=t0$20353[2]);}else{$23286($20344$20348);}(let_bindings$20366=(((acc$20372=[])),(((temp$20377=bindings$20350)),((($length$20382=temp$20377.length)),((($index$20387=0)),function(){$20369:for(;($index$20387<$length$20382);($index$20387++)){var b$20409;var v$20410;var t0$20400;var t1$20401;var t2$20402;var t3$20403;var t4$20404;var t5$20405;var m$20395;(m$20395=temp$20377[$index$20387]);(t0$20400=m$20395);if(((t0$20400 instanceof Array)&&((t1$20401=t0$20400.length),((t1$20401===3)&&((t0$20400[0]==="send")&&((t2$20402=t0$20400[1]),((t2$20402 instanceof Array)&&((t3$20403=t2$20402.length),((t3$20403===2)&&((t2$20402[0]==="symbol")&&((t2$20402[1]==="=")&&((t4$20404=t0$20400[2]),((t4$20404 instanceof Array)&&((t5$20405=t4$20404.length),((t5$20405===3)&&(t4$20404[0]==="data")))))))))))))))){(b$20409=t4$20404[1]);(v$20410=t4$20404[2]);acc$20372.push(["send",["symbol","="],["data",["send",["symbol","let"],b$20409],v$20410]]);}else{$23286(m$20395,"/home/olivier/git/earl-grey/src/stdenv.eg",22642,22689);}}}()))),acc$20372));return ["multi"].concat(let_bindings$20366).concat([body$20351]);})),function(){if(t0$20342[0]){(accum$20340["letrec"]=t0$20342[1]);return accum$20340;}else{return $23286(function(scope$20424,form$20425,$20422$20426){var t0$20431;var t1$20432;var t2$20433;var t3$20434;var t4$20435;var $index$20465;var $length$20460;var temp$20455;var acc$20450;var let_bindings$20444;var bindings$20428;var body$20429;(t0$20431=$20422$20426);if(((t0$20431 instanceof Array)&&((t1$20432=t0$20431.length),((t1$20432===3)&&((t0$20431[0]==="data")&&((t2$20433=$23371(["multi"])(t0$20431[1])),(t2$20433[0]&&((t3$20434=t2$20433[1]),((t4$20435=t3$20434.length),(t4$20435>=0)))))))))){(bindings$20428=Array.prototype.slice.call(t3$20434,0));(body$20429=t0$20431[2]);}else{$23286($20422$20426);}(let_bindings$20444=(((acc$20450=[])),(((temp$20455=bindings$20428)),((($length$20460=temp$20455.length)),((($index$20465=0)),function(){$20447:for(;($index$20465<$length$20460);($index$20465++)){var b$20487;var v$20488;var t0$20478;var t1$20479;var t2$20480;var t3$20481;var t4$20482;var t5$20483;var m$20473;(m$20473=temp$20455[$index$20465]);(t0$20478=m$20473);if(((t0$20478 instanceof Array)&&((t1$20479=t0$20478.length),((t1$20479===3)&&((t0$20478[0]==="send")&&((t2$20480=t0$20478[1]),((t2$20480 instanceof Array)&&((t3$20481=t2$20480.length),((t3$20481===2)&&((t2$20480[0]==="symbol")&&((t2$20480[1]==="=")&&((t4$20482=t0$20478[2]),((t4$20482 instanceof Array)&&((t5$20483=t4$20482.length),((t5$20483===3)&&(t4$20482[0]==="data")))))))))))))))){(b$20487=t4$20482[1]);(v$20488=t4$20482[2]);acc$20450.push(["send",["symbol","="],["data",["send",["symbol","let"],b$20487],v$20488]]);}else{$23286(m$20473,"/home/olivier/git/earl-grey/src/stdenv.eg",22642,22689);}}}()))),acc$20450));return ["multi"].concat(let_bindings$20444).concat([body$20429]);});}}())),$16416(((accum$20500=({})),((accum$20500["where"]=function(context$20505,scope$20506,form$20507,$20503$20508){var t0$20513;var t1$20514;var body$20510;var bindings$20511;(t0$20513=$20503$20508);if(((t0$20513 instanceof Array)&&((t1$20514=t0$20513.length),((t1$20514===3)&&(t0$20513[0]==="data"))))){(body$20510=t0$20513[1]);(bindings$20511=t0$20513[2]);}else{$23286($20503$20508);}return ["send",["symbol","letrec"],["data",bindings$20511,body$20510]];}),accum$20500)),$16416(({"break":break_mac$16499(null),"continue":continue_mac$16500(null)}),$16416(((accum$20520=({})),((t0$20522=$23371(expr_mac$16495)(function(scope$20525,form$20526,arg$20527){return ["js_throw",arg$20527];})),function(){if(t0$20522[0]){(accum$20520["throw"]=t0$20522[1]);return accum$20520;}else{return $23286(function(scope$20531,form$20532,arg$20533){return ["js_throw",arg$20533];});}}())),$16416(((accum$20536=({})),((t0$20538=$23371(expr_mac$16495)(function(scope$20541,form$20542,arg$20543){return ["js_return",arg$20543];})),function(){if(t0$20538[0]){(accum$20536["return"]=t0$20538[1]);return accum$20536;}else{return $23286(function(scope$20547,form$20548,arg$20549){return ["js_return",arg$20549];});}}())),$16416(((accum$20552=({})),((t0$20554=$23371(expr_mac$16495)(function(scope$20557,form$20558,arg$20559){return ["js_new",arg$20559];})),function(){if(t0$20554[0]){(accum$20552["new"]=t0$20554[1]);return accum$20552;}else{return $23286(function(scope$20563,form$20564,arg$20565){return ["js_new",arg$20565];});}}())),$16416(((accum$20568=({})),((t0$20570=$23371(expr_mac$16495)(function(scope$20573,form$20574,arg$20575){return ["js_delete",arg$20575];})),function(){if(t0$20570[0]){(accum$20568["delete"]=t0$20570[1]);return accum$20568;}else{return $23286(function(scope$20579,form$20580,arg$20581){return ["js_delete",arg$20581];});}}())),$16416(((accum$20584=({})),((accum$20584["splice"]=function(context$20589,scope$20590,form$20591,$20587$20592){var t0$20596;var t1$20597;var t2$20598;var t3$20599;var t4$20600;var stmts$20594;(t0$20596=$20587$20592);if(((t0$20596 instanceof Array)&&((t1$20597=t0$20596.length),((t1$20597===2)&&((t0$20596[0]==="data")&&((t2$20598=$23371(["multi"])(t0$20596[1])),(t2$20598[0]&&((t3$20599=t2$20598[1]),((t4$20600=t3$20599.length),(t4$20600>=0)))))))))){(stmts$20594=Array.prototype.slice.call(t3$20599,0));}else{$23286($20587$20592);}return ["splice"].concat(stmts$20594);}),accum$20584)),$16416(((accum$20609=({})),((accum$20609["?"]=function(context$20614,scope$20615,form$20616,$20612$20617){var other$20699;var $20656$20668;var $20657$20669;var $20658$20670;var $20659$20671;var t0$20666;var $20655$20661;var checker$20652;var other$20807;var $20764$20776;var $20765$20777;var $20766$20778;var $20767$20779;var t0$20774;var $20763$20769;var x$20821;var other$20842;var t0$20833;var $20826$20828;var other$20846;var $20759$20811;var checker$20760;var chk$20754;var target$20755;var expr$20644;var $20620$20638;var $20621$20639;var $20622$20640;var $20623$20641;var t0$20634;var t1$20635;var t2$20636;var $20619$20629;var ph$20624;(ph$20624=$20612$20617);($20619$20629=ph$20624);if((($20620$20638=($20619$20629 instanceof Array))&&((t0$20634=$20619$20629.length),(($20622$20640=(t0$20634===3))&&(($20623$20641=($20619$20629[0]==="data"))&&((expr$20644=$20619$20629[1]),((t1$20635=$20619$20629[2]),((t1$20635 instanceof Array)&&((t2$20636=t1$20635.length),((t2$20636===1)&&(t1$20635[0]==="void"))))))))))){(checker$20652=((($20655$20661=expr$20644)),function(){if((($20656$20668=($20655$20661 instanceof Array))&&((t0$20666=$20655$20661.length),(($20658$20670=(t0$20666===2))&&(($20659$20671=($20655$20661[0]==="symbol"))&&($20655$20661[1]==="String")))))){return checker_db$16483.String;}else{if(($20659$20671&&($20655$20661[1]==="Number"))){return checker_db$16483.Number;}else{if(($20659$20671&&($20655$20661[1]==="true"))){return checker_db$16483.true;}else{if(($20659$20671&&($20655$20661[1]==="false"))){return checker_db$16483.false;}else{if(($20659$20671&&($20655$20661[1]==="null"))){return checker_db$16483.null;}else{if(($20659$20671&&($20655$20661[1]==="undefined"))){return checker_db$16483.undefined;}else{(other$20699=$20655$20661);return ["send",["symbol","___checker"],["data",expr$20644]];}}}}}}}()));return ["macro",function($20702$20704,env$20705,form$20706,expr$20707){var x$20725;var other$20746;var t0$20737;var $20730$20732;var other$20750;var $20709$20715;var ph$20710;(ph$20710=$20702$20704);($20709$20715=ph$20710);if((((x$20725=$20709$20715)),((x$20725 instanceof Array)&&(x$20725[0]==="pattern")))){($20730$20732=expr$20707);if((($20730$20732 instanceof Array)&&((t0$20737=$20730$20732.length),((t0$20737===1)&&($20730$20732[0]==="void"))))){return ["check",checker$20652,["ignore"]];}else{(other$20746=$20730$20732);return ["check",checker$20652,expr$20707];}}else{(other$20750=$20709$20715);return ["send",checker$20652,["data",expr$20707]];}}];}else{if($20623$20641){(chk$20754=$20619$20629[1]);(target$20755=$20619$20629[2]);(checker$20760=((($20763$20769=chk$20754)),function(){if((($20764$20776=($20763$20769 instanceof Array))&&((t0$20774=$20763$20769.length),(($20766$20778=(t0$20774===2))&&(($20767$20779=($20763$20769[0]==="symbol"))&&($20763$20769[1]==="String")))))){return checker_db$16483.String;}else{if(($20767$20779&&($20763$20769[1]==="Number"))){return checker_db$16483.Number;}else{if(($20767$20779&&($20763$20769[1]==="true"))){return checker_db$16483.true;}else{if(($20767$20779&&($20763$20769[1]==="false"))){return checker_db$16483.false;}else{if(($20767$20779&&($20763$20769[1]==="null"))){return checker_db$16483.null;}else{if(($20767$20779&&($20763$20769[1]==="undefined"))){return checker_db$16483.undefined;}else{(other$20807=$20763$20769);return ["send",["symbol","___checker"],["data",chk$20754]];}}}}}}}()));($20759$20811=context$20614);if((((x$20821=$20759$20811)),((x$20821 instanceof Array)&&(x$20821[0]==="pattern")))){($20826$20828=target$20755);if((($20826$20828 instanceof Array)&&((t0$20833=$20826$20828.length),((t0$20833===1)&&($20826$20828[0]==="void"))))){return ["check",checker$20760,["ignore"]];}else{(other$20842=$20826$20828);return ["check",checker$20760,target$20755];}}else{(other$20846=$20759$20811);return ["send",checker$20760,["data",target$20755]];}}else{$23286($20619$20629);}}}),accum$20609)),$16416(((accum$20851=({})),((accum$20851["!"]=function(context$20856,scope$20857,form$20858,$20854$20859){var other$20931;var $20898$20910;var $20899$20911;var $20900$20912;var $20901$20913;var t0$20908;var $20897$20903;var projector$20894;var other$21029;var $20996$21008;var $20997$21009;var $20998$21010;var $20999$21011;var t0$21006;var $20995$21001;var x$21043;var other$21064;var t0$21055;var $21048$21050;var other$21068;var $20991$21033;var projector$20992;var prj$20986;var target$20987;var expr$20886;var $20862$20880;var $20863$20881;var $20864$20882;var $20865$20883;var t0$20876;var t1$20877;var t2$20878;var $20861$20871;var ph$20866;(ph$20866=$20854$20859);($20861$20871=ph$20866);if((($20862$20880=($20861$20871 instanceof Array))&&((t0$20876=$20861$20871.length),(($20864$20882=(t0$20876===3))&&(($20865$20883=($20861$20871[0]==="data"))&&((expr$20886=$20861$20871[1]),((t1$20877=$20861$20871[2]),((t1$20877 instanceof Array)&&((t2$20878=t1$20877.length),((t2$20878===1)&&(t1$20877[0]==="void"))))))))))){(projector$20894=((($20897$20903=expr$20886)),function(){if((($20898$20910=($20897$20903 instanceof Array))&&((t0$20908=$20897$20903.length),(($20900$20912=(t0$20908===2))&&(($20901$20913=($20897$20903[0]==="symbol"))&&($20897$20903[1]==="String")))))){return mac1$16482(function(x$20920){return ["data",["symbol","true"],["send",["symbol","String"],["data",x$20920]]];});}else{if(($20901$20913&&($20897$20903[1]==="Number"))){return mac1$16482(function(x$20927){return ["data",["symbol","true"],["send",["symbol","parseFloat"],["data",x$20927]]];});}else{(other$20931=$20897$20903);return ["send",["symbol","___projector"],["data",expr$20886]];}}}()));return ["macro",function($20934$20936,env$20937,form$20938,expr$20939){var x$20957;var other$20978;var t0$20969;var $20962$20964;var other$20982;var $20941$20947;var ph$20942;(ph$20942=$20934$20936);($20941$20947=ph$20942);if((((x$20957=$20941$20947)),((x$20957 instanceof Array)&&(x$20957[0]==="pattern")))){($20962$20964=expr$20939);if((($20962$20964 instanceof Array)&&((t0$20969=$20962$20964.length),((t0$20969===1)&&($20962$20964[0]==="void"))))){return ["project",projector$20894,["ignore"]];}else{(other$20978=$20962$20964);return ["project",projector$20894,expr$20939];}}else{(other$20982=$20941$20947);return ["send",["send",projector$20894,["data",expr$20939]],["value",1]];}}];}else{if($20865$20883){(prj$20986=$20861$20871[1]);(target$20987=$20861$20871[2]);(projector$20992=((($20995$21001=prj$20986)),function(){if((($20996$21008=($20995$21001 instanceof Array))&&((t0$21006=$20995$21001.length),(($20998$21010=(t0$21006===2))&&(($20999$21011=($20995$21001[0]==="symbol"))&&($20995$21001[1]==="String")))))){return mac1$16482(function(x$21018){return ["data",["symbol","true"],["send",["symbol","String"],["data",x$21018]]];});}else{if(($20999$21011&&($20995$21001[1]==="Number"))){return mac1$16482(function(x$21025){return ["data",["symbol","true"],["send",["symbol","parseFloat"],["data",x$21025]]];});}else{(other$21029=$20995$21001);return ["send",["symbol","___projector"],["data",prj$20986]];}}}()));($20991$21033=context$20856);if((((x$21043=$20991$21033)),((x$21043 instanceof Array)&&(x$21043[0]==="pattern")))){($21048$21050=target$20987);if((($21048$21050 instanceof Array)&&((t0$21055=$21048$21050.length),((t0$21055===1)&&($21048$21050[0]==="void"))))){return ["project",projector$20992,["ignore"]];}else{(other$21064=$21048$21050);return ["project",projector$20992,target$20987];}}else{(other$21068=$20991$21033);return ["send",["send",projector$20992,["data",target$20987]],["value",1]];}}else{$23286($20861$20871);}}}),accum$20851)),$16416(((accum$21073=({})),((accum$21073["#"]=function(context$21078,scope$21079,form$21080,$21076$21081){var t0$21085;var t1$21086;var t2$21087;var t3$21088;var t4$21089;var t5$21090;var f$21101;var tag$21083;(t0$21085=$21076$21081);if(((t0$21085 instanceof Array)&&((t1$21086=t0$21085.length),((t1$21086===3)&&((t0$21085[0]==="data")&&((t2$21087=t0$21085[1]),((t2$21087 instanceof Array)&&((t3$21088=t2$21087.length),((t3$21088===1)&&((t2$21087[0]==="void")&&((t4$21089=t0$21085[2]),((t4$21089 instanceof Array)&&((t5$21090=t4$21089.length),((t5$21090===2)&&(t4$21089[0]==="symbol"))))))))))))))){(tag$21083=t4$21089[1]);}else{$23286($21076$21081);}(tag$21083=["value",tag$21083]);(f$21101=function($21104$21106,scope$21107,form$21108,expr$21109){var x$21127;var other$21177;var subp$21167;var $21134$21163;var $21135$21164;var t0$21161;var $21133$21156;var checker_mac$21136;var other$21207;var args$21202;var $21183$21193;var $21184$21194;var t0$21191;var $21182$21186;var $21111$21117;var ph$21112;(ph$21112=$21104$21106);($21111$21117=ph$21112);if((((x$21127=$21111$21117)),((x$21127 instanceof Array)&&(x$21127[0]==="pattern")))){(checker_mac$21136=["macro",function(context$21141,scope$21142,form$21143,$21139$21144){var t0$21148;var t1$21149;var expr$21146;(t0$21148=$21139$21144);if(((t0$21148 instanceof Array)&&((t1$21149=t0$21148.length),((t1$21149===2)&&(t0$21148[0]==="data"))))){(expr$21146=t0$21148[1]);}else{$23286($21139$21144);}return ["send",["symbol","let"],["data",["send",["symbol","="],["data",["symbol","x"],expr$21146]],["send",["symbol","and"],["data",["send",["symbol","instanceof"],["data",["symbol","x"],["symbol","Array"]]],["send",["symbol","==="],["data",["send",["symbol","x"],["value",0]],tag$21083]]]]]];}]);($21133$21156=expr$21109);if((($21134$21163=($21133$21156 instanceof Array))&&((t0$21161=$21133$21156.length),((t0$21161>=1)&&($21133$21156[0]==="data"))))){(subp$21167=Array.prototype.slice.call($21133$21156,1));return ["data",tag$21083].concat(subp$21167);}else{if(($21134$21163&&((t0$21161===1)&&($21133$21156[0]==="void")))){return ["check",checker_mac$21136,["ignore"]];}else{(other$21177=$21133$21156);return ["check",checker_mac$21136,expr$21109];}}}else{$21111$21117;($21182$21186=expr$21109);if((($21183$21193=($21182$21186 instanceof Array))&&((t0$21191=$21182$21186.length),((t0$21191===1)&&($21182$21186[0]==="void"))))){return ["data",tag$21083];}else{if(($21183$21193&&((t0$21191>=1)&&($21182$21186[0]==="data")))){(args$21202=Array.prototype.slice.call($21182$21186,1));return ["data",tag$21083].concat(args$21202);}else{(other$21207=$21182$21186);return ["send",["data",tag$21083],other$21207];}}}});return ["macro",f$21101];}),accum$21073)),$16416(((accum$21211=({})),((accum$21211["require"]=function(context$21216,scope$21217,form$21218,$21214$21219){var t0$21223;var t1$21224;var req$21230;var stmts$21231;var topfetch$21232;var produce$21233;var expr$21221;(t0$21223=$21214$21219);if(((t0$21223 instanceof Array)&&((t1$21224=t0$21223.length),((t1$21224===2)&&(t0$21223[0]==="data"))))){(expr$21221=t0$21223[1]);}else{$23286($21214$21219);}(req$21230=["variable","require"]);(stmts$21231=[]);(topfetch$21232=function(pkg$21243,v$21244){stmts$21231.push(["send",["symbol","="],["data",v$21244,["send",req$21230,["data",pkg$21243]]]]);return v$21244;});(produce$21233=function($21250$21252,fetch$21253){var t0$21269;var t0$21313;var t0$21317;var $index$21336;var $length$21331;var temp$21326;var pkgv$21391;var pkg$21384;var subp$21385;var pkg$21368;var s$21369;var name$21356;var subp$21310;var s$21304;var s$21298;var $21257$21287;var $21258$21288;var $21259$21289;var $21260$21290;var $21261$21291;var $21262$21292;var $21263$21293;var $21264$21294;var $21265$21295;var t0$21278;var t1$21279;var bridge$21256$21280;var t2$21281;var t3$21282;var t4$21283;var t5$21284;var t6$21285;var $21255$21273;var ph$21266;var expr$21267;(t0$21269=$21250$21252);(expr$21267=t0$21269);(ph$21266=t0$21269);($21255$21273=ph$21266);if((($21257$21287=($21255$21273 instanceof Array))&&((t0$21278=$21255$21273.length),(($21259$21289=(t0$21278===2))&&($21255$21273[0]==="symbol"))))){(s$21298=$21255$21273[1]);return fetch$21253(["value",s$21298],expr$21267);}else{if(($21259$21289&&(($21255$21273[0]==="value")&&((t1$21279=$21255$21273[1]),(typeof(t1$21279)==="string"))))){(s$21304=t1$21279);return fetch$21253(expr$21267,["symbol",scope$21217.gensym()]);}else{(bridge$21256$21280=$21255$21273);if((((bridge$21256$21280 instanceof Array)&&((t0$21313=bridge$21256$21280.length),((t0$21313>=1)&&((bridge$21256$21280[0]==="multi")&&((subp$21310=Array.prototype.slice.call(bridge$21256$21280,1)),true)))))||((bridge$21256$21280 instanceof Array)&&((t0$21317=bridge$21256$21280.length),((t0$21317>=1)&&((bridge$21256$21280[0]==="data")&&((subp$21310=Array.prototype.slice.call(bridge$21256$21280,1)),true))))))){(temp$21326=subp$21310);($length$21331=temp$21326.length);($index$21336=0);$21322:for(;($index$21336<$length$21331);($index$21336++)){var p$21352;var m$21344;(m$21344=temp$21326[$index$21336]);(p$21352=m$21344);produce$21233(p$21352,fetch$21253);}return null;}else{if((($21257$21287=($21255$21273 instanceof Array))&&((t0$21278=$21255$21273.length),(($21259$21289=(t0$21278===3))&&(($21260$21290=($21255$21273[0]==="send"))&&((t1$21279=$21255$21273[1]),(($21262$21292=(t1$21279 instanceof Array))&&((t2$21281=t1$21279.length),(($21264$21294=(t2$21281===2))&&(($21265$21295=(t1$21279[0]==="symbol"))&&((t1$21279[1]==="^")&&((t3$21282=$21255$21273[2]),((t3$21282 instanceof Array)&&((t4$21283=t3$21282.length),((t4$21283===3)&&((t3$21282[0]==="data")&&((t5$21284=t3$21282[1]),((t5$21284 instanceof Array)&&((t6$21285=t5$21284.length),((t6$21285===1)&&(t5$21284[0]==="void"))))))))))))))))))))){(name$21356=t3$21282[2]);return fetch$21253(name$21356,["symbol",scope$21217.gensym()]);}else{if(($21265$21295&&((t1$21279[1]==="as")&&((t3$21282=$21255$21273[2]),((t3$21282 instanceof Array)&&((t4$21283=t3$21282.length),((t4$21283===3)&&(t3$21282[0]==="data")))))))){(pkg$21368=t3$21282[1]);(s$21369=t3$21282[2]);return produce$21233(pkg$21368,function(the_pkg$21376,$21374$21377){$21374$21377;return fetch$21253(the_pkg$21376,s$21369);});}else{if(($21265$21295&&((t1$21279[1]==="->")&&((t3$21282=$21255$21273[2]),((t3$21282 instanceof Array)&&((t4$21283=t3$21282.length),((t4$21283===3)&&(t3$21282[0]==="data")))))))){(pkg$21384=t3$21282[1]);(subp$21385=t3$21282[2]);(pkgv$21391=produce$21233(pkg$21384,fetch$21253));return produce$21233(subp$21385,function(pkg$21396,v$21397){stmts$21231.push(["send",["symbol","="],["data",v$21397,["send",pkgv$21391,pkg$21396]]]);return v$21397;});}else{$23286($21255$21273);}}}}}}});produce$21233(expr$21221,topfetch$21232);return ["splice"].concat(stmts$21231);}),accum$21211)),$16416(((accum$21404=({})),((accum$21404["provide"]=function(context$21409,scope$21410,form$21411,$21407$21412){var t0$21416;var t1$21417;var t2$21418;var t3$21419;var t4$21420;var $index$21448;var $length$21443;var temp$21438;var acc$21433;var expr$21414;(t0$21416=$21407$21412);if(((t0$21416 instanceof Array)&&((t1$21417=t0$21416.length),((t1$21417===2)&&((t0$21416[0]==="data")&&((t2$21418=$23371(["multi"])(t0$21416[1])),(t2$21418[0]&&((t3$21419=t2$21418[1]),((t4$21420=t3$21419.length),(t4$21420>=0)))))))))){(expr$21414=Array.prototype.slice.call(t3$21419,0));}else{$23286($21407$21412);}return ["sink",["multi"].concat((((acc$21433=[])),(((temp$21438=expr$21414)),((($length$21443=temp$21438.length)),((($index$21448=0)),function(){$21428:for(;($index$21448<$length$21443);($index$21448++)){var t0$21490;var t0$21494;var other$21500;var s$21479;var name$21480;var s$21472;var name$21473;var $21431$21469;var t0$21461;var t1$21462;var t2$21463;var t3$21464;var t4$21465;var t5$21466;var bridge$21430$21467;var m$21456;(m$21456=temp$21438[$index$21448]);(t0$21461=m$21456);(s$21472=t0$21461);if(((t0$21461 instanceof Array)&&((t1$21462=t0$21461.length),((t1$21462===2)&&(t0$21461[0]==="symbol"))))){(name$21473=t0$21461[1]);acc$21433.push(["send",["symbol",":="],["data",["send",["symbol","exports"],["value",name$21473]],s$21472]]);}else{if(((t0$21461 instanceof Array)&&((t1$21462=t0$21461.length),((t1$21462===3)&&((t0$21461[0]==="send")&&((t2$21463=t0$21461[1]),((t2$21463 instanceof Array)&&((t3$21464=t2$21463.length),((t3$21464===2)&&((t2$21463[0]==="symbol")&&((t2$21463[1]==="as")&&((t4$21465=t0$21461[2]),((t4$21465 instanceof Array)&&((t5$21466=t4$21465.length),((t5$21466===3)&&((t4$21465[0]==="data")&&((s$21479=t4$21465[1]),((bridge$21430$21467=t4$21465[2]),(((bridge$21430$21467 instanceof Array)&&((t0$21490=bridge$21430$21467.length),((t0$21490===2)&&((bridge$21430$21467[0]==="symbol")&&((name$21480=bridge$21430$21467[1]),true)))))||((bridge$21430$21467 instanceof Array)&&((t0$21494=bridge$21430$21467.length),((t0$21494===2)&&((bridge$21430$21467[0]==="value")&&((name$21480=bridge$21430$21467[1]),true)))))))))))))))))))))))){acc$21433.push(["send",["symbol",":="],["data",["send",["symbol","exports"],["value",name$21480]],s$21479]]);}else{(other$21500=m$21456);acc$21433.push(function(){throw $23095(["syntax","provide"]).create("Each clause of provide must be 'sym' or 'sym as name'");}());}}}}()))),acc$21433))];}),accum$21404)),$16416(((accum$21503=({})),((accum$21503["class"]=function(context$21508,scope$21509,$21506$21510,expr$21511){var t0$21515;var stmts$21843;var name$21832;var stmts$21833;var $21521$21828;var $21522$21829;var t0$21823;var t1$21824;var t2$21825;var t3$21826;var $21520$21818;var helper$21523;var env$21513;(t0$21515=$21506$21510);if($23057(t0$21515,"env")){(env$21513=t0$21515.env);}else{$23286($21506$21510);}(helper$21523=function(name$21527,stmts$21528){var $index$21566;var $length$21561;var temp$21556;var acc$21551;var t0$21772;var t1$21773;var t0$21782;var env2$21779;var it$21780;var t0$21790;var t1$21791;var other$21814;var t0$21805;var $21531$21800;var statics$21532;var ctor$21533;var new_stmts$21534;var ctor_args$21535;var ctor_body$21536;var name_str$21537;var node$21538;(statics$21532=["data",["symbol","="]]);(ctor$21533=[["data"],$23299(["multi"],({"env":env$21513}))]);(new_stmts$21534=(((acc$21551=[])),(((temp$21556=stmts$21528)),((($length$21561=temp$21556.length)),((($index$21566=0)),function(){$21547:for(;($index$21566<$length$21561);($index$21566++)){var t0$21609;var t1$21610;var t2$21611;var t3$21612;var t4$21613;var t5$21614;var t6$21615;var t7$21616;var t8$21617;var t0$21630;var t1$21631;var t2$21632;var t3$21633;var t4$21634;var t5$21635;var t6$21636;var t7$21637;var t8$21638;var t9$21639;var t10$21640;var t11$21641;var t12$21642;var accum$21672;var accum$21696;var accum$21703;var accum$21758;var lhs$21662;var rhs$21663;var args$21605;var body$21606;var methods$21592;var t0$21579;var t1$21580;var t2$21581;var t3$21582;var t4$21583;var t5$21584;var t6$21585;var t7$21586;var t8$21587;var bridge$21549$21588;var m$21574;(m$21574=temp$21556[$index$21566]);(t0$21579=m$21574);if(((t0$21579 instanceof Array)&&((t1$21580=t0$21579.length),((t1$21580===3)&&((t0$21579[0]==="send")&&((t2$21581=t0$21579[1]),((t2$21581 instanceof Array)&&((t3$21582=t2$21581.length),((t3$21582===2)&&((t2$21581[0]==="symbol")&&((t2$21581[1]==="static")&&((t4$21583=t0$21579[2]),((t4$21583 instanceof Array)&&((t5$21584=t4$21583.length),((t5$21584===2)&&((t4$21583[0]==="data")&&((t6$21585=$23371(["multi"])(t4$21583[1])),(t6$21585[0]&&((t7$21586=t6$21585[1]),((t8$21587=t7$21586.length),(t8$21587>=0))))))))))))))))))))){(methods$21592=Array.prototype.slice.call(t7$21586,0));acc$21551.push((statics$21532=statics$21532.concat(methods$21592)));}else{(bridge$21549$21588=m$21574);if((((bridge$21549$21588 instanceof Array)&&((t0$21609=bridge$21549$21588.length),((t0$21609===3)&&((bridge$21549$21588[0]==="send")&&((t1$21610=bridge$21549$21588[1]),((t1$21610 instanceof Array)&&((t2$21611=t1$21610.length),((t2$21611===2)&&((t1$21610[0]==="symbol")&&((t1$21610[1]==="=")&&((t3$21612=bridge$21549$21588[2]),((t3$21612 instanceof Array)&&((t4$21613=t3$21612.length),((t4$21613===3)&&((t3$21612[0]==="data")&&((t5$21614=t3$21612[1]),((t5$21614 instanceof Array)&&((t6$21615=t5$21614.length),((t6$21615===3)&&((t5$21614[0]==="send")&&((t7$21616=t5$21614[1]),((t7$21616 instanceof Array)&&((t8$21617=t7$21616.length),((t8$21617===2)&&((t7$21616[0]==="symbol")&&((t7$21616[1]==="constructor")&&((args$21605=t5$21614[2]),((body$21606=t3$21612[2]),true))))))))))))))))))))))))))))||((bridge$21549$21588 instanceof Array)&&((t0$21630=bridge$21549$21588.length),((t0$21630===3)&&((bridge$21549$21588[0]==="send")&&((t1$21631=bridge$21549$21588[1]),((t1$21631 instanceof Array)&&((t2$21632=t1$21631.length),((t2$21632===2)&&((t1$21631[0]==="symbol")&&((t1$21631[1]==="=")&&((t3$21633=bridge$21549$21588[2]),((t3$21633 instanceof Array)&&((t4$21634=t3$21633.length),((t4$21634===3)&&((t3$21633[0]==="data")&&((t5$21635=t3$21633[1]),((t5$21635 instanceof Array)&&((t6$21636=t5$21635.length),((t6$21636===2)&&((t5$21635[0]==="symbol")&&((t5$21635[1]==="constructor")&&((t7$21637=t3$21633[2]),((t7$21637 instanceof Array)&&((t8$21638=t7$21637.length),((t8$21638===3)&&((t7$21637[0]==="send")&&((t9$21639=t7$21637[1]),((t9$21639 instanceof Array)&&((t10$21640=t9$21639.length),((t10$21640===2)&&((t9$21639[0]==="symbol")&&((t9$21639[1]==="->")&&((t11$21641=t7$21637[2]),((t11$21641 instanceof Array)&&((t12$21642=t11$21641.length),((t12$21642===3)&&((t11$21641[0]==="data")&&((args$21605=t11$21641[1]),((body$21606=t11$21641[2]),true))))))))))))))))))))))))))))))))))))))))){acc$21551.push(((ctor$21533=[args$21605,body$21606]),["splice"]));}else{(t0$21579=m$21574);if(((t0$21579 instanceof Array)&&((t1$21580=t0$21579.length),((t1$21580===3)&&((t0$21579[0]==="send")&&((t2$21581=t0$21579[1]),((t2$21581 instanceof Array)&&((t3$21582=t2$21581.length),((t3$21582===2)&&((t2$21581[0]==="symbol")&&((t2$21581[1]==="=")&&((t4$21583=t0$21579[2]),((t4$21583 instanceof Array)&&((t5$21584=t4$21583.length),((t5$21584===3)&&(t4$21583[0]==="data")))))))))))))))){(lhs$21662=t4$21583[1]);(rhs$21663=t4$21583[2]);acc$21551.push(parse_pattern$16475(scope$21509,lhs$21662,rhs$21663,$23299(pattern_handlers$16505.build_object,$16416(({"allow_nested":false}),$16416(((accum$21672=({})),((accum$21672["assign"]=function($21675$21678,value$21679){var t0$21686;var t0$21690;var bridge$21676$21683;var v$21681;(bridge$21676$21683=$21675$21678);if((((bridge$21676$21683 instanceof Array)&&((t0$21686=bridge$21676$21683.length),((t0$21686===2)&&((bridge$21676$21683[0]==="symbol")&&((v$21681=bridge$21676$21683[1]),true)))))||((bridge$21676$21683 instanceof Array)&&((t0$21690=bridge$21676$21683.length),((t0$21690===2)&&((bridge$21676$21683[0]==="value")&&((v$21681=bridge$21676$21683[1]),true))))))){}else{$23286($21675$21678);}return ["do",__lt____lt____colon__$16468(["assign",["send",["send",name$21527,["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value",v$21681]],value$21679],v$21681)];}),accum$21672)),$16416(((accum$21696=({})),((accum$21696["declare"]=function(vars$21700){return [];}),accum$21696)),$16416(((accum$21703=({})),((accum$21703["wrap_target"]=function($21706$21708){var t0$21743;var other_env$21739;var it$21740;var it2$21741;var other$21755;var args$21729;var body$21730;var t0$21721;var t1$21722;var t2$21723;var t3$21724;var t4$21725;var $21710$21716;var ph$21711;(ph$21711=$21706$21708);($21710$21716=ph$21711);if((($21710$21716 instanceof Array)&&((t0$21721=$21710$21716.length),((t0$21721===3)&&(($21710$21716[0]==="send")&&((t1$21722=$21710$21716[1]),((t1$21722 instanceof Array)&&((t2$21723=t1$21722.length),((t2$21723===2)&&((t1$21722[0]==="symbol")&&((t1$21722[1]==="->")&&((t3$21724=$21710$21716[2]),((t3$21724 instanceof Array)&&((t4$21725=t3$21724.length),((t4$21725===3)&&(t3$21724[0]==="data")))))))))))))))){(args$21729=t3$21724[1]);(body$21730=t3$21724[2]);(t0$21743=body$21730);if($23057(t0$21743,"env")){(other_env$21739=t0$21743.env);}else{$23286(body$21730,"/home/olivier/git/earl-grey/src/stdenv.eg",28758,28762);}(it$21740=$23299(["symbol","@"],({"env":other_env$21739})));(it2$21741=$23299(["symbol","self"],({"env":other_env$21739})));return ["send",["symbol","->"],["data",args$21729,["send",["symbol","let"],["data",["multi",["send",["symbol","="],["data",it$21740,["symbol","this"]]],["send",["symbol","="],["data",it2$21741,["symbol","this"]]]],body$21730]]]];}else{(other$21755=$21710$21716);return other$21755;}}),accum$21703)),((accum$21758=({})),((accum$21758["success"]=function($21761$21763){$21761$21763;return ["splice"];}),accum$21758)))))))));}else{$23286(m$21574,"/home/olivier/git/earl-grey/src/stdenv.eg",28027,29181);}}}}}()))),acc$21551));(t0$21772=ctor$21533);if(((t0$21772 instanceof Array)&&((t1$21773=t0$21772.length),(t1$21773===2)))){(ctor_args$21535=t0$21772[0]);(ctor_body$21536=t0$21772[1]);}else{$23286(ctor$21533,"/home/olivier/git/earl-grey/src/stdenv.eg",29206,29210);}(ctor_body$21536=(((t0$21782=ctor_body$21536),function(){if($23057(t0$21782,"env")){(env2$21779=t0$21782.env);}else{return $23286(ctor_body$21536,"/home/olivier/git/earl-grey/src/stdenv.eg",29261,29270);}}()),((it$21780=$23299(["symbol","@"],({"env":env2$21779})))),["send",["symbol","let"],["data",["send",["symbol","="],["data",it$21780,["send",["symbol","if"],["data",["send",["symbol","not"],["data",["void"],["send",["symbol","?"],["data",name$21527,["symbol","this"]]]]],["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","create"]]]],["data",["send",name$21527,["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]],["symbol","this"]]]]],["multi",ctor_body$21536,it$21780]]]));(t0$21790=name$21527);if(((t0$21790 instanceof Array)&&((t1$21791=t0$21790.length),((t1$21791===2)&&(t0$21790[0]==="symbol"))))){(name_str$21537=t0$21790[1]);}else{$23286(name$21527,"/home/olivier/git/earl-grey/src/stdenv.eg",29486,29490);}statics$21532.push(["send",["symbol","="],["data",["value","::name"],["value",name_str$21537]]]);statics$21532.push(["send",["symbol","="],["data",["value","::egclass"],["symbol","true"]]]);(node$21538=["splice",["send",["symbol","="],["data",name$21527,["send",["symbol","->"],["data",ctor_args$21535,ctor_body$21536]]]]].concat(new_stmts$21534).concat([["send",["symbol","&:"],["data",name$21527,statics$21532]],name$21527]));($21531$21800=context$21508);if((($21531$21800 instanceof Array)&&((t0$21805=$21531$21800.length),((t0$21805===2)&&(($21531$21800[0]==="expr")&&($21531$21800[1]==="multi")))))){return node$21538;}else{(other$21814=$21531$21800);return ["multi",node$21538];}});($21520$21818=expr$21511);if((($21521$21828=($21520$21818 instanceof Array))&&((t0$21823=$21520$21818.length),((t0$21823===3)&&(($21520$21818[0]==="data")&&((name$21832=$21520$21818[1]),((t1$21824=$23371(["multi"])($21520$21818[2])),(t1$21824[0]&&((t2$21825=t1$21824[1]),((t3$21826=t2$21825.length),(t3$21826>=0))))))))))){(stmts$21833=Array.prototype.slice.call(t2$21825,0));return helper$21523(name$21832,stmts$21833);}else{if(($21521$21828&&((t0$21823===2)&&(($21520$21818[0]==="data")&&((t1$21824=$23371(["multi"])($21520$21818[1])),(t1$21824[0]&&((t2$21825=t1$21824[1]),((t3$21826=t2$21825.length),(t3$21826>=0))))))))){(stmts$21843=Array.prototype.slice.call(t2$21825,0));return helper$21523(["symbol",scope$21509.gensym()],stmts$21843);}else{$23286($21520$21818);}}}),accum$21503)),$16416(((accum$21852=({})),((accum$21852["%"]=function(context$21857,scope$21858,form$21859,$21855$21860){var t0$21865;var t1$21866;var x$22048;var args$22043;var $22024$22034;var $22025$22035;var t0$22032;var $22023$22027;var tags$21872;var parse$21873;var descr$21862;var contents$21863;(t0$21865=$21855$21860);if(((t0$21865 instanceof Array)&&((t1$21866=t0$21865.length),((t1$21866===3)&&(t0$21865[0]==="data"))))){(descr$21862=t0$21865[1]);(contents$21863=t0$21865[2]);}else{$23286($21855$21860);}(tags$21872=["data"]);(parse$21873=function($21879$21881){var t0$21900;var t0$21957;var t0$21961;var t0$21975;var t0$21979;var t0$21992;var t0$21996;var t0$22012;var t0$22016;var args$22009;var expr$22002;var rest$22003;var prop$21985;var value$21986;var x$21967;var x$21947;var x$21942;var s$21937;var $21888$21921;var $21889$21922;var $21890$21923;var $21891$21924;var $21892$21925;var $21893$21926;var $21894$21927;var $21895$21928;var $21896$21929;var t0$21909;var t1$21910;var t2$21911;var t3$21912;var t4$21913;var t5$21914;var t6$21915;var bridge$21884$21916;var bridge$21885$21917;var bridge$21886$21918;var bridge$21887$21919;var $21883$21904;var ph$21897;var toparse$21898;(t0$21900=$21879$21881);(toparse$21898=t0$21900);(ph$21897=t0$21900);($21883$21904=ph$21897);if((($21888$21921=($21883$21904 instanceof Array))&&((t0$21909=$21883$21904.length),((t0$21909===1)&&($21883$21904[0]==="void"))))){return null;}else{if(($21888$21921&&(($21890$21923=(t0$21909===2))&&($21883$21904[0]==="symbol")))){(s$21937=$21883$21904[1]);return tags$21872.push(["value",("+"+s$21937)]);}else{if(($21890$21923&&($21883$21904[0]==="value"))){(x$21942=$21883$21904[1]);return tags$21872.push(["value",("+"+x$21942)]);}else{if(($21888$21921&&(($21890$21923=(t0$21909===3))&&(($21891$21924=($21883$21904[0]==="send"))&&((t1$21910=$21883$21904[1]),(($21893$21926=(t1$21910 instanceof Array))&&((t2$21911=t1$21910.length),(($21895$21928=(t2$21911===2))&&(($21896$21929=(t1$21910[0]==="symbol"))&&((t1$21910[1]===".")&&((t3$21912=$21883$21904[2]),((t3$21912 instanceof Array)&&((t4$21913=t3$21912.length),((t4$21913===3)&&((t3$21912[0]==="data")&&((t5$21914=t3$21912[1]),((t5$21914 instanceof Array)&&((t6$21915=t5$21914.length),((t6$21915===1)&&((t5$21914[0]==="void")&&((bridge$21884$21916=t3$21912[2]),(((bridge$21884$21916 instanceof Array)&&((t0$21957=bridge$21884$21916.length),((t0$21957===2)&&((bridge$21884$21916[0]==="symbol")&&((x$21947=bridge$21884$21916[1]),true)))))||((bridge$21884$21916 instanceof Array)&&((t0$21961=bridge$21884$21916.length),((t0$21961===2)&&((bridge$21884$21916[0]==="value")&&((x$21947=bridge$21884$21916[1]),true))))))))))))))))))))))))))){return tags$21872.push(["value",x$21947]);}else{if(($21896$21929&&((t1$21910[1]==="#")&&((t3$21912=$21883$21904[2]),((t3$21912 instanceof Array)&&((t4$21913=t3$21912.length),((t4$21913===3)&&((t3$21912[0]==="data")&&((t5$21914=t3$21912[1]),((t5$21914 instanceof Array)&&((t6$21915=t5$21914.length),((t6$21915===1)&&((t5$21914[0]==="void")&&((bridge$21885$21917=t3$21912[2]),(((bridge$21885$21917 instanceof Array)&&((t0$21975=bridge$21885$21917.length),((t0$21975===2)&&((bridge$21885$21917[0]==="symbol")&&((x$21967=bridge$21885$21917[1]),true)))))||((bridge$21885$21917 instanceof Array)&&((t0$21979=bridge$21885$21917.length),((t0$21979===2)&&((bridge$21885$21917[0]==="value")&&((x$21967=bridge$21885$21917[1]),true)))))))))))))))))))){return tags$21872.push(["value",("#"+x$21967)]);}else{if(($21896$21929&&((t1$21910[1]==="=")&&((t3$21912=$21883$21904[2]),((t3$21912 instanceof Array)&&((t4$21913=t3$21912.length),((t4$21913===3)&&((t3$21912[0]==="data")&&((bridge$21886$21918=t3$21912[1]),(((bridge$21886$21918 instanceof Array)&&((t0$21992=bridge$21886$21918.length),((t0$21992===2)&&((bridge$21886$21918[0]==="symbol")&&((prop$21985=bridge$21886$21918[1]),true)))))||((bridge$21886$21918 instanceof Array)&&((t0$21996=bridge$21886$21918.length),((t0$21996===2)&&((bridge$21886$21918[0]==="value")&&((prop$21985=bridge$21886$21918[1]),true))))))))))))))){(value$21986=t3$21912[2]);return tags$21872.push(["send",["send",["symbol","#"],["data",["void"],["symbol","assoc"]]],["data",["value",prop$21985],value$21986]]);}else{if($21891$21924){(expr$22002=$21883$21904[1]);(rest$22003=$21883$21904[2]);parse$21873(expr$22002);return parse$21873(rest$22003);}else{(bridge$21887$21919=$21883$21904);if((((bridge$21887$21919 instanceof Array)&&((t0$22012=bridge$21887$21919.length),((t0$22012>=1)&&((bridge$21887$21919[0]==="multi")&&((args$22009=Array.prototype.slice.call(bridge$21887$21919,1)),true)))))||((bridge$21887$21919 instanceof Array)&&((t0$22016=bridge$21887$21919.length),((t0$22016>=1)&&((bridge$21887$21919[0]==="data")&&((args$22009=Array.prototype.slice.call(bridge$21887$21919,1)),true))))))){return args$22009.forEach(parse$21873);}else{$23286($21883$21904);}}}}}}}}});parse$21873(descr$21862);(contents$21863=((($22023$22027=contents$21863)),function(){if((($22024$22034=($22023$22027 instanceof Array))&&((t0$22032=$22023$22027.length),((t0$22032===1)&&($22023$22027[0]==="void"))))){return ["data"];}else{if(($22024$22034&&((t0$22032>=1)&&($22023$22027[0]==="multi")))){(args$22043=Array.prototype.slice.call($22023$22027,1));return ["data"].concat(args$22043);}else{(x$22048=$22023$22027);return x$22048;}}}()));return ["send",["symbol","Node"],["data",tags$21872,contents$21863]];}),accum$21852)),((accum$22051=({})),((accum$22051["globals"]=function(context$22056,scope$22057,form$22058,$22054$22059){var t0$22063;var t1$22064;var t2$22065;var t3$22066;var t4$22067;var $index$22094;var $length$22089;var temp$22084;var acc$22079;var vars$22061;(t0$22063=$22054$22059);if(((t0$22063 instanceof Array)&&((t1$22064=t0$22063.length),((t1$22064===2)&&((t0$22063[0]==="data")&&((t2$22065=$23371(["multi"])(t0$22063[1])),(t2$22065[0]&&((t3$22066=t2$22065[1]),((t4$22067=t3$22066.length),(t4$22067>=0)))))))))){(vars$22061=Array.prototype.slice.call(t3$22066,0));}else{$23286($22054$22059);}return ["splice"].concat((((acc$22079=[])),(((temp$22084=vars$22061)),((($length$22089=temp$22084.length)),((($index$22094=0)),function(){$22076:for(;($index$22094<$length$22089);($index$22094++)){var variable$22112;var s$22113;var t0$22107;var t1$22108;var m$22102;(m$22102=temp$22084[$index$22094]);(t0$22107=m$22102);(variable$22112=t0$22107);if(((t0$22107 instanceof Array)&&((t1$22108=t0$22107.length),((t1$22108===2)&&(t0$22107[0]==="symbol"))))){(s$22113=t0$22107[1]);acc$22079.push(["declare_raw",variable$22112,["variable",s$22113]]);}else{$23286(m$22102,"/home/olivier/git/earl-grey/src/stdenv.eg",31130,31217);}}}()))),acc$22079));}),accum$22051)))))))))))))))))))))))))))))))))))))))))))))))))));($length$22121=temp$17674.length);($index$22126=0);$16519:for(;($index$22126<$length$22121);($index$22126++)){var k$22144;var v$22145;var t0$22139;var t1$22140;var m$22134;(m$22134=temp$17674[$index$22126]);(t0$22139=m$22134);if(((t0$22139 instanceof Array)&&((t1$22140=t0$22139.length),(t1$22140===2)))){(k$22144=t0$22139[0]);(v$22145=t0$22139[1]);stdenv$16486.bind(topscope$16490,k$22144,["macro",v$22145]);}else{$23286(m$22134,"/home/olivier/git/earl-grey/src/stdenv.eg",8219,8285);}}(blocktest_wrap$16509=function(expr$22154){return ["multi",["send",["symbol","="],["data",["symbol","value"],["send",["symbol","!!"],["data",["multi",["send",["symbol","match"],["data",expr$22154,["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","true"],["symbol","x"]]],["send",["send",["symbol","#"],["data",["void"],["symbol","success"]]],["data",["symbol","x"]]]]],["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","false"],["symbol","x"]]],["send",["send",["symbol","#"],["data",["void"],["symbol","failure"]]],["data",["symbol","x"]]]]]]]]],["send",["symbol","->"],["data",["symbol","e"],["send",["send",["symbol","#"],["data",["void"],["symbol","error"]]],["data",["symbol","e"]]]]]]]]],["send",["send",["symbol","acc"],["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["send",["send",["symbol","#"],["data",["void"],["symbol","test_result"]]],["data",["symbol","label"],["symbol","value"]]]]]];});(blocktest_mac$16510=function(scope$22160,tests$22161){var $index$22197;var $length$22192;var temp$22187;var acc$22182;var exptests$22164;var n$22165;var stmts$22166;(exptests$22164=$23264(scope$22160.step_all(["test"],tests$22161)));(n$22165=exptests$22164.length);(stmts$22166=(((acc$22182=[])),(((temp$22187=exptests$22164)),((($length$22192=temp$22187.length)),((($index$22197=0)),function(){$22175:for(;($index$22197<$length$22192);($index$22197++)){var wrap$22253;var fall$22254;var lbl$22275;var i$22270;var expr$22271;var i$22241;var elements$22242;var clauses$22243;var env$22244;var i$22231;var more_labels$22232;var more_tests$22233;var i$22221;var stmt$22222;var $22177$22215;var $22178$22216;var $22179$22217;var $22180$22218;var t0$22210;var t1$22211;var t2$22212;var t3$22213;var m$22205;(m$22205=temp$22187[$index$22197]);(t0$22210=m$22205);if((($22178$22216=(t0$22210 instanceof Array))&&((t1$22211=t0$22210.length),(($22180$22218=(t1$22211===2))&&((i$22221=t0$22210[0]),((t2$22212=t0$22210[1]),((t2$22212 instanceof Array)&&((t3$22213=t2$22212.length),((t3$22213===2)&&(t2$22212[0]==="do")))))))))){(stmt$22222=t2$22212[1]);acc$22182.push(stmt$22222);}else{if(($22180$22218&&((i$22231=t0$22210[0]),((t2$22212=t0$22210[1]),((t2$22212 instanceof Array)&&((t3$22213=t2$22212.length),((t3$22213===3)&&(t2$22212[0]==="blocktest")))))))){(more_labels$22232=t2$22212[1]);(more_tests$22233=t2$22212[2]);acc$22182.push(["send",["symbol","let"],["data",["send",["symbol","="],["data",["symbol","label"],["send",["send",["symbol","label"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",["send",["symbol","!"],["data",["symbol","Array"],more_labels$22232]]]]]],["send",["symbol",":="],["data",["symbol","acc"],["send",["send",["symbol","acc"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",blocktest_mac$16510(scope$22160,more_tests$22233)]]]]]]);}else{if(($22180$22218&&((i$22241=t0$22210[0]),((t2$22212=t0$22210[1]),((t2$22212 instanceof Array)&&((t3$22213=t2$22212.length),((t3$22213===3)&&((t2$22212[0]==="test_factory")&&((elements$22242=t2$22212[1]),((clauses$22243=t2$22212[2]),$23057(t2$22212,"env"))))))))))){(env$22244=t2$22212.env);acc$22182.push((((wrap$22253=function(expr$22258,index$22259){return ["send",["symbol","let"],["data",["send",["symbol","="],["data",["symbol","label"],["send",["send",["symbol","label"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",["data",index$22259]]]]],blocktest_wrap$16509(expr$22258)]];})),((fall$22254=function(target$22265){return match_error$16493(target$22265);})),build_loop$16506(scope$22160,env$22244,["void"],elements$22242,clauses$22243,wrap$22253,["splice"],["splice"],({"fallback":fall$22254}))));}else{if($22180$22218){(i$22270=t0$22210[0]);(expr$22271=t0$22210[1]);acc$22182.push((((lbl$22275=function(){if((n$22165===1)){return ["data"];}else{return ["data",["value",i$22270]];}}())),["send",["symbol","let"],["data",["send",["symbol","="],["data",["symbol","label"],["send",["send",["symbol","label"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",lbl$22275]]]],blocktest_wrap$16509(expr$22271)]]));}else{$23286(m$22205,"/home/olivier/git/earl-grey/src/stdenv.eg",31554,32360);}}}}}}()))),acc$22182));return ["send",["symbol","let"],["data",["send",["symbol","="],["data",["symbol","acc"],["data"]]],["send",["symbol","!!"],["data",["multi"].concat(stmts$22166).concat([["symbol","acc"]]),["send",["symbol","->"],["data",["symbol","e"],["send",["send",["symbol","acc"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",["data",["send",["send",["symbol","#"],["data",["void"],["symbol","error"]]],["data",["symbol","label"],["symbol","e"]]]]]]]]]]]];});stdenv$16486.bind(topscope$16490,"blocktest",["macro",function(context$22285,scope$22286,form$22287,$22283$22288){var t0$22295;var t1$22296;var labels$22325;var tests$22326;var tests$22316;var $22291$22312;var $22292$22313;var t0$22307;var t1$22308;var t2$22309;var t3$22310;var $22290$22302;var args$22293;(t0$22295=$22283$22288);if(((t0$22295 instanceof Array)&&((t1$22296=t0$22295.length),((t1$22296>=1)&&(t0$22295[0]==="data"))))){(args$22293=Array.prototype.slice.call(t0$22295,1));}else{$23286($22283$22288);}($22290$22302=args$22293);if((($22291$22312=($22290$22302 instanceof Array))&&((t0$22307=$22290$22302.length),((t0$22307===1)&&((t1$22308=$23371(["multi"])($22290$22302[0])),(t1$22308[0]&&((t2$22309=t1$22308[1]),((t3$22310=t2$22309.length),(t3$22310>=0))))))))){(tests$22316=Array.prototype.slice.call(t2$22309,0));return ["multi",["send",["symbol","="],["data",["symbol","label"],["data"]]],blocktest_mac$16510(scope$22286,tests$22316)];}else{if(($22291$22312&&((t0$22307===2)&&((labels$22325=$22290$22302[0]),((t1$22308=$23371(["multi"])($22290$22302[1])),(t1$22308[0]&&((t2$22309=t1$22308[1]),((t3$22310=t2$22309.length),(t3$22310>=0))))))))){(tests$22326=Array.prototype.slice.call(t2$22309,0));return ["multi",["send",["symbol","="],["data",["symbol","label"],["send",["symbol","!"],["data",["symbol","Array"],labels$22325]]]],blocktest_mac$16510(scope$22286,tests$22326)];}else{$23286($22290$22302);}}}]);(qqstruct$16511=function(name$22338,args$22339){return ["data",["value",name$22338]].concat(args$22339);});(qq$16512=function($22344$22346){var t0$22361;var $index$22455;var $length$22450;var temp$22445;var acc$22440;var name$22433;var args$22434;var insert$22424;var insert$22415;var insert$22404;var v$22399;var s$22389;var $22349$22378;var $22350$22379;var $22351$22380;var $22352$22381;var $22353$22382;var $22354$22383;var $22355$22384;var $22356$22385;var $22357$22386;var t0$22370;var t1$22371;var t2$22372;var t3$22373;var t4$22374;var t5$22375;var t6$22376;var $22348$22365;var ph$22358;var expr$22359;(t0$22361=$22344$22346);(expr$22359=t0$22361);(ph$22358=t0$22361);($22348$22365=ph$22358);if((($22349$22378=($22348$22365 instanceof Array))&&((t0$22370=$22348$22365.length),((t0$22370===2)&&($22348$22365[0]==="symbol"))))){(s$22389=$22348$22365[1]);return qqstruct$16511("symbol",[["value",s$22389]]);}else{if(($22349$22378&&((t0$22370===1)&&($22348$22365[0]==="void")))){return qqstruct$16511("void",[]);}else{if(($22349$22378&&((t0$22370===2)&&($22348$22365[0]==="value")))){(v$22399=$22348$22365[1]);return qqstruct$16511("value",[expr$22359]);}else{if(($22349$22378&&(($22351$22380=(t0$22370===3))&&(($22352$22381=($22348$22365[0]==="send"))&&((t1$22371=$22348$22365[1]),(($22354$22383=(t1$22371 instanceof Array))&&((t2$22372=t1$22371.length),(($22356$22385=(t2$22372===2))&&(($22357$22386=(t1$22371[0]==="symbol"))&&((t1$22371[1]==="^")&&((t3$22373=$22348$22365[2]),((t3$22373 instanceof Array)&&((t4$22374=t3$22373.length),((t4$22374===3)&&((t3$22373[0]==="data")&&((t5$22375=t3$22373[1]),((t5$22375 instanceof Array)&&((t6$22376=t5$22375.length),((t6$22376===1)&&(t5$22375[0]==="void")))))))))))))))))))){(insert$22404=t3$22373[2]);return insert$22404;}else{if(($22357$22386&&((t1$22371[1]==="^=")&&((t3$22373=$22348$22365[2]),((t3$22373 instanceof Array)&&((t4$22374=t3$22373.length),((t4$22374===3)&&((t3$22373[0]==="data")&&((t5$22375=t3$22373[1]),((t5$22375 instanceof Array)&&((t6$22376=t5$22375.length),((t6$22376===1)&&(t5$22375[0]==="void"))))))))))))){(insert$22415=t3$22373[2]);return qqstruct$16511("value",[insert$22415]);}else{if(($22357$22386&&((t1$22371[1]==="^*")&&((t3$22373=$22348$22365[2]),((t3$22373 instanceof Array)&&((t4$22374=t3$22373.length),((t4$22374===3)&&((t3$22373[0]==="data")&&((t5$22375=t3$22373[1]),((t5$22375 instanceof Array)&&((t6$22376=t5$22375.length),((t6$22376===1)&&(t5$22375[0]==="void"))))))))))))){(insert$22424=t3$22373[2]);return ["send",["symbol","*"],["data",["void"],insert$22424]];}else{if(($22349$22378&&(t0$22370>=1))){(name$22433=$22348$22365[0]);(args$22434=Array.prototype.slice.call($22348$22365,1));return qqstruct$16511(name$22433,(((acc$22440=[])),(((temp$22445=args$22434)),((($length$22450=temp$22445.length)),((($index$22455=0)),function(){$22437:for(;($index$22455<$length$22450);($index$22455++)){var arg$22471;var m$22463;(m$22463=temp$22445[$index$22455]);(arg$22471=m$22463);acc$22440.push(qq$16512(arg$22471));}}()))),acc$22440));}else{$23286($22348$22365);}}}}}}}});stdenv$16486.bind(topscope$16490,"'",["macro",function(context$22478,scope$22479,form$22480,$22476$22481){var t0$22485;var t1$22486;var t2$22487;var t3$22488;var expr$22483;(t0$22485=$22476$22481);if(((t0$22485 instanceof Array)&&((t1$22486=t0$22485.length),((t1$22486===3)&&((t0$22485[0]==="data")&&((t2$22487=t0$22485[1]),((t2$22487 instanceof Array)&&((t3$22488=t2$22487.length),((t3$22488===1)&&(t2$22487[0]==="void")))))))))){(expr$22483=t0$22485[2]);}else{$23286($22476$22481);}return qq$16512(expr$22483);}]);(RegexBuilder$16513=function(){var it$0$22500;(it$0$22500=function(){if((!$16400(RegexBuilder$16513)(this))){return Object.create(RegexBuilder$16513.prototype);}else{return this;}}());return it$0$22500;});(RegexBuilder$16513.prototype["wrap"]=function(x$22510){var self$22518;var it$0$22513;(it$0$22513=this);(self$22518=this);return (("(?:"+x$22510)+")");});(RegexBuilder$16513.prototype["quote"]=function(x$22525){var self$22533;var it$0$22528;(it$0$22528=this);(self$22533=this);return x$22525.replace(RegExp("([.?*+\\^$\\[\\]\\(\\)\\{\\}|\\\\])","g"),"\\$1");});(RegexBuilder$16513.prototype["quote_charset"]=function(x$22540){var self$22548;var it$0$22543;(it$0$22543=this);(self$22548=this);return x$22540.replace(RegExp("([\\[\\]\\(\\)\\{\\}\\^])","g"),"\\$1");});(RegexBuilder$16513.prototype["build"]=function(expr$22555){var t0$22702;var t1$22703;var t0$22714;var t1$22715;var t0$22726;var t1$22727;var t0$22739;var t1$22740;var t0$22746;var t1$22747;var x$22753;var v$22737;var t0$22764;var t1$22765;var t0$22771;var t1$22772;var t2$22773;var t3$22774;var t4$22775;var t5$22776;var t6$22777;var t7$22778;var t8$22779;var t9$22780;var x$22794;var v$22762;var $index$22831;var $length$22826;var temp$22821;var acc$22816;var $index$22880;var $length$22875;var temp$22870;var acc$22865;var other$22900;var args$22851;var args$22802;var a$22678;var b$22679;var $22565$22680;var s$22669;var x$22664;var $22564$22602;var $22566$22591;var $22567$22592;var $22568$22593;var $22569$22594;var $22570$22595;var $22571$22596;var $22572$22597;var $22573$22598;var $22574$22599;var t0$22585;var t1$22586;var t2$22587;var t3$22588;var t4$22589;var $22563$22580;var self$22575;var it$0$22558;(it$0$22558=this);(self$22575=this);($22563$22580=expr$22555);if((($22566$22591=($22563$22580 instanceof Array))&&((t0$22585=$22563$22580.length),(($22568$22593=(t0$22585===2))&&($22563$22580[0]==="symbol"))))){($22564$22602=$22563$22580[1]);if(($22564$22602==="any")){return ".";}else{if(($22564$22602==="start")){return "^";}else{if(($22564$22602==="end")){return "$";}else{if(($22564$22602==="alpha")){return "\\a";}else{if(($22564$22602==="digit")){return "\\d";}else{if(($22564$22602==="word")){return "\\w";}else{if(($22564$22602==="space")){return "\\s";}else{if(($22564$22602==="boundary")){return "\\b";}else{if(($22564$22602==="a")){return "\\a";}else{if(($22564$22602==="d")){return "\\d";}else{if(($22564$22602==="w")){return "\\w";}else{if(($22564$22602==="s")){return "\\s";}else{if(($22564$22602==="b")){return "\\b";}else{$23286($22564$22602,"/home/olivier/git/earl-grey/src/stdenv.eg",33654,33659);}}}}}}}}}}}}}}else{if(($22568$22593&&($22563$22580[0]==="value"))){(x$22664=$22563$22580[1]);return it$0$22558.quote(x$22664);}else{if(($22566$22591&&(($22568$22593=(t0$22585===3))&&(($22569$22594=($22563$22580[0]==="send"))&&((t1$22586=$22563$22580[1]),(($22571$22596=(t1$22586 instanceof Array))&&((t2$22587=t1$22586.length),(($22573$22598=(t2$22587===2))&&(($22574$22599=(t1$22586[0]==="symbol"))&&((t1$22586[1]==="raw")&&((t3$22588=$22563$22580[2]),((t3$22588 instanceof Array)&&((t4$22589=t3$22588.length),((t4$22589===2)&&(t3$22588[0]==="value"))))))))))))))){(s$22669=t3$22588[1]);return s$22669;}else{if(($22574$22599&&(($22565$22680=t1$22586[1]),((t3$22588=$22563$22580[2]),((t3$22588 instanceof Array)&&((t4$22589=t3$22588.length),((t4$22589===3)&&(t3$22588[0]==="data")))))))){(a$22678=t3$22588[1]);(b$22679=t3$22588[2]);if(($22565$22680==="||")){return it$0$22558.wrap(((it$0$22558.build(a$22678)+"|")+it$0$22558.build(b$22679)));}else{if(($22565$22680==="or")){return it$0$22558.wrap(((it$0$22558.build(a$22678)+"|")+it$0$22558.build(b$22679)));}else{if(($22565$22680==="*")){(t0$22702=a$22678);if(((t0$22702 instanceof Array)&&((t1$22703=t0$22702.length),((t1$22703===1)&&(t0$22702[0]==="void"))))){}else{$23286(a$22678,"/home/olivier/git/earl-grey/src/stdenv.eg",34326,34327);}return it$0$22558.wrap((it$0$22558.build(b$22679)+"*"));}else{if(($22565$22680==="+")){(t0$22714=a$22678);if(((t0$22714 instanceof Array)&&((t1$22715=t0$22714.length),((t1$22715===1)&&(t0$22714[0]==="void"))))){}else{$23286(a$22678,"/home/olivier/git/earl-grey/src/stdenv.eg",34410,34411);}return it$0$22558.wrap((it$0$22558.build(b$22679)+"+"));}else{if(($22565$22680==="?")){(t0$22726=a$22678);if(((t0$22726 instanceof Array)&&((t1$22727=t0$22726.length),((t1$22727===1)&&(t0$22726[0]==="void"))))){}else{$23286(a$22678,"/home/olivier/git/earl-grey/src/stdenv.eg",34494,34495);}return it$0$22558.wrap((it$0$22558.build(b$22679)+"?"));}else{if(($22565$22680==="in")){(t0$22739=a$22678);if(((t0$22739 instanceof Array)&&((t1$22740=t0$22739.length),((t1$22740===1)&&(t0$22739[0]==="void"))))){}else{$23286(a$22678,"/home/olivier/git/earl-grey/src/stdenv.eg",34579,34580);}(t0$22746=b$22679);if(((t0$22746 instanceof Array)&&((t1$22747=t0$22746.length),((t1$22747===2)&&(t0$22746[0]==="value"))))){(v$22737=t0$22746[1]);}else{$23286(b$22679,"/home/olivier/git/earl-grey/src/stdenv.eg",34608,34609);}(x$22753=it$0$22558.quote_charset(v$22737));return (("["+x$22753)+"]");}else{if(($22565$22680==="not")){(t0$22764=a$22678);if(((t0$22764 instanceof Array)&&((t1$22765=t0$22764.length),((t1$22765===1)&&(t0$22764[0]==="void"))))){}else{$23286(a$22678,"/home/olivier/git/earl-grey/src/stdenv.eg",34733,34734);}(t0$22771=b$22679);if(((t0$22771 instanceof Array)&&((t1$22772=t0$22771.length),((t1$22772===3)&&((t0$22771[0]==="send")&&((t2$22773=t0$22771[1]),((t2$22773 instanceof Array)&&((t3$22774=t2$22773.length),((t3$22774===2)&&((t2$22773[0]==="symbol")&&((t2$22773[1]==="in")&&((t4$22775=t0$22771[2]),((t4$22775 instanceof Array)&&((t5$22776=t4$22775.length),((t5$22776===3)&&((t4$22775[0]==="data")&&((t6$22777=t4$22775[1]),((t6$22777 instanceof Array)&&((t7$22778=t6$22777.length),((t7$22778===1)&&((t6$22777[0]==="void")&&((t8$22779=t4$22775[2]),((t8$22779 instanceof Array)&&((t9$22780=t8$22779.length),((t9$22780===2)&&(t8$22779[0]==="value")))))))))))))))))))))))))){(v$22762=t8$22779[1]);}else{$23286(b$22679,"/home/olivier/git/earl-grey/src/stdenv.eg",34800,34801);}(x$22794=it$0$22558.quote_charset(v$22762));return (("[^"+x$22794)+"]");}else{$23286($22565$22680,"/home/olivier/git/earl-grey/src/stdenv.eg",34118,34123);}}}}}}}}else{if(($22566$22591&&(($22568$22593=(t0$22585>=1))&&($22563$22580[0]==="data")))){(args$22802=Array.prototype.slice.call($22563$22580,1));return (("("+(((acc$22816=[])),(((temp$22821=args$22802)),((($length$22826=temp$22821.length)),((($index$22831=0)),function(){$22813:for(;($index$22831<$length$22826);($index$22831++)){var arg$22847;var m$22839;(m$22839=temp$22821[$index$22831]);(arg$22847=m$22839);acc$22816.push(it$0$22558.build(arg$22847));}}()))),acc$22816).join(""))+")");}else{if(($22568$22593&&($22563$22580[0]==="multi"))){(args$22851=Array.prototype.slice.call($22563$22580,1));return (("(?:"+(((acc$22865=[])),(((temp$22870=args$22851)),((($length$22875=temp$22870.length)),((($index$22880=0)),function(){$22862:for(;($index$22880<$length$22875);($index$22880++)){var arg$22896;var m$22888;(m$22888=temp$22870[$index$22880]);(arg$22896=m$22888);acc$22865.push(it$0$22558.build(arg$22896));}}()))),acc$22865).join(""))+")");}else{(other$22900=$22563$22580);return $23095(["syntax","regexp"]).create("Illegal regular expression",({"expr":expr$22555}));}}}}}}});$16416(RegexBuilder$16513,$16416(((accum$22903=({})),((accum$22903["::name"]="RegexBuilder"),accum$22903)),((accum$22907=({})),((accum$22907["::egclass"]=true),accum$22907))));RegexBuilder$16513;(build_regexp$16514=function(x$22913){return RegexBuilder$16513().build(x$22913);});(mac$22917=function(context$22922,scope$22923,form$22924,$22920$22925,flags$22926){var arg$22960;var v$22953;var $22929$22949;var $22930$22950;var t0$22941;var t1$22942;var t2$22943;var t3$22944;var t4$22945;var t5$22946;var t6$22947;var $22928$22936;var ph$22931;(ph$22931=$22920$22925);($22928$22936=ph$22931);if((($22929$22949=($22928$22936 instanceof Array))&&((t0$22941=$22928$22936.length),((t0$22941===2)&&(($22928$22936[0]==="value")&&((t1$22942=$22928$22936[1]),(typeof(t1$22942)==="string"))))))){(v$22953=t1$22942);return ["send",["symbol","RegExp"],["data",["value",v$22953],["value",flags$22926.join("")]]];}else{if(($22929$22949&&((t0$22941===3)&&(($22928$22936[0]==="send")&&((t1$22942=$22928$22936[1]),((t1$22942 instanceof Array)&&((t2$22943=t1$22942.length),((t2$22943===2)&&((t1$22942[0]==="symbol")&&((t1$22942[1]==="'")&&((t3$22944=$22928$22936[2]),((t3$22944 instanceof Array)&&((t4$22945=t3$22944.length),((t4$22945===3)&&((t3$22944[0]==="data")&&((t5$22946=t3$22944[1]),((t5$22946 instanceof Array)&&((t6$22947=t5$22946.length),((t6$22947===1)&&(t5$22946[0]==="void")))))))))))))))))))){(arg$22960=t3$22944[2]);return ["send",["symbol","RegExp"],["data",["value",build_regexp$16514(arg$22960)],["value",flags$22926.join("")]]];}else{$23286($22928$22936);}}});stdenv$16486.bind(topscope$16490,"R",["macro",accum_flags$16502(mac$22917,false)]);(errf_macro$16515=function(tags$22975){return function(context$22979,scope$22980,form$22981,$22977$22982){var other$23013;var args$23008;var $22985$22999;var $22986$23000;var t0$22997;var $22984$22992;var ph$22987;(ph$22987=$22977$22982);($22984$22992=ph$22987);if((($22985$22999=($22984$22992 instanceof Array))&&((t0$22997=$22984$22992.length),((t0$22997===1)&&($22984$22992[0]==="void"))))){return ["send",["symbol","ErrorFactory"],["data",["data"].concat(tags$22975)]];}else{if(($22985$22999&&((t0$22997>=1)&&($22984$22992[0]==="data")))){(args$23008=Array.prototype.slice.call($22984$22992,1));return ["send",["send",["send",["symbol","ErrorFactory"],["data",["data"].concat(tags$22975)]],["send",["symbol","."],["data",["void"],["symbol","create"]]]],["data"].concat(args$23008)];}else{(other$23013=$22984$22992);return ["macro",errf_macro$16515(tags$22975.concat([other$23013]))];}}};});stdenv$16486.bind(topscope$16490,"E",["macro",errf_macro$16515([])]);(temp$23018=$23399(({"___build_array":Embedded$16485(["send",["symbol","->"],["data",["data",["symbol","arrays"]],["multi",["send",["symbol","="],["data",["symbol","results"],["data"]]],["send",["symbol","each"],["data",["symbol","arrays"],["send",["symbol","->"],["data",["symbol","a"],["send",["symbol",":="],["data",["symbol","results"],["send",["send",["symbol","results"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",["symbol","a"]]]]]]]]],["symbol","results"]]]]),"object":Embedded$16485(["send",["symbol","->"],["data",["data",["symbol","pairs"]],["multi",["send",["symbol","="],["data",["symbol","rval"],["data",["symbol","="]]]],["send",["symbol","each"],["data",["symbol","pairs"],["send",["symbol","->"],["data",["data",["symbol","k"],["symbol","v"]],["send",["symbol",":="],["data",["send",["symbol","rval"],["symbol","k"]],["symbol","v"]]]]]]],["symbol","rval"]]]]),"items":Embedded$16485(["send",["symbol","->"],["data",["data",["symbol","obj"]],["multi",["send",["symbol","="],["data",["symbol","results"],["data"]]],["send",["symbol","for"],["data",["send",["symbol","in"],["data",["symbol","k"],["symbol","obj"]]],["send",["symbol","if"],["data",["send",["send",["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["send",["symbol","."],["data",["void"],["symbol","hasOwnProperty"]]]],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","obj"],["symbol","k"]]],["send",["send",["symbol","results"],["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["data",["symbol","k"],["send",["symbol","obj"],["symbol","k"]]]]]]]]],["symbol","results"]]]]),"keys":Embedded$16485(["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","keys"]]]]),"enumerate":Embedded$16485(["send",["symbol","->"],["data",["data",["symbol","arr"]],["multi",["send",["symbol","="],["data",["symbol","results"],["data"]]],["send",["symbol","="],["data",["symbol","l"],["send",["symbol","arr"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["send",["symbol","for"],["data",["multi",["send",["symbol","="],["data",["symbol","i"],["value",0]]],["send",["symbol","<"],["data",["symbol","i"],["symbol","l"]]],["send",["symbol","++"],["data",["symbol","i"],["void"]]]],["send",["send",["symbol","results"],["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["data",["symbol","i"],["send",["symbol","arr"],["symbol","i"]]]]]]],["symbol","results"]]]]),"zip":Embedded$16485(["send",["symbol","->"],["data",["data",["symbol","xs"],["symbol","ys"]],["send",["symbol","each"],["data",["send",["symbol","enumerate"],["data",["symbol","xs"]]],["send",["symbol","->"],["data",["data",["symbol","i"],["symbol","x"]],["data",["symbol","x"],["send",["symbol","ys"],["symbol","i"]]]]]]]]]),"predicate":Embedded$16485(["send",["symbol","->"],["data",["data",["symbol","f"]],["multi",["send",["symbol",":="],["data",["send",["symbol","f"],["value","::check"]],["symbol","f"]]],["symbol","f"]]]]),"___nequal":Embedded$16485(["send",["symbol","->"],["data",["data",["symbol","x"],["symbol","y"]],["send",["symbol","not"],["data",["void"],["send",["symbol","=="],["data",["symbol","x"],["symbol","y"]]]]]]]),"___equal":Embedded$16485(["send",["symbol","->"],["data",["data",["send",["symbol","match"],["symbol","a"]],["symbol","b"]],["multi",["send",["symbol","->"],["data",["send",["symbol","==="],["data",["void"],["symbol","b"]]],["symbol","true"]]],["send",["symbol","->"],["data",["send",["symbol","or"],["data",["send",["symbol","or"],["data",["send",["symbol","or"],["data",["send",["symbol","?"],["data",["symbol","Number"],["void"]]],["send",["symbol","?"],["data",["symbol","String"],["void"]]]]],["send",["symbol","?"],["data",["symbol","null"],["void"]]]]],["send",["symbol","?"],["data",["symbol","undefined"],["void"]]]]],["symbol","false"]]],["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","Array"],["void"]]],["multi",["send",["symbol","if"],["data",["send",["symbol","or"],["data",["send",["symbol","not"],["data",["void"],["send",["symbol","?"],["data",["symbol","Array"],["symbol","b"]]]]],["send",["symbol","!=="],["data",["send",["symbol","a"],["send",["symbol","."],["data",["void"],["symbol","length"]]]],["send",["symbol","b"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]]]],["send",["symbol","return"],["symbol","false"]]]],["send",["symbol","for"],["data",["multi",["send",["symbol","="],["data",["symbol","i"],["value",0]]],["send",["symbol","<"],["data",["symbol","i"],["send",["symbol","a"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["send",["symbol","++"],["data",["symbol","i"],["void"]]]],["send",["symbol","if"],["data",["send",["symbol","not"],["data",["void"],["send",["symbol","=="],["data",["send",["symbol","___js_fetch"],["data",["symbol","a"],["symbol","i"]]],["send",["symbol","___js_fetch"],["data",["symbol","b"],["symbol","i"]]]]]]],["send",["symbol","return"],["symbol","false"]]]]]],["symbol","true"]]]],["send",["symbol","->"],["data",["send",["symbol","when"],["data",["void"],["send",["symbol","and"],["data",["send",["symbol","==="],["data",["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","getPrototypeOf"]]]],["data",["symbol","a"]]],["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]],["send",["symbol","==="],["data",["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","getPrototypeOf"]]]],["data",["symbol","b"]]],["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]]]]]],["multi",["send",["symbol","="],["data",["symbol","ka"],["send",["symbol","keys"],["data",["symbol","a"]]]]],["send",["symbol","if"],["data",["send",["symbol","not"],["data",["void"],["send",["symbol","=="],["data",["send",["send",["symbol","ka"],["send",["symbol","."],["data",["void"],["symbol","sort"]]]],["data"]],["send",["send",["send",["symbol","keys"],["data",["symbol","b"]]],["send",["symbol","."],["data",["void"],["symbol","sort"]]]],["data"]]]]]],["send",["symbol","return"],["symbol","false"]]]],["send",["symbol","each"],["data",["symbol","ka"],["send",["symbol","->"],["data",["symbol","k"],["send",["symbol","if"],["data",["send",["symbol","not"],["data",["void"],["send",["symbol","=="],["data",["send",["symbol","___js_fetch"],["data",["symbol","a"],["symbol","k"]]],["send",["symbol","___js_fetch"],["data",["symbol","b"],["symbol","k"]]]]]]],["send",["symbol","return"],["symbol","false"]]]]]]]],["symbol","true"]]]],["send",["symbol","->"],["data",["data",["send",["symbol","=>"],["data",["value","::serialize"],["symbol","_"]]]],["send",["symbol","match"],["data",["symbol","b"],["multi",["send",["symbol","->"],["data",["data",["send",["symbol","=>"],["data",["value","::serialize"],["symbol","_"]]]],["send",["symbol","=="],["data",["send",["send",["symbol","a"],["value","::serialize"]],["data"]],["send",["send",["symbol","b"],["value","::serialize"]],["data"]]]]]],["send",["symbol","->"],["data",["symbol","otherwise"],["symbol","false"]]]]]]]],["send",["symbol","->"],["data",["symbol","otherwise"],["symbol","false"]]]]]]),"&:":Embedded$16485(["send",["symbol","->"],["data",["data",["symbol","dest"],["symbol","values"]],["multi",["send",["symbol","for"],["data",["send",["symbol","in"],["data",["symbol","k"],["symbol","values"]]],["send",["symbol","if"],["data",["send",["send",["symbol","values"],["send",["symbol","."],["data",["void"],["symbol","hasOwnProperty"]]]],["data",["symbol","k"]]],["send",["symbol",":="],["data",["send",["symbol","dest"],["symbol","k"]],["send",["symbol","___js_fetch"],["data",["symbol","values"],["symbol","k"]]]]]]]]],["symbol","dest"]]]]),"&":Embedded$16485(["send",["symbol","->"],["data",["data",["symbol","a"],["symbol","b"]],["multi",["send",["symbol","="],["data",["symbol","dest"],["send",["symbol","clone"],["data",["symbol","a"]]]]],["send",["symbol","for"],["data",["send",["symbol","in"],["data",["symbol","k"],["symbol","b"]]],["send",["symbol","if"],["data",["send",["send",["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["send",["symbol","."],["data",["void"],["symbol","hasOwnProperty"]]]],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","b"],["symbol","k"]]],["send",["symbol",":="],["data",["send",["symbol","dest"],["symbol","k"]],["send",["symbol","___js_fetch"],["data",["symbol","b"],["symbol","k"]]]]]]]]],["symbol","dest"]]]]),"&+":Embedded$16485(["send",["symbol","->"],["data",["data",["symbol","a"],["symbol","b"]],["multi",["send",["symbol","="],["data",["symbol","dest"],["send",["symbol","clone"],["data",["symbol","a"]]]]],["send",["symbol","for"],["data",["send",["symbol","in"],["data",["symbol","k"],["symbol","b"]]],["send",["symbol","if"],["data",["send",["send",["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["send",["symbol","."],["data",["void"],["symbol","hasOwnProperty"]]]],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","b"],["symbol","k"]]],["send",["symbol",":="],["data",["send",["symbol","dest"],["symbol","k"]],["send",["symbol","___js_fetch"],["data",["symbol","b"],["symbol","k"]]]]]]]]],["symbol","dest"]]]]),"|>":Embedded$16485(["send",["symbol","->"],["data",["data",["symbol","f"],["symbol","g"]],["send",["symbol","->"],["data",["data",["symbol","x"]],["send",["symbol","g"],["data",["send",["symbol","f"],["data",["symbol","x"]]]]]]]]]),"clone":Embedded$16485(["send",["symbol","->"],["data",["data",["send",["symbol","match"],["symbol","x"]]],["multi",["send",["symbol","->"],["data",["send",["symbol","or"],["data",["send",["symbol","or"],["data",["send",["symbol","or"],["data",["send",["symbol","?"],["data",["symbol","undefined"],["void"]]],["send",["symbol","?"],["data",["symbol","null"],["void"]]]]],["send",["symbol","?"],["data",["symbol","String"],["void"]]]]],["send",["symbol","?"],["data",["symbol","Number"],["void"]]]]],["symbol","x"]]],["send",["symbol","->"],["data",["data",["send",["symbol","=>"],["data",["value","::clone"],["symbol","_"]]]],["send",["send",["symbol","x"],["value","::clone"]],["data"]]]],["send",["symbol","->"],["data",["send",["symbol","when"],["data",["void"],["send",["symbol","==="],["data",["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","getPrototypeOf"]]]],["data",["symbol","x"]]],["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]]]],["multi",["send",["symbol","="],["data",["symbol","dest"],["data",["symbol","="]]]],["send",["symbol","for"],["data",["send",["symbol","in"],["data",["symbol","k"],["symbol","x"]]],["send",["symbol","if"],["data",["send",["send",["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["send",["symbol","."],["data",["void"],["symbol","hasOwnProperty"]]]],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","x"],["symbol","k"]]],["send",["symbol",":="],["data",["send",["symbol","dest"],["symbol","k"]],["send",["symbol","___js_fetch"],["data",["symbol","x"],["symbol","k"]]]]]]]]],["symbol","dest"]]]],["send",["symbol","->"],["data",["symbol","other"],["send",["symbol","throw"],["send",["send",["symbol","E"],["send",["symbol","."],["data",["void"],["symbol","clone"]]]],["data",["value","Object cannot be cloned"],["data",["send",["symbol","="],["data",["symbol","obj"],["symbol","x"]]]]]]]]]]]]),"___checker":Embedded$16485(["send",["symbol","->"],["data",["data",["symbol","type"]],["multi",["send",["symbol","="],["data",["symbol","f"],["send",["symbol","type"],["value","::check"]]]],["send",["symbol","if"],["data",["send",["symbol","==="],["data",["symbol","f"],["symbol","undefined"]]],["multi",["send",["symbol","then"],["data",["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["symbol","instanceof"],["data",["symbol","value"],["symbol","type"]]]]]]],["send",["symbol","else"],["data",["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["send",["symbol","f"],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","type"],["symbol","value"]]]]]]]]]]]]]),"___projector":Embedded$16485(["send",["symbol","->"],["data",["data",["symbol","type"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["multi",["send",["symbol","="],["data",["symbol","f"],["send",["symbol","type"],["value",":::project"]]]],["send",["symbol","if"],["data",["send",["symbol","==="],["data",["symbol","f"],["symbol","undefined"]]],["multi",["send",["symbol","then"],["data",["multi",["send",["symbol",":="],["data",["symbol","f"],["send",["symbol","type"],["value","::project"]]]],["send",["symbol","if"],["data",["send",["symbol","==="],["data",["symbol","f"],["symbol","undefined"]]],["multi",["send",["symbol","then"],["data",["data",["symbol","true"],["send",["symbol","type"],["data",["symbol","value"]]]]]],["send",["symbol","else"],["data",["send",["symbol","!!"],["data",["data",["symbol","true"],["send",["symbol","f"],["data",["symbol","value"]]]],["send",["symbol","->"],["data",["symbol","e"],["data",["symbol","false"],["symbol","null"]]]]]]]]]]]]]],["send",["symbol","else"],["data",["send",["send",["symbol","f"],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","type"],["symbol","value"]]]]]]]]]]]]]),"___hasprop":Embedded$16485(["send",["symbol","->"],["data",["data",["symbol","match"],["symbol","key"]],["multi",["send",["symbol","->"],["data",["send",["symbol","or"],["data",["send",["symbol","?"],["data",["symbol","null"],["void"]]],["send",["symbol","?"],["data",["symbol","undefined"],["void"]]]]],["symbol","false"]]],["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","String"],["symbol","x"]]],["send",["symbol","in"],["data",["symbol","key"],["send",["symbol","String"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]]]],["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","Number"],["symbol","x"]]],["send",["symbol","in"],["data",["symbol","key"],["send",["symbol","Number"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]]]],["send",["symbol","->"],["data",["symbol","x"],["send",["symbol","in"],["data",["symbol","key"],["symbol","x"]]]]]]]]),"range":Embedded$16485(["send",["symbol","->"],["data",["data",["symbol","from"],["symbol","to"]],["multi",["send",["symbol","="],["data",["symbol","rval"],["data"]]],["send",["symbol","for"],["data",["multi",["send",["symbol","="],["data",["symbol","i"],["symbol","from"]]],["send",["symbol","<="],["data",["symbol","i"],["symbol","to"]]],["send",["symbol","++"],["data",["symbol","i"],["void"]]]],["send",["send",["symbol","rval"],["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["symbol","i"]]]]],["symbol","rval"]]]]),"___serialize_ast":Embedded$16485(["send",["symbol","->"],["data",["data",["symbol","match"]],["multi",["send",["symbol","->"],["data",["send",["symbol","or"],["data",["send",["symbol","?"],["data",["symbol","String"],["symbol","x"]]],["send",["symbol","?"],["data",["symbol","Number"],["symbol","x"]]]]],["send",["send",["symbol","#"],["data",["void"],["symbol","value"]]],["data",["symbol","x"]]]]],["send",["symbol","->"],["data",["symbol","other"],["send",["send",["symbol","other"],["value","::serialize_ast"]],["data"]]]]]]]),"___match_error":Embedded$16485(["send",["symbol","->"],["data",["data",["symbol","value"],["symbol","url"],["symbol","start"],["symbol","end"]],["multi",["send",["symbol","="],["data",["symbol","err"],["send",["send",["symbol","E"],["send",["symbol","."],["data",["void"],["symbol","match"]]]],["data",["value","Could not find a match for value"],["data",["send",["symbol","="],["data",["symbol","value"],["symbol","value"]]]]]]]],["send",["symbol","if"],["data",["symbol","url"],["send",["symbol",":="],["data",["send",["symbol","err"],["send",["symbol","."],["data",["void"],["symbol","location"]]]],["send",["send",["symbol","#"],["data",["void"],["symbol","location"]]],["data",["symbol","url"],["symbol","start"],["symbol","end"]]]]]]],["send",["symbol","throw"],["symbol","err"]]]]]),"ErrorFactory":Embedded$16485(["send",["symbol","class"],["data",["multi",["send",["symbol","="],["data",["send",["symbol","constructor"],["data",["symbol","tags"]]],["send",["symbol",":="],["data",["send",["symbol","@"],["data",["void"],["symbol","tags"]]],["symbol","tags"]]]]],["send",["symbol","="],["data",["send",["symbol","create"],["data",["send",["symbol","="],["data",["symbol","message"],["value",""]]],["send",["symbol","*"],["data",["void"],["symbol","args"]]]]],["multi",["send",["symbol","="],["data",["symbol","e"],["send",["symbol","Error"],["data",["symbol","message"]]]]],["send",["symbol",":="],["data",["send",["symbol","e"],["value","::tags"]],["send",["symbol","@"],["data",["void"],["symbol","tags"]]]]],["send",["symbol",":="],["data",["send",["symbol","e"],["send",["symbol","."],["data",["void"],["symbol","args"]]]],["symbol","args"]]],["send",["symbol","each"],["data",["send",["symbol","enumerate"],["data",["symbol","args"]]],["send",["symbol","->"],["data",["data",["symbol","i"],["symbol","arg"]],["send",["symbol",":="],["data",["send",["symbol","e"],["symbol","i"]],["symbol","arg"]]]]]]],["send",["symbol",":="],["data",["send",["symbol","e"],["send",["symbol","."],["data",["void"],["symbol","length"]]]],["send",["symbol","args"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["send",["symbol",":="],["data",["send",["symbol","e"],["send",["symbol","."],["data",["void"],["symbol","name"]]]],["send",["send",["send",["symbol","++"],["data",["data",["send",["symbol","."],["data",["void"],["symbol","E"]]]],["send",["symbol","@"],["data",["void"],["symbol","tags"]]]]],["send",["symbol","."],["data",["void"],["symbol","join"]]]],["data",["value","."]]]]],["symbol","e"]]]],["send",["symbol","="],["data",["send",["value","::check"],["data",["symbol","e"]]],["multi",["send",["symbol","if"],["data",["send",["symbol","or"],["data",["send",["symbol","not"],["data",["void"],["symbol","e"]]],["send",["symbol","not"],["data",["void"],["send",["symbol","?"],["data",["symbol","Error"],["symbol","e"]]]]]]],["send",["symbol","return"],["symbol","false"]]]],["send",["symbol","="],["data",["symbol","tags"],["send",["symbol","or"],["data",["send",["symbol","e"],["value","::tags"]],["data"]]]]],["send",["symbol","each?"],["data",["send",["symbol","@"],["data",["void"],["symbol","tags"]]],["send",["symbol","->"],["data",["send",["symbol","when"],["data",["symbol","tag"],["send",["symbol","==="],["data",["send",["send",["symbol","tags"],["send",["symbol","."],["data",["void"],["symbol","indexOf"]]]],["data",["symbol","tag"]]],["send",["symbol","-"],["data",["void"],["value",1]]]]]]],["send",["symbol","return"],["symbol","false"]]]]]],["symbol","true"]]]],["send",["symbol","="],["data",["send",["value","::deconstruct"],["data",["symbol","e"]]],["send",["symbol","e"],["send",["symbol","."],["data",["void"],["symbol","args"]]]]]]]]]),"Node":Embedded$16485(["send",["symbol","class"],["data",["multi",["send",["symbol","static"],["data",["multi",["send",["symbol","="],["data",["send",["value","::check"],["data",["symbol","x"]]],["send",["symbol","and"],["data",["send",["symbol","and"],["data",["symbol","x"],["send",["symbol","x"],["send",["symbol","."],["data",["void"],["symbol","classes"]]]]]],["send",["symbol","x"],["send",["symbol","."],["data",["void"],["symbol","children"]]]]]]]],["send",["symbol","="],["data",["send",["value","::deconstruct"],["data",["symbol","x"]]],["data",["send",["symbol","x"],["send",["symbol","."],["data",["void"],["symbol","classes"]]]],["send",["symbol","x"],["send",["symbol","."],["data",["void"],["symbol","children"]]]]]]]]]],["send",["symbol","="],["data",["send",["symbol","constructor"],["data",["send",["symbol","!"],["data",["symbol","Array"],["symbol","classes"]]],["send",["symbol","!"],["data",["symbol","Array"],["symbol","children"]]]]],["multi",["send",["symbol",":="],["data",["send",["symbol","@"],["data",["void"],["symbol","classes"]]],["send",["send",["symbol","classes"],["send",["symbol","."],["data",["void"],["symbol","sort"]]]],["data"]]]],["send",["symbol",":="],["data",["send",["symbol","@"],["data",["void"],["symbol","children"]]],["symbol","children"]]]]]],["send",["symbol","="],["data",["send",["value","::check"],["data",["symbol","n"]]],["multi",["send",["symbol","each?"],["data",["send",["symbol","@"],["data",["void"],["symbol","classes"]]],["send",["symbol","->"],["data",["send",["symbol","when"],["data",["symbol","c"],["send",["symbol","==="],["data",["send",["send",["send",["symbol","n"],["send",["symbol","."],["data",["void"],["symbol","classes"]]]],["send",["symbol","."],["data",["void"],["symbol","indexOf"]]]],["data",["symbol","c"]]],["send",["symbol","-"],["data",["void"],["value",1]]]]]]],["send",["symbol","return"],["symbol","false"]]]]]],["symbol","true"]]]]]]])})));($length$23023=temp$23018.length);($index$23028=0);$16521:for(;($index$23028<$length$23023);($index$23028++)){var k$23046;var v$23047;var t0$23041;var t1$23042;var m$23036;(m$23036=temp$23018[$index$23028]);(t0$23041=m$23036);if(((t0$23041 instanceof Array)&&((t1$23042=t0$23041.length),(t1$23042===2)))){(k$23046=t0$23041[0]);(v$23047=t0$23041[1]);stdenv$16486.bind(topscope$16490,k$23046,["value",v$23047]);}else{$23286(m$23036,"/home/olivier/git/earl-grey/src/stdenv.eg",35885,35951);}}(stdprelude$16516=Embedded$16485(["multi",["send",["symbol","="],["data",["send",["symbol","send"],["data",["symbol","obj"],["send",["symbol","match"],["symbol","msg"]]]],["multi",["send",["symbol","->"],["data",["send",["symbol","or"],["data",["send",["symbol","?"],["data",["symbol","String"],["void"]]],["send",["symbol","?"],["data",["symbol","Number"],["void"]]]]],["send",["symbol","___js_fetch"],["data",["symbol","obj"],["symbol","msg"]]]]],["send",["symbol","->"],["data",["symbol","other"],["send",["send",["symbol","obj"],["value","::send"]],["data",["symbol","msg"]]]]]]]],["send",["symbol",":="],["data",["send",["symbol","Array"],["value",":::project"]],["send",["symbol","->"],["data",["data",["send",["symbol","match"],["symbol","value"]]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","Array"],["void"]]],["data",["symbol","true"],["symbol","value"]]]],["send",["symbol","->"],["data",["symbol","_"],["data",["symbol","true"],["data",["symbol","value"]]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value","::check"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["symbol","if"],["data",["send",["symbol","instanceof"],["data",["symbol","value"],["symbol","Array"]]],["multi",["send",["symbol","then"],["data",["multi",["send",["symbol","for"],["data",["multi",["send",["symbol","="],["data",["symbol","i"],["value",0]]],["send",["symbol","<"],["data",["symbol","i"],["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["send",["symbol","++"],["data",["symbol","i"],["void"]]]],["send",["symbol","if"],["data",["send",["symbol","!=="],["data",["send",["symbol","this"],["symbol","i"]],["send",["symbol","value"],["symbol","i"]]]],["send",["symbol","return"],["symbol","false"]]]]]],["symbol","true"]]]],["send",["symbol","else"],["data",["symbol","false"]]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value","::clone"]],["send",["symbol","->"],["data",["data"],["send",["symbol","&:"],["data",["send",["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","slice"]]]],["data",["value",0]]],["symbol","this"]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value",":::project"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["symbol","if"],["data",["send",["symbol","instanceof"],["data",["symbol","value"],["symbol","Array"]]],["multi",["send",["symbol","then"],["data",["multi",["send",["symbol","for"],["data",["multi",["send",["symbol","="],["data",["symbol","i"],["value",0]]],["send",["symbol","<"],["data",["symbol","i"],["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["send",["symbol","++"],["data",["symbol","i"],["void"]]]],["send",["symbol","if"],["data",["send",["symbol","!=="],["data",["send",["symbol","this"],["symbol","i"]],["send",["symbol","value"],["symbol","i"]]]],["send",["symbol","return"],["data",["symbol","true"],["data",["symbol","value"]]]]]]]],["data",["symbol","true"],["send",["send",["symbol","value"],["send",["symbol","."],["data",["void"],["symbol","slice"]]]],["data",["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]]]]]],["send",["symbol","else"],["data",["data",["symbol","true"],["data",["symbol","value"]]]]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value","::serialize_ast"]],["send",["symbol","->"],["data",["data"],["send",["send",["symbol","#"],["data",["void"],["symbol","array"]]],["data",["send",["symbol","*"],["data",["void"],["send",["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","map"]]]],["data",["symbol","___serialize_ast"]]]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","RegExp"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value","::check"]],["send",["symbol","->"],["data",["data",["symbol","match"]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","String"],["symbol","value"]]],["send",["symbol","if"],["data",["send",["send",["symbol","value"],["send",["symbol","."],["data",["void"],["symbol","match"]]]],["data",["symbol","this"]]],["symbol","true"],["symbol","false"]]]]],["send",["symbol","->"],["data",["symbol","other"],["symbol","false"]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","RegExp"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value",":::project"]],["send",["symbol","->"],["data",["data",["symbol","match"]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","String"],["symbol","value"]]],["send",["symbol","match"],["data",["send",["send",["symbol","value"],["send",["symbol","."],["data",["void"],["symbol","match"]]]],["data",["symbol","this"]]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","null"],["symbol","m"]]],["data",["symbol","false"],["symbol","null"]]]],["send",["symbol","->"],["data",["symbol","m"],["data",["symbol","true"],["symbol","m"]]]]]]]]],["send",["symbol","->"],["data",["symbol","other"],["data",["symbol","false"],["symbol","null"]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","Function"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value","::send"]],["send",["symbol","->"],["data",["data",["symbol","args"]],["send",["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","apply"]]]],["data",["symbol","this"],["symbol","args"]]]]]]]]));(expander$16488["utils"]=({"var_operator":var_operator$16501}));(exports["topscope"]=topscope$16490);(exports["stdenv"]=stdenv$16486);(exports["expander"]=expander$16488);(exports["expand"]=expand$16489);(exports["stdprelude"]=stdprelude$16516);

},{"./expand":5,"./location":7,"./pattern":10,"./pp":11,"./util":14}],13:[function(require,module,exports){
var $23623=function(type$23625){var f$23628;(f$23628=type$23625["::check"]);if((f$23628===(void 0))){return function(value$23633){return (value$23633 instanceof type$23625);};}else{return function(value$23636){return f$23628.call(type$23625,value$23636);};}};
var $23638=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $23639=function(dest$23641,values$23642){var k$23647;(k$23647=null);$23645:for(k$23647 in values$23642){if(values$23642.hasOwnProperty(k$23647)){(dest$23641[k$23647]=values$23642[k$23647]);}}return dest$23641;};
var $23651=function($23652$23654){var ph$23658;(ph$23658=$23652$23654);var $23656$23663;($23656$23663=ph$23658);var bridge$23657$23668;var x$23672;(bridge$23657$23668=$23656$23663);if((((typeof(bridge$23657$23668)==="string")&&((x$23672=bridge$23657$23668),true))||((typeof(bridge$23657$23668)==="number")&&((x$23672=bridge$23657$23668),true)))){return ["value",x$23672];}else{var other$23679;(other$23679=$23656$23663);return other$23679["::serialize_ast"]();}};
var send$23463;(send$23463=function(obj$23468,$23466$23469){var ph$23473;var msg$23474;var t0$23476;(t0$23476=$23466$23469);(msg$23474=t0$23476);(ph$23473=t0$23476);var $23471$23480;($23471$23480=ph$23473);var bridge$23472$23485;(bridge$23472$23485=$23471$23480);if(((typeof(bridge$23472$23485)==="string")||(typeof(bridge$23472$23485)==="number"))){return obj$23468[msg$23474];}else{var other$23493;(other$23493=$23471$23480);return obj$23468["::send"](msg$23474);}});(Array[":::project"]=function($23496$23498){var ph$23501;var value$23502;var t0$23504;(t0$23504=$23496$23498);(value$23502=t0$23504);(ph$23501=t0$23504);var $23500$23508;($23500$23508=ph$23501);if($23623(Array)($23500$23508)){return [true,value$23502];}else{$23500$23508;return [true,[value$23502]];}});(Array.prototype["::check"]=function(value$23522){if((value$23522 instanceof Array)){var i$23527;(i$23527=0);$23525:for(;(i$23527<this.length);(i$23527++)){if(($23638(this,i$23527)!==$23638(value$23522,i$23527))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $23639(this.slice(0),this);});(Array.prototype[":::project"]=function(value$23538){if((value$23538 instanceof Array)){var i$23543;(i$23543=0);$23541:for(;(i$23543<this.length);(i$23543++)){if(($23638(this,i$23543)!==$23638(value$23538,i$23543))){return [true,[value$23538]];}}return [true,value$23538.slice(this.length)];}else{return [true,[value$23538]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($23651));});(RegExp.prototype["::check"]=function($23553$23555){var ph$23558;(ph$23558=$23553$23555);var $23557$23563;($23557$23563=ph$23558);var value$23571;if((typeof($23557$23563)==="string")){(value$23571=$23557$23563);if(value$23571.match(this)){return true;}else{return false;}}else{var other$23576;(other$23576=$23557$23563);return false;}});(RegExp.prototype[":::project"]=function($23578$23580){var ph$23583;(ph$23583=$23578$23580);var $23582$23588;($23582$23588=ph$23583);var value$23596;if((typeof($23582$23588)==="string")){(value$23596=$23582$23588);var $23599$23601;($23599$23601=value$23596.match(this));var m$23609;if(($23599$23601===null)){(m$23609=$23599$23601);return [false,null];}else{var m$23614;(m$23614=$23599$23601);return [true,m$23614];}}else{var other$23618;(other$23618=$23582$23588);return [false,null];}});(Function.prototype["::send"]=function(args$23621){return this.apply(this,args$23621);});
var $25396=function(arr$25398){var results$25402;var l$25403;(results$25402=[]);(l$25403=arr$25398.length);var i$25411;(i$25411=0);$25401:for(;(i$25411<l$25403);(i$25411++)){results$25402.push([i$25411,$23638(arr$25398,i$25411)]);}return results$25402;};
var $25227=function(){var $25228$25230;($25228$25230=function(tags$25234){var it$0$25237;(it$0$25237=function(){if((!$23623($25228$25230)(this))){return Object.create($25228$25230.prototype);}else{return this;}}());(it$0$25237["tags"]=tags$25234);return it$0$25237;});($25228$25230.prototype["create"]=function(){var $25246$25248;($25246$25248=arguments);var t0$25253;var message$25257;var args$25258;(t0$25253=$25246$25248.length);if((t0$25253>=0)){(message$25257=function(){if((0>=t0$25253)){return "";}else{return $25246$25248[0];}}());(args$25258=Array.prototype.slice.call($25246$25248,1));var it$0$25262;(it$0$25262=this);var self$25267;(self$25267=this);var e$25272;(e$25272=Error(message$25257));(e$25272["::tags"]=it$0$25262.tags);(e$25272["args"]=args$25258);var temp$25280;(temp$25280=$25396(args$25258));var $length$25285;($length$25285=temp$25280.length);var $index$25290;($index$25290=0);$25273:for(;($index$25290<$length$25285);($index$25290++)){var m$25298;(m$25298=temp$25280[$index$25290]);var t0$25303;var t1$25304;var i$25308;var arg$25309;(t0$25303=m$25298);if(((t0$25303 instanceof Array)&&((t1$25304=t0$25303.length),(t1$25304===2)))){(i$25308=t0$25303[0]);(arg$25309=t0$25303[1]);(e$25272[i$25308]=arg$25309);}else{$25214(m$25298);}}(e$25272["length"]=args$25258.length);(e$25272["name"]=["E"].concat(it$0$25262.tags).join("."));return e$25272;}else{$25214($25246$25248);}});($25228$25230.prototype["::check"]=function(e$25320){var it$0$25323;(it$0$25323=this);var self$25328;(self$25328=this);var tags$25333;if(((!e$25320)||(!$23623(Error)(e$25320)))){return false;}(tags$25333=(e$25320["::tags"]||[]));var temp$25342;(temp$25342=it$0$25323.tags);var $length$25347;($length$25347=temp$25342.length);var $index$25352;($index$25352=0);$25334:for(;($index$25352<$length$25347);($index$25352++)){var m$25360;(m$25360=temp$25342[$index$25352]);var tag$25368;(tag$25368=m$25360);if((tags$25333.indexOf(tag$25368)===-1)){return false;}else{false;}}return true;});($25228$25230.prototype["::deconstruct"]=function(e$25376){var it$0$25379;(it$0$25379=this);var self$25384;(self$25384=this);return e$25376.args;});$23639($25228$25230,$23639(function(){var accum$25389;(accum$25389=({}));(accum$25389["::name"]="$25228");return accum$25389;}(),function(){var accum$25393;(accum$25393=({}));(accum$25393["::egclass"]=true);return accum$25393;}()));return $25228$25230;}();
var $25214=function(value$25216,url$25217,start$25218,end$25219){var err$25222;(err$25222=$25227(["match"]).create("Could not find a match for value",({"value":value$25216})));if(url$25217){(err$25222["location"]=["location",url$25217,start$25218,end$25219]);}throw err$25222;};
var $25418=function(type$25420){return function(value$25423){var f$25426;(f$25426=type$25420[":::project"]);if((f$25426===(void 0))){(f$25426=type$25420["::project"]);if((f$25426===(void 0))){return [true,type$25420(value$25423)];}else{var rval$25432;(rval$25432=false);try{(rval$25432=[true,f$25426(value$25423)]);}catch(excv$25438){var e$25444;(e$25444=excv$25438);(rval$25432=[false,null]);}return rval$25432;}}else{return f$25426.call(type$25420,value$25423);}};};
var $25446=function($25447$25449,key$25450){var ph$25454;(ph$25454=$25447$25449);var $25452$25459;($25452$25459=ph$25454);var bridge$25453$25464;(bridge$25453$25464=$25452$25459);if(((bridge$25453$25464===null)||(bridge$25453$25464===(void 0)))){return false;}else{var x$25472;if((typeof($25452$25459)==="string")){(x$25472=$25452$25459);return (key$25450 in String.prototype);}else{var x$25477;if((typeof($25452$25459)==="number")){(x$25477=$25452$25459);return (key$25450 in Number.prototype);}else{var x$25482;(x$25482=$25452$25459);return (key$25450 in x$25482);}}}};var accum$25190;var accum$25194;var $23683$23685;var gensym$23686;var $23684$23687;var __lt____gt__$23688;var js_op_table2$23689;var js_op_table$23690;var Translator$23691;var translate$23692;($23683$23685=require("./util"));(gensym$23686=$23683$23685.gensym);($23684$23687=require("./pp"));(__lt____gt__$23688=$23684$23687["<>"]);(js_op_table2$23689=({"+":"+","-":"-","*":"*","/":"/","mod":"%","&.":"&","|.":"|","^.":"^","~":"~","and":"&&","or":"||","not":"!","==":"===","!=":"!==","===":"===","!==":"!==","<":"<",">":">","<=":"<=",">=":">=","<<":"<<",">>":">>",">>>":">>>","in":" in ","instanceof":" instanceof ","++":"++","--":"--"}));(js_op_table$23690=({"___plus":"+","___minus":"-","___times":"*","___div":"/","___mod":"%","___binxor":"^","___binand":"&","___binor":"|","___binnot":"~","___and":"&&","___or":"||","___not":"!","___is":"===","___isnt":"!==","___eq":"===","___neq":"!==","___lt":"<","___gt":">","___lte":"<=","___gte":">=","___shl":"<<","___shr":">>","___shr2":">>>","___in":" in ","___instanceof":" instanceof ","___plusplus":"++","___minusminus":"--"}));(Translator$23691=function(){var it$0$23729;var prelude$23725;var t0$23721;var $23714$23716;($23714$23716=arguments);(t0$23721=$23714$23716.length);if(((t0$23721>=0)&&(t0$23721<=1))){(prelude$23725=function(){if((0>=t0$23721)){return null;}else{return $23714$23716[0];}}());(it$0$23729=function(){if((!$23623(Translator$23691)(this))){return Object.create(Translator$23691.prototype);}else{return this;}}());(it$0$23729["cache"]=({}));(it$0$23729["prepend"]=[]);if(prelude$23725){it$0$23729.prepend.push(it$0$23729.translate($23651(prelude$23725),"stmt"));}return it$0$23729;}else{$25214($23714$23716);}});(Translator$23691.prototype["register_value"]=function(v$23742,id$23743){var temp$23768;var name$23774;var $23751$23757;var self$23752;var it$0$23746;(it$0$23746=this);(self$23752=this);($23751$23757=$23638(it$0$23746.cache,id$23743));if(($23751$23757===(void 0))){(temp$23768=["symbol",gensym$23686()]);(it$0$23746.cache[id$23743]=temp$23768);it$0$23746.prepend.push(it$0$23746.translate(["declare",temp$23768,$23651(v$23742)],"stmt"));return temp$23768;}else{(name$23774=$23751$23757);return name$23774;}});(Translator$23691.prototype["register_raw"]=function(raw$23779,id$23780){var temp$23805;var name$23811;var $23788$23794;var self$23789;var it$0$23783;(it$0$23783=this);(self$23789=this);($23788$23794=$23638(it$0$23783.cache,id$23780));if(($23788$23794===(void 0))){(temp$23805=["symbol",gensym$23686()]);(it$0$23783.cache[id$23780]=temp$23805);it$0$23783.prepend.push(it$0$23783.translate(["declare",temp$23805,["raw",raw$23779]],"stmt"));return temp$23805;}else{(name$23811=$23788$23794);return name$23811;}});(Translator$23691.prototype["dump_store"]=function(){var rval$23828;var self$23823;var it$0$23818;(it$0$23818=this);(self$23823=this);(rval$23828=it$0$23818.prepend.join("\n"));(it$0$23818["prepend"]=[]);return rval$23828;});(Translator$23691.prototype["mangle"]=function(name$23835){var i$23858;var tr$23849;var r$23850;var self$23843;var it$0$23838;(it$0$23838=this);(self$23843=this);(tr$23849=({"+":"__plus__","-":"__minus__","*":"__asterisk__","/":"__slash__","%":"__percent__","^":"__caret__","#":"__hash__","&":"__amp__","|":"__pipe__","@":"__at__","!":"__bang__","?":"__qmark__","=":"__equal__","<":"__lt__",">":"__gt__","~":"__tilde__",".":"__dot__",":":"__colon__"}));(r$23850=[]);(i$23858=0);$23848:for(;(i$23858<name$23835.length);(++i$23858)){var c$23866;(c$23866=$23638(name$23835,i$23858));r$23850.push(($23638(tr$23849,c$23866)||c$23866));}return r$23850.join("");});(Translator$23691.prototype["body"]=function(orig$23873,mode$23874){var t0$23891;var t1$23892;var t2$23893;var x$23917;var stmts$23926;var ret$23927;var other$23940;var $23887$23906;var b$23888;var trst$23889;var self$23882;var it$0$23877;(it$0$23877=this);(self$23882=this);(t0$23891=$25418(["multi"])(orig$23873));if((t0$23891[0]&&((t1$23892=t0$23891[1]),((t2$23893=t1$23892.length),(t2$23893>=0))))){(b$23888=Array.prototype.slice.call(t1$23892,0));}else{$25214(orig$23873,"/home/olivier/git/earl-grey/src/translate-js.eg",3258,3262);}(trst$23889=function(stmt$23902){return it$0$23877.translate(stmt$23902,"stmt");});($23887$23906=mode$23874);if(($23887$23906==="expr")){(x$23917=["send",["lambda",[],orig$23873],["array"]]);return it$0$23877.translate(x$23917,mode$23874);}else{if(($23887$23906==="return")){(stmts$23926=b$23888.slice(0,-1));(ret$23927=$23638(b$23888,(b$23888.length-1)));return (stmts$23926.map(trst$23889).join("")+it$0$23877.translate(ret$23927,"return"));}else{if(($23887$23906==="stmt")){return b$23888.map(trst$23889).join("");}else{(other$23940=$23887$23906);throw $25227(["syntax","mode"]).create("Unknown mode",({"mode":mode$23874}));}}}});(Translator$23691.prototype["expr"]=function(x$23945,mode$23946){var other$23980;var $23954$23960;var self$23955;var it$0$23949;(it$0$23949=this);(self$23955=this);($23954$23960=mode$23946);if(($23954$23960==="expr")){return x$23945;}else{if(($23954$23960==="stmt")){return (x$23945+";");}else{if(($23954$23960==="return")){return (("return "+x$23945)+";");}else{(other$23980=$23954$23960);throw "OopsI";}}}});(Translator$23691.prototype["op"]=function(op$23985,a$23986,b$23987){var $24004$24017;var $24005$24018;var $24006$24019;var t0$24013;var t1$24014;var t2$24015;var $24003$24008;var e$24000;var self$23995;var it$0$23990;(it$0$23990=this);(self$23995=this);(e$24000=((($24003$24008=[a$23986,b$23987])),function(){if((($24004$24017=($24003$24008 instanceof Array))&&((t0$24013=$24003$24008.length),(($24006$24019=(t0$24013===2))&&((t1$24014=$24003$24008[0]),((t1$24014 instanceof Array)&&((t2$24015=t1$24014.length),((t2$24015===1)&&(t1$24014[0]==="void"))))))))){$24003$24008[1];return (op$23985+it$0$23990.translate(b$23987,"expr"));}else{if(($24006$24019&&($24003$24008[0],((t1$24014=$24003$24008[1]),((t1$24014 instanceof Array)&&((t2$24015=t1$24014.length),((t2$24015===1)&&(t1$24014[0]==="void")))))))){return (it$0$23990.translate(a$23986,"expr")+op$23985);}else{$24003$24008;return ((it$0$23990.translate(a$23986,"expr")+op$23985)+it$0$23990.translate(b$23987,"expr"));}}}()));return (("("+e$24000)+")");});(Translator$23691.prototype["translate"]=function(expr$24041,mode$24042){var repl$24117;var it$0$24148;var it$0$24143;var it$0$24138;var it$0$24133;var bridge$24103$24159;var bridge$24102$24156;var other$24170;var id$24164;var bridge$24101$24110;var $24100$24105;var r$24097;var t0$24189;var t0$24192;var trf$24198;var trmsg$24199;var trf$24230;var trmsg$24231;var trf$24243;var trmsg$24244;var otherwise$24240;var $24217$24219;var x$24287;var x$24281;var $24265$24276;var $24266$24277;var $24267$24278;var t0$24274;var $24264$24269;var $index$24320;var $length$24315;var temp$24310;var acc$24305;var trf$24295;var trargs$24296;var op$24261;var code$24352;var code$24360;var t0$24348;var t1$24349;var trf$24365;var trmsg$24366;var codevar$24346;var f$24383;var r$24379;var f$24437;var f$24469;var v$24464;var all_strings$24397;var r$24398;var $index$24534;var $length$24529;var temp$24524;var acc$24519;var a$24508;var b$24509;var name$24503;var a$24583;var b$24584;var other$24580;var $24566$24568;var a$24615;var b$24616;var c$24617;var other$24612;var $24598$24600;var a$24654;var other$24651;var bridge$24636$24643;var $24635$24638;var a$24683;var b$24684;var other$24680;var bridge$24665$24672;var $24664$24667;var a$24701;var b$24702;var c$24703;var a$24720;var b$24721;var $index$24810;var $length$24805;var temp$24800;var acc$24795;var $index$24847;var $length$24842;var temp$24837;var acc$24832;var xs$24789;var $24739$24779;var $24738$24773;var isdecl$24740;var $index$24909;var $length$24904;var temp$24899;var acc$24894;var decls$24888;var f$24938;var r$24934;var other$25021;var $25007$25009;var a$25046;var b$25047;var other$25043;var $25029$25031;var a$25079;var b$25080;var c$25081;var d$25082;var other$25076;var $25062$25064;var a$25119;var b$25120;var c$25121;var other$25116;var $25102$25104;var t0$25144;var t0$25148;var a$25172;var b$25173;var other$25169;var $25155$25157;var other$25187;var x$25182;var attempt$25133;var v$25134;var body$25135;var x$25097;var y$25098;var body$25099;var x$25056;var y$25057;var z$25058;var body$25059;var test$25025;var body$25026;var label$25001;var body$25002;var value$24996;var value$24991;var value$24986;var label$24979;var label$24972;var value$24967;var args$24930;var vars$24883;var body$24884;var s$24878;var args$24873;var args$24734;var lhs$24715;var rhs$24716;var obj$24693;var msg$24694;var rhs$24695;var binding$24660;var value$24661;var binding$24629;var test$24593;var pos$24594;var neg$24595;var test$24558;var pos$24559;var bindings$24498;var body$24499;var args$24393;var args$24375;var f$24341;var msg$24342;var f$24253;var args$24254;var f$24208;var msg$24209;var s$24210;var f$24184;var msg$24185;var f$24175;var v$24093;var s$24083;var $24053$24077;var $24054$24078;var $24055$24079;var $24056$24080;var t0$24067;var t1$24068;var t2$24069;var t3$24070;var t4$24071;var bridge$24051$24072;var bridge$24052$24073;var t5$24074;var t6$24075;var $24050$24062;var self$24057;var it$0$24045;(it$0$24045=this);(self$24057=this);($24050$24062=expr$24041);if((($24053$24077=($24050$24062 instanceof Array))&&((t0$24067=$24050$24062.length),((t0$24067===2)&&($24050$24062[0]==="symbol"))))){(s$24083=$24050$24062[1]);return it$0$24045.expr(it$0$24045.mangle(s$24083),mode$24042);}else{if(($24053$24077&&((t0$24067===1)&&($24050$24062[0]==="void")))){return it$0$24045.expr("null",mode$24042);}else{if(($24053$24077&&((t0$24067===2)&&($24050$24062[0]==="value")))){(v$24093=$24050$24062[1]);(r$24097=((($24100$24105=v$24093)),function(){if((typeof($24100$24105)==="string")){(repl$24117=({"\"":"\\\"","\n":"\\n","\\":"\\\\"}));(v$24093=v$24093.replace(RegExp("((?:(?:\"|\\\\)|\n))","g"),function(m$24122){return $23638(repl$24117,m$24122);}));return (("\""+v$24093)+"\"");}else{if(($24100$24105===(void 0))){return "(void 0)";}else{if($23623(RegExp)($24100$24105)){(it$0$24133=String(v$24093));(it$0$24138=it$0$24133.slice(1,-1));(it$0$24143=it$0$24138.replace(RegExp("/","g"),"\\/"));(it$0$24148=it$0$24143.replace(RegExp("\n","g"),"\\n"));return "/".concat(it$0$24148).concat("/");}else{(bridge$24101$24110=$24100$24105);if((((bridge$24102$24156=bridge$24101$24110),(((bridge$24103$24159=bridge$24102$24156),((typeof(bridge$24103$24159)==="number")||(bridge$24103$24159===true)))||(bridge$24102$24156===false)))||(bridge$24101$24110===null))){return String(v$24093);}else{if(($25446($24100$24105,"::id")&&((id$24164=$24100$24105["::id"]),id$24164))){return it$0$24045.translate(it$0$24045.register_value(v$24093,id$24164),mode$24042);}else{(other$24170=$24100$24105);throw $25227(["cannot_serialize"]).create("Cannot serialize value",({"value":v$24093}));}}}}}}()));return it$0$24045.expr(r$24097,mode$24042);}else{if(($24053$24077&&(($24055$24079=(t0$24067===3))&&(($24056$24080=($24050$24062[0]==="send"))&&((t1$24068=$24050$24062[1]),((t1$24068 instanceof Array)&&((t2$24069=t1$24068.length),((t2$24069===2)&&((t1$24068[0]==="variable")&&((t1$24068[1]==="___node")&&((t3$24070=$24050$24062[2]),((t3$24070 instanceof Array)&&((t4$24071=t3$24070.length),((t4$24071===2)&&(t3$24070[0]==="value"))))))))))))))){(f$24175=t3$24070[1]);return f$24175;}else{if(($24056$24080&&((bridge$24051$24072=$24050$24062[1]),((((bridge$24051$24072 instanceof Array)&&((t0$24189=bridge$24051$24072.length),((t0$24189===2)&&((bridge$24051$24072[0]==="symbol")&&(bridge$24051$24072[1]==="___js_fetch")))))||((bridge$24051$24072 instanceof Array)&&((t0$24192=bridge$24051$24072.length),((t0$24192===2)&&((bridge$24051$24072[0]==="variable")&&(bridge$24051$24072[1]==="___js_fetch"))))))&&((t1$24068=$24050$24062[2]),((t1$24068 instanceof Array)&&((t2$24069=t1$24068.length),((t2$24069===3)&&(t1$24068[0]==="array"))))))))){(f$24184=t1$24068[1]);(msg$24185=t1$24068[2]);(trf$24198=it$0$24045.translate(f$24184,"expr"));(trmsg$24199=it$0$24045.translate(msg$24185,"expr"));return it$0$24045.expr((((trf$24198+"[")+trmsg$24199)+"]"),mode$24042);}else{if(($24056$24080&&((f$24208=$24050$24062[1]),((t1$24068=$24050$24062[2]),((msg$24209=t1$24068),((t1$24068 instanceof Array)&&((t2$24069=t1$24068.length),((t2$24069===2)&&(t1$24068[0]==="value"))))))))){(s$24210=t1$24068[1]);($24217$24219=null);$24217$24219;if(((typeof(s$24210)==="string")&&s$24210.match(RegExp("(?:^(?:[a-zA-Z_$]+)$)","")))){(trf$24230=it$0$24045.translate(f$24208,"expr"));(trmsg$24231=it$0$24045.translate(["symbol",s$24210],"expr"));return it$0$24045.expr(((trf$24230+".")+trmsg$24231),mode$24042);}else{(otherwise$24240=$24217$24219);(trf$24243=it$0$24045.translate(f$24208,"expr"));(trmsg$24244=it$0$24045.translate(msg$24209,"expr"));return it$0$24045.expr((((trf$24243+"[")+trmsg$24244)+"]"),mode$24042);}}else{if(($24056$24080&&((f$24253=$24050$24062[1]),((t1$24068=$24050$24062[2]),((t1$24068 instanceof Array)&&((t2$24069=t1$24068.length),((t2$24069>=1)&&(t1$24068[0]==="array")))))))){(args$24254=Array.prototype.slice.call(t1$24068,1));(op$24261=((($24264$24269=f$24253)),function(){if((($24265$24276=($24264$24269 instanceof Array))&&((t0$24274=$24264$24269.length),(($24267$24278=(t0$24274===2))&&($24264$24269[0]==="symbol"))))){(x$24281=$24264$24269[1]);return $23638(js_op_table$23690,x$24281);}else{if(($24267$24278&&($24264$24269[0]==="variable"))){(x$24287=$24264$24269[1]);return $23638(js_op_table2$23689,x$24287);}else{$24264$24269;return null;}}}()));if(op$24261){return it$0$24045.expr(it$0$24045.op(op$24261,args$24254[0],args$24254[1]),mode$24042);}else{(trf$24295=it$0$24045.translate(f$24253,"expr"));(trargs$24296=(((acc$24305=[])),(((temp$24310=args$24254)),((($length$24315=temp$24310.length)),((($index$24320=0)),function(){$24302:for(;($index$24320<$length$24315);($index$24320++)){var x$24336;var m$24328;(m$24328=temp$24310[$index$24320]);(x$24336=m$24328);acc$24305.push(it$0$24045.translate(x$24336,"expr"));}}()))),acc$24305));return it$0$24045.expr((((trf$24295+"(")+trargs$24296.join(","))+")"),mode$24042);}}else{if($24056$24080){(f$24341=$24050$24062[1]);(msg$24342=$24050$24062[2]);(t0$24348=(((code$24352="(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}})")),it$0$24045.register_raw(code$24352,"~send")));if(((t0$24348 instanceof Array)&&((t1$24349=t0$24348.length),((t1$24349===2)&&(t0$24348[0]==="symbol"))))){(codevar$24346=t0$24348[1]);}else{$25214((((code$24360="(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}})")),it$0$24045.register_raw(code$24360,"~send")),"/home/olivier/git/earl-grey/src/translate-js.eg",6890,7100);}(trf$24365=it$0$24045.translate(f$24341,"expr"));(trmsg$24366=it$0$24045.translate(msg$24342,"expr"));return it$0$24045.expr((((((codevar$24346+"(")+trf$24365)+",")+trmsg$24366)+")"),mode$24042);}else{if(($24053$24077&&(($24055$24079=(t0$24067>=1))&&($24050$24062[0]==="array")))){(args$24375=Array.prototype.slice.call($24050$24062,1));(r$24379=(((f$24383=function(x$24387){return it$0$24045.translate(x$24387,"expr");})),(("["+args$24375.map(f$24383).join(","))+"]")));return it$0$24045.expr(r$24379,mode$24042);}else{if(($24055$24079&&($24050$24062[0]==="object"))){(args$24393=Array.prototype.slice.call($24050$24062,1));(all_strings$24397=args$24393.every(function($24401$24403){var t0$24409;var t1$24410;var other$24431;var v$24425;var t0$24421;var $24405$24416;var ph$24406;var y$24407;(t0$24409=$24401$24403);if(((t0$24409 instanceof Array)&&((t1$24410=t0$24409.length),((t1$24410===3)&&(t0$24409[0]==="array"))))){(ph$24406=t0$24409[1]);(y$24407=t0$24409[2]);}else{$25214($24401$24403);}($24405$24416=ph$24406);if((($24405$24416 instanceof Array)&&((t0$24421=$24405$24416.length),((t0$24421===2)&&($24405$24416[0]==="value"))))){(v$24425=$24405$24416[1]);return true;}else{(other$24431=$24405$24416);return false;}}));(r$24398=function(){if(all_strings$24397){(f$24437=function($24440$24442){var t0$24447;var t1$24448;var a$24454;var b$24455;var x$24444;var y$24445;(t0$24447=$24440$24442);if(((t0$24447 instanceof Array)&&((t1$24448=t0$24447.length),((t1$24448===3)&&(t0$24447[0]==="array"))))){(x$24444=t0$24447[1]);(y$24445=t0$24447[2]);}else{$25214($24440$24442);}(a$24454=it$0$24045.translate(x$24444,"expr"));(b$24455=it$0$24045.translate(y$24445,"expr"));return ((a$24454+":")+b$24455);});return (("({"+args$24393.map(f$24437).join(","))+"})");}else{(v$24464=gensym$23686());(f$24469=function($24472$24474){var t0$24479;var t1$24480;var a$24486;var b$24487;var x$24476;var y$24477;(t0$24479=$24472$24474);if(((t0$24479 instanceof Array)&&((t1$24480=t0$24479.length),((t1$24480===3)&&(t0$24479[0]==="array"))))){(x$24476=t0$24479[1]);(y$24477=t0$24479[2]);}else{$25214($24472$24474);}(a$24486=it$0$24045.translate(x$24476,"expr"));(b$24487=it$0$24045.translate(y$24477,"expr"));return (((((v$24464+"[")+a$24486)+"]=")+b$24487)+";");});return ((((((("(function(){"+"var ")+v$24464)+"={};")+args$24393.map(f$24469).join(""))+";return ")+v$24464)+";}())");}}());return it$0$24045.expr(r$24398,mode$24042);}else{if(($24053$24077&&((t0$24067===3)&&($24050$24062[0]==="lambda")))){(bindings$24498=$24050$24062[1]);(body$24499=$24050$24062[2]);(name$24503=function(){if($23623(RegExp("^[$_a-zA-Z]*$",""))(expr$24041.name)){return (expr$24041.name+" ");}else{return "";}}());(a$24508=(((acc$24519=[])),(((temp$24524=bindings$24498)),((($length$24529=temp$24524.length)),((($index$24534=0)),function(){$24516:for(;($index$24534<$length$24529);($index$24534++)){var x$24550;var m$24542;(m$24542=temp$24524[$index$24534]);(x$24550=m$24542);acc$24519.push(it$0$24045.translate(x$24550,"expr"));}}()))),acc$24519).join(","));(b$24509=it$0$24045.body(body$24499,"return"));return it$0$24045.expr((((((("function"+name$24503)+"(")+a$24508)+"){")+b$24509)+"}"),mode$24042);}else{if(($24053$24077&&(($24055$24079=(t0$24067===4))&&(($24056$24080=($24050$24062[0]==="if"))&&((test$24558=$24050$24062[1]),((pos$24559=$24050$24062[2]),((t1$24068=$24050$24062[3]),((t1$24068 instanceof Array)&&((t2$24069=t1$24068.length),((t2$24069===2)&&((t1$24068[0]==="value")&&(t1$24068[1]===(void 0))))))))))))){($24566$24568=mode$24042);if(($24566$24568==="expr")){return it$0$24045.body(expr$24041,"expr");}else{(other$24580=$24566$24568);(a$24583=it$0$24045.translate(test$24558,"expr"));(b$24584=it$0$24045.translate(pos$24559,mode$24042));return (((("if("+a$24583)+"){")+b$24584)+"}");}}else{if($24056$24080){(test$24593=$24050$24062[1]);(pos$24594=$24050$24062[2]);(neg$24595=$24050$24062[3]);($24598$24600=mode$24042);if(($24598$24600==="expr")){return it$0$24045.body(expr$24041,"expr");}else{(other$24612=$24598$24600);(a$24615=it$0$24045.translate(test$24593,"expr"));(b$24616=it$0$24045.translate(pos$24594,mode$24042));(c$24617=it$0$24045.translate(neg$24595,mode$24042));return (((((("if("+a$24615)+"){")+b$24616)+"}else{")+c$24617)+"}");}}else{if(($24053$24077&&(($24055$24079=(t0$24067===3))&&(($24056$24080=($24050$24062[0]==="declare"))&&((binding$24629=$24050$24062[1]),((t1$24068=$24050$24062[2]),((t1$24068 instanceof Array)&&((t2$24069=t1$24068.length),((t2$24069===2)&&((t1$24068[0]==="value")&&(t1$24068[1]===(void 0)))))))))))){($24635$24638=mode$24042);(bridge$24636$24643=$24635$24638);if(((bridge$24636$24643==="expr")||(bridge$24636$24643==="return"))){throw "Invalid in expr ctx";}else{(other$24651=$24635$24638);(a$24654=it$0$24045.translate(binding$24629,"expr"));return (("var "+a$24654)+";");}}else{if($24056$24080){(binding$24660=$24050$24062[1]);(value$24661=$24050$24062[2]);($24664$24667=mode$24042);(bridge$24665$24672=$24664$24667);if(((bridge$24665$24672==="expr")||(bridge$24665$24672==="return"))){throw "Invalid in expr ctx";}else{(other$24680=$24664$24667);(a$24683=it$0$24045.translate(binding$24660,"expr"));(b$24684=it$0$24045.translate(value$24661,"expr"));return (((("var "+a$24683)+"=")+b$24684)+";");}}else{if(($24055$24079&&(($24056$24080=($24050$24062[0]==="assign"))&&((t1$24068=$24050$24062[1]),((t1$24068 instanceof Array)&&((t2$24069=t1$24068.length),((t2$24069===3)&&(t1$24068[0]==="send")))))))){(obj$24693=t1$24068[1]);(msg$24694=t1$24068[2]);(rhs$24695=$24050$24062[2]);(a$24701=it$0$24045.translate(obj$24693,"expr"));(b$24702=it$0$24045.translate(msg$24694,"expr"));(c$24703=it$0$24045.translate(rhs$24695,"expr"));return it$0$24045.expr((((((("("+a$24701)+"[")+b$24702)+"]=")+c$24703)+")"),mode$24042);}else{if($24056$24080){(lhs$24715=$24050$24062[1]);(rhs$24716=$24050$24062[2]);(a$24720=it$0$24045.translate(lhs$24715,"expr"));(b$24721=it$0$24045.translate(rhs$24716,"expr"));return it$0$24045.expr((((("("+a$24720)+"=")+b$24721)+")"),mode$24042);}else{if(($24053$24077&&((t0$24067===1)&&($24050$24062[0]==="multi")))){return "";}else{if(($24053$24077&&(($24055$24079=(t0$24067>=1))&&($24050$24062[0]==="multi")))){(args$24734=Array.prototype.slice.call($24050$24062,1));(isdecl$24740=function($24743$24745){var other$24769;var variable$24762;var value$24763;var t0$24758;var $24747$24753;var ph$24748;(ph$24748=$24743$24745);($24747$24753=ph$24748);if((($24747$24753 instanceof Array)&&((t0$24758=$24747$24753.length),((t0$24758===3)&&($24747$24753[0]==="declare"))))){(variable$24762=$24747$24753[1]);(value$24763=$24747$24753[2]);return true;}else{(other$24769=$24747$24753);return false;}});($24738$24773=null);$24738$24773;if((args$24734.length===1)){return it$0$24045.translate(args$24734[0],mode$24042);}else{if(((mode$24042==="expr")&&(!args$24734.some(isdecl$24740)))){(xs$24789=(((acc$24795=[])),(((temp$24800=args$24734)),((($length$24805=temp$24800.length)),((($index$24810=0)),function(){$24792:for(;($index$24810<$length$24805);($index$24810++)){var x$24826;var m$24818;(m$24818=temp$24800[$index$24810]);(x$24826=m$24818);acc$24795.push(it$0$24045.translate(x$24826,"expr"));}}()))),acc$24795));(xs$24789=(((acc$24832=[])),(((temp$24837=xs$24789)),((($length$24842=temp$24837.length)),((($index$24847=0)),function(){$24829:for(;($index$24847<$length$24842);($index$24847++)){var x$24863;var m$24855;(m$24855=temp$24837[$index$24847]);(x$24863=m$24855);if((x$24863!=="")){acc$24832.push(x$24863);}else{false;}}}()))),acc$24832));return (("("+xs$24789.join(","))+")");}else{return it$0$24045.body(expr$24041,mode$24042);}}}else{if(($24055$24079&&($24050$24062[0]==="splice"))){(args$24873=Array.prototype.slice.call($24050$24062,1));return it$0$24045.translate(["multi"].concat(args$24873),mode$24042);}else{if(($24053$24077&&((t0$24067===2)&&($24050$24062[0]==="variable")))){(s$24878=$24050$24062[1]);return it$0$24045.expr(it$0$24045.mangle(s$24878),mode$24042);}else{if(($24053$24077&&((t0$24067===3)&&($24050$24062[0]==="scope")))){(vars$24883=$24050$24062[1]);(body$24884=$24050$24062[2]);(decls$24888=(((acc$24894=[])),(((temp$24899=vars$24883)),((($length$24904=temp$24899.length)),((($index$24909=0)),function(){$24891:for(;($index$24909<$length$24904);($index$24909++)){var v$24925;var m$24917;(m$24917=temp$24899[$index$24909]);(v$24925=m$24917);acc$24894.push(["declare",v$24925,["value",(void 0)]]);}}()))),acc$24894));return it$0$24045.translate(["multi"].concat(decls$24888).concat([body$24884]),mode$24042);}else{if(($24053$24077&&((t0$24067>=1)&&($24050$24062[0]==="object2")))){(args$24930=Array.prototype.slice.call($24050$24062,1));(r$24934=(((f$24938=function($24941$24943){var t0$24948;var t1$24949;var a$24955;var b$24956;var x$24945;var y$24946;(t0$24948=$24941$24943);if(((t0$24948 instanceof Array)&&((t1$24949=t0$24948.length),(t1$24949===2)))){(x$24945=t0$24948[0]);(y$24946=t0$24948[1]);}else{$25214($24941$24943);}(a$24955=it$0$24045.translate(x$24945,"expr"));(b$24956=it$0$24045.translate(y$24946,"expr"));return ((a$24955+":")+b$24956);})),(("({"+args$24930.map(f$24938).join(","))+"})")));return it$0$24045.expr(r$24934,mode$24042);}else{if(($24053$24077&&((t0$24067===2)&&($24050$24062[0]==="js_new")))){(value$24967=$24050$24062[1]);return it$0$24045.expr((("(new "+it$0$24045.translate(value$24967,"expr"))+")"),mode$24042);}else{if(($24053$24077&&(($24055$24079=((t0$24067>=1)&&(t0$24067<=2)))&&(($24050$24062[0]==="js_break")&&((t1$24068=function(){if((1>=t0$24067)){return ["value",null];}else{return $24050$24062[1];}}()),((t1$24068 instanceof Array)&&((t2$24069=t1$24068.length),((t2$24069===2)&&(t1$24068[0]==="value"))))))))){(label$24972=t1$24068[1]);if((mode$24042==="expr")){throw "Invalid break in ctx";}else{return (("break"+function(){if(label$24972){return (" "+label$24972);}else{return "";}}())+";");}}else{if(($24055$24079&&(($24050$24062[0]==="js_continue")&&((t1$24068=function(){if((1>=t0$24067)){return ["value",null];}else{return $24050$24062[1];}}()),((t1$24068 instanceof Array)&&((t2$24069=t1$24068.length),((t2$24069===2)&&(t1$24068[0]==="value")))))))){(label$24979=t1$24068[1]);if((mode$24042==="expr")){throw "Invalid continue in ctx";}else{return (("continue"+function(){if(label$24979){return (" "+label$24979);}else{return "";}}())+";");}}else{if(($24053$24077&&(($24055$24079=(t0$24067===2))&&($24050$24062[0]==="js_return")))){(value$24986=$24050$24062[1]);if((mode$24042==="expr")){throw "Invalid return in ctx";}else{return (("return "+it$0$24045.translate(value$24986,"expr"))+";");}}else{if(($24055$24079&&($24050$24062[0]==="js_delete"))){(value$24991=$24050$24062[1]);if((mode$24042==="expr")){throw "Invalid delete in ctx";}else{return (("delete "+it$0$24045.translate(value$24991,"expr"))+";");}}else{if(($24055$24079&&($24050$24062[0]==="js_throw"))){(value$24996=$24050$24062[1]);if((mode$24042==="expr")){return (("function(){throw "+it$0$24045.translate(value$24996,"expr"))+";}()");}else{return (("throw "+it$0$24045.translate(value$24996,"expr"))+";");}}else{if(($24053$24077&&(($24055$24079=(t0$24067===3))&&(($24050$24062[0]==="js_label")&&((t1$24068=$24050$24062[1]),((t1$24068 instanceof Array)&&((t2$24069=t1$24068.length),((t2$24069===2)&&(t1$24068[0]==="value"))))))))){(label$25001=t1$24068[1]);(body$25002=$24050$24062[2]);($25007$25009=mode$24042);if(($25007$25009==="expr")){return it$0$24045.body(expr$24041,"expr");}else{(other$25021=$25007$25009);return ((label$25001+":")+it$0$24045.translate(body$25002,other$25021));}}else{if(($24055$24079&&($24050$24062[0]==="js_while"))){(test$25025=$24050$24062[1]);(body$25026=$24050$24062[2]);($25029$25031=mode$24042);if(($25029$25031==="expr")){return it$0$24045.body(expr$24041,"expr");}else{(other$25043=$25029$25031);(a$25046=it$0$24045.translate(test$25025,"expr"));(b$25047=it$0$24045.translate(body$25026,"stmt"));return (((("while("+a$25046)+"){")+b$25047)+"}");}}else{if(($24053$24077&&((t0$24067===5)&&($24050$24062[0]==="js_for")))){(x$25056=$24050$24062[1]);(y$25057=$24050$24062[2]);(z$25058=$24050$24062[3]);(body$25059=$24050$24062[4]);($25062$25064=mode$24042);if(($25062$25064==="expr")){return it$0$24045.body(expr$24041,"expr");}else{(other$25076=$25062$25064);(a$25079=it$0$24045.translate(x$25056,"expr"));(b$25080=it$0$24045.translate(y$25057,"expr"));(c$25081=it$0$24045.translate(z$25058,"expr"));(d$25082=it$0$24045.translate(body$25059,"stmt"));return (((((((("for("+a$25079)+";")+b$25080)+";")+c$25081)+"){")+d$25082)+"}");}}else{if(($24053$24077&&(($24055$24079=(t0$24067===4))&&($24050$24062[0]==="js_for_in")))){(x$25097=$24050$24062[1]);(y$25098=$24050$24062[2]);(body$25099=$24050$24062[3]);($25102$25104=mode$24042);if(($25102$25104==="expr")){return it$0$24045.body(expr$24041,"expr");}else{(other$25116=$25102$25104);(a$25119=it$0$24045.translate(x$25097,"expr"));(b$25120=it$0$24045.translate(y$25098,"expr"));(c$25121=it$0$24045.translate(body$25099,"stmt"));return (((((("for("+a$25119)+" in ")+b$25120)+"){")+c$25121)+"}");}}else{if(($24055$24079&&(($24050$24062[0]==="js_try")&&((attempt$25133=$24050$24062[1]),((t1$24068=$24050$24062[2]),((t1$24068 instanceof Array)&&((t2$24069=t1$24068.length),((t2$24069===3)&&((t1$24068[0]==="lambda")&&((t3$24070=t1$24068[1]),((t3$24070 instanceof Array)&&((t4$24071=t3$24070.length),((t4$24071===1)&&((bridge$24052$24073=t3$24070[0]),((((bridge$24052$24073 instanceof Array)&&((t0$25144=bridge$24052$24073.length),((t0$25144===2)&&((bridge$24052$24073[0]==="symbol")&&((v$25134=bridge$24052$24073[1]),true)))))||((bridge$24052$24073 instanceof Array)&&((t0$25148=bridge$24052$24073.length),((t0$25148===2)&&((bridge$24052$24073[0]==="variable")&&((v$25134=bridge$24052$24073[1]),true))))))&&((body$25135=t1$24068[2]),((t5$24074=$24050$24062[3]),((t5$24074 instanceof Array)&&((t6$24075=t5$24074.length),((t6$24075===1)&&(t5$24074[0]==="void"))))))))))))))))))))){($25155$25157=mode$24042);if(($25155$25157==="expr")){return it$0$24045.body(expr$24041,"expr");}else{(other$25169=$25155$25157);(a$25172=it$0$24045.translate(attempt$25133,"stmt"));(b$25173=it$0$24045.translate(body$25135,"stmt"));return (((((("try{"+a$25172)+"}catch(")+v$25134)+"){")+b$25173)+"}");}}else{if(($24053$24077&&((t0$24067===2)&&($24050$24062[0]==="raw")))){(x$25182=$24050$24062[1]);return x$25182;}else{(other$25187=$24050$24062);throw other$25187;}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}});$23639(Translator$23691,$23639(((accum$25190=({})),((accum$25190["::name"]="Translator"),accum$25190)),((accum$25194=({})),((accum$25194["::egclass"]=true),accum$25194))));Translator$23691;(translate$23692=function(expr$25200,mode$25201){var tr$25204;var t$25205;(tr$25204=Translator$23691());(t$25205=tr$25204.translate(expr$25200,mode$25201));return (tr$25204.dump_store()+t$25205);});(exports["Translator"]=Translator$23691);(exports["translate"]=translate$23692);

},{"./pp":11,"./util":14}],14:[function(require,module,exports){
var $25645=function(type$25647){var f$25650;(f$25650=type$25647["::check"]);if((f$25650===(void 0))){return function(value$25655){return (value$25655 instanceof type$25647);};}else{return function(value$25658){return f$25650.call(type$25647,value$25658);};}};
var $25660=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $25661=function(dest$25663,values$25664){var k$25669;(k$25669=null);$25667:for(k$25669 in values$25664){if(values$25664.hasOwnProperty(k$25669)){(dest$25663[k$25669]=values$25664[k$25669]);}}return dest$25663;};
var $25673=function($25674$25676){var ph$25680;(ph$25680=$25674$25676);var $25678$25685;($25678$25685=ph$25680);var bridge$25679$25690;var x$25694;(bridge$25679$25690=$25678$25685);if((((typeof(bridge$25679$25690)==="string")&&((x$25694=bridge$25679$25690),true))||((typeof(bridge$25679$25690)==="number")&&((x$25694=bridge$25679$25690),true)))){return ["value",x$25694];}else{var other$25701;(other$25701=$25678$25685);return other$25701["::serialize_ast"]();}};
var send$25485;(send$25485=function(obj$25490,$25488$25491){var ph$25495;var msg$25496;var t0$25498;(t0$25498=$25488$25491);(msg$25496=t0$25498);(ph$25495=t0$25498);var $25493$25502;($25493$25502=ph$25495);var bridge$25494$25507;(bridge$25494$25507=$25493$25502);if(((typeof(bridge$25494$25507)==="string")||(typeof(bridge$25494$25507)==="number"))){return obj$25490[msg$25496];}else{var other$25515;(other$25515=$25493$25502);return obj$25490["::send"](msg$25496);}});(Array[":::project"]=function($25518$25520){var ph$25523;var value$25524;var t0$25526;(t0$25526=$25518$25520);(value$25524=t0$25526);(ph$25523=t0$25526);var $25522$25530;($25522$25530=ph$25523);if($25645(Array)($25522$25530)){return [true,value$25524];}else{$25522$25530;return [true,[value$25524]];}});(Array.prototype["::check"]=function(value$25544){if((value$25544 instanceof Array)){var i$25549;(i$25549=0);$25547:for(;(i$25549<this.length);(i$25549++)){if(($25660(this,i$25549)!==$25660(value$25544,i$25549))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $25661(this.slice(0),this);});(Array.prototype[":::project"]=function(value$25560){if((value$25560 instanceof Array)){var i$25565;(i$25565=0);$25563:for(;(i$25565<this.length);(i$25565++)){if(($25660(this,i$25565)!==$25660(value$25560,i$25565))){return [true,[value$25560]];}}return [true,value$25560.slice(this.length)];}else{return [true,[value$25560]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($25673));});(RegExp.prototype["::check"]=function($25575$25577){var ph$25580;(ph$25580=$25575$25577);var $25579$25585;($25579$25585=ph$25580);var value$25593;if((typeof($25579$25585)==="string")){(value$25593=$25579$25585);if(value$25593.match(this)){return true;}else{return false;}}else{var other$25598;(other$25598=$25579$25585);return false;}});(RegExp.prototype[":::project"]=function($25600$25602){var ph$25605;(ph$25605=$25600$25602);var $25604$25610;($25604$25610=ph$25605);var value$25618;if((typeof($25604$25610)==="string")){(value$25618=$25604$25610);var $25621$25623;($25621$25623=value$25618.match(this));var m$25631;if(($25621$25623===null)){(m$25631=$25621$25623);return [false,null];}else{var m$25636;(m$25636=$25621$25623);return [true,m$25636];}}else{var other$25640;(other$25640=$25604$25610);return [false,null];}});(Function.prototype["::send"]=function(args$25643){return this.apply(this,args$25643);});
var $26512=function(arr$26514){var results$26518;var l$26519;(results$26518=[]);(l$26519=arr$26514.length);var i$26527;(i$26527=0);$26517:for(;(i$26527<l$26519);(i$26527++)){results$26518.push([i$26527,$25660(arr$26514,i$26527)]);}return results$26518;};
var $26343=function(){var $26344$26346;($26344$26346=function(tags$26350){var it$0$26353;(it$0$26353=function(){if((!$25645($26344$26346)(this))){return Object.create($26344$26346.prototype);}else{return this;}}());(it$0$26353["tags"]=tags$26350);return it$0$26353;});($26344$26346.prototype["create"]=function(){var $26362$26364;($26362$26364=arguments);var t0$26369;var message$26373;var args$26374;(t0$26369=$26362$26364.length);if((t0$26369>=0)){(message$26373=function(){if((0>=t0$26369)){return "";}else{return $26362$26364[0];}}());(args$26374=Array.prototype.slice.call($26362$26364,1));var it$0$26378;(it$0$26378=this);var self$26383;(self$26383=this);var e$26388;(e$26388=Error(message$26373));(e$26388["::tags"]=it$0$26378.tags);(e$26388["args"]=args$26374);var temp$26396;(temp$26396=$26512(args$26374));var $length$26401;($length$26401=temp$26396.length);var $index$26406;($index$26406=0);$26389:for(;($index$26406<$length$26401);($index$26406++)){var m$26414;(m$26414=temp$26396[$index$26406]);var t0$26419;var t1$26420;var i$26424;var arg$26425;(t0$26419=m$26414);if(((t0$26419 instanceof Array)&&((t1$26420=t0$26419.length),(t1$26420===2)))){(i$26424=t0$26419[0]);(arg$26425=t0$26419[1]);(e$26388[i$26424]=arg$26425);}else{$26330(m$26414);}}(e$26388["length"]=args$26374.length);(e$26388["name"]=["E"].concat(it$0$26378.tags).join("."));return e$26388;}else{$26330($26362$26364);}});($26344$26346.prototype["::check"]=function(e$26436){var it$0$26439;(it$0$26439=this);var self$26444;(self$26444=this);var tags$26449;if(((!e$26436)||(!$25645(Error)(e$26436)))){return false;}(tags$26449=(e$26436["::tags"]||[]));var temp$26458;(temp$26458=it$0$26439.tags);var $length$26463;($length$26463=temp$26458.length);var $index$26468;($index$26468=0);$26450:for(;($index$26468<$length$26463);($index$26468++)){var m$26476;(m$26476=temp$26458[$index$26468]);var tag$26484;(tag$26484=m$26476);if((tags$26449.indexOf(tag$26484)===-1)){return false;}else{false;}}return true;});($26344$26346.prototype["::deconstruct"]=function(e$26492){var it$0$26495;(it$0$26495=this);var self$26500;(self$26500=this);return e$26492.args;});$25661($26344$26346,$25661(function(){var accum$26505;(accum$26505=({}));(accum$26505["::name"]="$26344");return accum$26505;}(),function(){var accum$26509;(accum$26509=({}));(accum$26509["::egclass"]=true);return accum$26509;}()));return $26344$26346;}();
var $26330=function(value$26332,url$26333,start$26334,end$26335){var err$26338;(err$26338=$26343(["match"]).create("Could not find a match for value",({"value":value$26332})));if(url$26333){(err$26338["location"]=["location",url$26333,start$26334,end$26335]);}throw err$26338;};var GenSym$25705;var gensym$25706;var uuid$25707;var identity$25708;var binsearch$25709;var __classify$25710;var classify$25711;var classify_contiguous$25712;var neighbours$25713;var partition$25714;var construct$25715;var mkset$25716;var make_object$25717;var product$25718;(GenSym$25705=function(prefix$25722){var id$25725;(id$25725=0);return function(){var r$25745;var pfx$25741;var t0$25737;var $25730$25732;($25730$25732=arguments);(t0$25737=$25730$25732.length);if(((t0$25737>=0)&&(t0$25737<=1))){(pfx$25741=function(){if((0>=t0$25737)){return null;}else{return $25730$25732[0];}}());(r$25745=(((pfx$25741||"")+prefix$25722)+[true,String(id$25725)][1]));(id$25725++);return r$25745;}else{$26330($25730$25732);}};});(gensym$25706=GenSym$25705("$"));(uuid$25707=function(){return gensym$25706("#");});(identity$25708=function(x$25763){return x$25763;});(binsearch$25709=function(xs$25769,x$25770){var lo$25773;var hi$25774;(lo$25773=0);(hi$25774=(xs$25769.length-1));$25781:while((lo$25773<=hi$25774)){var $25785$25795;var mid$25786;var v$25787;(mid$25786=(lo$25773+((hi$25774-lo$25773)>>1)));(v$25787=$25660(xs$25769,mid$25786));($25785$25795=$25660(xs$25769,mid$25786));if(($25785$25795<x$25770)){(lo$25773=(mid$25786+1));}else{if(($25785$25795>x$25770)){(hi$25774=(mid$25786-1));}else{$25785$25795;return (mid$25786+1);}}}return lo$25773;});(__classify$25710=function(xs$25816){var results$25819;(results$25819=({}));$25823:while(xs$25816.length){var cls$25849;var x$25850;var newxs$25843;var $25827$25838;var $25828$25839;var $25829$25840;var t0$25836;var $25826$25831;($25826$25831=xs$25816.shift());if((($25827$25838=($25826$25831 instanceof Array))&&((t0$25836=$25826$25831.length),(($25829$25840=(t0$25836===2))&&($25826$25831[0]==="splice"))))){(newxs$25843=$25826$25831[1]);(xs$25816=newxs$25843.concat(xs$25816));}else{if($25829$25840){(cls$25849=$25826$25831[0]);(x$25850=$25826$25831[1]);if((!$25660(results$25819,cls$25849))){(results$25819[cls$25849]=[]);}$25660(results$25819,cls$25849).push(x$25850);}else{$26330($25826$25831);}}}return results$25819;});(classify$25711=function(){var $index$25895;var $length$25890;var temp$25885;var results$25877;var classes$25872;var xs$25873;var t0$25868;var $25861$25863;($25861$25863=arguments);(t0$25868=$25861$25863.length);if((t0$25868>=1)){(classes$25872=Array.prototype.slice.call($25861$25863,0,-1));(xs$25873=$25861$25863[(t0$25868-1)]);(results$25877=({"rest":[]}));(temp$25885=classes$25872);($length$25890=temp$25885.length);($index$25895=0);$25878:for(;($index$25895<$length$25890);($index$25895++)){var cls$25911;var m$25903;(m$25903=temp$25885[$index$25895]);(cls$25911=m$25903);(results$25877[cls$25911]=[]);}$25913:while(xs$25873.length){var x$25935;var other$25951;var cls$25942;var x$25943;var newxs$25927;var t0$25923;var $25916$25918;($25916$25918=xs$25873.shift());if((($25916$25918 instanceof Array)&&((t0$25923=$25916$25918.length),((t0$25923>=1)&&($25916$25918[0]==="splice"))))){(newxs$25927=Array.prototype.slice.call($25916$25918,1));(xs$25873=newxs$25927.concat(xs$25873));}else{if((((x$25935=$25916$25918)),((x$25935 instanceof Array)&&(x$25935[0]==="ignore")))){null;}else{if((($25916$25918 instanceof Array)&&((t0$25923=$25916$25918.length),((t0$25923===2)&&((cls$25942=$25916$25918[0]),((x$25943=$25916$25918[1]),$25660(results$25877,cls$25942))))))){$25660(results$25877,cls$25942).push(x$25943);}else{(other$25951=$25916$25918);results$25877.rest.push(other$25951);}}}}return results$25877;}else{$26330($25861$25863);}});(classify_contiguous$25712=function(xs$25959,classifier$25960){var $index$25989;var $length$25984;var temp$25979;var groups$25963;var currcls$25964;var curr$25965;(groups$25963=[]);(currcls$25964=null);(curr$25965=null);(temp$25979=xs$25959);($length$25984=temp$25979.length);($index$25989=0);$25966:for(;($index$25989<$length$25984);($index$25989++)){var cls$26008;var x$26005;var m$25997;(m$25997=temp$25979[$index$25989]);(x$26005=m$25997);(cls$26008=classifier$25960(x$26005));if((cls$26008===currcls$25964)){curr$25965.push(x$26005);}else{if(curr$25965){groups$25963.push(curr$25965);}(curr$25965=[cls$26008,x$26005]);(currcls$25964=cls$26008);}}if(curr$25965){groups$25963.push(curr$25965);}return groups$25963;});(neighbours$25713=function($26018$26020){var x$26051;var y$26052;var rest$26053;var x$26046;var $26023$26037;var $26024$26038;var t0$26035;var $26022$26030;var ph$26025;(ph$26025=$26018$26020);($26022$26030=ph$26025);if((($26023$26037=($26022$26030 instanceof Array))&&((t0$26035=$26022$26030.length),(t0$26035===0)))){return [];}else{if(($26023$26037&&(t0$26035===1))){(x$26046=$26022$26030[0]);return [];}else{if(($26023$26037&&(t0$26035>=2))){(x$26051=$26022$26030[0]);(y$26052=$26022$26030[1]);(rest$26053=Array.prototype.slice.call($26022$26030,2));return [[x$26051,y$26052]].concat(neighbours$25713([y$26052].concat(rest$26053)));}else{$26330($26022$26030);}}}});(partition$25714=function(xs$26062,predicate$26063){var $index$26088;var $length$26083;var temp$26078;var t$26066;var f$26067;(t$26066=[]);(f$26067=[]);(temp$26078=xs$26062);($length$26083=temp$26078.length);($index$26088=0);$26068:for(;($index$26088<$length$26083);($index$26088++)){var x$26109;var x$26104;var m$26096;(m$26096=temp$26078[$index$26088]);(x$26104=m$26096);if(predicate$26063(x$26104)){t$26066.push(x$26104);}else{(x$26109=m$26096);f$26067.push(x$26109);}}return [t$26066,f$26067];});(construct$25715=function($26114$26116,fn$26117,zero$26118){var x$26149;var rest$26150;var x$26144;var $26121$26135;var $26122$26136;var t0$26133;var $26120$26128;var ph$26123;(ph$26123=$26114$26116);($26120$26128=ph$26123);if((($26121$26135=($26120$26128 instanceof Array))&&((t0$26133=$26120$26128.length),(t0$26133===0)))){return zero$26118;}else{if(($26121$26135&&(t0$26133===1))){(x$26144=$26120$26128[0]);return x$26144;}else{if(($26121$26135&&(t0$26133>=1))){(x$26149=$26120$26128[0]);(rest$26150=Array.prototype.slice.call($26120$26128,1));return fn$26117(x$26149,construct$25715(rest$26150,fn$26117,zero$26118));}else{$26330($26120$26128);}}}});(mkset$25716=function(xs$26159){var $index$26180;var $length$26175;var temp$26170;var rval$26162;(rval$26162=({}));(temp$26170=xs$26159);($length$26175=temp$26170.length);($index$26180=0);$26163:for(;($index$26180<$length$26175);($index$26180++)){var x$26196;var m$26188;(m$26188=temp$26170[$index$26180]);(x$26196=m$26188);(rval$26162[x$26196]=true);}return rval$26162;});(make_object$25717=function(pairs$26202){var $index$26223;var $length$26218;var temp$26213;var rval$26205;(rval$26205=({}));(temp$26213=pairs$26202);($length$26218=temp$26213.length);($index$26223=0);$26206:for(;($index$26223<$length$26218);($index$26223++)){var k$26241;var v$26242;var t0$26236;var t1$26237;var m$26231;(m$26231=temp$26213[$index$26223]);(t0$26236=m$26231);if(((t0$26236 instanceof Array)&&((t1$26237=t0$26236.length),(t1$26237===2)))){(k$26241=t0$26236[0]);(v$26242=t0$26236[1]);(rval$26205[k$26241]=v$26242);}else{$26330(m$26231,"/home/olivier/git/earl-grey/src/util.eg",2736,2779);}}return rval$26205;});(product$25718=function(a$26252,b$26253){var $index$26274;var $length$26269;var temp$26264;var results$26256;(results$26256=[]);(temp$26264=a$26252);($length$26269=temp$26264.length);($index$26274=0);$26257:for(;($index$26274<$length$26269);($index$26274++)){var $index$26310;var $length$26305;var temp$26300;var acc$26295;var x$26290;var m$26282;(m$26282=temp$26264[$index$26274]);(x$26290=m$26282);(results$26256=results$26256.concat((((acc$26295=[])),(((temp$26300=b$26253)),((($length$26305=temp$26300.length)),((($index$26310=0)),function(){$26292:for(;($index$26310<$length$26305);($index$26310++)){var y$26326;var m$26318;(m$26318=temp$26300[$index$26310]);(y$26326=m$26318);acc$26295.push([x$26290,y$26326]);}}()))),acc$26295)));}return results$26256;});(exports["GenSym"]=GenSym$25705);(exports["gensym"]=gensym$25706);(exports["uuid"]=uuid$25707);(exports["identity"]=identity$25708);(exports["binsearch"]=binsearch$25709);(exports["classify"]=classify$25711);(exports["classify_contiguous"]=classify_contiguous$25712);(exports["neighbours"]=neighbours$25713);(exports["partition"]=partition$25714);(exports["construct"]=construct$25715);(exports["mkset"]=mkset$25716);(exports["make_object"]=make_object$25717);(exports["product"]=product$25718);

},{}],15:[function(require,module,exports){

},{}]},{},[])