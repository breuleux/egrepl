require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var $237=function(type$240){var f$244;(f$244=type$240["::check"]);if((f$244===(void 0))){return function(value$250){return (value$250 instanceof type$240);};}else{return function(value$254){return f$244.call(type$240,value$254);};}};
var $256=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $257=function(dest$260,values$261){var k$266;(k$266=null);$264:for(k$266 in values$261){if(values$261.hasOwnProperty(k$266)){(dest$260[k$266]=values$261[k$266]);}}return dest$260;};
var $274=function($276$279){var ph$285;(ph$285=$276$279);var $281$291;($281$291=ph$285);var bridge$283$296;var x$300;(bridge$283$296=$281$291);if((((typeof(bridge$283$296)==="string")&&((x$300=bridge$283$296),true))||((typeof(bridge$283$296)==="number")&&((x$300=bridge$283$296),true)))){return ["value",x$300];}else{var other$311;(other$311=$281$291);return other$311["::serialize_ast"]();}};
var send$11;(send$11=function(obj$18,$15$19){var ph$25;var msg$26;var t0$28;(t0$28=$15$19);(msg$26=t0$28);(ph$25=t0$28);var $21$37;($21$37=ph$25);var bridge$23$42;(bridge$23$42=$21$37);if(((typeof(bridge$23$42)==="string")||(typeof(bridge$23$42)==="number"))){return obj$18[msg$26];}else{var other$54;(other$54=$21$37);return obj$18["::send"](msg$26);}});(Array[":::project"]=function($60$63){var ph$68;var value$69;var t0$71;(t0$71=$60$63);(value$69=t0$71);(ph$68=t0$71);var $65$80;($65$80=ph$68);if($237(Array)($65$80)){return [true,value$69];}else{$65$80;return [true,[value$69]];}});(Array.prototype["::check"]=function(value$98){if((value$98 instanceof Array)){var i$104;(i$104=0);$101:for(;(i$104<this.length);(i$104++)){if(($256(this,i$104)!==$256(value$98,i$104))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $257(this.slice(0),this);});(Array.prototype[":::project"]=function(value$123){if((value$123 instanceof Array)){var i$129;(i$129=0);$126:for(;(i$129<this.length);(i$129++)){if(($256(this,i$129)!==$256(value$123,i$129))){return [true,[value$123]];}}return [true,value$123.slice(this.length)];}else{return [true,[value$123]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($274));});(RegExp.prototype["::check"]=function($147$150){var ph$155;(ph$155=$147$150);var $152$161;($152$161=ph$155);var value$169;if((typeof($152$161)==="string")){(value$169=$152$161);if(value$169.match(this)){return true;}else{return false;}}else{var other$174;(other$174=$152$161);return false;}});(RegExp.prototype[":::project"]=function($180$183){var ph$188;(ph$188=$180$183);var $185$194;($185$194=ph$188);var value$202;if((typeof($185$194)==="string")){(value$202=$185$194);var $205$210;($205$210=value$202.match(this));var m$218;if(($205$210===null)){(m$218=$205$210);return [false,null];}else{var m$223;(m$223=$205$210);return [true,m$223];}}else{var other$227;(other$227=$185$194);return [false,null];}});(Function.prototype["::send"]=function(args$234){return this.apply(this,args$234);});
var $1181=function(obj$1184){var results$1189;(results$1189=[]);var k$1194;(k$1194=null);$1188:for(k$1194 in obj$1184){if(Object.prototype.hasOwnProperty.call(obj$1184,k$1194)){results$1189.push([k$1194,$256(obj$1184,k$1194)]);}}return results$1189;};
var $1487=function(type$1490){return function(value$1494){var f$1498;(f$1498=type$1490[":::project"]);if((f$1498===(void 0))){(f$1498=type$1490["::project"]);if((f$1498===(void 0))){return [true,type$1490(value$1494)];}else{var rval$1511;(rval$1511=false);try{(rval$1511=[true,f$1498(value$1494)]);}catch(excv$1522){var e$1528;(e$1528=excv$1522);(rval$1511=[false,null]);}return rval$1511;}}else{return f$1498.call(type$1490,value$1494);}};};
var $1786=function(arr$1789){var results$1795;var l$1796;(results$1795=[]);(l$1796=arr$1789.length);var i$1805;(i$1805=0);$1794:for(;(i$1805<l$1796);(i$1805++)){results$1795.push([i$1805,$256(arr$1789,i$1805)]);}return results$1795;};
var $1553=function(){var $1554$1560;($1554$1560=function(tags$1565){var it$0$1568;(it$0$1568=function(){if((!$237($1554$1560)(this))){return Object.create($1554$1560.prototype);}else{return this;}}());(it$0$1568["tags"]=tags$1565);return it$0$1568;});($1554$1560.prototype["create"]=function(){var it$0$1588;var self$1589;(it$0$1588=this);(self$1589=this);var $1586$1598;($1586$1598=arguments);var t0$1603;var message$1607;var args$1608;(t0$1603=$1586$1598.length);if((t0$1603>=0)){(message$1607=function(){if((0>=t0$1603)){return "";}else{return $1586$1598[0];}}());(args$1608=Array.prototype.slice.call($1586$1598,1));var e$1621;(e$1621=Error(message$1607));(e$1621["::tags"]=it$0$1588.tags);(e$1621["args"]=args$1608);var temp$1637;(temp$1637=$1786(args$1608));var $length$1643;($length$1643=temp$1637.length);var $index$1649;($index$1649=0);$1622:for(;($index$1649<$length$1643);($index$1649++)){var m$1658;(m$1658=temp$1637[$index$1649]);var t0$1663;var t1$1664;var i$1668;var arg$1669;(t0$1663=m$1658);if(((t0$1663 instanceof Array)&&(((t1$1664=t0$1663.length)),(t1$1664===2)))){(i$1668=t0$1663[0]);(arg$1669=t0$1663[1]);(e$1621[i$1668]=arg$1669);}else{$1534(m$1658);}}(e$1621["length"]=args$1608.length);(e$1621["name"]=["E"].concat(it$0$1588.tags).join("."));return e$1621;}else{$1534($1586$1598);}});($1554$1560.prototype["::check"]=function(e$1699){var it$0$1703;var self$1704;(it$0$1703=this);(self$1704=this);var tags$1714;if(((!e$1699)||(!$237(Error)(e$1699)))){return false;}(tags$1714=(e$1699["::tags"]||[]));var temp$1725;(temp$1725=it$0$1703.tags);var $length$1731;($length$1731=temp$1725.length);var $index$1737;($index$1737=0);$1715:for(;($index$1737<$length$1731);($index$1737++)){var m$1746;(m$1746=temp$1725[$index$1737]);var tag$1754;(tag$1754=m$1746);if((tags$1714.indexOf(tag$1754)===-1)){return false;}else{false;}}return true;});($1554$1560.prototype["::deconstruct"]=function(e$1763){var it$0$1767;var self$1768;(it$0$1767=this);(self$1768=this);return e$1763.args;});$257($1554$1560,$257(function(){var accum$1779;(accum$1779=({}));(accum$1779["::name"]="$1554");return accum$1779;}(),function(){var accum$1783;(accum$1783=({}));(accum$1783["::egclass"]=true);return accum$1783;}()));return $1554$1560;}();
var $1534=function(value$1537,url$1538,start$1539,end$1540){var err$1544;(err$1544=$1553(["match"]).create("Could not find a match for value",({"value":value$1537})));if(url$1538){(err$1544["location"]=["location",url$1538,start$1539,end$1540]);}throw err$1544;};
var $1812=function($1814$1817,key$1818){var ph$1826;(ph$1826=$1814$1817);var $1820$1832;($1820$1832=ph$1826);var bridge$1822$1837;(bridge$1822$1837=$1820$1832);if(((bridge$1822$1837===null)||(bridge$1822$1837===(void 0)))){return false;}else{var x$1849;if((typeof($1820$1832)==="string")){(x$1849=$1820$1832);return (key$1818 in String.prototype);}else{var x$1854;if((typeof($1820$1832)==="number")){(x$1854=$1820$1832);return (key$1818 in Number.prototype);}else{var x$1859;(x$1859=$1820$1832);return (key$1818 in x$1859);}}}};
var $1198=function(){var $1199$1204;($1199$1204=function($1208$1215,$1210$1216,$1212$1217){var it$0$1220;(it$0$1220=function(){if((!$237($1199$1204)(this))){return Object.create($1199$1204.prototype);}else{return this;}}());var t0$1227;(t0$1227=$1487(Array)($1208$1215));if(t0$1227[0]){(it$0$1220["tags"]=t0$1227[1]);}else{$1534($1208$1215);}(it$0$1220["props"]=$1210$1216);var t0$1239;(t0$1239=$1487(Array)($1212$1217));if(t0$1239[0]){(it$0$1220["children"]=t0$1239[1]);}else{$1534($1212$1217);}undefined;return it$0$1220;});$257(function(){var accum$1253;(accum$1253=({}));(accum$1253["::check"]=function(x$1258){return (((x$1258&&x$1258.tags)&&x$1258.props)&&x$1258.children);});return accum$1253;}(),$257(function(){var accum$1261;(accum$1261=({}));(accum$1261[":::project"]=function($1265$1268){var ph$1273;(ph$1273=$1265$1268);var $1270$1279;($1270$1279=ph$1273);var tags$1287;var props$1288;var children$1289;if(($1812($1270$1279,"tags")&&((tags$1287=$1270$1279.tags),($1812($1270$1279,"props")&&((props$1288=$1270$1279.props),$1812($1270$1279,"children")))))){(children$1289=$1270$1279.children);return [true,[tags$1287,props$1288,children$1289]];}else{$1270$1279;return [false,null];}});return accum$1261;}(),$257(function(){var accum$1298;(accum$1298=({}));(accum$1298["::name"]="$1199");return accum$1298;}(),function(){var accum$1302;(accum$1302=({}));(accum$1302["::egclass"]=true);return accum$1302;}())));($1199$1204.prototype["::check"]=function($1308$1311){var it$0$1315;var self$1316;(it$0$1315=this);(self$1316=this);var ph$1327;(ph$1327=$1308$1311);var $1324$1333;($1324$1333=ph$1327);var n$1341;if($237($1198)($1324$1333)){(n$1341=$1324$1333);var temp$1351;(temp$1351=it$0$1315.tags);var $length$1357;($length$1357=temp$1351.length);var $index$1363;($index$1363=0);$1345:for(;($index$1363<$length$1357);($index$1363++)){var m$1372;(m$1372=temp$1351[$index$1363]);var c$1380;(c$1380=m$1372);if((n$1341.tags.indexOf(c$1380)===-1)){return false;}else{false;}}return true;}else{$1324$1333;return false;}});($1199$1204.prototype[":::project"]=function($1391$1394){var it$0$1398;var self$1399;(it$0$1398=this);(self$1399=this);var ph$1410;(ph$1410=$1391$1394);var $1407$1416;($1407$1416=ph$1410);var n$1424;if($237(it$0$1398)($1407$1416)){(n$1424=$1407$1416);return [true,[n$1424.tags,n$1424.props,n$1424.children]];}else{$1407$1416;return [false,null];}});$257($1199$1204,$257(function(){var accum$1435;(accum$1435=({}));(accum$1435["::check"]=function(x$1440){return (((x$1440&&x$1440.tags)&&x$1440.props)&&x$1440.children);});return accum$1435;}(),$257(function(){var accum$1443;(accum$1443=({}));(accum$1443[":::project"]=function($1447$1450){var ph$1455;(ph$1455=$1447$1450);var $1452$1461;($1452$1461=ph$1455);var tags$1469;var props$1470;var children$1471;if(($1812($1452$1461,"tags")&&((tags$1469=$1452$1461.tags),($1812($1452$1461,"props")&&((props$1470=$1452$1461.props),$1812($1452$1461,"children")))))){(children$1471=$1452$1461.children);return [true,[tags$1469,props$1470,children$1471]];}else{$1452$1461;return [false,null];}});return accum$1443;}(),$257(function(){var accum$1480;(accum$1480=({}));(accum$1480["::name"]="$1199");return accum$1480;}(),function(){var accum$1484;(accum$1484=({}));(accum$1484["::egclass"]=true);return accum$1484;}()))));return $1199$1204;}();var quaint$687;var make_cards$688;(quaint$687=require("quaint"));(make_cards$688=function(repr$696){return function(repl$700){var accum$943;var accum$1074;var $index$1117;var $length$1111;var temp$1105;var mktable2$716;var clickable$717;var clickable_row$718;var dispatch$719;var components$720;var cards$721;var Q$722;var newcards$723;var tutorial$724;(mktable2$716=function(){var other$775;var $758$763;var $index$801;var $length$795;var temp$789;var acc$783;var its$755;var x$745;var recur$746;var t0$741;var $732$736;($732$736=arguments);(t0$741=$732$736.length);if(((t0$741>=1)&&(t0$741<=2))){(x$745=$732$736[0]);(recur$746=function(){if((1>=t0$741)){return repr$696;}else{return $732$736[1];}}());(its$755=((($758$763=x$745)),function(){if($237(Array)($758$763)){return x$745;}else{(other$775=$758$763);return $1181(x$745);}}()));return $1198(["table"],({}),(((acc$783=[])),(((temp$789=its$755)),((($length$795=temp$789.length)),((($index$801=0)),function(){$778:for(;($index$801<$length$795);($index$801++)){var k$820;var v$821;var t0$815;var t1$816;var m$810;(m$810=temp$789[$index$801]);(t0$815=m$810);if(((t0$815 instanceof Array)&&(((t1$816=t0$815.length)),(t1$816===2)))){(k$820=t0$815[0]);(v$821=t0$815[1]);acc$783.push($1198(["tr"],({}),[$1198(["th"],({}),recur$746(k$820,repr$696)),$1198(["td"],({}),recur$746(v$821,repr$696))]));}else{$1534(m$810,"/home/olivier/git/egrepl/src/cards.eg",434,554);}}}()))),acc$783));}else{$1534($732$736);}});(clickable$717=function(code$843,text$844){var click$848;(click$848=function(e$853){e$853.preventDefault();repl$700.process(code$843);repl$700.sink();return jQuery(repl$700.input).focus();});return $1198([".clickable"],({"onclick":click$848}),(text$844||code$843));});(clickable_row$718=function(){var $index$906;var $length$900;var temp$894;var acc$888;var items$875;var t0$871;var $862$866;($862$866=arguments);(t0$871=$862$866.length);if((t0$871>=0)){(items$875=Array.prototype.slice.call($862$866,0));return $1198(["span"],({}),(((acc$888=[])),(((temp$894=items$875)),((($length$900=temp$894.length)),((($index$906=0)),function(){$882:for(;($index$906<$length$900);($index$906++)){var item$929;var item$923;var m$915;(m$915=temp$894[$index$906]);(item$923=m$915);if(($index$906===0)){acc$888.push(clickable$717(item$923));}else{(item$929=m$915);acc$888.push($1198(["span"],({}),[$1198(["span",".separator"],({}),""),clickable$717(item$929)]));}}}()))),acc$888));}else{$1534($862$866);}});(dispatch$719=quaint$687.dispatch.clone());(components$720=$257(((accum$943=({})),((accum$943["maybe label / code"]=function(engine$950,node$951,$947$952){var t0$960;var $index$1046;var $length$1040;var temp$1034;var acc$1028;var xs2$1020;var xs$1015;var x$1005;var $990$1001;var $991$1002;var t0$999;var $987$994;var label$1071;var t0$976;var $954$971;var ph$957;var code$958;(t0$960=$947$952);if(($1812(t0$960,"label")&&((ph$957=t0$960.label),$1812(t0$960,"code")))){(code$958=t0$960.code);}else{$1534($947$952);}($954$971=ph$957);if((($954$971 instanceof Array)&&(((t0$976=$954$971.length)),((t0$976===2)&&(($954$971[0]==="text")&&($954$971[1]==="")))))){($987$994=quaint$687.collapse("/",code$958));if((($990$1001=($987$994 instanceof Array))&&(((t0$999=$987$994.length)),(t0$999===1)))){(x$1005=$987$994[0]);return clickable$717(code$958.location.text());}else{if(($990$1001&&(t0$999>=0))){(xs$1015=Array.prototype.slice.call($987$994,0));(xs2$1020=(((acc$1028=[])),(((temp$1034=xs$1015)),((($length$1040=temp$1034.length)),((($index$1046=0)),function(){$1023:for(;($index$1046<$length$1040);($index$1046++)){var x$1063;var m$1055;(m$1055=temp$1034[$index$1046]);(x$1063=m$1055);acc$1028.push(x$1063.location.text());}}()))),acc$1028));return $256(clickable_row$718,xs2$1020);}else{$1534($987$994);}}}else{(label$1071=$954$971);return clickable$717(code$958.location.text(),label$1071.location.text());}}),accum$943)),((accum$1074=({})),((accum$1074["topic -> contents"]=function(engine$1081,node$1082,$1078$1083){var t0$1089;var topic$1086;var contents$1087;(t0$1089=$1078$1083);if(($1812(t0$1089,"topic")&&((topic$1086=t0$1089.topic),$1812(t0$1089,"contents")))){(contents$1087=t0$1089.contents);}else{$1534($1078$1083);}(cards$721[topic$1086.location.text()]=$1198([".card"],({}),engine$1081.run(contents$1087)));}),accum$1074))));(temp$1105=$1181(components$720));($length$1111=temp$1105.length);($index$1117=0);$725:for(;($index$1117<$length$1111);($index$1117++)){var spec$1136;var fn$1137;var t0$1131;var t1$1132;var m$1126;(m$1126=temp$1105[$index$1117]);(t0$1131=m$1126);if(((t0$1131 instanceof Array)&&(((t1$1132=t0$1131.length)),(t1$1132===2)))){(spec$1136=t0$1131[0]);(fn$1137=t0$1131[1]);dispatch$719.register(quaint$687.Spec(spec$1136,fn$1137));}else{$1534(m$1126,"/home/olivier/git/egrepl/src/cards.eg",1612,1704);}}(cards$721=({}));(Q$722=quaint$687.Engine(dispatch$719));(newcards$723="\ntut0 ->\n\n  === Keyboard controls\n\n  | `[Up/Down]           | Navigate history\n  | `[Enter/Shift-Enter] | Evaluate an expression\n  | `[Control-l]         | Clear the screen\n  | `[Control-m]         | Toggle multiline mode\n\n  Type /next to continue with the tutorial.\n\n\ntut1 ->\n\n  === Basics\n\n  Click on boxes like /this to evaluate tehir contents.\n\n  ==== Strings\n\n  / \"hello world\" / .word / \"My name is \\\"Olivier\\\"\"\n\n  ==== Numbers\n\n  | __Decimal       | / 1 / 1.4 / 4.93e51\n  | __Hex           | / 16rFF / 16r100 / 16rDEADBEEF / 16r0.8\n  | __[Binary etc.] | / 2r1110 / 3r20 / 36rZAZZ\n\n  ==== Function calls\n\n  | __Call    | / alert{\"Hello!\"} / alert with \"Hello!\"\n  | __Methods | [/ \"hello\".substring{1}]\n\n\ncatatouille ->\n\n  === Cats\n  \n  Here are some properties of sweet cats:\n  * Cute\n  * /[Cuddly .cute]\n  * Really, _really evil!\n  \n  What\n\n  Is\n\n  Up\n\n\n");Q$722.run(newcards$723);(tutorial$724=[cards$721["tut0"],cards$721["tut1"],$1198([".card"],({}),[$1198(["h3"],({}),"Basics"),$1198([],({}),["Click on boxes like ",clickable$717("this")," to evaluate their contents."]),$1198(["h4"],({}),"Strings"),$1198(["span"],({}),clickable_row$718("\"hello world\"",".word","\"My name is \\\"Olivier\\\"\"")),$1198(["h4"],({}),"Numbers"),mktable2$716([[$1198([],({}),"Decimal"),clickable_row$718("1","1.4","4.93e51")],[$1198([],({}),"Hex"),clickable_row$718("16rFF","16r100","16rDEADBEEF","16r0.8")],[$1198([],({}),"Binary etc."),clickable_row$718("2r1110","3r20","36rZAZZ")]]),$1198(["h4"],({}),"Function calls"),mktable2$716([[$1198([],({}),"Call"),clickable_row$718("alert{\"Hello!\"}","alert with \"Hello!\"")],[$1198([],({}),"Methods"),clickable_row$718("\"hello\".substring{1}")]]),clickable$717("next")," => variables"]),$1198([".card"],({}),[$1198(["h3"],({}),"Variables"),$1198(["table"],({}),[$1198(["tr"],({}),$1198(["td"],({"colspan":2}),[$1198(["b"],({}),"Declare")," a variable"])),$1198(["tr"],({}),[$1198(["td"],({}),"Read-only"),$1198(["td"],({}),clickable$717("let x = 1234"))]),$1198(["tr"],({}),[$1198(["td"],({}),"Mutable"),$1198(["td"],({}),clickable$717("var x = 1234"))]),$1198(["tr"],({}),[$1198(["td"],({}),[$1198(["b"],({}),"Set")," a variable"]),$1198(["td"],({}),clickable$717("x = 1234"))])]),$1198([],({}),["Attempting to set a variable that has not been declared"," will create a ",$1198(["b"],({}),"read-only")," variable in the local scope."]),$1198([],({}),[$1198(["b"],({}),"Note:")," as a convenience, all variables declared interactively"," in the top scope are in fact mutable."]),$1198([],({}),["You can create blocks with their own local variables using ",$1198(["code"],({}),"[]"),", ",$1198(["code"],({}),"let")," or ",$1198(["code"],({}),"where")]),$1198([],({}),clickable$717("[let a = 10, let b = 90, a + b]")),$1198([],({}),clickable$717("let [a = 10, b = 90]: a + b")),$1198([],({}),clickable$717("a + b where\n   a = 10\n   b = 90")),$1198([],({}),["Be aware that ",$1198(["code"],({}),"[]")," only creates a block"," when it encloses more than one expression."]),$1198([],({}),["An indented block is completely equivalent to ","wrapping it in ",$1198(["code"],({}),"[]"),"s"]),clickable$717("next")," => data structures"]),$1198([".card"],({}),[$1198(["h3"],({}),"Data structures"),$1198([],({}),["Earl Grey uses curly braces ",$1198(["code"],({}),"{}")," to define all data structures."]),mktable2$716([[$1198([],({}),"Arrays"),clickable_row$718("{1, 2, 3}","{1, {2, 3}}","{\"hello\"}")],[$1198([],({}),"Objects"),clickable_row$718("{name = .Peter, age = 20}","{\"a\" => 123}")]]),$1198([],({}),["The empty array is ",clickable$717("{}")," and the empty object is ",clickable$717("{=}")]),$1198(["h4"],({}),"Deconstruction"),$1198([],({}),"You can extract array elements and object fields into variables directly."),$1198([],({}),clickable$717("{x, y} = {11, 22}")),$1198([],({}),clickable$717("{x, *rest, y} = {111, 222, 333, 444}")),$1198([],({}),clickable$717("{=> name} = {name = .Peter, age = 20}")),$1198(["h4"],({}),"Operations"),mktable2$716([[$1198([],({}),"Concatenation"),clickable$717("{1, 2} ++ {3, 4, 5}")],[$1198([],({}),"Object fusion"),clickable$717("{name = .Kim} & {age = 39}")]]),clickable$717("next")," => control structures"]),$1198([".card"],({}),[$1198(["h3"],({}),"Control structures"),$1198([],({}),[$1198(["code"],({}),"if")," and ",$1198(["code"],({}),"while")," are available."]),$1198([],({}),clickable$717("if 13 > 0:\n   then: \"This number is positive!\"\n   else: \"This number is negative!\"\n")),$1198([],({}),clickable$717("i = 3\nwhile i > 0:\n   alert{i}\n   i--\n")),$1198([],({}),["Notice that both branches of ",$1198(["code"],({}),"if")," must be nested."," The expression form of ",$1198(["code"],({}),"if")," is simply ",clickable$717("if{1, .yes, .no}")]),clickable$717("next")," => control structures [2]"]),$1198([".card"],({}),[$1198(["h3"],({}),"Control structures [2]"),$1198([],({}),["Earl Grey's ",$1198(["code"],({}),"if")," nests poorly, so if you want to ","write many clauses use ",$1198(["code"],({}),"match")]),$1198([],({}),clickable$717("x = 13\nmatch:\n   when x > 0 -> .positive\n   when x < 0 -> .negative\n   when x == 0 -> .zero\n")),$1198([],({}),"You can also match on the variable directly!"),$1198([],({}),clickable$717("x = 13\nmatch x:\n   > 0 -> .positive\n   < 0 -> .negative\n   0 -> .zero\n")),$1198([],({}),["The left hand side of the arrow is a special pattern matching"," language, whereas ",$1198(["code"],({}),"when")," takes a standard expression."]),clickable$717("next")," => each"]),$1198([".card"],({}),[$1198(["h3"],({}),"each"),$1198([],({}),["A single operator serves both looping over data structures"," and list comprehensions."]),$1198([],({}),clickable$717("{1, 2, 3} each i -> -i")),$1198([],({}),clickable$717("1..10 each i -> i * i")),$1198([],({}),clickable$717("1..10 each i when i mod 2 == 0 -> i")),$1198([],({}),"You can have more than one clause"),$1198([],({}),clickable$717("{1, 2, .hello, 4, 72, 99, {}} each\n   String? s -> {s, .string}\n   Number? i when i mod 2 == 0 -> {i, .even}\n   Number? i when i mod 2 == 1 -> {i, .odd}\n   x -> {x, .dunno}\n")),$1198([],({}),[$1198(["code"],({}),"first")," and ",$1198(["code"],({}),"last")," are special patterns"]),$1198([],({}),clickable$717("acc = \"\"\n{.a, .b, .c, .d} each\n   first x -> acc += \"[\" + x\n   last x -> acc += \", \" + x + \"]\"\n   x -> acc += \", \" + x\nacc\n")),$1198([],({}),"Be careful to put the catchall clause last."),clickable$717("next")," => functions"]),$1198([".card"],({}),[$1198(["h3"],({}),"Functions"),$1198([],({}),["Functions are declared with ",$1198(["code"],({}),"=")," or ",$1198(["code"],({}),"->"),". For instance the following are equivalent"]),$1198([],({}),clickable$717("f{x, y} = [x * x + y * y] ** 0.5")),$1198([],({}),clickable$717("f = {x, y} -> [x * x + y * y] ** 0.5")),$1198([],({}),"It works inside object definitions as well, of course"),$1198([],({}),clickable$717("{add1{x} = x + 1, add2{x} = x + 2}")),$1198([],({}),["Pattern matching is deeply integrated in Earl Grey. ","For instance:"]),$1198([],({}),clickable$717("fact{match} =\n   0 or 1 -> 1\n   n -> n * fact{n - 1}\n")),clickable$717("next")," => type checking and coercion"]),$1198([".card"],({}),[$1198(["h3"],({}),"Type checking and coercion"),mktable2$716([[$1198([],({}),"Type checking"),clickable_row$718("String? .hello","Number? 1","Array? .nope","R\"x$\"? .simplex")],[$1198([],({}),"Coercion"),clickable_row$718("String! {1, 2}","Number! \"3.14\"","Array! .yep")]]),$1198([],({}),["Both type checking and coercion can be used in patterns."," Observe the difference in behavior of the following functions "," (try on ",clickable$717("f{1, \"2\"}"),")"]),$1198([],({}),clickable$717("f{x, y} = x + y")),$1198([],({}),clickable$717("f{Number? x, Number? y} = x + y")),$1198([],({}),clickable$717("f{Number! x, Number! y} = x + y")),$1198([],({}),["Functions naturally act as coercers: ",clickable$717("parseInt! x = \"99\"")]),$1198(["h4"],({}),"Predicates"),$1198([],({}),["You can create your own predicates with the ",$1198(["code"],({}),"predicate")," builtin"]),$1198([],({}),clickable$717("predicate! even{x} = x mod 2 == 0")),$1198([],({}),clickable_row$718("even? x = 1","even? x = 2")),clickable$717("next")," => classes"]),$1198([".card"],({}),[$1198(["h3"],({}),"Classes"),$1198([],({}),["Classes are declared with the ",$1198(["code"],({}),"class")," macro. As a convenience, @ can be used to"," refer to fields and members of the instance."]),$1198([],({}),clickable$717("class Person:\n   constructor{name, age, job} =\n      @name = name\n      @age = age\n      @job = job\n   hello{} =\n      \"Hello, I am \" + @name + \", \" + @age + \", and I am a \" + @job\n")),$1198([],({}),["The ",$1198(["code"],({}),"new")," keyword is optional."," I prefer to avoid it."]),$1198([],({}),clickable$717("Person{.Sonia, 25, .baker}")),$1198([],({}),clickable$717("Person{.Jack, 56, \"serial murderer\"}.hello{}")),clickable$717("next")," => HTML generation"]),$1198([".card"],({}),[$1198(["h3"],({}),"Here, let's have some fun"),$1198([],({}),["The ",$1198(["code"],({}),"%")," operator creates structured data"," which is directly translated as HTML."]),$1198([],({}),clickable_row$718("b % .hello","i % .hello")),$1198([],({}),"We can print out a multiplication table!"),$1198([],({}),clickable_row$718("table % 1..10 each i ->\n   tr % 1..10 each j ->\n      td % i * j\n"))]),$1198([".card"],({}),[$1198(["h3"],({}),"The end"),$1198([],({}),["This is the end of this humble tutorial,"," but you can keep messing around with the language,"," it's a lot of fun :)"])])]);(cards$721["tutorial"]=tutorial$724);(cards$721["topics"]=$1198([".card"],({}),[$1198(["h3"],({}),"Help topics"),mktable2$716([[clickable$717("help topics"),"List all help topics"],[clickable$717("help variables"),"Declaring and setting variables"],[clickable$717("help blocks"),"Blocks and indent rules"]])]));(cards$721["variables"]=$1198([".card"],({}),[$1198(["h3"],({}),"Variables"),$1198(["table"],({}),[$1198(["tr"],({}),$1198(["td"],({"colspan":2}),[$1198(["b"],({}),"Declare")," a variable"])),$1198(["tr"],({}),[$1198(["td"],({}),"Read-only"),$1198(["td"],({}),clickable$717("let x = 1234"))]),$1198(["tr"],({}),[$1198(["td"],({}),"Mutable"),$1198(["td"],({}),clickable$717("var x = 1234"))]),$1198(["tr"],({}),[$1198(["td"],({}),[$1198(["b"],({}),"Set")," a variable"]),$1198(["td"],({}),clickable$717("x = 1234"))])]),$1198(["p"],({}),["Attempting to set a variable that has not been declared"," will create a ",$1198(["b"],({}),"read-only")," variable in the local scope."," (In other words, ",$1198(["code"],({}),"let")," is implicit)"]),$1198(["p"],({}),[$1198(["b"],({}),"Note:")," as a convenience, all variables declared interactively"," in the top scope are in fact mutable."]),$1198(["p"],({}),["You can create ",clickable$717("help blocks","blocks")," with their own local variables using ",$1198(["code"],({}),"[]"),", ",$1198(["code"],({}),"let")," or ",$1198(["code"],({}),"where")]),$1198([],({}),clickable$717("[let a = 10, let b = 90, a + b]")),$1198([],({}),clickable$717("let [a = 10, b = 90]: a + b")),$1198([],({}),clickable$717("a + b where\n   a = 10\n   b = 90"))]));(cards$721["blocks"]=$1198([".card"],({}),[$1198(["h3"],({}),"Blocks and indent"),$1198(["p"],({}),["A ",$1198(["b"],({}),"block")," is a sequence of statements or expressions."," Blocks are defined using square brackets ",$1198(["code"],({}),"[]"),". Variables defined inside a block are only valid in"," expressions within that block."]),$1198(["p"],({}),[$1198(["code"],({}),"[]")," is also used for ",$1198(["b"],({}),"grouping"),". It only creates a block"," when it encloses more than one expression, therefore ",$1198(["code"],({}),"[let x = 0]")," and ",$1198(["code"],({}),"let x = 0")," are completely equivalent with respect to scoping."]),$1198(["p"],({}),["An indented block is completely equivalent to ","wrapping it in ",$1198(["code"],({}),"[]"),"s. For instance ","these two blocks are equivalent:"]),$1198(["table"],({}),$1198(["tr"],({}),$1198(["td"],({}),clickable$717("if 1 > 0: [\n   \"I sure hope so!\"\n]")))),$1198(["td"],({}),clickable$717("if 1 > 0:\n   \"I sure hope so!\"\n")),$1198(["p"],({}),"Note that line breaks are always equivalent to commas.")]));return cards$721;};});(exports["make_cards"]=make_cards$688);

},{"quaint":16}],2:[function(require,module,exports){
var $2097=function(type$2100){var f$2104;(f$2104=type$2100["::check"]);if((f$2104===(void 0))){return function(value$2110){return (value$2110 instanceof type$2100);};}else{return function(value$2114){return f$2104.call(type$2100,value$2114);};}};
var $2116=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $2117=function(dest$2120,values$2121){var k$2126;(k$2126=null);$2124:for(k$2126 in values$2121){if(values$2121.hasOwnProperty(k$2126)){(dest$2120[k$2126]=values$2121[k$2126]);}}return dest$2120;};
var $2134=function($2136$2139){var ph$2145;(ph$2145=$2136$2139);var $2141$2151;($2141$2151=ph$2145);var bridge$2143$2156;var x$2160;(bridge$2143$2156=$2141$2151);if((((typeof(bridge$2143$2156)==="string")&&((x$2160=bridge$2143$2156),true))||((typeof(bridge$2143$2156)==="number")&&((x$2160=bridge$2143$2156),true)))){return ["value",x$2160];}else{var other$2171;(other$2171=$2141$2151);return other$2171["::serialize_ast"]();}};
var send$1871;(send$1871=function(obj$1878,$1875$1879){var ph$1885;var msg$1886;var t0$1888;(t0$1888=$1875$1879);(msg$1886=t0$1888);(ph$1885=t0$1888);var $1881$1897;($1881$1897=ph$1885);var bridge$1883$1902;(bridge$1883$1902=$1881$1897);if(((typeof(bridge$1883$1902)==="string")||(typeof(bridge$1883$1902)==="number"))){return obj$1878[msg$1886];}else{var other$1914;(other$1914=$1881$1897);return obj$1878["::send"](msg$1886);}});(Array[":::project"]=function($1920$1923){var ph$1928;var value$1929;var t0$1931;(t0$1931=$1920$1923);(value$1929=t0$1931);(ph$1928=t0$1931);var $1925$1940;($1925$1940=ph$1928);if($2097(Array)($1925$1940)){return [true,value$1929];}else{$1925$1940;return [true,[value$1929]];}});(Array.prototype["::check"]=function(value$1958){if((value$1958 instanceof Array)){var i$1964;(i$1964=0);$1961:for(;(i$1964<this.length);(i$1964++)){if(($2116(this,i$1964)!==$2116(value$1958,i$1964))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $2117(this.slice(0),this);});(Array.prototype[":::project"]=function(value$1983){if((value$1983 instanceof Array)){var i$1989;(i$1989=0);$1986:for(;(i$1989<this.length);(i$1989++)){if(($2116(this,i$1989)!==$2116(value$1983,i$1989))){return [true,[value$1983]];}}return [true,value$1983.slice(this.length)];}else{return [true,[value$1983]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($2134));});(RegExp.prototype["::check"]=function($2007$2010){var ph$2015;(ph$2015=$2007$2010);var $2012$2021;($2012$2021=ph$2015);var value$2029;if((typeof($2012$2021)==="string")){(value$2029=$2012$2021);if(value$2029.match(this)){return true;}else{return false;}}else{var other$2034;(other$2034=$2012$2021);return false;}});(RegExp.prototype[":::project"]=function($2040$2043){var ph$2048;(ph$2048=$2040$2043);var $2045$2054;($2045$2054=ph$2048);var value$2062;if((typeof($2045$2054)==="string")){(value$2062=$2045$2054);var $2065$2070;($2065$2070=value$2062.match(this));var m$2078;if(($2065$2070===null)){(m$2078=$2065$2070);return [false,null];}else{var m$2083;(m$2083=$2065$2070);return [true,m$2083];}}else{var other$2087;(other$2087=$2045$2054);return [false,null];}});(Function.prototype["::send"]=function(args$2094){return this.apply(this,args$2094);});
var $2933=Object.keys;
var $2934=function($2936$2939,key$2940){var ph$2948;(ph$2948=$2936$2939);var $2942$2954;($2942$2954=ph$2948);var bridge$2944$2959;(bridge$2944$2959=$2942$2954);if(((bridge$2944$2959===null)||(bridge$2944$2959===(void 0)))){return false;}else{var x$2971;if((typeof($2942$2954)==="string")){(x$2971=$2942$2954);return (key$2940 in String.prototype);}else{var x$2976;if((typeof($2942$2954)==="number")){(x$2976=$2942$2954);return (key$2940 in Number.prototype);}else{var x$2981;(x$2981=$2942$2954);return (key$2940 in x$2981);}}}};
var $2761=function($2763$2766,b$2767){var ph$2781;var a$2782;var t0$2784;(t0$2784=$2763$2766);(a$2782=t0$2784);(ph$2781=t0$2784);var $2769$2793;($2769$2793=ph$2781);var bridge$2772$2798;if(($2769$2793===b$2767)){return true;}else{(bridge$2772$2798=$2769$2793);if((function(){var bridge$2773$2812;(bridge$2773$2812=bridge$2772$2798);return (function(){var bridge$2774$2819;(bridge$2774$2819=bridge$2773$2812);return (function(){var bridge$2775$2826;(bridge$2775$2826=bridge$2774$2819);return (function(){var bridge$2776$2833;(bridge$2776$2833=bridge$2775$2826);return ((typeof(bridge$2776$2833)==="number")||(typeof(bridge$2776$2833)==="string"));}()||(bridge$2775$2826===null));}()||(bridge$2774$2819===(void 0)));}()||(bridge$2773$2812===true));}()||(bridge$2772$2798===false))){return false;}else{if($2097(Array)($2769$2793)){if(((!$2097(Array)(b$2767))||(a$2782.length!==b$2767.length))){return false;}var i$2849;(i$2849=0);$2845:for(;(i$2849<a$2782.length);(i$2849++)){if((!$2761(a$2782[i$2849],b$2767[i$2849]))){return false;}}return true;}else{$2769$2793;if((((Object.getPrototypeOf(a$2782)===Object.prototype)&&$2097(Object)(b$2767))&&(Object.getPrototypeOf(b$2767)===Object.prototype))){var ka$2863;(ka$2863=$2933(a$2782));if((!$2761(ka$2863.sort(),$2933(b$2767).sort()))){return false;}var temp$2874;(temp$2874=ka$2863);var $length$2880;($length$2880=temp$2874.length);var $index$2886;($index$2886=0);$2864:for(;($index$2886<$length$2880);($index$2886++)){var m$2895;(m$2895=temp$2874[$index$2886]);var k$2903;(k$2903=m$2895);if((!$2761(a$2782[k$2903],b$2767[k$2903]))){return false;}}return true;}else{if($2934($2769$2793,"::serialize")){$2769$2793["::serialize"];var $2910$2915;($2910$2915=b$2767);if($2934($2910$2915,"::serialize")){$2910$2915["::serialize"];return $2761(a$2782["::serialize"](),b$2767["::serialize"]());}else{var otherwise$2927;(otherwise$2927=$2910$2915);return false;}}else{var otherwise$2931;(otherwise$2931=$2769$2793);return false;}}}}}};
var $2755=function(x$2758,y$2759){return (!$2761(x$2758,y$2759));};var accum$2743;var accum$2747;var keynames$2186;var prevent$2187;var Interactor$2188;(keynames$2186=({8:"Backspace",9:"Tab",13:"Enter",16:"S-",17:"C-",18:"A-",27:"Esc",32:"Space",33:"PgUp",34:"PgDn",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12"}));(prevent$2187=function(event$2196){event$2196.preventDefault();return event$2196.stopPropagation();});(Interactor$2188=function(target$2204){var accum$2228;var accum$2235;var accum$2242;var accum$2249;var it$0$2207;(it$0$2207=function(){if((!$2097(Interactor$2188)(this))){return Object.create(Interactor$2188.prototype);}else{return this;}}());(it$0$2207["functions"]=(target$2204.interactor_functions||target$2204));(it$0$2207["more_functions"]=$2117(((accum$2228=({})),((accum$2228["default"]=function(){return "default";}),accum$2228)),$2117(((accum$2235=({})),((accum$2235["stick"]=function(){return "stick";}),accum$2235)),$2117(((accum$2242=({})),((accum$2242["break"]=function(){return "break";}),accum$2242)),((accum$2249=({})),((accum$2249["none"]=function(){return (void 0);}),accum$2249))))));(it$0$2207["current_bindings"]=null);(it$0$2207["global_bindings"]=null);return it$0$2207;});(Interactor$2188.prototype["set_bindings"]=function(new_bindings$2267){var it$0$2271;var self$2272;(it$0$2271=this);(self$2272=this);(it$0$2271["current_bindings"]=null);(it$0$2271["global_bindings"]=new_bindings$2267);});(Interactor$2188.prototype["execute"]=function(c$2293,e$2294){var f$2327;var $index$2365;var $length$2359;var temp$2353;var result$2343;var cmd$2421;var cmds$2338;var f$2333;var cmd$2322;var $2307$2314;var it$0$2298;var self$2299;(it$0$2298=this);(self$2299=this);($2307$2314=c$2293);if((typeof($2307$2314)==="string")){(cmd$2322=$2307$2314);(f$2327=($2116(it$0$2298.functions,cmd$2322)||$2116(it$0$2298.more_functions,cmd$2322)));return f$2327(e$2294);}else{if($2097(Function)($2307$2314)){(f$2333=$2307$2314);return f$2333(it$0$2298.target,e$2294);}else{if($2097(Array)($2307$2314)){(cmds$2338=$2307$2314);(result$2343=null);(temp$2353=cmds$2338);($length$2359=temp$2353.length);($index$2365=0);$2344:for(;($index$2365<$length$2359);($index$2365++)){var other$2417;var $2386$2396;var cmd$2382;var m$2374;(m$2374=temp$2353[$index$2365]);(cmd$2382=m$2374);(result$2343=it$0$2298.execute(cmd$2382,e$2294));($2386$2396=result$2343);if(($2386$2396==="break")){prevent$2187(e$2294);break $2344;}else{if(($2386$2396==="default")){break $2344;}else{if(($2386$2396==="ignore")){continue $2344;}else{(other$2417=$2386$2396);prevent$2187(e$2294);}}}}return result$2343;}else{(cmd$2421=$2307$2314);(it$0$2298["current_bindings"]=cmd$2421);return "break stick";}}}});(Interactor$2188.prototype["process_codes"]=function(codes$2432,e$2433){var $index$2483;var $length$2477;var temp$2471;var otherwise$2577;var $2537$2546;var $2532$2540;var result$2584;var t0$2521;var $2450$2516;var bindings$2453;var just_modifiers$2454;var commands$2455;var it$0$2437;var self$2438;(it$0$2437=this);(self$2438=this);(bindings$2453=(it$0$2437.current_bindings||it$0$2437.global_bindings));(just_modifiers$2454=null);(commands$2455=[]);(temp$2471=codes$2432);($length$2477=temp$2471.length);($index$2483=0);$2456:for(;($index$2483<$length$2477);($index$2483++)){var command$2504;var code$2500;var m$2492;(m$2492=temp$2471[$index$2483]);(code$2500=m$2492);if($2097(RegExp("^([ACS]-)+$",""))(code$2500)){(just_modifiers$2454=true);}(command$2504=$2116(bindings$2453,code$2500));if($2755(command$2504,(void 0))){commands$2455.push(command$2504);}}($2450$2516=commands$2455);if((($2450$2516 instanceof Array)&&(((t0$2521=$2450$2516.length)),(t0$2521===0)))){($2532$2540=null);$2532$2540;if((it$0$2437.current_bindings&&it$0$2437.current_bindings._eat)){if((!just_modifiers$2454)){(it$0$2437["current_bindings"]=null);}return prevent$2187(e$2433);}else{if((it$0$2437.current_bindings&&it$0$2437.current_bindings._browser)){if((!just_modifiers$2454)){(it$0$2437["current_bindings"]=null);}}else{if((it$0$2437.current_bindings&&(!just_modifiers$2454))){(it$0$2437["current_bindings"]=null);return it$0$2437.process_codes(codes$2432,e$2433);}else{(otherwise$2577=$2532$2540);return null;}}}}else{$2450$2516;(result$2584=it$0$2437.execute(commands$2455,e$2433));if(($2761(result$2584,(void 0))||(result$2584.match&&result$2584.match("break")))){prevent$2187(e$2433);}if((((!((result$2584&&result$2584.match)&&result$2584.match("stick")))&&it$0$2437.current_bindings)&&(!it$0$2437.current_bindings._stick))){(it$0$2437["current_bindings"]=null);}}});(Interactor$2188.prototype["getcode"]=function(e$2598){var otherwise$2646;var $2618$2631;var $2613$2625;var code$2619;var it$0$2602;var self$2603;(it$0$2602=this);(self$2603=this);(code$2619=($2116(keynames$2186,e$2598.which)||(("<"+e$2598.which)+">")));($2613$2625=null);$2613$2625;if((e$2598.shiftKey&&$2755(code$2619,"S-"))){return ("S-"+code$2619);}else{if((e$2598.altKey&&$2755(code$2619,"A-"))){return ("A-"+code$2619);}else{if(((e$2598.ctrlKey||e$2598.metaKey)&&$2755(code$2619,"C-"))){return ("C-"+code$2619);}else{(otherwise$2646=$2613$2625);return code$2619;}}}});(Interactor$2188.prototype["keyup"]=function(e$2652){var it$0$2656;var self$2657;(it$0$2656=this);(self$2657=this);return it$0$2656.process_codes(["!^All",("^"+it$0$2656.getcode(e$2652)),"^All"],e$2652);});(Interactor$2188.prototype["keydown"]=function(e$2669){var it$0$2673;var self$2674;(it$0$2673=this);(self$2674=this);return it$0$2673.process_codes(["!All",it$0$2673.getcode(e$2669),"All"],e$2669);});(Interactor$2188.prototype["keypress"]=function(e$2686){var key$2702;var code$2703;var it$0$2690;var self$2691;(it$0$2690=this);(self$2691=this);(key$2702=e$2686.which);(code$2703=("="+String.fromCharCode(key$2702)));return it$0$2690.process_codes(["!=All",code$2703,"=All"],e$2686);});(Interactor$2188.prototype["install"]=function(element$2714){var it$0$2718;var self$2719;(it$0$2718=this);(self$2719=this);(element$2714["onkeydown"]=it$0$2718.keydown.bind(it$0$2718));(element$2714["onkeyup"]=it$0$2718.keyup.bind(it$0$2718));(element$2714["onkeypress"]=it$0$2718.keypress.bind(it$0$2718));});$2117(Interactor$2188,$2117(((accum$2743=({})),((accum$2743["::name"]="Interactor"),accum$2743)),((accum$2747=({})),((accum$2747["::egclass"]=true),accum$2747))));Interactor$2188;(exports["Interactor"]=Interactor$2188);

},{}],"repl":[function(require,module,exports){
module.exports=require('eXk3/i');
},{}],"eXk3/i":[function(require,module,exports){
var $3219=function(type$3222){var f$3226;(f$3226=type$3222["::check"]);if((f$3226===(void 0))){return function(value$3232){return (value$3232 instanceof type$3222);};}else{return function(value$3236){return f$3226.call(type$3222,value$3236);};}};
var $3238=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $3239=function(dest$3242,values$3243){var k$3248;(k$3248=null);$3246:for(k$3248 in values$3243){if(values$3243.hasOwnProperty(k$3248)){(dest$3242[k$3248]=values$3243[k$3248]);}}return dest$3242;};
var $3256=function($3258$3261){var ph$3267;(ph$3267=$3258$3261);var $3263$3273;($3263$3273=ph$3267);var bridge$3265$3278;var x$3282;(bridge$3265$3278=$3263$3273);if((((typeof(bridge$3265$3278)==="string")&&((x$3282=bridge$3265$3278),true))||((typeof(bridge$3265$3278)==="number")&&((x$3282=bridge$3265$3278),true)))){return ["value",x$3282];}else{var other$3293;(other$3293=$3263$3273);return other$3293["::serialize_ast"]();}};
var send$2993;(send$2993=function(obj$3000,$2997$3001){var ph$3007;var msg$3008;var t0$3010;(t0$3010=$2997$3001);(msg$3008=t0$3010);(ph$3007=t0$3010);var $3003$3019;($3003$3019=ph$3007);var bridge$3005$3024;(bridge$3005$3024=$3003$3019);if(((typeof(bridge$3005$3024)==="string")||(typeof(bridge$3005$3024)==="number"))){return obj$3000[msg$3008];}else{var other$3036;(other$3036=$3003$3019);return obj$3000["::send"](msg$3008);}});(Array[":::project"]=function($3042$3045){var ph$3050;var value$3051;var t0$3053;(t0$3053=$3042$3045);(value$3051=t0$3053);(ph$3050=t0$3053);var $3047$3062;($3047$3062=ph$3050);if($3219(Array)($3047$3062)){return [true,value$3051];}else{$3047$3062;return [true,[value$3051]];}});(Array.prototype["::check"]=function(value$3080){if((value$3080 instanceof Array)){var i$3086;(i$3086=0);$3083:for(;(i$3086<this.length);(i$3086++)){if(($3238(this,i$3086)!==$3238(value$3080,i$3086))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $3239(this.slice(0),this);});(Array.prototype[":::project"]=function(value$3105){if((value$3105 instanceof Array)){var i$3111;(i$3111=0);$3108:for(;(i$3111<this.length);(i$3111++)){if(($3238(this,i$3111)!==$3238(value$3105,i$3111))){return [true,[value$3105]];}}return [true,value$3105.slice(this.length)];}else{return [true,[value$3105]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($3256));});(RegExp.prototype["::check"]=function($3129$3132){var ph$3137;(ph$3137=$3129$3132);var $3134$3143;($3134$3143=ph$3137);var value$3151;if((typeof($3134$3143)==="string")){(value$3151=$3134$3143);if(value$3151.match(this)){return true;}else{return false;}}else{var other$3156;(other$3156=$3134$3143);return false;}});(RegExp.prototype[":::project"]=function($3162$3165){var ph$3170;(ph$3170=$3162$3165);var $3167$3176;($3167$3176=ph$3170);var value$3184;if((typeof($3167$3176)==="string")){(value$3184=$3167$3176);var $3187$3192;($3187$3192=value$3184.match(this));var m$3200;if(($3187$3192===null)){(m$3200=$3187$3192);return [false,null];}else{var m$3205;(m$3205=$3187$3192);return [true,m$3205];}}else{var other$3209;(other$3209=$3167$3176);return [false,null];}});(Function.prototype["::send"]=function(args$3216){return this.apply(this,args$3216);});
var $4852=function(obj$4855){var results$4860;(results$4860=[]);var k$4865;(k$4865=null);$4859:for(k$4865 in obj$4855){if(Object.prototype.hasOwnProperty.call(obj$4855,k$4865)){results$4860.push([k$4865,$3238(obj$4855,k$4865)]);}}return results$4860;};
var $5121=function(arr$5124){var results$5130;var l$5131;(results$5130=[]);(l$5131=arr$5124.length);var i$5140;(i$5140=0);$5129:for(;(i$5140<l$5131);(i$5140++)){results$5130.push([i$5140,$3238(arr$5124,i$5140)]);}return results$5130;};
var $4888=function(){var $4889$4895;($4889$4895=function(tags$4900){var it$0$4903;(it$0$4903=function(){if((!$3219($4889$4895)(this))){return Object.create($4889$4895.prototype);}else{return this;}}());(it$0$4903["tags"]=tags$4900);return it$0$4903;});($4889$4895.prototype["create"]=function(){var it$0$4923;var self$4924;(it$0$4923=this);(self$4924=this);var $4921$4933;($4921$4933=arguments);var t0$4938;var message$4942;var args$4943;(t0$4938=$4921$4933.length);if((t0$4938>=0)){(message$4942=function(){if((0>=t0$4938)){return "";}else{return $4921$4933[0];}}());(args$4943=Array.prototype.slice.call($4921$4933,1));var e$4956;(e$4956=Error(message$4942));(e$4956["::tags"]=it$0$4923.tags);(e$4956["args"]=args$4943);var temp$4972;(temp$4972=$5121(args$4943));var $length$4978;($length$4978=temp$4972.length);var $index$4984;($index$4984=0);$4957:for(;($index$4984<$length$4978);($index$4984++)){var m$4993;(m$4993=temp$4972[$index$4984]);var t0$4998;var t1$4999;var i$5003;var arg$5004;(t0$4998=m$4993);if(((t0$4998 instanceof Array)&&(((t1$4999=t0$4998.length)),(t1$4999===2)))){(i$5003=t0$4998[0]);(arg$5004=t0$4998[1]);(e$4956[i$5003]=arg$5004);}else{$4869(m$4993);}}(e$4956["length"]=args$4943.length);(e$4956["name"]=["E"].concat(it$0$4923.tags).join("."));return e$4956;}else{$4869($4921$4933);}});($4889$4895.prototype["::check"]=function(e$5034){var it$0$5038;var self$5039;(it$0$5038=this);(self$5039=this);var tags$5049;if(((!e$5034)||(!$3219(Error)(e$5034)))){return false;}(tags$5049=(e$5034["::tags"]||[]));var temp$5060;(temp$5060=it$0$5038.tags);var $length$5066;($length$5066=temp$5060.length);var $index$5072;($index$5072=0);$5050:for(;($index$5072<$length$5066);($index$5072++)){var m$5081;(m$5081=temp$5060[$index$5072]);var tag$5089;(tag$5089=m$5081);if((tags$5049.indexOf(tag$5089)===-1)){return false;}else{false;}}return true;});($4889$4895.prototype["::deconstruct"]=function(e$5098){var it$0$5102;var self$5103;(it$0$5102=this);(self$5103=this);return e$5098.args;});$3239($4889$4895,$3239(function(){var accum$5114;(accum$5114=({}));(accum$5114["::name"]="$4889");return accum$5114;}(),function(){var accum$5118;(accum$5118=({}));(accum$5118["::egclass"]=true);return accum$5118;}()));return $4889$4895;}();
var $4869=function(value$4872,url$4873,start$4874,end$4875){var err$4879;(err$4879=$4888(["match"]).create("Could not find a match for value",({"value":value$4872})));if(url$4873){(err$4879["location"]=["location",url$4873,start$4874,end$4875]);}throw err$4879;};
var $5147=function(type$5150){return function(value$5154){var f$5158;(f$5158=type$5150[":::project"]);if((f$5158===(void 0))){(f$5158=type$5150["::project"]);if((f$5158===(void 0))){return [true,type$5150(value$5154)];}else{var rval$5171;(rval$5171=false);try{(rval$5171=[true,f$5158(value$5154)]);}catch(excv$5182){var e$5188;(e$5188=excv$5182);(rval$5171=[false,null]);}return rval$5171;}}else{return f$5158.call(type$5150,value$5154);}};};
var $5483=function($5485$5488,key$5489){var ph$5497;(ph$5497=$5485$5488);var $5491$5503;($5491$5503=ph$5497);var bridge$5493$5508;(bridge$5493$5508=$5491$5503);if(((bridge$5493$5508===null)||(bridge$5493$5508===(void 0)))){return false;}else{var x$5520;if((typeof($5491$5503)==="string")){(x$5520=$5491$5503);return (key$5489 in String.prototype);}else{var x$5525;if((typeof($5491$5503)==="number")){(x$5525=$5491$5503);return (key$5489 in Number.prototype);}else{var x$5530;(x$5530=$5491$5503);return (key$5489 in x$5530);}}}};
var $5194=function(){var $5195$5200;($5195$5200=function($5204$5211,$5206$5212,$5208$5213){var it$0$5216;(it$0$5216=function(){if((!$3219($5195$5200)(this))){return Object.create($5195$5200.prototype);}else{return this;}}());var t0$5223;(t0$5223=$5147(Array)($5204$5211));if(t0$5223[0]){(it$0$5216["tags"]=t0$5223[1]);}else{$4869($5204$5211);}(it$0$5216["props"]=$5206$5212);var t0$5235;(t0$5235=$5147(Array)($5208$5213));if(t0$5235[0]){(it$0$5216["children"]=t0$5235[1]);}else{$4869($5208$5213);}undefined;return it$0$5216;});$3239(function(){var accum$5249;(accum$5249=({}));(accum$5249["::check"]=function(x$5254){return (((x$5254&&x$5254.tags)&&x$5254.props)&&x$5254.children);});return accum$5249;}(),$3239(function(){var accum$5257;(accum$5257=({}));(accum$5257[":::project"]=function($5261$5264){var ph$5269;(ph$5269=$5261$5264);var $5266$5275;($5266$5275=ph$5269);var tags$5283;var props$5284;var children$5285;if(($5483($5266$5275,"tags")&&((tags$5283=$5266$5275.tags),($5483($5266$5275,"props")&&((props$5284=$5266$5275.props),$5483($5266$5275,"children")))))){(children$5285=$5266$5275.children);return [true,[tags$5283,props$5284,children$5285]];}else{$5266$5275;return [false,null];}});return accum$5257;}(),$3239(function(){var accum$5294;(accum$5294=({}));(accum$5294["::name"]="$5195");return accum$5294;}(),function(){var accum$5298;(accum$5298=({}));(accum$5298["::egclass"]=true);return accum$5298;}())));($5195$5200.prototype["::check"]=function($5304$5307){var it$0$5311;var self$5312;(it$0$5311=this);(self$5312=this);var ph$5323;(ph$5323=$5304$5307);var $5320$5329;($5320$5329=ph$5323);var n$5337;if($3219($5194)($5320$5329)){(n$5337=$5320$5329);var temp$5347;(temp$5347=it$0$5311.tags);var $length$5353;($length$5353=temp$5347.length);var $index$5359;($index$5359=0);$5341:for(;($index$5359<$length$5353);($index$5359++)){var m$5368;(m$5368=temp$5347[$index$5359]);var c$5376;(c$5376=m$5368);if((n$5337.tags.indexOf(c$5376)===-1)){return false;}else{false;}}return true;}else{$5320$5329;return false;}});($5195$5200.prototype[":::project"]=function($5387$5390){var it$0$5394;var self$5395;(it$0$5394=this);(self$5395=this);var ph$5406;(ph$5406=$5387$5390);var $5403$5412;($5403$5412=ph$5406);var n$5420;if($3219(it$0$5394)($5403$5412)){(n$5420=$5403$5412);return [true,[n$5420.tags,n$5420.props,n$5420.children]];}else{$5403$5412;return [false,null];}});$3239($5195$5200,$3239(function(){var accum$5431;(accum$5431=({}));(accum$5431["::check"]=function(x$5436){return (((x$5436&&x$5436.tags)&&x$5436.props)&&x$5436.children);});return accum$5431;}(),$3239(function(){var accum$5439;(accum$5439=({}));(accum$5439[":::project"]=function($5443$5446){var ph$5451;(ph$5451=$5443$5446);var $5448$5457;($5448$5457=ph$5451);var tags$5465;var props$5466;var children$5467;if(($5483($5448$5457,"tags")&&((tags$5465=$5448$5457.tags),($5483($5448$5457,"props")&&((props$5466=$5448$5457.props),$5483($5448$5457,"children")))))){(children$5467=$5448$5457.children);return [true,[tags$5465,props$5466,children$5467]];}else{$5448$5457;return [false,null];}});return accum$5439;}(),$3239(function(){var accum$5476;(accum$5476=({}));(accum$5476["::name"]="$5195");return accum$5476;}(),function(){var accum$5480;(accum$5480=({}));(accum$5480["::egclass"]=true);return accum$5480;}()))));return $5195$5200;}();
var $5704=Object.keys;
var $5532=function($5534$5537,b$5538){var ph$5552;var a$5553;var t0$5555;(t0$5555=$5534$5537);(a$5553=t0$5555);(ph$5552=t0$5555);var $5540$5564;($5540$5564=ph$5552);var bridge$5543$5569;if(($5540$5564===b$5538)){return true;}else{(bridge$5543$5569=$5540$5564);if((function(){var bridge$5544$5583;(bridge$5544$5583=bridge$5543$5569);return (function(){var bridge$5545$5590;(bridge$5545$5590=bridge$5544$5583);return (function(){var bridge$5546$5597;(bridge$5546$5597=bridge$5545$5590);return (function(){var bridge$5547$5604;(bridge$5547$5604=bridge$5546$5597);return ((typeof(bridge$5547$5604)==="number")||(typeof(bridge$5547$5604)==="string"));}()||(bridge$5546$5597===null));}()||(bridge$5545$5590===(void 0)));}()||(bridge$5544$5583===true));}()||(bridge$5543$5569===false))){return false;}else{if($3219(Array)($5540$5564)){if(((!$3219(Array)(b$5538))||(a$5553.length!==b$5538.length))){return false;}var i$5620;(i$5620=0);$5616:for(;(i$5620<a$5553.length);(i$5620++)){if((!$5532(a$5553[i$5620],b$5538[i$5620]))){return false;}}return true;}else{$5540$5564;if((((Object.getPrototypeOf(a$5553)===Object.prototype)&&$3219(Object)(b$5538))&&(Object.getPrototypeOf(b$5538)===Object.prototype))){var ka$5634;(ka$5634=$5704(a$5553));if((!$5532(ka$5634.sort(),$5704(b$5538).sort()))){return false;}var temp$5645;(temp$5645=ka$5634);var $length$5651;($length$5651=temp$5645.length);var $index$5657;($index$5657=0);$5635:for(;($index$5657<$length$5651);($index$5657++)){var m$5666;(m$5666=temp$5645[$index$5657]);var k$5674;(k$5674=m$5666);if((!$5532(a$5553[k$5674],b$5538[k$5674]))){return false;}}return true;}else{if($5483($5540$5564,"::serialize")){$5540$5564["::serialize"];var $5681$5686;($5681$5686=b$5538);if($5483($5681$5686,"::serialize")){$5681$5686["::serialize"];return $5532(a$5553["::serialize"](),b$5538["::serialize"]());}else{var otherwise$5698;(otherwise$5698=$5681$5686);return false;}}else{var otherwise$5702;(otherwise$5702=$5540$5564);return false;}}}}}};
var $5727=function($5729$5732){var ph$5742;var x$5743;var t0$5745;(t0$5745=$5729$5732);(x$5743=t0$5745);(ph$5742=t0$5745);var $5734$5754;($5734$5754=ph$5742);var bridge$5736$5759;(bridge$5736$5759=$5734$5754);if((function(){var bridge$5737$5769;(bridge$5737$5769=bridge$5736$5759);return (function(){var bridge$5738$5776;(bridge$5738$5776=bridge$5737$5769);return ((bridge$5738$5776===(void 0))||(bridge$5738$5776===null));}()||(typeof(bridge$5737$5769)==="string"));}()||(typeof(bridge$5736$5759)==="number"))){return x$5743;}else{if($5483($5734$5754,"::clone")){$5734$5754["::clone"];return x$5743["::clone"]();}else{$5734$5754;if((Object.getPrototypeOf(x$5743)===Object.prototype)){var dest$5794;(dest$5794=({}));var k$5799;(k$5799=null);$5793:for(k$5799 in x$5743){if(Object.prototype.hasOwnProperty.call(x$5743,k$5799)){(dest$5794[k$5799]=x$5743[k$5799]);}}return dest$5794;}else{var other$5809;(other$5809=$5734$5754);throw $4888(["clone"]).create("Object cannot be cloned",({"obj":x$5743}));}}}};
var $5705=function(a$5708,b$5709){var dest$5714;(dest$5714=$5727(a$5708));var k$5719;(k$5719=null);$5713:for(k$5719 in b$5709){if(Object.prototype.hasOwnProperty.call(b$5709,k$5719)){(dest$5714[k$5719]=b$5709[k$5719]);}}return dest$5714;};var accum$4820;var accum$4824;var $3297$3335;var make_cards$3336;var kb$3337;var eg$3338;var $3300$3339;var GenSym$3340;var $3301$3341;var Location$3342;var highlight_locations$3343;var format_error$3344;var $3302$3345;var tokenize$3346;var $3303$3347;var parse$3348;var gensym$3349;var create_node$3350;var make_dom$3351;var mktable$3352;var repr$3353;var goto_end$3354;var insert_before_caret$3355;var Repl$3356;($3297$3335=require("./cards"));(make_cards$3336=$3297$3335.make_cards);(kb$3337=require("./kb"));(eg$3338=require("earl-grey/earl-grey"));($3300$3339=require("earl-grey/util"));(GenSym$3340=$3300$3339.GenSym);($3301$3341=require("earl-grey/location"));(Location$3342=$3301$3341.Location);(highlight_locations$3343=$3301$3341.highlight_locations);(format_error$3344=$3301$3341.format_error);($3302$3345=require("earl-grey/lex"));(tokenize$3346=$3302$3345.tokenize);($3303$3347=require("earl-grey/parse"));(parse$3348=$3303$3347.parse);(gensym$3349=GenSym$3340("io_"));(create_node$3350=function(tag$3406,kv$3407,contents$3408){var $index$3438;var $length$3432;var temp$3426;var $index$3491;var $length$3485;var temp$3479;var node$3412;(node$3412=document.createElement(tag$3406));(temp$3426=$4852(kv$3407));($length$3432=temp$3426.length);($index$3438=0);$3413:for(;($index$3438<$length$3432);($index$3438++)){var k$3457;var v$3458;var t0$3452;var t1$3453;var m$3447;(m$3447=temp$3426[$index$3438]);(t0$3452=m$3447);if(((t0$3452 instanceof Array)&&(((t1$3453=t0$3452.length)),(t1$3453===2)))){(k$3457=t0$3452[0]);(v$3458=t0$3452[1]);(node$3412[k$3457]=v$3458);}else{$4869(m$3447,"/home/olivier/git/egrepl/src/repl.eg",1842,1888);}}(temp$3479=$5147(Array)(contents$3408)[1]);($length$3485=temp$3479.length);($index$3491=0);$3416:for(;($index$3491<$length$3485);($index$3491++)){var other$3518;var s$3509;var t0$3505;var m$3500;(m$3500=temp$3479[$index$3491]);(t0$3505=m$3500);if((typeof(t0$3505)==="string")){(s$3509=t0$3505);node$3412.appendChild(document.createTextNode(s$3509));}else{(other$3518=m$3500);node$3412.appendChild(other$3518);}}return node$3412;});(make_dom$3351=function(){var $index$3594;var $length$3588;var temp$3582;var node$3572;var $index$3660;var $length$3654;var temp$3648;var $index$3728;var $length$3722;var temp$3716;var $index$3801;var $length$3795;var temp$3789;var acc$3783;var $index$3860;var $length$3854;var temp$3848;var acc$3842;var other$3835;var $3626$3768;var tag$3629;var classes$3630;var node$3631;var other$3882;var tags$3615;var props$3616;var children$3617;var args$3567;var s$3558;var $3532$3555;var t0$3553;var default_tag$3544;var $3527$3545;var t0$3540;var $3525$3535;($3525$3535=arguments);(t0$3540=$3525$3535.length);if(((t0$3540>=1)&&(t0$3540<=2))){($3527$3545=$3525$3535[0]);(default_tag$3544=function(){if((1>=t0$3540)){return "div";}else{return $3525$3535[1];}}());(t0$3553=$3527$3545);if((typeof(t0$3553)==="string")){(s$3558=t0$3553);return document.createTextNode(s$3558);}else{if($3219(Array)(t0$3553)){(args$3567=t0$3553);(node$3572=document.createElement("span"));(temp$3582=args$3567);($length$3588=temp$3582.length);($index$3594=0);$3573:for(;($index$3594<$length$3588);($index$3594++)){var arg$3611;var m$3603;(m$3603=temp$3582[$index$3594]);(arg$3611=m$3603);node$3572.appendChild(make_dom$3351(arg$3611,default_tag$3544));}return node$3572;}else{if(($3219($5194)(t0$3553)&&($5483(t0$3553,"tags")&&((tags$3615=t0$3553.tags),($5483(t0$3553,"props")&&((props$3616=t0$3553.props),$5483(t0$3553,"children"))))))){(children$3617=t0$3553.children);(tag$3629=default_tag$3544);(classes$3630=[]);(temp$3648=tags$3615);($length$3654=temp$3648.length);($index$3660=0);$3632:for(;($index$3660<$length$3654);($index$3660++)){var other$3699;var name$3680;var t0$3674;var t1$3675;var t2$3676;var m$3669;(m$3669=temp$3648[$index$3660]);(t0$3674=$5147(RegExp("^\\.(.*)",""))(m$3669));if((t0$3674[0]&&(((t1$3675=t0$3674[1])),(((t2$3676=t1$3675.length)),(t2$3676===2))))){t1$3675[0];(name$3680=t1$3675[1]);classes$3630.push(name$3680);}else{(other$3699=m$3669);(tag$3629=other$3699);}}(node$3631=document.createElement(tag$3629));if(classes$3630.length){(node$3631["className"]=classes$3630.join(" "));}(temp$3716=$4852(props$3616));($length$3722=temp$3716.length);($index$3728=0);$3636:for(;($index$3728<$length$3722);($index$3728++)){var k$3747;var v$3748;var t0$3742;var t1$3743;var m$3737;(m$3737=temp$3716[$index$3728]);(t0$3742=m$3737);if(((t0$3742 instanceof Array)&&(((t1$3743=t0$3742.length)),(t1$3743===2)))){(k$3747=t0$3742[0]);(v$3748=t0$3742[1]);(node$3631[k$3747]=v$3748);}else{$4869(m$3737,"/home/olivier/git/egrepl/src/repl.eg",2616,2672);}}($3626$3768=tag$3629);if(($3626$3768==="raw")){(acc$3783=[]);(temp$3789=children$3617);($length$3795=temp$3789.length);($index$3801=0);$3778:for(;($index$3801<$length$3795);($index$3801++)){var s$3819;var t0$3815;var m$3810;(m$3810=temp$3789[$index$3801]);(t0$3815=m$3810);if((typeof(t0$3815)==="string")){(s$3819=t0$3815);acc$3783.push(((node$3631["innerHTML"]=s$3819)));}else{$4869(m$3810,"/home/olivier/git/egrepl/src/repl.eg",2699,2800);}}acc$3783;}else{(other$3835=$3626$3768);(acc$3842=[]);(temp$3848=children$3617);($length$3854=temp$3848.length);($index$3860=0);$3837:for(;($index$3860<$length$3854);($index$3860++)){var c$3877;var m$3869;(m$3869=temp$3848[$index$3860]);(c$3877=m$3869);acc$3842.push(node$3631.appendChild(make_dom$3351(c$3877,default_tag$3544)));}acc$3842;}return node$3631;}else{(other$3882=$3527$3545);return make_dom$3351([true,String(other$3882)][1]);}}}}else{$4869($3525$3535);}});(mktable$3352=function(){var other$3934;var $3917$3922;var $index$3960;var $length$3954;var temp$3948;var acc$3942;var its$3914;var x$3904;var recur$3905;var t0$3900;var $3891$3895;($3891$3895=arguments);(t0$3900=$3891$3895.length);if(((t0$3900>=1)&&(t0$3900<=2))){(x$3904=$3891$3895[0]);(recur$3905=function(){if((1>=t0$3900)){return repr$3353;}else{return $3891$3895[1];}}());(its$3914=((($3917$3922=x$3904)),function(){if($3219(Array)($3917$3922)){return x$3904;}else{(other$3934=$3917$3922);return $4852(x$3904);}}()));if(its$3914.length){return $5194(["table",".object"],({}),(((acc$3942=[])),(((temp$3948=its$3914)),((($length$3954=temp$3948.length)),((($index$3960=0)),function(){$3937:for(;($index$3960<$length$3954);($index$3960++)){var k$3979;var v$3980;var t0$3974;var t1$3975;var m$3969;(m$3969=temp$3948[$index$3960]);(t0$3974=m$3969);if(((t0$3974 instanceof Array)&&(((t1$3975=t0$3974.length)),(t1$3975===2)))){(k$3979=t0$3974[0]);(v$3980=t0$3974[1]);acc$3942.push($5194(["tr"],({}),[$5194(["th"],({}),recur$3905(k$3979,repr$3353)),$5194(["td"],({}),recur$3905(v$3980,repr$3353))]));}else{$4869(m$3969,"/home/olivier/git/egrepl/src/repl.eg",4085,4219);}}}()))),acc$3942));}else{return $5194([".object",".empty"],({}),[]);}}else{$4869($3891$3895);}});(repr$3353=function(){var $index$4132;var $length$4126;var temp$4120;var acc$4114;var other$4184;var f$4175;var n$4154;var entries$4106;var $4021$4061;var $4022$4062;var t0$4058;var t1$4059;var x$4036;var recur$4037;var $4004$4038;var t0$4030;var t1$4031;var t2$4032;var $4002$4025;($4002$4025=arguments);(t0$4030=$4002$4025.length);if((((t0$4030>=1)&&(t0$4030<=2))&&(((t1$4031=$4002$4025[0])),((x$4036=t1$4031),(($4004$4038=t1$4031),(((t2$4032=function(){if((1>=t0$4030)){return repr$3353;}else{return $4002$4025[1];}}())),$3219(Function)(t2$4032))))))){(recur$4037=t2$4032);if(($4004$4038===true)){return $5194([".special",".true"],({}),"true");}else{if(($4004$4038===false)){return $5194([".special",".false"],({}),"false");}else{if(($4004$4038===null)){return $5194([".special",".nil"],({}),"null");}else{if(($4004$4038===(void 0))){return $5194([".special",".nil"],({}),"undefined");}else{if((typeof($4004$4038)==="number")){return $5194([".num"],({}),String(x$4036));}else{if(($4004$4038==="")){return $5194([".str",".empty"],({}),[]);}else{if((typeof($4004$4038)==="string")){return $5194([".str"],({}),x$4036);}else{(t0$4058=$4004$4038);if((($4022$4062=$3219(Array)(t0$4058))&&(((t1$4059=t0$4058.length)),(t1$4059===0)))){return $5194([".sequence",".empty"],({}),[]);}else{if($4022$4062){(entries$4106=t0$4058);return $5194([".sequence"],({}),(((acc$4114=[])),(((temp$4120=entries$4106)),((($length$4126=temp$4120.length)),((($index$4132=0)),function(){$4109:for(;($index$4132<$length$4126);($index$4132++)){var x$4149;var m$4141;(m$4141=temp$4120[$index$4132]);(x$4149=m$4141);acc$4114.push(recur$4037(x$4149,repr$3353));}}()))),acc$4114));}else{if($3219($5194)(t0$4058)){(n$4154=t0$4058);return n$4154;}else{$4004$4038;if(x$4036["::repr"]){return x$4036["::repr"](recur$4037);}else{if((Object.getPrototypeOf(x$4036)===Object.prototype)){return mktable$3352(x$4036);}else{if((x$4036.constructor&&x$4036.constructor["::egclass"])){return $5194([".instance"],({}),[$5194([".classname"],({}),x$4036.constructor["::name"]),mktable$3352(x$4036)]);}else{if(x$4036["::egclass"]){return $5194([".class"],({}),[$5194([".classname"],({}),("Class "+x$4036["::name"])),mktable$3352(x$4036.prototype)]);}else{(t0$4058=$4004$4038);if($3219(Function)(t0$4058)){(f$4175=t0$4058);return $5194([".function"],({}),function(){if(f$4175.name){return f$4175.name;}else{return "<anonymous>";}}());}else{(other$4184=$4004$4038);return $5194([".unknown"],({}),other$4184.toString());}}}}}}}}}}}}}}}}else{$4869($4002$4025);}});(goto_end$3354=function(elem$4193){var range$4198;var selection$4199;(range$4198=document.createRange());range$4198.selectNodeContents(elem$4193);range$4198.collapse(false);(selection$4199=window.getSelection());selection$4199.removeAllRanges();return selection$4199.addRange(range$4198);});(insert_before_caret$3355=function(text$4211){var other$4237;var $4220$4225;var it$0$4252;var it$0$4262;var range$4246;var node$4216;var sel$4217;(node$4216=((($4220$4225=text$4211)),function(){if((typeof($4220$4225)==="string")){return document.createTextNode(text$4211);}else{(other$4237=$4220$4225);return other$4237;}}()));(sel$4217=window.getSelection());if(sel$4217.rangeCount){(range$4246=sel$4217.getRangeAt(0));(it$0$4252=range$4246);it$0$4252.collapse(false);it$0$4252.insertNode(node$4216);(range$4246=range$4246.cloneRange());(it$0$4262=range$4246);it$0$4262.selectNodeContents(node$4216);it$0$4262.collapse(false);sel$4217.removeAllRanges();return sel$4217.addRange(range$4246);}});(Error.prototype["::repr"]=function(){return format_error$3344(this);});(Repl$3356=function(box$4278,target$4279,input$4280,evaluator$4281){var it$0$4284;(it$0$4284=function(){if((!$3219(Repl$3356)(this))){return Object.create(Repl$3356.prototype);}else{return this;}}());(it$0$4284["url"]="<repl>");(it$0$4284["gen"]=eg$3338.Generator(true));(it$0$4284["evaluator"]=evaluator$4281);(it$0$4284["box"]=box$4278);(it$0$4284["target"]=target$4279);(it$0$4284["input"]=input$4280);(it$0$4284["multiline"]=false);(it$0$4284["interactor"]=kb$3337.Interactor(({})));it$0$4284.set_multiline(false);it$0$4284.interactor.install(it$0$4284.input);(it$0$4284["cursor"]=0);(it$0$4284["history"]=[""]);return it$0$4284;});(Repl$3356.prototype["sink"]=function(){var it$0$4339;var self$4340;(it$0$4339=this);(self$4340=this);return jQuery(it$0$4339.box).scrollTop(it$0$4339.box.scrollHeight);});(Repl$3356.prototype["add_to_history"]=function(text$4352){var hl$4368;var it$0$4356;var self$4357;(it$0$4356=this);(self$4357=this);(hl$4368=it$0$4356.history.length);if(((text$4352!=="")&&(!((hl$4368>1)&&$5532($3238(it$0$4356.history,(hl$4368-2)),text$4352))))){(it$0$4356.history[(hl$4368-1)]=text$4352);it$0$4356.history.push("");}(it$0$4356["cursor"]=(it$0$4356.history.length-1));});(Repl$3356.prototype["submit"]=function(){var text$4399;var it$0$4387;var self$4388;(it$0$4387=this);(self$4388=this);it$0$4387.set_multiline(false);(text$4399=it$0$4387.input.textContent);it$0$4387.process(text$4399);(it$0$4387.input["innerHTML"]="");return it$0$4387.sink();});(Repl$3356.prototype["begin_multiline"]=function(){var it$0$4413;var self$4414;(it$0$4413=this);(self$4414=this);it$0$4413.set_multiline(true);goto_end$3354(it$0$4413.input);insert_before_caret$3355("\n   ");return it$0$4413.sink();});(Repl$3356.prototype["set_multiline"]=function(x$4427){var accum$4485;var accum$4492;var accum$4508;var accum$4516;var accum$4524;var accum$4559;var accum$4567;var accum$4574;var accum$4582;var previous$4455;var next$4456;var common$4457;var $4440$4445;var it$0$4431;var self$4432;(it$0$4431=this);(self$4432=this);($4440$4445=x$4427);(previous$4455=function(){if((it$0$4431.cursor>0)){(it$0$4431.input["textContent"]=$3238(it$0$4431.history,(--it$0$4431.cursor)));goto_end$3354(it$0$4431.input);return it$0$4431.sink();}});(next$4456=function(){if((it$0$4431.cursor<(it$0$4431.history.length-1))){(it$0$4431.input["textContent"]=$3238(it$0$4431.history,(++it$0$4431.cursor)));goto_end$3354(it$0$4431.input);return it$0$4431.sink();}});(common$4457=$3239(((accum$4485=({})),((accum$4485["C-l"]=function(){return jQuery(it$0$4431.target).empty();}),accum$4485)),((accum$4492=({})),((accum$4492["S-Enter"]=function(){return it$0$4431.submit();}),accum$4492))));if(($4440$4445===false)){jQuery(it$0$4431.input).removeClass("multiline");return it$0$4431.interactor.set_bindings($5705(common$4457,$3239(((accum$4508=({})),((accum$4508["C-m"]=function(){it$0$4431.set_multiline(true);return "break";}),accum$4508)),$3239(((accum$4516=({})),((accum$4516["C-Enter"]=function(){it$0$4431.begin_multiline();return "break";}),accum$4516)),$3239(((accum$4524=({})),((accum$4524["Enter"]=function(){var other$4547;var $4530$4535;($4530$4535=it$0$4431.input.textContent);if($3219(RegExp("(=|->|%|:|with|where|each)$",""))($4530$4535)){return it$0$4431.begin_multiline();}else{(other$4547=$4530$4535);return it$0$4431.submit();}}),accum$4524)),({"Up":previous$4455,"Down":next$4456}))))));}else{if(($4440$4445===true)){jQuery(it$0$4431.input).addClass("multiline");return it$0$4431.interactor.set_bindings($5705(common$4457,$3239(((accum$4559=({})),((accum$4559["C-m"]=function(){it$0$4431.set_multiline(false);return "break";}),accum$4559)),$3239(((accum$4567=({})),((accum$4567["C-Enter"]=function(){return it$0$4431.submit();}),accum$4567)),$3239(((accum$4574=({})),((accum$4574["Enter"]=function(){insert_before_caret$3355("\n");return it$0$4431.sink();}),accum$4574)),((accum$4582=({})),((accum$4582["Tab"]=function(){return insert_before_caret$3355("   ");}),accum$4582)))))));}else{$4869($4440$4445);}}});(Repl$3356.prototype["generate"]=function(text$4594){var it$0$4598;var self$4599;(it$0$4598=this);(self$4599=this);return it$0$4598.gen.generate(eg$3338.Source(text$4594,it$0$4598.url));});(Repl$3356.prototype["eval"]=function(text$4611){var rval$4652;var gen$4627;var handle$4628;var it$0$4615;var self$4616;(it$0$4615=this);(self$4616=this);(gen$4627=function(){var g$4638;(g$4638=it$0$4615.generate(text$4611));return ["success",it$0$4615.evaluator(g$4638)];});(handle$4628=function(e$4647){return ["failure",e$4647];});(rval$4652=false);try{(rval$4652=gen$4627());}catch(excv$4663){var e$4669;(e$4669=excv$4663);(rval$4652=handle$4628(e$4669));}return rval$4652;});(Repl$3356.prototype["process"]=function(){var error$4782;var value$4777;var n$4767;var $4734$4748;var $4735$4749;var $4736$4750;var $4737$4751;var t0$4745;var t1$4746;var $4728$4740;var real_text$4718;var node$4719;var name$4720;var collapse$4721;var on$4722;var text$4703;var display_in$4704;var t0$4699;var $4682$4694;var it$0$4684;var self$4685;(it$0$4684=this);(self$4685=this);($4682$4694=arguments);(t0$4699=$4682$4694.length);if(((t0$4699>=1)&&(t0$4699<=2))){(text$4703=$4682$4694[0]);(display_in$4704=function(){if((1>=t0$4699)){return true;}else{return $4682$4694[1];}}());it$0$4684.add_to_history(text$4703);(real_text$4718=text$4703);(node$4719=make_dom$3351($5194([".io"],({}),[function(){if(display_in$4704){return $5194([".in"],({}),[$5194([".inbanner"],({}),[]),$5194([".entry"],({}),(text$4703||" "))]);}else{return "";}}(),((($4728$4740=it$0$4684.eval(real_text$4718))),($4728$4740,function(){if((text$4703.trim()==="")){return "";}else{if((($4734$4748=($4728$4740 instanceof Array))&&(((t0$4745=$4728$4740.length)),(($4736$4750=(t0$4745===2))&&(($4737$4751=($4728$4740[0]==="success"))&&($4728$4740[1]===(void 0))))))){return "";}else{if(($4737$4751&&(((t1$4746=$4728$4740[1])),$3219($5194)(t1$4746)))){(n$4767=t1$4746);return $5194([".display"],({}),[$5194([".displaybanner"],({}),[]),$5194([".result"],({}),n$4767)]);}else{if($4737$4751){(value$4777=$4728$4740[1]);return $5194([".out"],({}),[$5194([".outbanner"],({}),[]),$5194([".result"],({}),$5194([".eg"],({}),repr$3353(value$4777)))]);}else{if(($4736$4750&&($4728$4740[0]==="failure"))){(error$4782=$4728$4740[1]);return $5194([".err"],({}),[$5194([".errbanner"],({}),[]),$5194([".result"],({}),$5194([".eg"],({}),repr$3353(error$4782)))]);}else{$4869($4728$4740);}}}}}}()))])));(name$4720=gensym$3349());(node$4719["id"]=name$4720);it$0$4684.target.appendChild(node$4719);(collapse$4721=function(e$4798){var at_top$4802;e$4798.stopPropagation();(at_top$4802=$5532((it$0$4684.box.scrollTop+jQuery(it$0$4684.box).height()),it$0$4684.box.scrollHeight));jQuery(this).toggleClass("collapsed");if(at_top$4802){return jQuery(it$0$4684.box).scrollTop(it$0$4684.box.scrollHeight);}});(on$4722=function(sel$4812){return jQuery(((("#"+name$4720)+" ")+sel$4812));});on$4722(".sequence").addClass("complex");on$4722(".object").addClass("complex");on$4722(".complex").click(collapse$4721);on$4722(".complex .complex .complex").addClass("collapsed");on$4722(".error_args.syntax").addClass("collapsed").click(collapse$4721);return on$4722(".traceback").addClass("collapsed").click(collapse$4721);}else{$4869($4682$4694);}});$3239(Repl$3356,$3239(((accum$4820=({})),((accum$4820["::name"]="Repl"),accum$4820)),((accum$4824=({})),((accum$4824["::egclass"]=true),accum$4824))));Repl$3356;(exports["Repl"]=Repl$3356);(exports["Interactor"]=kb$3337.Interactor);(exports["parse"]=parse$3348);(exports["tokenize"]=tokenize$3346);(exports["Source"]=eg$3338.Source);(exports["make_cards"]=make_cards$3336(repr$3353));

},{"./cards":1,"./kb":2,"earl-grey/earl-grey":5,"earl-grey/lex":7,"earl-grey/location":8,"earl-grey/parse":10,"earl-grey/util":15}],5:[function(require,module,exports){
(function (global){
var $237=function(type$240){var f$244;(f$244=type$240["::check"]);if((f$244===(void 0))){return function(value$250){return (value$250 instanceof type$240);};}else{return function(value$254){return f$244.call(type$240,value$254);};}};
var $256=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $257=function(dest$260,values$261){var k$266;(k$266=null);$264:for(k$266 in values$261){if(values$261.hasOwnProperty(k$266)){(dest$260[k$266]=values$261[k$266]);}}return dest$260;};
var $274=function($276$279){var ph$285;(ph$285=$276$279);var $281$291;($281$291=ph$285);var bridge$283$296;var x$300;(bridge$283$296=$281$291);if((((typeof(bridge$283$296)==="string")&&((x$300=bridge$283$296),true))||((typeof(bridge$283$296)==="number")&&((x$300=bridge$283$296),true)))){return ["value",x$300];}else{var other$311;(other$311=$281$291);return other$311["::serialize_ast"]();}};
var send$11;(send$11=function(obj$18,$15$19){var ph$25;var msg$26;var t0$28;(t0$28=$15$19);(msg$26=t0$28);(ph$25=t0$28);var $21$37;($21$37=ph$25);var bridge$23$42;(bridge$23$42=$21$37);if(((typeof(bridge$23$42)==="string")||(typeof(bridge$23$42)==="number"))){return obj$18[msg$26];}else{var other$54;(other$54=$21$37);return obj$18["::send"](msg$26);}});(Array[":::project"]=function($60$63){var ph$68;var value$69;var t0$71;(t0$71=$60$63);(value$69=t0$71);(ph$68=t0$71);var $65$80;($65$80=ph$68);if($237(Array)($65$80)){return [true,value$69];}else{$65$80;return [true,[value$69]];}});(Array.prototype["::check"]=function(value$98){if((value$98 instanceof Array)){var i$104;(i$104=0);$101:for(;(i$104<this.length);(i$104++)){if(($256(this,i$104)!==$256(value$98,i$104))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $257(this.slice(0),this);});(Array.prototype[":::project"]=function(value$123){if((value$123 instanceof Array)){var i$129;(i$129=0);$126:for(;(i$129<this.length);(i$129++)){if(($256(this,i$129)!==$256(value$123,i$129))){return [true,[value$123]];}}return [true,value$123.slice(this.length)];}else{return [true,[value$123]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($274));});(RegExp.prototype["::check"]=function($147$150){var ph$155;(ph$155=$147$150);var $152$161;($152$161=ph$155);var value$169;if((typeof($152$161)==="string")){(value$169=$152$161);if(value$169.match(this)){return true;}else{return false;}}else{var other$174;(other$174=$152$161);return false;}});(RegExp.prototype[":::project"]=function($180$183){var ph$188;(ph$188=$180$183);var $185$194;($185$194=ph$188);var value$202;if((typeof($185$194)==="string")){(value$202=$185$194);var $205$210;($205$210=value$202.match(this));var m$218;if(($205$210===null)){(m$218=$205$210);return [false,null];}else{var m$223;(m$223=$205$210);return [true,m$223];}}else{var other$227;(other$227=$185$194);return [false,null];}});(Function.prototype["::send"]=function(args$234){return this.apply(this,args$234);});
var $1226=function(arr$1229){var results$1235;var l$1236;(results$1235=[]);(l$1236=arr$1229.length);var i$1245;(i$1245=0);$1234:for(;(i$1245<l$1236);(i$1245++)){results$1235.push([i$1245,$256(arr$1229,i$1245)]);}return results$1235;};
var $993=function(){var $994$1000;($994$1000=function(tags$1005){var it$0$1008;(it$0$1008=function(){if((!$237($994$1000)(this))){return Object.create($994$1000.prototype);}else{return this;}}());(it$0$1008["tags"]=tags$1005);return it$0$1008;});($994$1000.prototype["create"]=function(){var it$0$1028;var self$1029;(it$0$1028=this);(self$1029=this);var $1026$1038;($1026$1038=arguments);var t0$1043;var message$1047;var args$1048;(t0$1043=$1026$1038.length);if((t0$1043>=0)){(message$1047=function(){if((0>=t0$1043)){return "";}else{return $1026$1038[0];}}());(args$1048=Array.prototype.slice.call($1026$1038,1));var e$1061;(e$1061=Error(message$1047));(e$1061["::tags"]=it$0$1028.tags);(e$1061["args"]=args$1048);var temp$1077;(temp$1077=$1226(args$1048));var $length$1083;($length$1083=temp$1077.length);var $index$1089;($index$1089=0);$1062:for(;($index$1089<$length$1083);($index$1089++)){var m$1098;(m$1098=temp$1077[$index$1089]);var t0$1103;var t1$1104;var i$1108;var arg$1109;(t0$1103=m$1098);if(((t0$1103 instanceof Array)&&(((t1$1104=t0$1103.length)),(t1$1104===2)))){(i$1108=t0$1103[0]);(arg$1109=t0$1103[1]);(e$1061[i$1108]=arg$1109);}else{$974(m$1098);}}(e$1061["length"]=args$1048.length);(e$1061["name"]=["E"].concat(it$0$1028.tags).join("."));return e$1061;}else{$974($1026$1038);}});($994$1000.prototype["::check"]=function(e$1139){var it$0$1143;var self$1144;(it$0$1143=this);(self$1144=this);var tags$1154;if(((!e$1139)||(!$237(Error)(e$1139)))){return false;}(tags$1154=(e$1139["::tags"]||[]));var temp$1165;(temp$1165=it$0$1143.tags);var $length$1171;($length$1171=temp$1165.length);var $index$1177;($index$1177=0);$1155:for(;($index$1177<$length$1171);($index$1177++)){var m$1186;(m$1186=temp$1165[$index$1177]);var tag$1194;(tag$1194=m$1186);if((tags$1154.indexOf(tag$1194)===-1)){return false;}else{false;}}return true;});($994$1000.prototype["::deconstruct"]=function(e$1203){var it$0$1207;var self$1208;(it$0$1207=this);(self$1208=this);return e$1203.args;});$257($994$1000,$257(function(){var accum$1219;(accum$1219=({}));(accum$1219["::name"]="$994");return accum$1219;}(),function(){var accum$1223;(accum$1223=({}));(accum$1223["::egclass"]=true);return accum$1223;}()));return $994$1000;}();
var $974=function(value$977,url$978,start$979,end$980){var err$984;(err$984=$993(["match"]).create("Could not find a match for value",({"value":value$977})));if(url$978){(err$984["location"]=["location",url$978,start$979,end$980]);}throw err$984;};
var $1252=function($1254$1257,key$1258){var ph$1266;(ph$1266=$1254$1257);var $1260$1272;($1260$1272=ph$1266);var bridge$1262$1277;(bridge$1262$1277=$1260$1272);if(((bridge$1262$1277===null)||(bridge$1262$1277===(void 0)))){return false;}else{var x$1289;if((typeof($1260$1272)==="string")){(x$1289=$1260$1272);return (key$1258 in String.prototype);}else{var x$1294;if((typeof($1260$1272)==="number")){(x$1294=$1260$1272);return (key$1258 in Number.prototype);}else{var x$1299;(x$1299=$1260$1272);return (key$1258 in x$1299);}}}};
var $1301=function(obj$1304){var results$1309;(results$1309=[]);var k$1314;(k$1314=null);$1308:for(k$1314 in obj$1304){if(Object.prototype.hasOwnProperty.call(obj$1304,k$1314)){results$1309.push([k$1314,$256(obj$1304,k$1314)]);}}return results$1309;};
var $1318=function(type$1321){return function(value$1325){var f$1329;(f$1329=type$1321[":::project"]);if((f$1329===(void 0))){(f$1329=type$1321["::project"]);if((f$1329===(void 0))){return [true,type$1321(value$1325)];}else{var rval$1342;(rval$1342=false);try{(rval$1342=[true,f$1329(value$1325)]);}catch(excv$1353){var e$1359;(e$1359=excv$1353);(rval$1342=[false,null]);}return rval$1342;}}else{return f$1329.call(type$1321,value$1325);}};};var accum$930;var accum$934;var $315$345;var Source$346;var Location$347;var highlight_locations$348;var $316$349;var tokenize$350;var $317$351;var parse$352;var $318$353;var translate$354;var Translator$355;var std$356;var exp$357;var opt$358;var vm$359;var module$360;var path$361;var version$362;var evaluator$363;var generate_from_ast$364;var generate$365;var Generator$366;($315$345=require("./location"));(Source$346=$315$345.Source);(Location$347=$315$345.Location);(highlight_locations$348=$315$345.highlight_locations);($316$349=require("./lex"));(tokenize$350=$316$349.tokenize);($317$351=require("./parse"));(parse$352=$317$351.parse);($318$353=require("./translate-js"));(translate$354=$318$353.translate);(Translator$355=$318$353.Translator);(std$356=require("./stdenv"));(exp$357=require("./expand"));(opt$358=require("./opt"));(vm$359=require("vm"));(module$360=require("module"));(path$361=require("path"));(version$362="zero");(evaluator$363=function($424$427){var t0$436;var accum$479;var paths$461;var e_module$462;var e_require$463;var $432$451;var $429$445;var ph$433;var options$434;(t0$436=$424$427);(options$434=t0$436);(ph$433=t0$436);($429$445=ph$433);$429$445;if(module$360._nodeModulePaths){(paths$461=module$360._nodeModulePaths(options$434.cwd));(e_module$462=(new module$360(options$434.showname)));$257(e_module$462,({"filename":options$434.filename,"paths":paths$461}));(e_require$463=function(path$474){return module$360._load(path$474,e_module$462,true);});$257(e_require$463,$257(({"main":e_module$462}),$257(((accum$479=({})),((accum$479["resolve"]=function(path$484){return module$360._resolveFileName(path$484,e_module$462);}),accum$479)),({"paths":paths$461,"cache":require.cache}))));$257(global,({"__filename":options$434.filename,"__dirname":path$361.dirname(options$434.filename),"module":e_module$462,"require":e_require$463}));return function(code$487){var script$491;(script$491=vm$359.createScript(code$487,options$434.showname));return script$491.runInThisContext();};}else{return function(code$500){return eval(code$500);};}});(generate_from_ast$364=function(ast$507){var ex$514;var tr$515;var rval$516;(ex$514=std$356.expand(["top"],std$356.topscope,std$356.stdenv.fork().mark(["multi",ast$507])));(ex$514=opt$358.hoist(ex$514));(tr$515=Translator$355());(rval$516=tr$515.translate(ex$514,"expr"));return [tr$515.dump_store(),rval$516];});std$356.stdenv.bind(std$356.topscope,"macro",["macro",function(context$534,scope$535,form$536,$531$537){var t0$605;var t1$606;var prep$598;var code$599;var file$600;var ev$601;var mac$602;var mac2$603;var name$560;var sym$561;var arguments$562;var ast$563;var t0$552;var t1$553;var t2$554;var t3$555;var t4$556;var $539$547;var ph$541;(ph$541=$531$537);($539$547=ph$541);if((($539$547 instanceof Array)&&(((t0$552=$539$547.length)),((t0$552===3)&&(($539$547[0]==="data")&&(((t1$553=$539$547[1])),((t1$553 instanceof Array)&&(((t2$554=t1$553.length)),((t2$554===3)&&((t1$553[0]==="send")&&(((t3$555=t1$553[1])),((name$560=t3$555),((t3$555 instanceof Array)&&(((t4$556=t3$555.length)),((t4$556===2)&&(t3$555[0]==="symbol")))))))))))))))){(sym$561=t3$555[1]);(arguments$562=t1$553[2]);(ast$563=$539$547[2]);(t0$605=generate_from_ast$364(["send",["symbol","->"],["data",arguments$562,ast$563]]));if(((t0$605 instanceof Array)&&(((t1$606=t0$605.length)),(t1$606===2)))){(prep$598=t0$605[0]);(code$599=t0$605[1]);}else{$974(generate_from_ast$364(["send",["symbol","->"],["data",arguments$562,ast$563]]),"/home/olivier/git/earl-grey/src/earl-grey.eg",1667,1717);}(file$600=form$536.location.source.url);(ev$601=evaluator$363(({"filename":file$600,"showname":file$600,"cwd":file$600})));(mac$602=ev$601((prep$598+((";("+code$599)+")"))));(mac2$603=function(c$632,s$633,f$634,e$635){var bindings$642;var env$643;var r$644;(bindings$642=form$536.env.list_bindings(scope$535));(env$643=exp$357.Env());(env$643.scopes[std$356.topscope.name]=bindings$642);(r$644=mac$602(c$632,s$633,f$634,e$635));return env$643.mark(r$644);});return ["declare_raw",name$560,["macro",mac2$603]];}else{$974($539$547);}}]);std$356.stdenv.bind(std$356.topscope,"macros",["macro",function(context$666,scope$667,$661$668,$663$669){var t0$674;var t0$683;var t1$684;var t0$704;var t1$705;var $index$745;var $length$739;var temp$733;var acc$727;var prep$700;var code$701;var the_macros$702;var env$671;var body$672;(t0$674=$661$668);if($1252(t0$674,"env")){(env$671=t0$674.env);}else{$974($661$668);}(t0$683=$663$669);if(((t0$683 instanceof Array)&&(((t1$684=t0$683.length)),((t1$684===2)&&(t0$683[0]==="data"))))){(body$672=t0$683[1]);}else{$974($663$669);}(t0$704=generate_from_ast$364(body$672));if(((t0$704 instanceof Array)&&(((t1$705=t0$704.length)),(t1$705===2)))){(prep$700=t0$704[0]);(code$701=t0$704[1]);}else{$974(generate_from_ast$364(body$672),"/home/olivier/git/earl-grey/src/earl-grey.eg",2635,2665);}(the_macros$702=eval((((prep$700+";(")+code$701)+")")));return ["splice"].concat((((acc$727=[])),(((temp$733=$1301(the_macros$702))),((($length$739=temp$733.length)),((($index$745=0)),function(){$722:for(;($index$745<$length$739);($index$745++)){var k$764;var v$765;var t0$759;var t1$760;var m$754;(m$754=temp$733[$index$745]);(t0$759=m$754);if(((t0$759 instanceof Array)&&(((t1$760=t0$759.length)),(t1$760===2)))){(k$764=t0$759[0]);(v$765=t0$759[1]);acc$727.push(["declare_raw",$257(["symbol",k$764],({"env":env$671})),["macro",v$765]]);}else{$974(m$754,"/home/olivier/git/earl-grey/src/earl-grey.eg",2735,2842);}}}()))),acc$727));}]);(generate$365=function(source$784){return Generator$366().generate(source$784);});(Generator$366=function(){var interactive$811;var t0$807;var $798$802;var it$0$793;(it$0$793=function(){if((!$237(Generator$366)(this))){return Object.create(Generator$366.prototype);}else{return this;}}());($798$802=arguments);(t0$807=$798$802.length);if(((t0$807>=0)&&(t0$807<=1))){(interactive$811=function(){if((0>=t0$807)){return false;}else{return $798$802[0];}}());(it$0$793["tr"]=Translator$355(std$356.stdprelude));(it$0$793["env"]=std$356.stdenv.fork());(it$0$793["interactive"]=interactive$811);}else{$974($798$802);}return it$0$793;});(Generator$366.prototype["generate"]=function(){var t0$897;var t1$898;var t2$899;var args$895;var stmt$890;var t$876;var p$877;var ex$878;var rval$879;var source$862;var dump$863;var t0$858;var $841$853;var it$0$843;var self$844;(it$0$843=this);(self$844=this);($841$853=arguments);(t0$858=$841$853.length);if(((t0$858>=1)&&(t0$858<=2))){(source$862=$841$853[0]);(dump$863=function(){if((1>=t0$858)){return true;}else{return $841$853[1];}}());(t$876=tokenize$350(source$862));(p$877=parse$352(t$876));(ex$878=(((stmt$890=function(){if(it$0$843.interactive){(t0$897=$1318(["multi"])(p$877));if((t0$897[0]&&(((t1$898=t0$897[1])),(((t2$899=t1$898.length)),(t2$899>=0))))){(args$895=Array.prototype.slice.call(t1$898,0));}else{$974(p$877,"/home/olivier/git/earl-grey/src/earl-grey.eg",3621,3622);}return ["interactive"].concat(args$895);}else{return ["multi",p$877];}}())),std$356.expand(["top"],std$356.topscope,it$0$843.env.mark(stmt$890))));(ex$878=opt$358.hoist(ex$878));(rval$879=it$0$843.tr.translate(ex$878,"stmt"));if(dump$863){return (it$0$843.tr.dump_store()+rval$879);}else{return rval$879;}}else{$974($841$853);}});$257(Generator$366,$257(((accum$930=({})),((accum$930["::name"]="Generator"),accum$930)),((accum$934=({})),((accum$934["::egclass"]=true),accum$934))));Generator$366;(exports["evaluator"]=evaluator$363);(exports["Source"]=Source$346);(exports["Location"]=Location$347);(exports["highlight_locations"]=highlight_locations$348);(exports["tokenize"]=tokenize$350);(exports["parse"]=parse$352);(exports["Generator"]=Generator$366);(exports["generate"]=generate$365);(exports["version"]=version$362);

}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./expand":6,"./lex":7,"./location":8,"./opt":9,"./parse":10,"./stdenv":13,"./translate-js":14,"module":17,"path":19,"vm":20}],6:[function(require,module,exports){
var $1601=function(type$1604){var f$1608;(f$1608=type$1604["::check"]);if((f$1608===(void 0))){return function(value$1614){return (value$1614 instanceof type$1604);};}else{return function(value$1618){return f$1608.call(type$1604,value$1618);};}};
var $1620=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $1621=function(dest$1624,values$1625){var k$1630;(k$1630=null);$1628:for(k$1630 in values$1625){if(values$1625.hasOwnProperty(k$1630)){(dest$1624[k$1630]=values$1625[k$1630]);}}return dest$1624;};
var $1638=function($1640$1643){var ph$1649;(ph$1649=$1640$1643);var $1645$1655;($1645$1655=ph$1649);var bridge$1647$1660;var x$1664;(bridge$1647$1660=$1645$1655);if((((typeof(bridge$1647$1660)==="string")&&((x$1664=bridge$1647$1660),true))||((typeof(bridge$1647$1660)==="number")&&((x$1664=bridge$1647$1660),true)))){return ["value",x$1664];}else{var other$1675;(other$1675=$1645$1655);return other$1675["::serialize_ast"]();}};
var send$1375;(send$1375=function(obj$1382,$1379$1383){var ph$1389;var msg$1390;var t0$1392;(t0$1392=$1379$1383);(msg$1390=t0$1392);(ph$1389=t0$1392);var $1385$1401;($1385$1401=ph$1389);var bridge$1387$1406;(bridge$1387$1406=$1385$1401);if(((typeof(bridge$1387$1406)==="string")||(typeof(bridge$1387$1406)==="number"))){return obj$1382[msg$1390];}else{var other$1418;(other$1418=$1385$1401);return obj$1382["::send"](msg$1390);}});(Array[":::project"]=function($1424$1427){var ph$1432;var value$1433;var t0$1435;(t0$1435=$1424$1427);(value$1433=t0$1435);(ph$1432=t0$1435);var $1429$1444;($1429$1444=ph$1432);if($1601(Array)($1429$1444)){return [true,value$1433];}else{$1429$1444;return [true,[value$1433]];}});(Array.prototype["::check"]=function(value$1462){if((value$1462 instanceof Array)){var i$1468;(i$1468=0);$1465:for(;(i$1468<this.length);(i$1468++)){if(($1620(this,i$1468)!==$1620(value$1462,i$1468))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $1621(this.slice(0),this);});(Array.prototype[":::project"]=function(value$1487){if((value$1487 instanceof Array)){var i$1493;(i$1493=0);$1490:for(;(i$1493<this.length);(i$1493++)){if(($1620(this,i$1493)!==$1620(value$1487,i$1493))){return [true,[value$1487]];}}return [true,value$1487.slice(this.length)];}else{return [true,[value$1487]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($1638));});(RegExp.prototype["::check"]=function($1511$1514){var ph$1519;(ph$1519=$1511$1514);var $1516$1525;($1516$1525=ph$1519);var value$1533;if((typeof($1516$1525)==="string")){(value$1533=$1516$1525);if(value$1533.match(this)){return true;}else{return false;}}else{var other$1538;(other$1538=$1516$1525);return false;}});(RegExp.prototype[":::project"]=function($1544$1547){var ph$1552;(ph$1552=$1544$1547);var $1549$1558;($1549$1558=ph$1552);var value$1566;if((typeof($1549$1558)==="string")){(value$1566=$1549$1558);var $1569$1574;($1569$1574=value$1566.match(this));var m$1582;if(($1569$1574===null)){(m$1582=$1569$1574);return [false,null];}else{var m$1587;(m$1587=$1569$1574);return [true,m$1587];}}else{var other$1591;(other$1591=$1549$1558);return [false,null];}});(Function.prototype["::send"]=function(args$1598){return this.apply(this,args$1598);});
var $4954=function(arr$4957){var results$4963;var l$4964;(results$4963=[]);(l$4964=arr$4957.length);var i$4973;(i$4973=0);$4962:for(;(i$4973<l$4964);(i$4973++)){results$4963.push([i$4973,$1620(arr$4957,i$4973)]);}return results$4963;};
var $4721=function(){var $4722$4728;($4722$4728=function(tags$4733){var it$0$4736;(it$0$4736=function(){if((!$1601($4722$4728)(this))){return Object.create($4722$4728.prototype);}else{return this;}}());(it$0$4736["tags"]=tags$4733);return it$0$4736;});($4722$4728.prototype["create"]=function(){var it$0$4756;var self$4757;(it$0$4756=this);(self$4757=this);var $4754$4766;($4754$4766=arguments);var t0$4771;var message$4775;var args$4776;(t0$4771=$4754$4766.length);if((t0$4771>=0)){(message$4775=function(){if((0>=t0$4771)){return "";}else{return $4754$4766[0];}}());(args$4776=Array.prototype.slice.call($4754$4766,1));var e$4789;(e$4789=Error(message$4775));(e$4789["::tags"]=it$0$4756.tags);(e$4789["args"]=args$4776);var temp$4805;(temp$4805=$4954(args$4776));var $length$4811;($length$4811=temp$4805.length);var $index$4817;($index$4817=0);$4790:for(;($index$4817<$length$4811);($index$4817++)){var m$4826;(m$4826=temp$4805[$index$4817]);var t0$4831;var t1$4832;var i$4836;var arg$4837;(t0$4831=m$4826);if(((t0$4831 instanceof Array)&&(((t1$4832=t0$4831.length)),(t1$4832===2)))){(i$4836=t0$4831[0]);(arg$4837=t0$4831[1]);(e$4789[i$4836]=arg$4837);}else{$4702(m$4826);}}(e$4789["length"]=args$4776.length);(e$4789["name"]=["E"].concat(it$0$4756.tags).join("."));return e$4789;}else{$4702($4754$4766);}});($4722$4728.prototype["::check"]=function(e$4867){var it$0$4871;var self$4872;(it$0$4871=this);(self$4872=this);var tags$4882;if(((!e$4867)||(!$1601(Error)(e$4867)))){return false;}(tags$4882=(e$4867["::tags"]||[]));var temp$4893;(temp$4893=it$0$4871.tags);var $length$4899;($length$4899=temp$4893.length);var $index$4905;($index$4905=0);$4883:for(;($index$4905<$length$4899);($index$4905++)){var m$4914;(m$4914=temp$4893[$index$4905]);var tag$4922;(tag$4922=m$4914);if((tags$4882.indexOf(tag$4922)===-1)){return false;}else{false;}}return true;});($4722$4728.prototype["::deconstruct"]=function(e$4931){var it$0$4935;var self$4936;(it$0$4935=this);(self$4936=this);return e$4931.args;});$1621($4722$4728,$1621(function(){var accum$4947;(accum$4947=({}));(accum$4947["::name"]="$4722");return accum$4947;}(),function(){var accum$4951;(accum$4951=({}));(accum$4951["::egclass"]=true);return accum$4951;}()));return $4722$4728;}();
var $4702=function(value$4705,url$4706,start$4707,end$4708){var err$4712;(err$4712=$4721(["match"]).create("Could not find a match for value",({"value":value$4705})));if(url$4706){(err$4712["location"]=["location",url$4706,start$4707,end$4708]);}throw err$4712;};
var $4980=function($4982$4985,key$4986){var ph$4994;(ph$4994=$4982$4985);var $4988$5000;($4988$5000=ph$4994);var bridge$4990$5005;(bridge$4990$5005=$4988$5000);if(((bridge$4990$5005===null)||(bridge$4990$5005===(void 0)))){return false;}else{var x$5017;if((typeof($4988$5000)==="string")){(x$5017=$4988$5000);return (key$4986 in String.prototype);}else{var x$5022;if((typeof($4988$5000)==="number")){(x$5022=$4988$5000);return (key$4986 in Number.prototype);}else{var x$5027;(x$5027=$4988$5000);return (key$4986 in x$5027);}}}};
var $5029=function(obj$5032){var results$5037;(results$5037=[]);var k$5042;(k$5042=null);$5036:for(k$5042 in obj$5032){if(Object.prototype.hasOwnProperty.call(obj$5032,k$5042)){results$5037.push([k$5042,$1620(obj$5032,k$5042)]);}}return results$5037;};
var $5046=function(type$5049){return function(value$5053){var f$5057;(f$5057=type$5049[":::project"]);if((f$5057===(void 0))){(f$5057=type$5049["::project"]);if((f$5057===(void 0))){return [true,type$5049(value$5053)];}else{var rval$5070;(rval$5070=false);try{(rval$5070=[true,f$5057(value$5053)]);}catch(excv$5081){var e$5087;(e$5087=excv$5081);(rval$5070=[false,null]);}return rval$5070;}}else{return f$5057.call(type$5049,value$5053);}};};var accum$1967;var accum$1971;var accum$2395;var accum$2399;var accum$4512;var accum$4516;var $1679$1720;var __lt____gt__$1721;var $1680$1722;var __lt____lt____colon__$1723;var util$1724;var classify$1725;var neighbours$1726;var GenSym$1727;var gensym$1728;var $1682$1729;var PatternParser$1730;var PatternProcessor$1731;var Scope$1732;var Env$1733;var track_location$1734;var Expander$1735;var mac1$1736;var __chk_ncache$1737;var __chk_scache$1738;var checker_db$1739;($1679$1720=require("./pp"));(__lt____gt__$1721=$1679$1720["<>"]);($1680$1722=require("./location"));(__lt____lt____colon__$1723=$1680$1722["<<:"]);(util$1724=require("./util"));(classify$1725=util$1724.classify);(neighbours$1726=util$1724.neighbours);(GenSym$1727=util$1724.GenSym);(gensym$1728=util$1724.gensym);($1682$1729=require("./pattern"));(PatternParser$1730=$1682$1729.PatternParser);(PatternProcessor$1731=$1682$1729.PatternProcessor);(Scope$1732=function(){var t0$1796;var $1787$1791;var it$0$1782;(it$0$1782=function(){if((!$1601(Scope$1732)(this))){return Object.create(Scope$1732.prototype);}else{return this;}}());($1787$1791=arguments);(t0$1796=$1787$1791.length);if(((t0$1796>=0)&&(t0$1796<=3))){(it$0$1782["parent"]=function(){if((0>=t0$1796)){return null;}else{return $1787$1791[0];}}());(it$0$1782["name"]=function(){if((1>=t0$1796)){return gensym$1728("scope");}else{return $1787$1791[1];}}());(it$0$1782["expander"]=function(){if((2>=t0$1796)){return it$0$1782.parent.expander;}else{return $1787$1791[2];}}());(it$0$1782["options"]=({}));}else{$4702($1787$1791);}return it$0$1782;});(Scope$1732.prototype["getopt"]=function(opt$1817){var otherwise$1854;var $1834$1843;var $1830$1837;var it$0$1821;var self$1822;(it$0$1821=this);(self$1822=this);($1830$1837=null);$1830$1837;if(Object.prototype.hasOwnProperty.call(it$0$1821.options,opt$1817)){return $1620(it$0$1821.options,opt$1817);}else{if((it$0$1821.parent===null)){return (void 0);}else{(otherwise$1854=$1830$1837);return it$0$1821.parent.getopt(opt$1817);}}});(Scope$1732.prototype["setopt"]=function(opt$1860,value$1861){var it$0$1865;var self$1866;(it$0$1865=this);(self$1866=this);(it$0$1865.options[opt$1860]=value$1861);});(Scope$1732.prototype["gensym"]=function(){var it$0$1885;var self$1886;(it$0$1885=this);(self$1886=this);return it$0$1885.expander.gensym();});(Scope$1732.prototype["step"]=function(context$1898,expr$1899){var it$0$1903;var self$1904;(it$0$1903=this);(self$1904=this);return it$0$1903.expander.step(context$1898,it$0$1903,expr$1899);});(Scope$1732.prototype["step_all"]=function(context$1916,exprs$1917){var it$0$1921;var self$1922;(it$0$1921=this);(self$1922=this);return it$0$1921.expander.step_all(context$1916,it$0$1921,exprs$1917);});(Scope$1732.prototype["expand"]=function(context$1934,expr$1935){var it$0$1939;var self$1940;(it$0$1939=this);(self$1940=this);return it$0$1939.expander.expand(context$1934,it$0$1939,expr$1935);});(Scope$1732.prototype["toString"]=function(){var it$0$1955;var self$1956;(it$0$1955=this);(self$1956=this);return (("Scope{"+it$0$1955.name)+"}");});$1621(Scope$1732,$1621(((accum$1967=({})),((accum$1967["::name"]="Scope"),accum$1967)),((accum$1971=({})),((accum$1971["::egclass"]=true),accum$1971))));Scope$1732;(Env$1733=function(){var it$0$1980;(it$0$1980=function(){if((!$1601(Env$1733)(this))){return Object.create(Env$1733.prototype);}else{return this;}}());(it$0$1980["scopes"]=({}));return it$0$1980;});(Env$1733.prototype["list_bindings"]=function(origin$1995){var values$2011;var scope$2012;var it$0$1999;var self$2000;(it$0$1999=this);(self$2000=this);(values$2011=({}));(scope$2012=origin$1995);$2019:while(scope$2012){$1621(values$2011,$1620(it$0$1999.scopes,scope$2012.name));(scope$2012=scope$2012.parent);}return values$2011;});(Env$1733.prototype["resolve"]=function(scope$2031,name$2032){var scope_data$2047;var it$0$2036;var self$2037;(it$0$2036=this);(self$2037=this);if((scope$2031===null)){return (void 0);}(scope_data$2047=$1620(it$0$2036.scopes,scope$2031.name));if((scope_data$2047&&Object.prototype.hasOwnProperty.call(scope_data$2047,name$2032))){return $1620(scope_data$2047,name$2032);}else{return it$0$2036.resolve(scope$2031.parent,name$2032);}});(Env$1733.prototype["bind"]=function(scope$2056,name$2057,value$2058){var it$0$2062;var self$2063;(it$0$2062=this);(self$2063=this);if((!$1620(it$0$2062.scopes,scope$2056.name))){(it$0$2062.scopes[scope$2056.name]=({}));}($1620(it$0$2062.scopes,scope$2056.name)[name$2057]=value$2058);});(Env$1733.prototype["mark"]=function(expr$2085){var x$2152;var x$2158;var bridge$2104$2144;var x$2164;var bridge$2103$2137;var x$2170;var bridge$2102$2130;var x$2176;var $index$2211;var $length$2205;var temp$2199;var other$2232;var type$2183;var args$2184;var e$2119;var bridge$2101$2114;var t0$2115;var $2098$2109;var it$0$2089;var self$2090;(it$0$2089=this);(self$2090=this);($2098$2109=expr$2085);if($4980($2098$2109,"env")){(e$2119=$2098$2109.env);return expr$2085;}else{(bridge$2101$2114=$2098$2109);if(((((bridge$2102$2130=bridge$2101$2114)),((((bridge$2103$2137=bridge$2102$2130)),((((bridge$2104$2144=bridge$2103$2137)),((((x$2152=bridge$2104$2144)),((x$2152 instanceof Array)&&(x$2152[0]==="symbol")))||(((x$2158=bridge$2104$2144)),((x$2158 instanceof Array)&&(x$2158[0]==="value")))))||(((x$2164=bridge$2103$2137)),((x$2164 instanceof Array)&&(x$2164[0]==="variable")))))||(((x$2170=bridge$2102$2130)),((x$2170 instanceof Array)&&(x$2170[0]==="macro")))))||(((x$2176=bridge$2101$2114)),((x$2176 instanceof Array)&&(x$2176[0]==="void"))))){return $1621(expr$2085,({"env":it$0$2089}));}else{if((($2098$2109 instanceof Array)&&(((t0$2115=$2098$2109.length)),(t0$2115>=1)))){(type$2183=$2098$2109[0]);(args$2184=Array.prototype.slice.call($2098$2109,1));(temp$2199=args$2184);($length$2205=temp$2199.length);($index$2211=0);$2193:for(;($index$2211<$length$2205);($index$2211++)){var arg$2228;var m$2220;(m$2220=temp$2199[$index$2211]);(arg$2228=m$2220);it$0$2089.mark(arg$2228);}return $1621(expr$2085,({"env":it$0$2089}));}else{(other$2232=$2098$2109);return $1621(expr$2085,({"env":it$0$2089}));}}}});(Env$1733.prototype["fork"]=function(){var $index$2274;var $length$2268;var temp$2262;var e$2252;var it$0$2241;var self$2242;(it$0$2241=this);(self$2242=this);(e$2252=Env$1733());(temp$2262=$5029(it$0$2241.scopes));($length$2268=temp$2262.length);($index$2274=0);$2253:for(;($index$2274<$length$2268);($index$2274++)){var $index$2329;var $length$2323;var temp$2317;var acc$2311;var scope$2293;var bindings$2294;var t0$2288;var t1$2289;var m$2283;(m$2283=temp$2262[$index$2274]);(t0$2288=m$2283);if(((t0$2288 instanceof Array)&&(((t1$2289=t0$2288.length)),(t1$2289===2)))){(scope$2293=t0$2288[0]);(bindings$2294=t0$2288[1]);(acc$2311=[]);(temp$2317=$5029(bindings$2294));($length$2323=temp$2317.length);($index$2329=0);$2306:for(;($index$2329<$length$2323);($index$2329++)){var k$2348;var v$2349;var t0$2343;var t1$2344;var m$2338;(m$2338=temp$2317[$index$2329]);(t0$2343=m$2338);if(((t0$2343 instanceof Array)&&(((t1$2344=t0$2343.length)),(t1$2344===2)))){(k$2348=t0$2343[0]);(v$2349=t0$2343[1]);acc$2311.push((function(){if((!$1620(e$2252.scopes,scope$2293))){(e$2252.scopes[scope$2293]=({}));}}(),(($1620(e$2252.scopes,scope$2293)[k$2348]=v$2349))));}else{$4702(m$2338,"/home/olivier/git/earl-grey/src/expand.eg",2269,2426);}}acc$2311;}else{$4702(m$2283,"/home/olivier/git/earl-grey/src/expand.eg",2229,2426);}}return e$2252;});(Env$1733.prototype["toString"]=function(){var it$0$2383;var self$2384;(it$0$2383=this);(self$2384=this);return "Env{...}";});$1621(Env$1733,$1621(((accum$2395=({})),((accum$2395["::name"]="Env"),accum$2395)),((accum$2399=({})),((accum$2399["::egclass"]=true),accum$2399))));Env$1733;(track_location$1734=function(f$2406){var f2$2410;(f2$2410=function(context$2415,scope$2416,expr$2417){var rval$2431;var other$2477;var v$2467;var t0$2463;var $2421$2458;var rval$2424;(rval$2424=(((rval$2431=false)),(function(){try{(rval$2431=f$2406(context$2415,scope$2416,expr$2417));}catch(excv$2442){var e$2448;(e$2448=excv$2442);(rval$2431=(__lt____lt____colon__$1723(e$2448,expr$2417),function(){throw e$2448;}()));}}(),rval$2431)));($2421$2458=rval$2424);if((($2421$2458 instanceof Array)&&(((t0$2463=$2421$2458.length)),((t0$2463===2)&&($2421$2458[0]==="bounce"))))){(v$2467=$2421$2458[1]);return f2$2410(context$2415,scope$2416,__lt____lt____colon__$1723(v$2467,expr$2417));}else{(other$2477=$2421$2458);return __lt____lt____colon__$1723(other$2477,expr$2417);}});return f2$2410;});(Expander$1735=function(env_factory$2485,generic_nodes$2486){var it$0$2489;(it$0$2489=function(){if((!$1601(Expander$1735)(this))){return Object.create(Expander$1735.prototype);}else{return this;}}());(it$0$2489["gensym"]=gensym$1728);(it$0$2489["mkenv"]=env_factory$2485);(it$0$2489["generic_nodes"]=generic_nodes$2486);return it$0$2489;});(Expander$1735.prototype["run_macro"]=function(m$2513,context$2514,scope$2515,form$2516,arg$2517){var rval$2540;var rval$2532;var it$0$2521;var self$2522;(it$0$2521=this);(self$2522=this);(rval$2532=(((rval$2540=false)),(function(){try{(rval$2540=m$2513(context$2514,scope$2515,form$2516,arg$2517));}catch(excv$2551){var msg$2608;var msg$2730;var find$2619;var err$2620;var other$2614;var $2591$2596;var e$2588;var e$2738;var value$2561;var t0$2554;var t1$2555;var t2$2556;var t3$2557;(t0$2554=excv$2551);if(($1601($4721(["match"]))(t0$2554)&&($4980(t0$2554,"args")&&(((t1$2555=t0$2554.args)),((t1$2555 instanceof Array)&&(((t2$2556=t1$2555.length)),((t2$2556===1)&&(((t3$2557=t1$2555[0])),$4980(t3$2557,"value"))))))))){(value$2561=t3$2557.value);(rval$2540=(((e$2588=((($2591$2596=value$2561)),function(){if(($2591$2596===context$2514)){(msg$2608="The macro cannot be found in this context.");return $4721(["syntax","context"]).create(msg$2608,({"context":context$2514,"form":form$2516}));}else{(other$2614=$2591$2596);(find$2619=function($2624$2627){var t0$2636;var msg$2658;var $index$2692;var $length$2686;var temp$2680;var other$2722;var type$2664;var xs$2665;var t0$2650;var $2629$2645;var ph$2633;var arg$2634;(t0$2636=$2624$2627);(arg$2634=t0$2636);(ph$2633=t0$2636);($2629$2645=ph$2633);if(($2629$2645===value$2561)){(msg$2658="The macro expected something different.");return $4721(["syntax","argument"]).create(msg$2658,({"context":context$2514,"argument":arg$2634,"form":form$2516}));}else{if((($2629$2645 instanceof Array)&&(((t0$2650=$2629$2645.length)),(t0$2650>=1)))){(type$2664=$2629$2645[0]);(xs$2665=Array.prototype.slice.call($2629$2645,1));(temp$2680=xs$2665);($length$2686=temp$2680.length);($index$2692=0);$2674:for(;($index$2692<$length$2686);($index$2692++)){var x$2710;var t0$2706;var m$2701;(m$2701=temp$2680[$index$2692]);(t0$2706=$5046(find$2619)(m$2701));if(t0$2706[0]){(x$2710=t0$2706[1]);if(x$2710){return x$2710;}}else{$4702(m$2701,"/home/olivier/git/earl-grey/src/expand.eg",3685,3770);}}return false;}else{(other$2722=$2629$2645);return false;}}});(err$2620=find$2619(arg$2517));if(err$2620){return err$2620;}else{(msg$2730="The macro expected something different (could not locate error in the source).");return $4721(["syntax","failure"]).create(msg$2730,({"form":form$2516,"value":value$2561}));}}}()))),function(){throw e$2588;}()));}else{(e$2738=excv$2551);(rval$2540=function(){throw e$2738;}());}}}(),rval$2540)));return it$0$2521.mkenv().mark(rval$2532);});(Expander$1735.prototype["step"]=function(context$2749,scope$2750,expr$2751){var helper$2766;var it$0$2755;var self$2756;(it$0$2755=this);(self$2756=this);(helper$2766=track_location$1734(function(context$2773,scope$2774,$2770$2775){var t0$2789;var other$2844;var env$2839;var $2826$2831;var other$2889;var t0$2876;var $2866$2871;var other$2893;var m$2858;var t0$2854;var $2820$2849;var env$2823;var other$2923;var t0$2910;var $2900$2905;var other$2955;var m$2945;var t0$2941;var $2931$2936;var other$2964;var x$2959;var f$2927;var arg$2928;var m$2897;var s$2810;var $2783$2805;var $2784$2806;var $2785$2807;var t0$2803;var $2777$2798;var ph$2786;var expr$2787;(t0$2789=$2770$2775);(expr$2787=t0$2789);(ph$2786=t0$2789);($2777$2798=ph$2786);if((($2783$2805=($2777$2798 instanceof Array))&&(((t0$2803=$2777$2798.length)),(($2785$2807=(t0$2803===2))&&($2777$2798[0]==="symbol"))))){(s$2810=$2777$2798[1]);(env$2823=((($2826$2831=expr$2787)),function(){if($4980($2826$2831,"env")){(env$2839=$2826$2831.env);return expr$2787.env;}else{(other$2844=$2826$2831);throw $4721(["syntax","no_env"]).create("No environment was found to resolve",({"symbol":expr$2787}));}}()));($2820$2849=env$2823.resolve(scope$2774,s$2810));if((($2820$2849 instanceof Array)&&(((t0$2854=$2820$2849.length)),((t0$2854===2)&&($2820$2849[0]==="macro"))))){(m$2858=$2820$2849[1]);($2866$2871=context$2773);if((($2866$2871 instanceof Array)&&(((t0$2876=$2866$2871.length)),((t0$2876===2)&&(($2866$2871[0]==="expr")&&($2866$2871[1]==="head")))))){return ["macro",m$2858];}else{(other$2889=$2866$2871);return ["bounce",it$0$2755.run_macro(m$2858,context$2773,scope$2774,expr$2787,__lt____lt____colon__$1723(["void"],expr$2787))];}}else{(other$2893=$2820$2849);return expr$2787;}}else{if(($2785$2807&&($2777$2798[0]==="macro"))){(m$2897=$2777$2798[1]);($2900$2905=context$2773);if((($2900$2905 instanceof Array)&&(((t0$2910=$2900$2905.length)),((t0$2910===2)&&(($2900$2905[0]==="expr")&&($2900$2905[1]==="head")))))){return expr$2787;}else{(other$2923=$2900$2905);return ["bounce",it$0$2755.run_macro(m$2897,context$2773,scope$2774,expr$2787,__lt____lt____colon__$1723(["void"],expr$2787))];}}else{if(($2783$2805&&((t0$2803===3)&&($2777$2798[0]==="send")))){(f$2927=$2777$2798[1]);(arg$2928=$2777$2798[2]);($2931$2936=helper$2766(["expr","head"],scope$2774,f$2927));if((($2931$2936 instanceof Array)&&(((t0$2941=$2931$2936.length)),((t0$2941===2)&&($2931$2936[0]==="macro"))))){(m$2945=$2931$2936[1]);return ["bounce",it$0$2755.run_macro(m$2945,context$2773,scope$2774,expr$2787,arg$2928)];}else{(other$2955=$2931$2936);return expr$2787;}}else{if(($2783$2805&&((t0$2803===2)&&($2777$2798[0]==="nostep")))){(x$2959=$2777$2798[1]);return x$2959;}else{(other$2964=$2777$2798);return expr$2787;}}}}}));return helper$2766(context$2749,scope$2750,expr$2751);});(Expander$1735.prototype["step_all"]=function(context$2973,scope$2974,$2970$2975){var t0$2990;var t1$2991;var pre$3008;var bulk$3009;var post$3010;var stmts$2988;var it$0$2979;var self$2980;(it$0$2979=this);(self$2980=this);(t0$2990=$2970$2975);if(((t0$2990 instanceof Array)&&(((t1$2991=t0$2990.length)),(t1$2991>=0)))){(stmts$2988=Array.prototype.slice.call(t0$2990,0));}else{$4702($2970$2975);}(pre$3008=[]);(bulk$3009=[]);(post$3010=[]);$3020:while(stmts$2988.length){var $index$3111;var $length$3105;var temp$3099;var acc$3093;var e$3082;var x$3134;var m$3076;var stmt$3071;var stmt$3066;var prepend$3052;var $3031$3047;var $3032$3048;var $3033$3049;var t0$3045;var $3025$3040;var current$3034;(current$3034=stmts$2988.shift());($3025$3040=it$0$2979.step(context$2973,scope$2974,current$3034));if((($3031$3047=($3025$3040 instanceof Array))&&(((t0$3045=$3025$3040.length)),((t0$3045>=1)&&($3025$3040[0]==="splice"))))){(prepend$3052=Array.prototype.slice.call($3025$3040,1));(stmts$2988=prepend$3052.concat(stmts$2988));}else{if(($3031$3047&&(($3033$3049=(t0$3045===2))&&($3025$3040[0]==="float")))){(stmt$3066=$3025$3040[1]);(pre$3008=pre$3008.concat(it$0$2979.step_all(context$2973,scope$2974,[stmt$3066])));}else{if(($3033$3049&&($3025$3040[0]==="sink"))){(stmt$3071=$3025$3040[1]);(post$3010=post$3010.concat(it$0$2979.step_all(context$2973,scope$2974,[stmt$3071])));}else{if(($3033$3049&&($3025$3040[0]==="restmacro"))){(m$3076=$3025$3040[1]);(e$3082=it$0$2979.mkenv());(stmts$2988=(((acc$3093=[])),(((temp$3099=m$3076(stmts$2988))),((($length$3105=temp$3099.length)),((($index$3111=0)),function(){$3088:for(;($index$3111<$length$3105);($index$3111++)){var stmt$3128;var m$3120;(m$3120=temp$3099[$index$3111]);(stmt$3128=m$3120);acc$3093.push(e$3082.mark(stmt$3128));}}()))),acc$3093));}else{(x$3134=$3025$3040);bulk$3009.push(x$3134);}}}}}return pre$3008.concat(bulk$3009).concat(post$3010);});(Expander$1735.prototype["expand"]=function(context$3140,scope$3141,expr$3142){var helper$3157;var it$0$3146;var self$3147;(it$0$3146=this);(self$3147=this);(helper$3157=track_location$1734(function(context$3162,scope$3163,expr$3164){var t0$3227;var other$3249;var $3222$3237;var env$3225;var $index$3302;var $length$3296;var temp$3290;var acc$3284;var newargs$3276;var $index$3356;var $length$3350;var temp$3344;var acc$3338;var newargs$3330;var t0$3420;var newscope$3414;var env$3415;var $index$3504;var $length$3498;var temp$3492;var acc$3486;var $index$3716;var $length$3710;var temp$3704;var acc$3698;var t0$3465;var newscope$3449;var stepscope$3450;var changes$3451;var newargs$3452;var vars$3453;var exp$3454;var $index$4139;var $length$4133;var temp$4127;var other$4243;var t0$4221;var $4210$4216;var is_obj$4018;var obj$4019;var arr$4020;var arr_parts$4021;var obj_parts$4022;var new_arr_part$4023;var new_obj_part$4024;var r$4025;var x$4281;var msg$4288;var otherwise$4304;var m$4294;var t0$4274;var $4259$4269;var t$4263;var $index$4348;var $length$4342;var temp$4336;var acc$4330;var newscope$4318;var s$4427;var newscope$4440;var name$4418;var t0$4414;var $index$4484;var $length$4478;var temp$4472;var acc$4466;var other$4506;var type$4455;var args$4456;var tag$4444;var body$4445;var x$4409;var $3184$4410;var bindings$4312;var body$4313;var target$4253;var value$4254;var args$4006;var args$3440;var args$3435;var args$3430;var variable$3394;var s$3395;var value$3396;var body$3397;var args$3325;var args$3271;var f$3265;var arg$3266;var s$3212;var $3190$3207;var $3191$3208;var $3192$3209;var t0$3203;var t1$3204;var t2$3205;var $3168$3198;(expr$3164=it$0$3146.step(context$3162,scope$3163,expr$3164));($3168$3198=expr$3164);if((($3190$3207=($3168$3198 instanceof Array))&&(((t0$3203=$3168$3198.length)),(($3192$3209=(t0$3203===2))&&($3168$3198[0]==="symbol"))))){(s$3212=$3168$3198[1]);(t0$3227=expr$3164);if($4980(t0$3227,"env")){(env$3225=t0$3227.env);}else{$4702(expr$3164,"/home/olivier/git/earl-grey/src/expand.eg",8047,8051);}($3222$3237=env$3225.resolve(scope$3163,s$3212));if(($3222$3237===(void 0))){throw $4721(["syntax","undeclared"]).create(("Undeclared variable: "+s$3212),({"node":expr$3164}));}else{(other$3249=$3222$3237);return ["bounce",other$3249];}}else{if(($3192$3209&&($3168$3198[0]==="value"))){$3168$3198[1];return expr$3164;}else{if(($3192$3209&&($3168$3198[0]==="variable"))){$3168$3198[1];return expr$3164;}else{if(($3190$3207&&((t0$3203===1)&&($3168$3198[0]==="void")))){return expr$3164;}else{if(($3190$3207&&((t0$3203===3)&&($3168$3198[0]==="send")))){(f$3265=$3168$3198[1]);(arg$3266=$3168$3198[2]);return ["send",helper$3157(["expr","head"],scope$3163,f$3265),helper$3157(["expr","tail"],scope$3163,arg$3266)];}else{if(($3190$3207&&(($3192$3209=(t0$3203>=1))&&($3168$3198[0]==="array")))){(args$3271=Array.prototype.slice.call($3168$3198,1));(newargs$3276=(((acc$3284=[])),(((temp$3290=it$0$3146.step_all(["expr","array"],scope$3163,args$3271))),((($length$3296=temp$3290.length)),((($index$3302=0)),function(){$3279:for(;($index$3302<$length$3296);($index$3302++)){var arg$3319;var m$3311;(m$3311=temp$3290[$index$3302]);(arg$3319=m$3311);acc$3284.push(helper$3157(["expr","expr"],scope$3163,arg$3319));}}()))),acc$3284));return ["array"].concat(newargs$3276);}else{if(($3192$3209&&($3168$3198[0]==="object"))){(args$3325=Array.prototype.slice.call($3168$3198,1));(newargs$3330=(((acc$3338=[])),(((temp$3344=it$0$3146.step_all(["expr","object"],scope$3163,args$3325))),((($length$3350=temp$3344.length)),((($index$3356=0)),function(){$3333:for(;($index$3356<$length$3350);($index$3356++)){var k$3375;var v$3376;var t0$3370;var t1$3371;var m$3365;(m$3365=temp$3344[$index$3356]);(t0$3370=m$3365);if(((t0$3370 instanceof Array)&&(((t1$3371=t0$3370.length)),((t1$3371===3)&&(t0$3370[0]==="array"))))){(k$3375=t0$3370[1]);(v$3376=t0$3370[2]);acc$3338.push(["array",helper$3157(["expr","expr"],scope$3163,k$3375),helper$3157(["expr","expr"],scope$3163,v$3376)]);}else{$4702(m$3365,"/home/olivier/git/earl-grey/src/expand.eg",8890,9079);}}}()))),acc$3338));return ["object"].concat(newargs$3330);}else{if(($3190$3207&&((t0$3203===4)&&(($3168$3198[0]==="bind")&&(((t1$3204=$3168$3198[1])),((variable$3394=t1$3204),((t1$3204 instanceof Array)&&(((t2$3205=t1$3204.length)),((t2$3205===2)&&(t1$3204[0]==="symbol")))))))))){(s$3395=t1$3204[1]);(value$3396=$3168$3198[2]);(body$3397=$3168$3198[3]);(newscope$3414=Scope$1732(scope$3163));(t0$3420=variable$3394);if($4980(t0$3420,"env")){(env$3415=t0$3420.env);}else{$4702(variable$3394,"/home/olivier/git/earl-grey/src/expand.eg",9222,9230);}env$3415.bind(newscope$3414,s$3395,value$3396);return helper$3157(context$3162,newscope$3414,body$3397);}else{if(($3190$3207&&(($3192$3209=(t0$3203>=1))&&($3168$3198[0]==="splice")))){(args$3430=Array.prototype.slice.call($3168$3198,1));return ["bounce",$1621(["multi"].concat(args$3430),({"override_scope":true}))];}else{if(($3192$3209&&($3168$3198[0]==="interactive"))){(args$3435=Array.prototype.slice.call($3168$3198,1));return ["bounce",$1621(["multi"].concat(args$3435),({"override_scope":true,"all_mutable":true}))];}else{if(($3192$3209&&($3168$3198[0]==="multi"))){(args$3440=Array.prototype.slice.call($3168$3198,1));(newscope$3449=function(){if(expr$3164.override_scope){return scope$3163;}else{return Scope$1732(scope$3163);}}());(stepscope$3450=function(){if(expr$3164.nonrecursive){return scope$3163;}else{return newscope$3449;}}());(changes$3451=false);(t0$3465=classify$1725("newargs","vars",(((acc$3486=[])),(((temp$3492=it$0$3146.step_all(["expr","multi"],stepscope$3450,args$3440))),((($length$3498=temp$3492.length)),((($index$3504=0)),function(){$3470:for(;($index$3504<$length$3498);($index$3504++)){var t0$3570;var env$3568;var t0$3604;var v$3615;var env$3602;var t0$3662;var env$3660;var other$3675;var s$3642;var variable$3643;var v$3624;var value$3625;var variable$3583;var s$3584;var value$3585;var variable$3548;var s$3549;var value$3550;var opt$3531;var value$3532;var $3478$3523;var $3479$3524;var $3480$3525;var $3481$3526;var $3482$3527;var $3483$3528;var t0$3518;var t1$3519;var t2$3520;var t3$3521;var m$3513;(m$3513=temp$3492[$index$3504]);(t0$3518=m$3513);if((($3479$3524=(t0$3518 instanceof Array))&&(((t1$3519=t0$3518.length)),(($3481$3526=(t1$3519===3))&&(t0$3518[0]==="option"))))){(opt$3531=t0$3518[1]);(value$3532=t0$3518[2]);acc$3486.push((newscope$3449.setopt(opt$3531,value$3532),["ignore"]));}else{if(($3481$3526&&((t0$3518[0]==="declare_raw")&&(((t2$3520=t0$3518[1])),((variable$3548=t2$3520),((t2$3520 instanceof Array)&&(((t3$3521=t2$3520.length)),((t3$3521===2)&&(t2$3520[0]==="symbol"))))))))){(s$3549=t2$3520[1]);(value$3550=t0$3518[2]);acc$3486.push(((((t0$3570=variable$3548)),function(){if($4980(t0$3570,"env")){(env$3568=t0$3570.env);}else{return $4702(variable$3548,"/home/olivier/git/earl-grey/src/expand.eg",10176,10184);}}()),env$3568.bind(newscope$3449,s$3549,value$3550),((changes$3451=true)),["ignore"]));}else{if(($3479$3524&&(($3481$3526=((t1$3519>=2)&&(t1$3519<=3)))&&(($3482$3527=(t0$3518[0]==="declare"))&&(((t2$3520=t0$3518[1])),((variable$3583=t2$3520),((t2$3520 instanceof Array)&&(((t3$3521=t2$3520.length)),((t3$3521===2)&&(t2$3520[0]==="symbol")))))))))){(s$3584=t2$3520[1]);(value$3585=function(){if((2>=t1$3519)){return null;}else{return t0$3518[2];}}());acc$3486.push(((((t0$3604=variable$3583)),function(){if($4980(t0$3604,"env")){(env$3602=t0$3604.env);}else{return $4702(variable$3583,"/home/olivier/git/earl-grey/src/expand.eg",10424,10432);}}()),function(){if((variable$3583.use_previous&&env$3602.resolve(newscope$3449,s$3584))){return ["splice"];}else{(v$3615=__lt____lt____colon__$1723(["variable",it$0$3146.gensym(s$3584)],variable$3583));$1621(v$3615,({"mutable":(expr$3164.all_mutable||variable$3583.mutable)}));env$3602.bind(newscope$3449,s$3584,v$3615);(changes$3451=true);if(value$3585){return ["splice",["newargs",["assign",v$3615,value$3585]],["vars",v$3615]];}else{return ["vars",v$3615];}}}()));}else{if(($3482$3527&&((v$3624=t2$3520),((t2$3520 instanceof Array)&&(((t3$3521=t2$3520.length)),((t3$3521===2)&&(t2$3520[0]==="variable"))))))){t2$3520[1];(value$3625=function(){if((2>=t1$3519)){return null;}else{return t0$3518[2];}}());acc$3486.push((((changes$3451=true)),function(){if(value$3625){return ["splice",["newargs",["assign",v$3624,value$3625]],["vars",v$3624]];}else{return ["vars",v$3624];}}()));}else{if(($3479$3524&&((t1$3519===2)&&((t0$3518[0]==="undeclare")&&(((t2$3520=t0$3518[1])),((t2$3520 instanceof Array)&&(((t3$3521=t2$3520.length)),((t3$3521===2)&&(t2$3520[0]==="symbol"))))))))){(s$3642=t2$3520[1]);(variable$3643=t2$3520);acc$3486.push(((((t0$3662=variable$3643)),function(){if($4980(t0$3662,"env")){(env$3660=t0$3662.env);}else{return $4702(variable$3643,"/home/olivier/git/earl-grey/src/expand.eg",11696,11704);}}()),env$3660.bind(newscope$3449,s$3642,(void 0)),((changes$3451=true)),["ignore"]));}else{(other$3675=m$3513);acc$3486.push(["newargs",other$3675]);}}}}}}}()))),acc$3486)));if(($4980(t0$3465,"newargs")&&((newargs$3452=t0$3465.newargs),$4980(t0$3465,"vars")))){(vars$3453=t0$3465.vars);}else{$4702(classify$1725("newargs","vars",(((acc$3698=[])),(((temp$3704=it$0$3146.step_all(["expr","multi"],stepscope$3450,args$3440))),((($length$3710=temp$3704.length)),((($index$3716=0)),function(){$3682:for(;($index$3716<$length$3710);($index$3716++)){var t0$3782;var env$3780;var t0$3816;var v$3827;var env$3814;var t0$3874;var env$3872;var other$3887;var s$3854;var variable$3855;var v$3836;var value$3837;var variable$3795;var s$3796;var value$3797;var variable$3760;var s$3761;var value$3762;var opt$3743;var value$3744;var $3690$3735;var $3691$3736;var $3692$3737;var $3693$3738;var $3694$3739;var $3695$3740;var t0$3730;var t1$3731;var t2$3732;var t3$3733;var m$3725;(m$3725=temp$3704[$index$3716]);(t0$3730=m$3725);if((($3691$3736=(t0$3730 instanceof Array))&&(((t1$3731=t0$3730.length)),(($3693$3738=(t1$3731===3))&&(t0$3730[0]==="option"))))){(opt$3743=t0$3730[1]);(value$3744=t0$3730[2]);acc$3698.push((newscope$3449.setopt(opt$3743,value$3744),["ignore"]));}else{if(($3693$3738&&((t0$3730[0]==="declare_raw")&&(((t2$3732=t0$3730[1])),((variable$3760=t2$3732),((t2$3732 instanceof Array)&&(((t3$3733=t2$3732.length)),((t3$3733===2)&&(t2$3732[0]==="symbol"))))))))){(s$3761=t2$3732[1]);(value$3762=t0$3730[2]);acc$3698.push(((((t0$3782=variable$3760)),function(){if($4980(t0$3782,"env")){(env$3780=t0$3782.env);}else{return $4702(variable$3760,"/home/olivier/git/earl-grey/src/expand.eg",10176,10184);}}()),env$3780.bind(newscope$3449,s$3761,value$3762),((changes$3451=true)),["ignore"]));}else{if(($3691$3736&&(($3693$3738=((t1$3731>=2)&&(t1$3731<=3)))&&(($3694$3739=(t0$3730[0]==="declare"))&&(((t2$3732=t0$3730[1])),((variable$3795=t2$3732),((t2$3732 instanceof Array)&&(((t3$3733=t2$3732.length)),((t3$3733===2)&&(t2$3732[0]==="symbol")))))))))){(s$3796=t2$3732[1]);(value$3797=function(){if((2>=t1$3731)){return null;}else{return t0$3730[2];}}());acc$3698.push(((((t0$3816=variable$3795)),function(){if($4980(t0$3816,"env")){(env$3814=t0$3816.env);}else{return $4702(variable$3795,"/home/olivier/git/earl-grey/src/expand.eg",10424,10432);}}()),function(){if((variable$3795.use_previous&&env$3814.resolve(newscope$3449,s$3796))){return ["splice"];}else{(v$3827=__lt____lt____colon__$1723(["variable",it$0$3146.gensym(s$3796)],variable$3795));$1621(v$3827,({"mutable":(expr$3164.all_mutable||variable$3795.mutable)}));env$3814.bind(newscope$3449,s$3796,v$3827);(changes$3451=true);if(value$3797){return ["splice",["newargs",["assign",v$3827,value$3797]],["vars",v$3827]];}else{return ["vars",v$3827];}}}()));}else{if(($3694$3739&&((v$3836=t2$3732),((t2$3732 instanceof Array)&&(((t3$3733=t2$3732.length)),((t3$3733===2)&&(t2$3732[0]==="variable"))))))){t2$3732[1];(value$3837=function(){if((2>=t1$3731)){return null;}else{return t0$3730[2];}}());acc$3698.push((((changes$3451=true)),function(){if(value$3837){return ["splice",["newargs",["assign",v$3836,value$3837]],["vars",v$3836]];}else{return ["vars",v$3836];}}()));}else{if(($3691$3736&&((t1$3731===2)&&((t0$3730[0]==="undeclare")&&(((t2$3732=t0$3730[1])),((t2$3732 instanceof Array)&&(((t3$3733=t2$3732.length)),((t3$3733===2)&&(t2$3732[0]==="symbol"))))))))){(s$3854=t2$3732[1]);(variable$3855=t2$3732);acc$3698.push(((((t0$3874=variable$3855)),function(){if($4980(t0$3874,"env")){(env$3872=t0$3874.env);}else{return $4702(variable$3855,"/home/olivier/git/earl-grey/src/expand.eg",11696,11704);}}()),env$3872.bind(newscope$3449,s$3854,(void 0)),((changes$3451=true)),["ignore"]));}else{(other$3887=m$3725);acc$3698.push(["newargs",other$3887]);}}}}}}}()))),acc$3698)),"/home/olivier/git/earl-grey/src/expand.eg",9848,11926);}(exp$3454=function(s$3894){var $index$3927;var $length$3921;var temp$3915;var acc$3909;var $index$3983;var $length$3977;var temp$3971;var acc$3965;var stepped$3898;(stepped$3898=(((acc$3909=[])),(((temp$3915=$4954(newargs$3452))),((($length$3921=temp$3915.length)),((($index$3927=0)),function(){$3904:for(;($index$3927<$length$3921);($index$3927++)){var i$3946;var arg$3947;var t0$3941;var t1$3942;var m$3936;(m$3936=temp$3915[$index$3927]);(t0$3941=m$3936);if(((t0$3941 instanceof Array)&&(((t1$3942=t0$3941.length)),(t1$3942===2)))){(i$3946=t0$3941[0]);(arg$3947=t0$3941[1]);acc$3909.push(it$0$3146.step(["expr",function(){if((i$3946===(newargs$3452.length-1))){return "expr";}else{return "ignore";}}()],s$3894,arg$3947));}else{$4702(m$3936,"/home/olivier/git/earl-grey/src/expand.eg",12148,12325);}}}()))),acc$3909));(acc$3965=[]);(temp$3971=stepped$3898);($length$3977=temp$3971.length);($index$3983=0);$3899:for(;($index$3983<$length$3977);($index$3983++)){var arg$4000;var m$3992;(m$3992=temp$3971[$index$3983]);(arg$4000=m$3992);acc$3965.push(helper$3157(["expr","expr"],s$3894,arg$4000));}return acc$3965;});if(changes$3451){return ["scope",vars$3453,["multi"].concat(exp$3454(newscope$3449))];}else{return ["multi"].concat(exp$3454(scope$3163));}}else{if(($3192$3209&&($3168$3198[0]==="data"))){(args$4006=Array.prototype.slice.call($3168$3198,1));(is_obj$4018=false);(obj$4019=["object"]);(arr$4020=["array"]);(arr_parts$4021=[]);(obj_parts$4022=[]);(new_arr_part$4023=function(){var other$4080;var t0$4067;var $4057$4062;($4057$4062=arr$4020);if((($4057$4062 instanceof Array)&&(((t0$4067=$4057$4062.length)),((t0$4067===1)&&($4057$4062[0]==="array"))))){return false;}else{(other$4080=$4057$4062);arr_parts$4021.push(arr$4020);(arr$4020=["array"]);}});(new_obj_part$4024=function(){var other$4116;var t0$4103;var $4093$4098;($4093$4098=obj$4019);if((($4093$4098 instanceof Array)&&(((t0$4103=$4093$4098.length)),((t0$4103===1)&&($4093$4098[0]==="object"))))){return false;}else{(other$4116=$4093$4098);obj_parts$4022.push(obj$4019);(obj$4019=["object"]);}});(temp$4127=it$0$3146.step_all(["expr","data"],scope$3163,args$4006));($length$4133=temp$4127.length);($index$4139=0);$4026:for(;($index$4139<$length$4133);($index$4139++)){var other$4206;var expr$4196;var expr$4190;var k$4179;var v$4180;var $4033$4156;var $4034$4157;var $4035$4158;var $4036$4159;var t0$4153;var t1$4154;var m$4148;(m$4148=temp$4127[$index$4139]);(t0$4153=m$4148);if((($4034$4157=(t0$4153 instanceof Array))&&(((t1$4154=t0$4153.length)),((t1$4154===1)&&(t0$4153[0]==="assoc"))))){(is_obj$4018=true);}else{if(($4034$4157&&((t1$4154===3)&&(t0$4153[0]==="assoc")))){(k$4179=t0$4153[1]);(v$4180=t0$4153[2]);(is_obj$4018=true);obj$4019.push(["array",k$4179,v$4180]);}else{if(($4034$4157&&(($4036$4159=(t1$4154===2))&&(t0$4153[0]==="dynsplice")))){(expr$4190=t0$4153[1]);new_arr_part$4023();arr_parts$4021.push(expr$4190);}else{if(($4036$4159&&(t0$4153[0]==="objsplice"))){(expr$4196=t0$4153[1]);(is_obj$4018=true);new_obj_part$4024();obj_parts$4022.push(expr$4196);}else{(other$4206=m$4148);arr$4020.push(other$4206);}}}}}new_arr_part$4023();new_obj_part$4024();(r$4025=((($4210$4216=arr_parts$4021)),function(){if((($4210$4216 instanceof Array)&&(((t0$4221=$4210$4216.length)),((t0$4221===0)&&is_obj$4018)))){return util$1724.construct(obj_parts$4022,function(x$4234,rest$4235){return ["send",["symbol","&:"],["data",x$4234,rest$4235]];},["object"]);}else{$4210$4216;if(is_obj$4018){throw $4721(["syntax","array","object"]).create("Cannot mix array and object notations.");}else{(other$4243=$4210$4216);return util$1724.construct(arr_parts$4021.reverse(),function(x$4247,rest$4248){return ["send",["send",rest$4248,["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",x$4247]];},["array"]);}}}()));return helper$3157(context$3162,scope$3163,it$0$3146.mkenv().mark(r$4025));}else{if(($3190$3207&&(($3192$3209=(t0$3203===3))&&($3168$3198[0]==="assign")))){(target$4253=$3168$3198[1]);(value$4254=$3168$3198[2]);(t$4263=helper$3157(["expr","expr"],scope$3163,target$4253));($4259$4269=t$4263);if(((((x$4281=$4259$4269)),((x$4281 instanceof Array)&&(x$4281[0]==="variable")))&&(((!t$4263.mutable)&&t$4263.assigned)&&(t$4263.assigned.group_id!==target$4253.group_id)))){(msg$4288=["Variable was declared as read-only. Declare it as","mutable at the origin with `var` (if you have access","to the declaration) or declare a new variable with","`let` or `var` or remove the original binding with","`delete`"].join(" "));throw $4721(["syntax"]).create(msg$4288,({"variable":target$4253,"loc":t$4263.assigned}));}else{if((($4259$4269 instanceof Array)&&(((t0$4274=$4259$4269.length)),((t0$4274===2)&&($4259$4269[0]==="macro"))))){(m$4294=$4259$4269[1]);["bounce",m$4294(["assign"],scope$3163,expr$3164,value$4254)];}else{(otherwise$4304=$4259$4269);(t$4263["assigned"]=target$4253);}}return ["assign",t$4263,helper$3157(["expr","expr"],scope$3163,value$4254)];}else{if(($3192$3209&&($3168$3198[0]==="lambda"))){(bindings$4312=$3168$3198[1]);(body$4313=$3168$3198[2]);(newscope$4318=Scope$1732(scope$3163));return ["lambda",(((acc$4330=[])),(((temp$4336=bindings$4312)),((($length$4342=temp$4336.length)),((($index$4348=0)),function(){$4322:for(;($index$4348<$length$4342);($index$4348++)){var v$4385;var x$4396;var other$4404;var v$4392;var b$4368;var env$4369;var $4327$4365;var t0$4362;var t1$4363;var m$4357;(m$4357=temp$4336[$index$4348]);(t0$4362=m$4357);if(((t0$4362 instanceof Array)&&(((t1$4363=t0$4362.length)),((t1$4363===2)&&((t0$4362[0]==="symbol")&&((b$4368=t0$4362[1]),$4980(t0$4362,"env"))))))){(env$4369=t0$4362.env);acc$4330.push((((v$4385=["variable",it$0$3146.gensym(b$4368)])),(env$4369.bind(newscope$4318,b$4368,v$4385),v$4385)));}else{if((((x$4396=t0$4362)),((x$4396 instanceof Array)&&(x$4396[0]==="variable")))){(v$4392=t0$4362);acc$4330.push(v$4392);}else{(other$4404=m$4357);acc$4330.push(function(){throw $4721(["syntax","lambda","binding"]).create("Not a valid binding.",({"node":other$4404}));}());}}}}()))),acc$4330),helper$3157(["expr","expr"],newscope$4318,body$4313)];}else{if(($3192$3209&&($3168$3198[0]==="use"))){($3184$4410=$3168$3198[1]);(x$4409=$3168$3198[2]);(t0$4414=$3184$4410);if((typeof(t0$4414)==="string")){(name$4418=t0$4414);(s$4427=scope$3163);$4431:while(s$4427){if((s$4427.name.slice(0,(name$4418.length+1))===(name$4418+"/"))){break $4431;}else{(s$4427=s$4427.parent);}}if(s$4427){return helper$3157(context$3162,s$4427,x$4409);}else{throw $4721(["syntax","noscope"]).create(("Could not find a scope tagged: "+name$4418));}}else{(newscope$4440=$3184$4410);return helper$3157(context$3162,newscope$4440,x$4409);}}else{if(($3192$3209&&(($3168$3198[0]==="tagscope")&&(((t1$3204=$3168$3198[1])),(typeof(t1$3204)==="string"))))){(tag$4444=t1$3204);(body$4445=$3168$3198[2]);return helper$3157(context$3162,Scope$1732(scope$3163,it$0$3146.gensym((tag$4444+"/"))),body$4445);}else{if(($3190$3207&&((t0$3203>=1)&&((type$4455=$3168$3198[0]),((args$4456=Array.prototype.slice.call($3168$3198,1)),(it$0$3146.generic_nodes.indexOf(type$4455)!==-1)))))){return [type$4455].concat((((acc$4466=[])),(((temp$4472=args$4456)),((($length$4478=temp$4472.length)),((($index$4484=0)),function(){$4461:for(;($index$4484<$length$4478);($index$4484++)){var arg$4501;var m$4493;(m$4493=temp$4472[$index$4484]);(arg$4501=m$4493);acc$4466.push(helper$3157(["expr","expr"],scope$3163,arg$4501));}}()))),acc$4466));}else{(other$4506=$3168$3198);throw $4721(["syntax","illegal_node"]).create("An illegal node was found.",({"node":other$4506,"context":context$3162}));}}}}}}}}}}}}}}}}}}));return helper$3157(context$3140,scope$3141,expr$3142);});$1621(Expander$1735,$1621(((accum$4512=({})),((accum$4512["::name"]="Expander"),accum$4512)),((accum$4516=({})),((accum$4516["::egclass"]=true),accum$4516))));Expander$1735;(mac1$1736=function(f$4523){return ["macro",function(context$4529,scope$4530,form$4531,$4526$4532){var t0$4536;var t1$4537;var expr$4534;(t0$4536=$4526$4532);if(((t0$4536 instanceof Array)&&(((t1$4537=t0$4536.length)),((t1$4537===2)&&(t0$4536[0]==="data"))))){(expr$4534=t0$4536[1]);}else{$4702($4526$4532);}return f$4523(expr$4534);}];});(__chk_ncache$1737=({}));(__chk_scache$1738=({}));(checker_db$1739=function($4560$4563){var v$4608;var v$4627;var s$4621;var n$4602;var $4565$4578;var ph$4572;(ph$4572=$4560$4563);($4565$4578=ph$4572);if(($4565$4578===null)){return checker_db$1739.null;}else{if(($4565$4578===(void 0))){return checker_db$1739.undefined;}else{if(($4565$4578===true)){return checker_db$1739.true;}else{if(($4565$4578===false)){return checker_db$1739.false;}else{if((typeof($4565$4578)==="number")){(n$4602=$4565$4578);if($1620(__chk_ncache$1737,n$4602)){return $1620(__chk_ncache$1737,n$4602);}else{(v$4608=mac1$1736(function(x$4613){return ["send",["symbol","==="],["data",x$4613,["value",n$4602]]];}));(__chk_ncache$1737[n$4602]=v$4608);return v$4608;}}else{if((typeof($4565$4578)==="string")){(s$4621=$4565$4578);if(Object.prototype.hasOwnProperty.call(__chk_scache$1738,s$4621)){return $1620(__chk_scache$1738,s$4621);}else{(v$4627=mac1$1736(function(x$4632){return ["send",["symbol","==="],["data",x$4632,["value",s$4621]]];}));(__chk_scache$1738[s$4621]=v$4627);return v$4627;}}else{$4702($4565$4578);}}}}}}});$1621(checker_db$1739,({"String":mac1$1736(function(x$4643){return ["send",["symbol","==="],["data",["send",["symbol","typeof"],["data",x$4643]],["value","string"]]];}),"Number":mac1$1736(function(x$4647){return ["send",["symbol","==="],["data",["send",["symbol","typeof"],["data",x$4647]],["value","number"]]];}),"Array":mac1$1736(function(x$4651){return ["send",["symbol","instanceof"],["data",x$4651,["symbol","Array"]]];}),"true":mac1$1736(function(x$4655){return x$4655;}),"false":mac1$1736(function(x$4659){return ["send",["symbol","not"],["data",["void"],x$4659]];}),"null":mac1$1736(function(x$4663){return ["send",["symbol","==="],["data",x$4663,["value",null]]];}),"undefined":mac1$1736(function(x$4667){return ["send",["symbol","==="],["data",x$4667,["value",(void 0)]]];})}));(exports["Env"]=Env$1733);(exports["Scope"]=Scope$1732);(exports["track_location"]=track_location$1734);(exports["Expander"]=Expander$1735);(exports["GenSym"]=GenSym$1727);(exports["gensym"]=gensym$1728);(exports["mac1"]=mac1$1736);(exports["checker_db"]=checker_db$1739);

},{"./location":8,"./pattern":11,"./pp":12,"./util":15}],7:[function(require,module,exports){
var $5329=function(type$5332){var f$5336;(f$5336=type$5332["::check"]);if((f$5336===(void 0))){return function(value$5342){return (value$5342 instanceof type$5332);};}else{return function(value$5346){return f$5336.call(type$5332,value$5346);};}};
var $5348=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $5349=function(dest$5352,values$5353){var k$5358;(k$5358=null);$5356:for(k$5358 in values$5353){if(values$5353.hasOwnProperty(k$5358)){(dest$5352[k$5358]=values$5353[k$5358]);}}return dest$5352;};
var $5366=function($5368$5371){var ph$5377;(ph$5377=$5368$5371);var $5373$5383;($5373$5383=ph$5377);var bridge$5375$5388;var x$5392;(bridge$5375$5388=$5373$5383);if((((typeof(bridge$5375$5388)==="string")&&((x$5392=bridge$5375$5388),true))||((typeof(bridge$5375$5388)==="number")&&((x$5392=bridge$5375$5388),true)))){return ["value",x$5392];}else{var other$5403;(other$5403=$5373$5383);return other$5403["::serialize_ast"]();}};
var send$5103;(send$5103=function(obj$5110,$5107$5111){var ph$5117;var msg$5118;var t0$5120;(t0$5120=$5107$5111);(msg$5118=t0$5120);(ph$5117=t0$5120);var $5113$5129;($5113$5129=ph$5117);var bridge$5115$5134;(bridge$5115$5134=$5113$5129);if(((typeof(bridge$5115$5134)==="string")||(typeof(bridge$5115$5134)==="number"))){return obj$5110[msg$5118];}else{var other$5146;(other$5146=$5113$5129);return obj$5110["::send"](msg$5118);}});(Array[":::project"]=function($5152$5155){var ph$5160;var value$5161;var t0$5163;(t0$5163=$5152$5155);(value$5161=t0$5163);(ph$5160=t0$5163);var $5157$5172;($5157$5172=ph$5160);if($5329(Array)($5157$5172)){return [true,value$5161];}else{$5157$5172;return [true,[value$5161]];}});(Array.prototype["::check"]=function(value$5190){if((value$5190 instanceof Array)){var i$5196;(i$5196=0);$5193:for(;(i$5196<this.length);(i$5196++)){if(($5348(this,i$5196)!==$5348(value$5190,i$5196))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $5349(this.slice(0),this);});(Array.prototype[":::project"]=function(value$5215){if((value$5215 instanceof Array)){var i$5221;(i$5221=0);$5218:for(;(i$5221<this.length);(i$5221++)){if(($5348(this,i$5221)!==$5348(value$5215,i$5221))){return [true,[value$5215]];}}return [true,value$5215.slice(this.length)];}else{return [true,[value$5215]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($5366));});(RegExp.prototype["::check"]=function($5239$5242){var ph$5247;(ph$5247=$5239$5242);var $5244$5253;($5244$5253=ph$5247);var value$5261;if((typeof($5244$5253)==="string")){(value$5261=$5244$5253);if(value$5261.match(this)){return true;}else{return false;}}else{var other$5266;(other$5266=$5244$5253);return false;}});(RegExp.prototype[":::project"]=function($5272$5275){var ph$5280;(ph$5280=$5272$5275);var $5277$5286;($5277$5286=ph$5280);var value$5294;if((typeof($5277$5286)==="string")){(value$5294=$5277$5286);var $5297$5302;($5297$5302=value$5294.match(this));var m$5310;if(($5297$5302===null)){(m$5310=$5297$5302);return [false,null];}else{var m$5315;(m$5315=$5297$5302);return [true,m$5315];}}else{var other$5319;(other$5319=$5277$5286);return [false,null];}});(Function.prototype["::send"]=function(args$5326){return this.apply(this,args$5326);});
var $7428=function(arr$7431){var results$7437;var l$7438;(results$7437=[]);(l$7438=arr$7431.length);var i$7447;(i$7447=0);$7436:for(;(i$7447<l$7438);(i$7447++)){results$7437.push([i$7447,$5348(arr$7431,i$7447)]);}return results$7437;};
var $7195=function(){var $7196$7202;($7196$7202=function(tags$7207){var it$0$7210;(it$0$7210=function(){if((!$5329($7196$7202)(this))){return Object.create($7196$7202.prototype);}else{return this;}}());(it$0$7210["tags"]=tags$7207);return it$0$7210;});($7196$7202.prototype["create"]=function(){var it$0$7230;var self$7231;(it$0$7230=this);(self$7231=this);var $7228$7240;($7228$7240=arguments);var t0$7245;var message$7249;var args$7250;(t0$7245=$7228$7240.length);if((t0$7245>=0)){(message$7249=function(){if((0>=t0$7245)){return "";}else{return $7228$7240[0];}}());(args$7250=Array.prototype.slice.call($7228$7240,1));var e$7263;(e$7263=Error(message$7249));(e$7263["::tags"]=it$0$7230.tags);(e$7263["args"]=args$7250);var temp$7279;(temp$7279=$7428(args$7250));var $length$7285;($length$7285=temp$7279.length);var $index$7291;($index$7291=0);$7264:for(;($index$7291<$length$7285);($index$7291++)){var m$7300;(m$7300=temp$7279[$index$7291]);var t0$7305;var t1$7306;var i$7310;var arg$7311;(t0$7305=m$7300);if(((t0$7305 instanceof Array)&&(((t1$7306=t0$7305.length)),(t1$7306===2)))){(i$7310=t0$7305[0]);(arg$7311=t0$7305[1]);(e$7263[i$7310]=arg$7311);}else{$7176(m$7300);}}(e$7263["length"]=args$7250.length);(e$7263["name"]=["E"].concat(it$0$7230.tags).join("."));return e$7263;}else{$7176($7228$7240);}});($7196$7202.prototype["::check"]=function(e$7341){var it$0$7345;var self$7346;(it$0$7345=this);(self$7346=this);var tags$7356;if(((!e$7341)||(!$5329(Error)(e$7341)))){return false;}(tags$7356=(e$7341["::tags"]||[]));var temp$7367;(temp$7367=it$0$7345.tags);var $length$7373;($length$7373=temp$7367.length);var $index$7379;($index$7379=0);$7357:for(;($index$7379<$length$7373);($index$7379++)){var m$7388;(m$7388=temp$7367[$index$7379]);var tag$7396;(tag$7396=m$7388);if((tags$7356.indexOf(tag$7396)===-1)){return false;}else{false;}}return true;});($7196$7202.prototype["::deconstruct"]=function(e$7405){var it$0$7409;var self$7410;(it$0$7409=this);(self$7410=this);return e$7405.args;});$5349($7196$7202,$5349(function(){var accum$7421;(accum$7421=({}));(accum$7421["::name"]="$7196");return accum$7421;}(),function(){var accum$7425;(accum$7425=({}));(accum$7425["::egclass"]=true);return accum$7425;}()));return $7196$7202;}();
var $7176=function(value$7179,url$7180,start$7181,end$7182){var err$7186;(err$7186=$7195(["match"]).create("Could not find a match for value",({"value":value$7179})));if(url$7180){(err$7186["location"]=["location",url$7180,start$7181,end$7182]);}throw err$7186;};
var $7454=function(type$7457){return function(value$7461){var f$7465;(f$7465=type$7457[":::project"]);if((f$7465===(void 0))){(f$7465=type$7457["::project"]);if((f$7465===(void 0))){return [true,type$7457(value$7461)];}else{var rval$7478;(rval$7478=false);try{(rval$7478=[true,f$7465(value$7461)]);}catch(excv$7489){var e$7495;(e$7495=excv$7489);(rval$7478=[false,null]);}return rval$7478;}}else{return f$7465.call(type$7457,value$7461);}};};
var $7607=function($7609$7612,key$7613){var ph$7621;(ph$7621=$7609$7612);var $7615$7627;($7615$7627=ph$7621);var bridge$7617$7632;(bridge$7617$7632=$7615$7627);if(((bridge$7617$7632===null)||(bridge$7617$7632===(void 0)))){return false;}else{var x$7644;if((typeof($7615$7627)==="string")){(x$7644=$7615$7627);return (key$7613 in String.prototype);}else{var x$7649;if((typeof($7615$7627)==="number")){(x$7649=$7615$7627);return (key$7613 in Number.prototype);}else{var x$7654;(x$7654=$7615$7627);return (key$7613 in x$7654);}}}};
var $7523=function($7525$7528){var ph$7538;var x$7539;var t0$7541;(t0$7541=$7525$7528);(x$7539=t0$7541);(ph$7538=t0$7541);var $7530$7550;($7530$7550=ph$7538);var bridge$7532$7555;(bridge$7532$7555=$7530$7550);if((function(){var bridge$7533$7565;(bridge$7533$7565=bridge$7532$7555);return (function(){var bridge$7534$7572;(bridge$7534$7572=bridge$7533$7565);return ((bridge$7534$7572===(void 0))||(bridge$7534$7572===null));}()||(typeof(bridge$7533$7565)==="string"));}()||(typeof(bridge$7532$7555)==="number"))){return x$7539;}else{if($7607($7530$7550,"::clone")){$7530$7550["::clone"];return x$7539["::clone"]();}else{$7530$7550;if((Object.getPrototypeOf(x$7539)===Object.prototype)){var dest$7590;(dest$7590=({}));var k$7595;(k$7595=null);$7589:for(k$7595 in x$7539){if(Object.prototype.hasOwnProperty.call(x$7539,k$7595)){(dest$7590[k$7595]=x$7539[k$7595]);}}return dest$7590;}else{var other$7605;(other$7605=$7530$7550);throw $7195(["clone"]).create("Object cannot be cloned",({"obj":x$7539}));}}}};
var $7501=function(a$7504,b$7505){var dest$7510;(dest$7510=$7523(a$7504));var k$7515;(k$7515=null);$7509:for(k$7515 in b$7505){if(Object.prototype.hasOwnProperty.call(b$7505,k$7515)){(dest$7510[k$7515]=b$7505[k$7515]);}}return dest$7510;};var id$5470;var id_f$5471;var numr$5472;var numr_f$5473;var num$5474;var num_f$5475;var str$5476;var str_f$5477;var op$5478;var op2$5479;var op3$5480;var op4$5481;var op_f$5482;var indent$5483;var indent_f$5484;var cmnt$5485;var cmnt_f$5486;var unkn$5487;var unkn_f$5488;var $5407$5422;var Location$5423;var __lt____lt____colon__$5424;var special_ops$5425;var regexps$5426;var ws_re$5427;var eol_re$5428;var produce$5429;var indent_tracker$5430;var process_indent$5431;var disambiguate_fixity$5432;var alternate_operators$5433;var fill_locations$5434;var tokenize$5435;($5407$5422=require("./location"));(Location$5423=$5407$5422.Location);(__lt____lt____colon__$5424=$5407$5422["<<:"]);(special_ops$5425=({"(":"PFX","[":"PFX","{":"PFX",")":"SFX","]":"SFX","}":"SFX",",":"IFX",".":"PFX","'":"PFX","not":"PFX"}));(regexps$5426=(((id$5470=RegExp("(?:^[a-zA-Z$_](?:[a-zA-Z$_0-9]*))",""))),((id_f$5471=function(m$5496){return ["ID",m$5496[0]];})),((numr$5472=RegExp("(?:^((?:\\d+))[rR]((?:[A-Za-z0-9_]+))(?:(?:\\.((?:[A-Za-z0-9_]+)))?))",""))),((numr_f$5473=function(m$5506){var t0$5516;var t1$5517;var frac$5537;var radix$5511;var intp$5512;var frac$5513;var value$5514;(t0$5516=m$5506);if(((t0$5516 instanceof Array)&&(((t1$5517=t0$5516.length)),(t1$5517===4)))){t0$5516[0];(radix$5511=t0$5516[1]);(intp$5512=t0$5516[2]);(frac$5513=t0$5516[3]);}else{$7176(m$5506,"/home/olivier/git/earl-grey/src/lex.eg",1075,1076);}(value$5514=parseInt(intp$5512.replace(RegExp("_","g"),""),radix$5511));if(frac$5513){(frac$5537=frac$5513.replace(RegExp("_","g"),""));(value$5514=(value$5514+(parseInt(frac$5513,radix$5511)/Math.pow(radix$5511,frac$5513.length))));}return ["NUM",value$5514];})),((num$5474=RegExp("(?:^((?:[0-9_]+))(?:(?:\\.((?:\\d+)))?)(?:(?:[eE]((?:[+-]?)(?:[0-9_]+)))?))",""))),((num_f$5475=function(m$5552){return ["NUM",parseFloat(m$5552[0].replace(RegExp("_","g"),""))];})),((str$5476=RegExp("(?:^\"((?:(?:(?:\\\\.)|[^\"])*))\")",""))),((str_f$5477=function(m$5562){var rx$5577;var f$5578;var repl$5567;var r$5568;(repl$5567=({"b":String.fromCharCode(8),"f":String.fromCharCode(12),"n":"\n","r":String.fromCharCode(13),"t":String.fromCharCode(9)}));(r$5568=(((rx$5577=RegExp("\\\\u[0-9A-Fa-f]{4}|\\\\x[0-9A-Fa-f]{2}|\\\\.","g"))),((f$5578=function($5585$5588){var chr$5629;var digits$5610;var t0$5604;var t1$5605;var t2$5606;var $5590$5599;var ph$5593;(ph$5593=$5585$5588);($5590$5599=ph$5593);(t0$5604=$7454(RegExp("^(?:\\\\u|\\\\x)(.*)",""))($5590$5599));if((t0$5604[0]&&(((t1$5605=t0$5604[1])),(((t2$5606=t1$5605.length)),(t2$5606===2))))){t1$5605[0];(digits$5610=t1$5605[1]);return String.fromCharCode(parseInt(digits$5610,16));}else{(t0$5604=$7454(RegExp("^.(.)",""))($5590$5599));if((t0$5604[0]&&(((t1$5605=t0$5604[1])),(((t2$5606=t1$5605.length)),(t2$5606===2))))){t1$5605[0];(chr$5629=t1$5605[1]);return ($5348(repl$5567,chr$5629)||chr$5629);}else{$7176($5590$5599);}}})),m$5562[1].replace(rx$5577,f$5578)));return ["STR",r$5568];})),((op$5478=RegExp("(?:^(?:[+\\-*/~\\^<>=%&|?!@#.:']+))",""))),((op2$5479=RegExp("(?:^[\\[\\{\\}\\],])",""))),((op3$5480=RegExp("(?:^(?:(?:(?:(?:(?:(?:(?:(?:(?:with|where)|when)|and)|not)|or)|in)|mod)|each)|as)(?:(?:[+\\-*/~\\^<>=%&|?!@#.:']+)|\\b))",""))),((op4$5481=RegExp("(?:^`((?:[A-Za-z0-9_$]+))`)",""))),((op_f$5482=function(m$5667,column$5668){var fixity$5700;var otherwise$5706;var $5676$5689;var $5672$5683;var op$5677;(op$5677=(m$5667[1]||m$5667[0]));($5672$5683=null);$5672$5683;if((op$5677==="|")){return ["INDENT",(column$5668-1)];}else{if((op$5677 in special_ops$5425)){(fixity$5700=$5348(special_ops$5425,op$5677));return ["OP",fixity$5700,op$5677];}else{(otherwise$5706=$5672$5683);return ["OP","?FX",op$5677];}}})),((indent$5483=RegExp("(?:^(?:(?:\n(?: *);(?:[^\n]*))*)(?:(?:\n((?: *)))+))",""))),((indent_f$5484=function(m$5716){var ilen$5720;(ilen$5720=m$5716[1].length);return ["INDENT",ilen$5720];})),((cmnt$5485=RegExp("(?:^;(?:[^\n]*))",""))),((cmnt_f$5486=function(m$5732){return ["IGNORE"];})),((unkn$5487=RegExp("(?:^.)",""))),((unkn_f$5488=function(m$5742){return ["ILLEGAL",m$5742[0]];})),[[op3$5480,op_f$5482],[id$5470,id_f$5471],[numr$5472,numr_f$5473],[num$5474,num_f$5475],[str$5476,str_f$5477],[op$5478,op_f$5482],[op2$5479,op_f$5482],[op4$5481,op_f$5482],[indent$5483,indent_f$5484],[cmnt$5485,cmnt_f$5486],[unkn$5487,unkn_f$5488]]));(ws_re$5427=RegExp("(?:^(?: *)(?:(?:\n(?: *)\\\\(?: *))*))",""));(eol_re$5428=RegExp("(?:^(?: *)(?:\n|$))",""));(produce$5429=function(src$5756){var text$5765;var results$5766;var wsb$5767;var pos$5768;var column$5769;(text$5765=src$5756.text);(results$5766=[]);(wsb$5767=text$5765.match(ws_re$5427)[0].length);(text$5765=text$5765.slice(wsb$5767));(pos$5768=wsb$5767);(column$5769=0);$5788:while(text$5765){var i$5794;(i$5794=0);$5791:for(;(i$5794<regexps$5426.length);(++i$5794)){var t0$5808;var t1$5809;var splits$5858;var skip$5841;var endpos$5842;var wsa$5843;var eol$5844;var bwsb$5845;var bwsa$5846;var token$5847;var re$5804;var fn$5805;var m$5806;(t0$5808=$5348(regexps$5426,i$5794));if(((t0$5808 instanceof Array)&&(((t1$5809=t0$5808.length)),(t1$5809===2)))){(re$5804=t0$5808[0]);(fn$5805=t0$5808[1]);}else{$7176($5348(regexps$5426,i$5794),"/home/olivier/git/earl-grey/src/lex.eg",4106,4126);}(m$5806=text$5765.match(re$5804));if(m$5806){(skip$5841=m$5806[0].length);(endpos$5842=(pos$5768+skip$5841));(column$5769=(((splits$5858=m$5806[0].split("\n"))),function(){if((splits$5858.length>1)){return $5348(splits$5858,(splits$5858.length-1)).length;}else{return (column$5769+skip$5841);}}()));(text$5765=text$5765.slice(skip$5841));(wsa$5843=text$5765.match(ws_re$5427)[0].length);(eol$5844=(text$5765.match(eol_re$5428)&&true));(bwsb$5845=(wsb$5767>0));(bwsa$5846=function(){if(eol$5844){return bwsb$5845;}else{return (wsa$5843>0);}}());(token$5847=fn$5805(m$5806,column$5769));(token$5847["wsb"]=bwsb$5845);(token$5847["wsa"]=bwsa$5846);(token$5847["location"]=Location$5423(src$5756,pos$5768,endpos$5842));results$5766.push(token$5847);(text$5765=text$5765.slice(wsa$5843));(column$5769=(column$5769+wsa$5843));(wsb$5767=wsa$5843);(pos$5768=(endpos$5842+wsa$5843));break $5791;}}}return results$5766;});(indent_tracker$5430=function(){var curr$5912;var stack$5913;var stacks$5914;(curr$5912=0);(stack$5913=[]);(stacks$5914=[stack$5913]);return function($5910$5925){var t0$5948;var rval$6016;var $index$6096;var $length$6090;var temp$6084;var acc$6078;var rval$6070;var x$6127;var $index$6155;var $length$6149;var temp$6143;var acc$6137;var other$6176;var fixity$6057;var fixity$6037;var stuff$6032;var new_indent$5973;var $5929$5974;var $5941$5967;var $5942$5968;var $5943$5969;var $5944$5970;var t0$5962;var t1$5963;var bridge$5936$5964;var bridge$5938$5965;var $5927$5957;var ph$5945;var token$5946;(t0$5948=$5910$5925);(token$5946=t0$5948);(ph$5945=t0$5948);($5927$5957=ph$5945);if((($5941$5967=($5927$5957 instanceof Array))&&(((t0$5962=$5927$5957.length)),((t0$5962===2)&&($5927$5957[0]==="INDENT"))))){(t1$5963=$5927$5957[1]);(new_indent$5973=t1$5963);($5929$5974=t1$5963);$5929$5974;if((curr$5912===false)){(curr$5912=new_indent$5973);return [$7501(["OP","IFX",","],({"wsb":true,"wsa":true}))];}else{if(($5929$5974>curr$5912)){stack$5913.push(curr$5912);(curr$5912=new_indent$5973);return [$7501(["OP","PFX","["],({"wsb":true,"wsa":true}))];}else{if(($5929$5974===curr$5912)){return [$7501(["OP","IFX",","],({"wsb":true,"wsa":true}))];}else{if(($5929$5974<curr$5912)){(rval$6016=[]);$6020:while(((stack$5913.length>0)&&(new_indent$5973<curr$5912))){(curr$5912=stack$5913.pop());rval$6016.push($7501(["OP","SFX","]"],({"wsb":true,"wsa":true})));}rval$6016.push($7501(["OP","IFX",","],({"wsb":true,"wsa":true})));return rval$6016;}else{$7176($5929$5974,"/home/olivier/git/earl-grey/src/lex.eg",5483,5499);}}}}}else{if(($5941$5967&&((t0$5962>=1)&&($5927$5957[0]==="ID")))){(stuff$6032=Array.prototype.slice.call($5927$5957,1));return [token$5946];}else{if(($5941$5967&&(($5943$5969=(t0$5962===3))&&(($5944$5970=($5927$5957[0]==="OP"))&&((fixity$6037=$5927$5957[1]),(((bridge$5936$5964=$5927$5957[2])),((bridge$5936$5964==="[")||(bridge$5936$5964==="{")))))))){stack$5913.push(curr$5912);stacks$5914.push(stack$5913);(stack$5913=[]);(curr$5912=false);return [token$5946];}else{if(($5944$5970&&((fixity$6057=$5927$5957[1]),(((bridge$5938$5965=$5927$5957[2])),((bridge$5938$5965==="]")||(bridge$5938$5965==="}")))))){(rval$6070=(((acc$6078=[])),(((temp$6084=stack$5913)),((($length$6090=temp$6084.length)),((($index$6096=0)),function(){$6073:for(;($index$6096<$length$6090);($index$6096++)){var m$6105;(m$6105=temp$6084[$index$6096]);m$6105;acc$6078.push($7501(["OP","SFX","]"],({"wsb":true,"wsa":true})));}}()))),acc$6078));(stack$5913=stacks$5914.pop());(curr$5912=stack$5913.pop());rval$6070.push(token$5946);return rval$6070;}else{if((((x$6127=$5927$5957)),((x$6127 instanceof Array)&&(x$6127[0]==="EOF")))){(acc$6137=[]);(temp$6143=stack$5913);($length$6149=temp$6143.length);($index$6155=0);$6132:for(;($index$6155<$length$6149);($index$6155++)){var m$6164;(m$6164=temp$6143[$index$6155]);m$6164;acc$6137.push($7501(["OP","SFX","]"],({"wsb":true,"wsa":true})));}return acc$6137;}else{(other$6176=$5927$5957);return [token$5946];}}}}}};});(process_indent$5431=function(stream$6183){var $index$6214;var $length$6208;var temp$6202;var tracker$6188;var results$6189;(tracker$6188=indent_tracker$5430());(results$6189=[]);(temp$6202=stream$6183);($length$6208=temp$6202.length);($index$6214=0);$6190:for(;($index$6214<$length$6208);($index$6214++)){var token$6231;var m$6223;(m$6223=temp$6202[$index$6214]);(token$6231=m$6223);(results$6189=results$6189.concat(tracker$6188(token$6231)));}return results$6189.concat(tracker$6188(["EOF"]));});(disambiguate_fixity$5432=function(stream$6238){var $index$6722;var $length$6716;var temp$6710;var __lt____lt____lt____colon__$6247;var collapse_operators$6248;var buffer$6249;var pfx$6250;var collapse$6251;var results$6252;(__lt____lt____lt____colon__$6247=function(a$6268,b$6269){(a$6268["wsb"]=b$6269.wsb);(a$6268["wsa"]=b$6269.wsa);return __lt____lt____colon__$5424(a$6268,b$6269);});(collapse_operators$6248=function(){var msg$6389;var longer$6385;var token$6362;var fixity$6363;var name$6364;var t0$6356;var t1$6357;var t2$6358;var $6346$6351;var $index$6420;var $length$6414;var temp$6408;var acc$6402;var $index$6483;var $length$6477;var temp$6471;var acc$6465;var t0$6536;var t1$6537;var t2$6538;var t3$6539;var t0$6584;var t0$6591;var t0$6644;var t0$6651;var t1$6652;var t2$6653;var bridge$6625$6634;var $6623$6629;var t$6620;var results$6614;var $6528$6573;var $6529$6574;var $6530$6575;var bridge$6525$6570;var t0$6571;var $6523$6565;var first$6531;var fixity$6532;var name$6533;var rest$6534;var n$6326;var $6293$6320;var $6294$6321;var $6295$6322;var $6296$6323;var t0$6317;var t1$6318;var buffer$6308;var $6287$6309;var t0$6304;var $6285$6299;($6285$6299=arguments);(t0$6304=$6285$6299.length);if((t0$6304>=1)){(buffer$6308=$6285$6299[0]);($6287$6309=Array.prototype.slice.call($6285$6299,1));(n$6326=buffer$6308.length);$6287$6309;if((!buffer$6308.length)){return [];}else{(t0$6317=$6287$6309);(t1$6318=t0$6317.length);if((($6295$6322=(t1$6318===2))&&(($6296$6323=t0$6317[0])&&t0$6317[1]))){($6346$6351=buffer$6308);if((($6346$6351 instanceof Array)&&(((t0$6356=$6346$6351.length)),((t0$6356===1)&&(((t1$6357=$6346$6351[0])),((token$6362=t1$6357),((t1$6357 instanceof Array)&&(((t2$6358=t1$6357.length)),((t2$6358===3)&&(t1$6357[0]==="OP")))))))))){(fixity$6363=t1$6357[1]);(name$6364=t1$6357[2]);return [__lt____lt____lt____colon__$6247(["ID",name$6364],token$6362)];}else{(longer$6385=$6346$6351);(msg$6389="Too many consecutive operators were found here.");throw $7195(["syntax","nullary"]).create(msg$6389,({"operators":buffer$6308}));}}else{if($6296$6323){t0$6317[1];(acc$6402=[]);(temp$6408=buffer$6308);($length$6414=temp$6408.length);($index$6420=0);$6397:for(;($index$6420<$length$6414);($index$6420++)){var token$6439;var name$6440;var t0$6434;var t1$6435;var m$6429;(m$6429=temp$6408[$index$6420]);(t0$6434=m$6429);(token$6439=t0$6434);if(((t0$6434 instanceof Array)&&(((t1$6435=t0$6434.length)),((t1$6435===3)&&(t0$6434[0]==="OP"))))){t0$6434[1];(name$6440=t0$6434[2]);acc$6402.push(__lt____lt____lt____colon__$6247(["OP","PFX",name$6440],token$6439));}else{$7176(m$6429,"/home/olivier/git/earl-grey/src/lex.eg",7844,7938);}}return acc$6402;}else{if(($6295$6322&&(t0$6317[0],t0$6317[1]))){(acc$6465=[]);(temp$6471=buffer$6308);($length$6477=temp$6471.length);($index$6483=0);$6460:for(;($index$6483<$length$6477);($index$6483++)){var token$6502;var name$6503;var t0$6497;var t1$6498;var m$6492;(m$6492=temp$6471[$index$6483]);(t0$6497=m$6492);(token$6502=t0$6497);if(((t0$6497 instanceof Array)&&(((t1$6498=t0$6497.length)),((t1$6498===3)&&(t0$6497[0]==="OP"))))){t0$6497[1];(name$6503=t0$6497[2]);acc$6465.push(__lt____lt____lt____colon__$6247(["OP","SFX",name$6503],token$6502));}else{$7176(m$6492,"/home/olivier/git/earl-grey/src/lex.eg",7951,8045);}}return acc$6465;}else{$6287$6309;(t0$6536=buffer$6308);if(((t0$6536 instanceof Array)&&(((t1$6537=t0$6536.length)),((t1$6537>=1)&&(((t2$6538=t0$6536[0])),((first$6531=t2$6538),((t2$6538 instanceof Array)&&(((t3$6539=t2$6538.length)),((t3$6539===3)&&(t2$6538[0]==="OP")))))))))){(fixity$6532=t2$6538[1]);(name$6533=t2$6538[2]);(rest$6534=Array.prototype.slice.call(t0$6536,1));}else{$7176(buffer$6308,"/home/olivier/git/earl-grey/src/lex.eg",8098,8104);}($6523$6565=[first$6531.wsb,first$6531.wsa]);(bridge$6525$6570=$6523$6565);if((((bridge$6525$6570 instanceof Array)&&(((t0$6584=bridge$6525$6570.length)),((t0$6584===2)&&((!bridge$6525$6570[0])&&(!bridge$6525$6570[1])))))||((bridge$6525$6570 instanceof Array)&&(((t0$6591=bridge$6525$6570.length)),((t0$6591===2)&&(bridge$6525$6570[0]&&bridge$6525$6570[1])))))){return [__lt____lt____lt____colon__$6247(["OP","IFX",name$6533],first$6531)].concat(collapse_operators$6248(rest$6534,true,false));}else{if((($6528$6573=($6523$6565 instanceof Array))&&(((t0$6571=$6523$6565.length)),(($6530$6575=(t0$6571===2))&&$6523$6565[0])))){$6523$6565[1];return [__lt____lt____lt____colon__$6247(["OP","PFX",name$6533],first$6531)].concat(collapse_operators$6248(rest$6534,true,false));}else{if(($6530$6575&&($6523$6565[0],$6523$6565[1]))){(results$6614=collapse_operators$6248(rest$6534,false,false));(t$6620=((($6623$6629=results$6614)),(((bridge$6625$6634=$6623$6629)),function(){if((((bridge$6625$6634 instanceof Array)&&(((t0$6644=bridge$6625$6634.length)),(t0$6644===0)))||((bridge$6625$6634 instanceof Array)&&(((t0$6651=bridge$6625$6634.length)),((t0$6651>=1)&&(((t1$6652=bridge$6625$6634[0])),((t1$6652 instanceof Array)&&(((t2$6653=t1$6652.length)),((t2$6653>=2)&&((t1$6652[0]==="OP")&&((t1$6652[1]==="PFX")&&(Array.prototype.slice.call(t1$6652,2),(Array.prototype.slice.call(bridge$6625$6634,1),true))))))))))))){return ["OP","IFX",name$6533];}else{$6623$6629;return ["OP","SFX",name$6533];}}())));return [__lt____lt____lt____colon__$6247(t$6620,first$6531)].concat(results$6614);}else{$7176($6523$6565);}}}}}}}}else{$7176($6285$6299);}});(buffer$6249=[]);(pfx$6250=true);(collapse$6251=function(sfx$6691){var rval$6696;(rval$6696=collapse_operators$6248(buffer$6249,pfx$6250,sfx$6691));(buffer$6249=[]);return rval$6696;});(results$6252=[]);(temp$6710=stream$6238);($length$6716=temp$6710.length);($index$6722=0);$6253:for(;($index$6722<$length$6716);($index$6722++)){var other$6803;var name$6753;var $6258$6754;var t0$6748;var t1$6749;var token$6740;var $6256$6741;var t0$6736;var m$6731;(m$6731=temp$6710[$index$6722]);(t0$6736=m$6731);(token$6740=t0$6736);($6256$6741=t0$6736);(t0$6748=$6256$6741);if(((t0$6748 instanceof Array)&&(((t1$6749=t0$6748.length)),((t1$6749===3)&&(t0$6748[0]==="OP"))))){($6258$6754=t0$6748[1]);(name$6753=t0$6748[2]);if(($6258$6754==="?FX")){buffer$6249.push(token$6740);}else{if(($6258$6754==="IFX")){(results$6252=results$6252.concat(collapse$6251(true)));results$6252.push(token$6740);(pfx$6250=true);}else{if(($6258$6754==="PFX")){(results$6252=results$6252.concat(collapse$6251(false)));results$6252.push(token$6740);(pfx$6250=true);}else{if(($6258$6754==="SFX")){(results$6252=results$6252.concat(collapse$6251(true)));results$6252.push(token$6740);(pfx$6250=false);}else{$7176($6258$6754,"/home/olivier/git/earl-grey/src/lex.eg",8914,8919);}}}}}else{(other$6803=$6256$6741);(results$6252=results$6252.concat(collapse$6251(false)));results$6252.push(token$6740);(pfx$6250=false);}}return results$6252.concat(collapse$6251(true));});(alternate_operators$5433=function(stream$6815){var $index$6860;var $length$6854;var temp$6848;var W$6821;var last_op$6822;var results$6823;(W$6821=function(x$6836){if(x$6836){return "wide";}else{return "short";}});(last_op$6822=true);(results$6823=[]);(temp$6848=stream$6815);($length$6854=temp$6848.length);($index$6860=0);$6824:for(;($index$6860<$length$6854);($index$6860++)){var x$6894;var $6915$6922;var x$6963;var token$6970;var fixity$6901;var name$6902;var t0$6886;var t1$6887;var token$6878;var $6827$6879;var t0$6874;var m$6869;(m$6869=temp$6848[$index$6860]);(t0$6874=m$6869);(token$6878=t0$6874);($6827$6879=t0$6874);if((((x$6894=$6827$6879)),((x$6894 instanceof Array)&&(x$6894[0]==="IGNORE")))){null;}else{(t0$6886=$6827$6879);if(((t0$6886 instanceof Array)&&(((t1$6887=t0$6886.length)),((t1$6887===3)&&(t0$6886[0]==="OP"))))){(fixity$6901=t0$6886[1]);(name$6902=t0$6886[2]);if(last_op$6822){results$6823.push(["VOID"]);}($6915$6922=fixity$6901);if(($6915$6922==="IFX")){results$6823.push(__lt____lt____colon__$5424(["IFX",W$6821((token$6878.wsa||token$6878.wsb)),name$6902],token$6878));(last_op$6822=true);}else{if(($6915$6922==="PFX")){if((!last_op$6822)){results$6823.push(["IFX",W$6821(token$6878.wsb),"WHITE"],["VOID"]);}results$6823.push(__lt____lt____colon__$5424(["PFX",W$6821(token$6878.wsa),name$6902],token$6878));(last_op$6822=true);}else{if(($6915$6922==="SFX")){results$6823.push(__lt____lt____colon__$5424(["SFX",W$6821(token$6878.wsb),name$6902],token$6878),["VOID"]);(last_op$6822=false);}else{$7176($6915$6922);}}}}else{if((((x$6963=$6827$6879)),((x$6963 instanceof Array)&&(x$6963[0]==="ILLEGAL")))){throw $7195(["syntax","illegal"]).create("unknown character",({"chr":token$6878}));}else{(token$6970=$6827$6879);if((!last_op$6822)){results$6823.push(["IFX",W$6821(token$6970.wsb),"WHITE"]);}results$6823.push(token$6970);(last_op$6822=false);}}}}if(last_op$6822){results$6823.push(["VOID"]);}return results$6823;});(fill_locations$5434=function(source$6984,stream$6985){var $index$7082;var $length$7076;var temp$7070;var to_fill$6991;var start$6992;var fill$6993;(to_fill$6991=[]);(start$6992=0);(fill$6993=function(end$7008){var $index$7031;var $length$7025;var temp$7019;(temp$7019=to_fill$6991);($length$7025=temp$7019.length);($index$7031=0);$7012:for(;($index$7031<$length$7025);($index$7031++)){var token$7057;var token$7048;var m$7040;(m$7040=temp$7019[$index$7031]);(token$7048=m$7040);if(($index$7031===0)){(token$7048["location"]=Location$5423(source$6984,start$6992,end$7008));}else{(token$7057=m$7040);(token$7057["location"]=Location$5423(source$6984,end$7008,end$7008));}}(to_fill$6991=[]);});(temp$7070=stream$6985);($length$7076=temp$7070.length);($index$7082=0);$6994:for(;($index$7082<$length$7076);($index$7082++)){var other$7115;var location$7100;var t0$7096;var m$7091;(m$7091=temp$7070[$index$7082]);(t0$7096=m$7091);if(($7607(t0$7096,"location")&&((location$7100=t0$7096.location),location$7100))){fill$6993(location$7100.start);(start$6992=location$7100.end);}else{(other$7115=m$7091);to_fill$6991.push(other$7115);}}fill$6993(source$6984.text.length);return stream$6985;});(tokenize$5435=function(src$7122){var it$0$7150;var it$0$7144;var it$0$7138;var it$0$7132;var it$0$7126;(it$0$7126=src$7122);(it$0$7132=produce$5429(it$0$7126));(it$0$7138=process_indent$5431(it$0$7132));(it$0$7144=disambiguate_fixity$5432(it$0$7138));(it$0$7150=alternate_operators$5433(it$0$7144));return fill_locations$5434(src$7122,it$0$7150);});(exports["tokenize"]=tokenize$5435);(exports["process_indent"]=process_indent$5431);(exports["disambiguate_fixity"]=disambiguate_fixity$5432);(exports["alternate_operators"]=alternate_operators$5433);(exports["fill_locations"]=fill_locations$5434);

},{"./location":8}],8:[function(require,module,exports){
var $7892=function(type$7895){var f$7899;(f$7899=type$7895["::check"]);if((f$7899===(void 0))){return function(value$7905){return (value$7905 instanceof type$7895);};}else{return function(value$7909){return f$7899.call(type$7895,value$7909);};}};
var $7911=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $7912=function(dest$7915,values$7916){var k$7921;(k$7921=null);$7919:for(k$7921 in values$7916){if(values$7916.hasOwnProperty(k$7921)){(dest$7915[k$7921]=values$7916[k$7921]);}}return dest$7915;};
var $7929=function($7931$7934){var ph$7940;(ph$7940=$7931$7934);var $7936$7946;($7936$7946=ph$7940);var bridge$7938$7951;var x$7955;(bridge$7938$7951=$7936$7946);if((((typeof(bridge$7938$7951)==="string")&&((x$7955=bridge$7938$7951),true))||((typeof(bridge$7938$7951)==="number")&&((x$7955=bridge$7938$7951),true)))){return ["value",x$7955];}else{var other$7966;(other$7966=$7936$7946);return other$7966["::serialize_ast"]();}};
var send$7666;(send$7666=function(obj$7673,$7670$7674){var ph$7680;var msg$7681;var t0$7683;(t0$7683=$7670$7674);(msg$7681=t0$7683);(ph$7680=t0$7683);var $7676$7692;($7676$7692=ph$7680);var bridge$7678$7697;(bridge$7678$7697=$7676$7692);if(((typeof(bridge$7678$7697)==="string")||(typeof(bridge$7678$7697)==="number"))){return obj$7673[msg$7681];}else{var other$7709;(other$7709=$7676$7692);return obj$7673["::send"](msg$7681);}});(Array[":::project"]=function($7715$7718){var ph$7723;var value$7724;var t0$7726;(t0$7726=$7715$7718);(value$7724=t0$7726);(ph$7723=t0$7726);var $7720$7735;($7720$7735=ph$7723);if($7892(Array)($7720$7735)){return [true,value$7724];}else{$7720$7735;return [true,[value$7724]];}});(Array.prototype["::check"]=function(value$7753){if((value$7753 instanceof Array)){var i$7759;(i$7759=0);$7756:for(;(i$7759<this.length);(i$7759++)){if(($7911(this,i$7759)!==$7911(value$7753,i$7759))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $7912(this.slice(0),this);});(Array.prototype[":::project"]=function(value$7778){if((value$7778 instanceof Array)){var i$7784;(i$7784=0);$7781:for(;(i$7784<this.length);(i$7784++)){if(($7911(this,i$7784)!==$7911(value$7778,i$7784))){return [true,[value$7778]];}}return [true,value$7778.slice(this.length)];}else{return [true,[value$7778]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($7929));});(RegExp.prototype["::check"]=function($7802$7805){var ph$7810;(ph$7810=$7802$7805);var $7807$7816;($7807$7816=ph$7810);var value$7824;if((typeof($7807$7816)==="string")){(value$7824=$7807$7816);if(value$7824.match(this)){return true;}else{return false;}}else{var other$7829;(other$7829=$7807$7816);return false;}});(RegExp.prototype[":::project"]=function($7835$7838){var ph$7843;(ph$7843=$7835$7838);var $7840$7849;($7840$7849=ph$7843);var value$7857;if((typeof($7840$7849)==="string")){(value$7857=$7840$7849);var $7860$7865;($7860$7865=value$7857.match(this));var m$7873;if(($7860$7865===null)){(m$7873=$7860$7865);return [false,null];}else{var m$7878;(m$7878=$7860$7865);return [true,m$7878];}}else{var other$7882;(other$7882=$7840$7849);return [false,null];}});(Function.prototype["::send"]=function(args$7889){return this.apply(this,args$7889);});
var $10455=function(arr$10458){var results$10464;var l$10465;(results$10464=[]);(l$10465=arr$10458.length);var i$10474;(i$10474=0);$10463:for(;(i$10474<l$10465);(i$10474++)){results$10464.push([i$10474,$7911(arr$10458,i$10474)]);}return results$10464;};
var $10222=function(){var $10223$10229;($10223$10229=function(tags$10234){var it$0$10237;(it$0$10237=function(){if((!$7892($10223$10229)(this))){return Object.create($10223$10229.prototype);}else{return this;}}());(it$0$10237["tags"]=tags$10234);return it$0$10237;});($10223$10229.prototype["create"]=function(){var it$0$10257;var self$10258;(it$0$10257=this);(self$10258=this);var $10255$10267;($10255$10267=arguments);var t0$10272;var message$10276;var args$10277;(t0$10272=$10255$10267.length);if((t0$10272>=0)){(message$10276=function(){if((0>=t0$10272)){return "";}else{return $10255$10267[0];}}());(args$10277=Array.prototype.slice.call($10255$10267,1));var e$10290;(e$10290=Error(message$10276));(e$10290["::tags"]=it$0$10257.tags);(e$10290["args"]=args$10277);var temp$10306;(temp$10306=$10455(args$10277));var $length$10312;($length$10312=temp$10306.length);var $index$10318;($index$10318=0);$10291:for(;($index$10318<$length$10312);($index$10318++)){var m$10327;(m$10327=temp$10306[$index$10318]);var t0$10332;var t1$10333;var i$10337;var arg$10338;(t0$10332=m$10327);if(((t0$10332 instanceof Array)&&(((t1$10333=t0$10332.length)),(t1$10333===2)))){(i$10337=t0$10332[0]);(arg$10338=t0$10332[1]);(e$10290[i$10337]=arg$10338);}else{$10203(m$10327);}}(e$10290["length"]=args$10277.length);(e$10290["name"]=["E"].concat(it$0$10257.tags).join("."));return e$10290;}else{$10203($10255$10267);}});($10223$10229.prototype["::check"]=function(e$10368){var it$0$10372;var self$10373;(it$0$10372=this);(self$10373=this);var tags$10383;if(((!e$10368)||(!$7892(Error)(e$10368)))){return false;}(tags$10383=(e$10368["::tags"]||[]));var temp$10394;(temp$10394=it$0$10372.tags);var $length$10400;($length$10400=temp$10394.length);var $index$10406;($index$10406=0);$10384:for(;($index$10406<$length$10400);($index$10406++)){var m$10415;(m$10415=temp$10394[$index$10406]);var tag$10423;(tag$10423=m$10415);if((tags$10383.indexOf(tag$10423)===-1)){return false;}else{false;}}return true;});($10223$10229.prototype["::deconstruct"]=function(e$10432){var it$0$10436;var self$10437;(it$0$10436=this);(self$10437=this);return e$10432.args;});$7912($10223$10229,$7912(function(){var accum$10448;(accum$10448=({}));(accum$10448["::name"]="$10223");return accum$10448;}(),function(){var accum$10452;(accum$10452=({}));(accum$10452["::egclass"]=true);return accum$10452;}()));return $10223$10229;}();
var $10203=function(value$10206,url$10207,start$10208,end$10209){var err$10213;(err$10213=$10222(["match"]).create("Could not find a match for value",({"value":value$10206})));if(url$10207){(err$10213["location"]=["location",url$10207,start$10208,end$10209]);}throw err$10213;};
var $10770=function(type$10773){return function(value$10777){var f$10781;(f$10781=type$10773[":::project"]);if((f$10781===(void 0))){(f$10781=type$10773["::project"]);if((f$10781===(void 0))){return [true,type$10773(value$10777)];}else{var rval$10794;(rval$10794=false);try{(rval$10794=[true,f$10781(value$10777)]);}catch(excv$10805){var e$10811;(e$10811=excv$10805);(rval$10794=[false,null]);}return rval$10794;}}else{return f$10781.call(type$10773,value$10777);}};};
var $10817=function($10819$10822,key$10823){var ph$10831;(ph$10831=$10819$10822);var $10825$10837;($10825$10837=ph$10831);var bridge$10827$10842;(bridge$10827$10842=$10825$10837);if(((bridge$10827$10842===null)||(bridge$10827$10842===(void 0)))){return false;}else{var x$10854;if((typeof($10825$10837)==="string")){(x$10854=$10825$10837);return (key$10823 in String.prototype);}else{var x$10859;if((typeof($10825$10837)==="number")){(x$10859=$10825$10837);return (key$10823 in Number.prototype);}else{var x$10864;(x$10864=$10825$10837);return (key$10823 in x$10864);}}}};
var $10481=function(){var $10482$10487;($10482$10487=function($10491$10498,$10493$10499,$10495$10500){var it$0$10503;(it$0$10503=function(){if((!$7892($10482$10487)(this))){return Object.create($10482$10487.prototype);}else{return this;}}());var t0$10510;(t0$10510=$10770(Array)($10491$10498));if(t0$10510[0]){(it$0$10503["tags"]=t0$10510[1]);}else{$10203($10491$10498);}(it$0$10503["props"]=$10493$10499);var t0$10522;(t0$10522=$10770(Array)($10495$10500));if(t0$10522[0]){(it$0$10503["children"]=t0$10522[1]);}else{$10203($10495$10500);}undefined;return it$0$10503;});$7912(function(){var accum$10536;(accum$10536=({}));(accum$10536["::check"]=function(x$10541){return (((x$10541&&x$10541.tags)&&x$10541.props)&&x$10541.children);});return accum$10536;}(),$7912(function(){var accum$10544;(accum$10544=({}));(accum$10544[":::project"]=function($10548$10551){var ph$10556;(ph$10556=$10548$10551);var $10553$10562;($10553$10562=ph$10556);var tags$10570;var props$10571;var children$10572;if(($10817($10553$10562,"tags")&&((tags$10570=$10553$10562.tags),($10817($10553$10562,"props")&&((props$10571=$10553$10562.props),$10817($10553$10562,"children")))))){(children$10572=$10553$10562.children);return [true,[tags$10570,props$10571,children$10572]];}else{$10553$10562;return [false,null];}});return accum$10544;}(),$7912(function(){var accum$10581;(accum$10581=({}));(accum$10581["::name"]="$10482");return accum$10581;}(),function(){var accum$10585;(accum$10585=({}));(accum$10585["::egclass"]=true);return accum$10585;}())));($10482$10487.prototype["::check"]=function($10591$10594){var it$0$10598;var self$10599;(it$0$10598=this);(self$10599=this);var ph$10610;(ph$10610=$10591$10594);var $10607$10616;($10607$10616=ph$10610);var n$10624;if($7892($10481)($10607$10616)){(n$10624=$10607$10616);var temp$10634;(temp$10634=it$0$10598.tags);var $length$10640;($length$10640=temp$10634.length);var $index$10646;($index$10646=0);$10628:for(;($index$10646<$length$10640);($index$10646++)){var m$10655;(m$10655=temp$10634[$index$10646]);var c$10663;(c$10663=m$10655);if((n$10624.tags.indexOf(c$10663)===-1)){return false;}else{false;}}return true;}else{$10607$10616;return false;}});($10482$10487.prototype[":::project"]=function($10674$10677){var it$0$10681;var self$10682;(it$0$10681=this);(self$10682=this);var ph$10693;(ph$10693=$10674$10677);var $10690$10699;($10690$10699=ph$10693);var n$10707;if($7892(it$0$10681)($10690$10699)){(n$10707=$10690$10699);return [true,[n$10707.tags,n$10707.props,n$10707.children]];}else{$10690$10699;return [false,null];}});$7912($10482$10487,$7912(function(){var accum$10718;(accum$10718=({}));(accum$10718["::check"]=function(x$10723){return (((x$10723&&x$10723.tags)&&x$10723.props)&&x$10723.children);});return accum$10718;}(),$7912(function(){var accum$10726;(accum$10726=({}));(accum$10726[":::project"]=function($10730$10733){var ph$10738;(ph$10738=$10730$10733);var $10735$10744;($10735$10744=ph$10738);var tags$10752;var props$10753;var children$10754;if(($10817($10735$10744,"tags")&&((tags$10752=$10735$10744.tags),($10817($10735$10744,"props")&&((props$10753=$10735$10744.props),$10817($10735$10744,"children")))))){(children$10754=$10735$10744.children);return [true,[tags$10752,props$10753,children$10754]];}else{$10735$10744;return [false,null];}});return accum$10726;}(),$7912(function(){var accum$10763;(accum$10763=({}));(accum$10763["::name"]="$10482");return accum$10763;}(),function(){var accum$10767;(accum$10767=({}));(accum$10767["::egclass"]=true);return accum$10767;}()))));return $10482$10487;}();
var $10866=function(from$10869,to$10870){var rval$10875;(rval$10875=[]);var i$10881;(i$10881=from$10869);$10874:for(;(i$10881<=to$10870);(i$10881++)){rval$10875.push(i$10881);}return rval$10875;};
var $10888=function(obj$10891){var results$10896;(results$10896=[]);var k$10901;(k$10901=null);$10895:for(k$10901 in obj$10891){if(Object.prototype.hasOwnProperty.call(obj$10891,k$10901)){results$10896.push([k$10901,$7911(obj$10891,k$10901)]);}}return results$10896;};var accum$8182;var accum$8186;var accum$8546;var accum$8550;var $7970$8000;var binsearch$8001;var $7971$8002;var __lt____gt__$8003;var repr$8004;var fs$8005;var Source$8006;var Location$8007;var highlight$8008;var highlight_lines$8009;var clamp$8010;var morsel$8011;var highlight_locations$8012;var highlight_locations_same_source$8013;var merge_locations$8014;var __lt____lt____colon__$8015;var __plus____plus____colon__$8016;var format_error$8017;var display_error$8018;($7970$8000=require("./util"));(binsearch$8001=$7970$8000.binsearch);($7971$8002=require("./pp"));(__lt____gt__$8003=$7971$8002["<>"]);(repr$8004=$7971$8002.repr);(fs$8005=require("fs"));(Source$8006=function(){var $index$8106;var $length$8100;var temp$8094;var curr$8075;var text$8061;var url$8062;var t0$8057;var $8048$8052;var it$0$8043;(it$0$8043=function(){if((!$7892(Source$8006)(this))){return Object.create(Source$8006.prototype);}else{return this;}}());($8048$8052=arguments);(t0$8057=$8048$8052.length);if(((t0$8057>=1)&&(t0$8057<=2))){(text$8061=$8048$8052[0]);(url$8062=function(){if((1>=t0$8057)){return false;}else{return $8048$8052[1];}}());(it$0$8043["text"]=text$8061);(it$0$8043["url"]=url$8062);(it$0$8043["counts"]=[]);(curr$8075=0);(temp$8094=text$8061.split("\n"));($length$8100=temp$8094.length);($index$8106=0);$8076:for(;($index$8106<$length$8100);($index$8106++)){var line$8123;var m$8115;(m$8115=temp$8094[$index$8106]);(line$8123=m$8115);it$0$8043.counts.push(curr$8075);(curr$8075=(curr$8075+(line$8123.length+1)));}it$0$8043.counts.push(curr$8075);(it$0$8043["nlines"]=(it$0$8043.counts.length-1));}else{$10203($8048$8052);}return it$0$8043;});(Source$8006.prototype["linecol"]=function(pos$8136){var line$8152;var col$8153;var it$0$8140;var self$8141;(it$0$8140=this);(self$8141=this);(line$8152=binsearch$8001(it$0$8140.counts,pos$8136));(col$8153=(pos$8136-$7911(it$0$8140.counts,(line$8152-1))));return [line$8152,col$8153];});(Source$8006.prototype["highlight_lines"]=function(l1$8164,l2$8165,spans$8166){var it$0$8170;var self$8171;(it$0$8170=this);(self$8171=this);return highlight_lines$8009(it$0$8170.text,it$0$8170.counts,[(l1$8164-1),(l2$8165-1)],spans$8166);});$7912(Source$8006,$7912(((accum$8182=({})),((accum$8182["::name"]="Source"),accum$8182)),((accum$8186=({})),((accum$8186["::egclass"]=true),accum$8186))));Source$8006;(Location$8007=function(source$8193,start$8194,end$8195){var it$0$8198;(it$0$8198=function(){if((!$7892(Location$8007)(this))){return Object.create(Location$8007.prototype);}else{return this;}}());(it$0$8198["source"]=(source$8193||Source$8006("",null)));(it$0$8198["start"]=start$8194);(it$0$8198["end"]=end$8195);return it$0$8198;});(Location$8007.prototype["text"]=function(){var it$0$8225;var self$8226;(it$0$8225=this);(self$8226=this);return it$0$8225.source.text.slice(it$0$8225.start,it$0$8225.end);});(Location$8007.prototype["at_start"]=function(){var it$0$8241;var self$8242;(it$0$8241=this);(self$8242=this);return Location$8007(it$0$8241.source,it$0$8241.start,it$0$8241.start);});(Location$8007.prototype["at_end"]=function(){var it$0$8257;var self$8258;(it$0$8257=this);(self$8258=this);return Location$8007(it$0$8257.source,it$0$8257.end,it$0$8257.end);});(Location$8007.prototype["linerange"]=function(){var l2$8329;var t0$8320;var t1$8321;var l1$8300;var $8284$8301;var t0$8294;var t1$8295;var t2$8296;var $8282$8289;var it$0$8273;var self$8274;(it$0$8273=this);(self$8274=this);($8282$8289=it$0$8273.linecol());if((($8282$8289 instanceof Array)&&(((t0$8294=$8282$8289.length)),((t0$8294===2)&&(((t1$8295=$8282$8289[0])),((t1$8295 instanceof Array)&&(((t2$8296=t1$8295.length)),(t2$8296===2)))))))){(l1$8300=t1$8295[0]);t1$8295[1];($8284$8301=$8282$8289[1]);if(($8284$8301===null)){return [l1$8300,l1$8300];}else{(t0$8320=$8284$8301);if(((t0$8320 instanceof Array)&&(((t1$8321=t0$8320.length)),(t1$8321===2)))){(l2$8329=t0$8320[0]);t0$8320[1];return [l1$8300,l2$8329];}else{$10203($8284$8301,"/home/olivier/git/earl-grey/src/location.eg",1080,1085);}}}else{$10203($8282$8289);}});(Location$8007.prototype["linecol"]=function(){var start$8364;var end$8365;var it$0$8352;var self$8353;(it$0$8352=this);(self$8353=this);(start$8364=it$0$8352.source.linecol(it$0$8352.start));(end$8365=function(){if((it$0$8352.start===it$0$8352.end)){return null;}else{return it$0$8352.source.linecol((it$0$8352.end-1));}}());return [start$8364,end$8365];});(Location$8007.prototype["ref"]=function(){var otherwise$8499;var $8479$8488;var $8475$8482;var l2$8451;var c2$8452;var t0$8440;var t1$8441;var t2$8442;var t3$8443;var l1$8408;var c1$8409;var $8390$8410;var t0$8400;var t1$8401;var t2$8402;var t3$8403;var t4$8404;var $8388$8395;var it$0$8379;var self$8380;(it$0$8379=this);(self$8380=this);($8388$8395=it$0$8379.linecol());if((($8388$8395 instanceof Array)&&(((t0$8400=$8388$8395.length)),((t0$8400===2)&&(((t1$8401=$8388$8395[0])),((t1$8401 instanceof Array)&&(((t2$8402=t1$8401.length)),((t2$8402===2)&&(((t3$8403=[true,String(t1$8401[0])])),(t3$8403[0]&&((l1$8408=t3$8403[1]),(((t4$8404=[true,String(t1$8401[1])])),t4$8404[0])))))))))))){(c1$8409=t4$8404[1]);($8390$8410=$8388$8395[1]);if(($8390$8410===null)){return ((l1$8408+":")+c1$8409);}else{(t0$8440=$8390$8410);if(((t0$8440 instanceof Array)&&(((t1$8441=t0$8440.length)),((t1$8441===2)&&(((t2$8442=[true,String(t0$8440[0])])),(t2$8442[0]&&((l2$8451=t2$8442[1]),(((t3$8443=[true,String(t0$8440[1])])),t3$8443[0])))))))){(c2$8452=t3$8443[1]);($8475$8482=null);$8475$8482;if(((l1$8408===l2$8451)&&(c1$8409===c2$8452))){return ((l1$8408+":")+c1$8409);}else{if((l1$8408===l2$8451)){return ((((l1$8408+":")+c1$8409)+"-")+c2$8452);}else{(otherwise$8499=$8475$8482);return ((((((l1$8408+":")+c1$8409)+"-")+l1$8408)+":")+c2$8452);}}}else{$10203($8390$8410,"/home/olivier/git/earl-grey/src/location.eg",1422,1427);}}}else{$10203($8388$8395);}});(Location$8007.prototype["highlight"]=function(){var cls$8533;var context$8534;var t0$8529;var $8512$8524;var it$0$8514;var self$8515;(it$0$8514=this);(self$8515=this);($8512$8524=arguments);(t0$8529=$8512$8524.length);if(((t0$8529>=0)&&(t0$8529<=2))){(cls$8533=function(){if((0>=t0$8529)){return "hl1";}else{return $8512$8524[0];}}());(context$8534=function(){if((1>=t0$8529)){return 0;}else{return $8512$8524[1];}}());return highlight_locations$8012([[it$0$8514,cls$8533]],context$8534);}else{$10203($8512$8524);}});$7912(Location$8007,$7912(((accum$8546=({})),((accum$8546["::name"]="Location"),accum$8546)),((accum$8550=({})),((accum$8550["::egclass"]=true),accum$8550))));Location$8007;(highlight$8008=function(){var $index$8602;var $length$8596;var temp$8590;var acc$8584;var text$8570;var spans$8571;var offset$8572;var t0$8566;var $8557$8561;($8557$8561=arguments);(t0$8566=$8557$8561.length);if(((t0$8566>=2)&&(t0$8566<=3))){(text$8570=$8557$8561[0]);(spans$8571=$8557$8561[1]);(offset$8572=function(){if((2>=t0$8566)){return 0;}else{return $8557$8561[2];}}());return $10481([],({}),(((acc$8584=[])),(((temp$8590=morsel$8011(spans$8571))),((($length$8596=temp$8590.length)),((($index$8602=0)),function(){$8579:for(;($index$8602<$length$8596);($index$8602++)){var xstart$8639;var xend$8640;var start$8621;var end$8622;var attributes$8623;var t0$8616;var t1$8617;var m$8611;(m$8611=temp$8590[$index$8602]);(t0$8616=m$8611);if(((t0$8616 instanceof Array)&&(((t1$8617=t0$8616.length)),(t1$8617===3)))){(start$8621=t0$8616[0]);(end$8622=t0$8616[1]);(attributes$8623=t0$8616[2]);acc$8584.push((((xstart$8639=Math.max((start$8621-offset$8572),0))),((xend$8640=Math.min((end$8622-offset$8572),text$8570.length))),$10481([("."+attributes$8623.slice(0,1))],({}),text$8570.slice(xstart$8639,xend$8640))));}else{$10203(m$8611,"/home/olivier/git/earl-grey/src/location.eg",1969,2262);}}}()))),acc$8584));}else{$10203($8557$8561);}});(highlight_lines$8009=function(text$8658,linelocs$8659,$8655$8660,spans$8661){var t0$8666;var t1$8667;var $index$8703;var $length$8697;var temp$8691;var acc$8685;var l1$8663;var l2$8664;(t0$8666=$8655$8660);if(((t0$8666 instanceof Array)&&(((t1$8667=t0$8666.length)),(t1$8667===2)))){(l1$8663=t0$8666[0]);(l2$8664=t0$8666[1]);}else{$10203($8655$8660);}return $10481(["span"],({}),(((acc$8685=[])),(((temp$8691=$10866(l1$8663,l2$8664))),((($length$8697=temp$8691.length)),((($index$8703=0)),function(){$8680:for(;($index$8703<$length$8697);($index$8703++)){var start$8726;var end$8727;var lineno$8720;var m$8712;(m$8712=temp$8691[$index$8703]);(lineno$8720=m$8712);acc$8685.push((((start$8726=$7911(linelocs$8659,lineno$8720))),((end$8727=$7911(linelocs$8659,(lineno$8720+1)))),$10481(["span"],({}),[$10481([".lineno"],({}),(lineno$8720+1)),$10481([".source"],({}),highlight$8008(text$8658,[[start$8726,end$8727,[]]].concat(clamp$8010(spans$8661,start$8726,end$8727))))])));}}()))),acc$8685));});(clamp$8010=function(spans$8739,bot$8740,top$8741){var $index$8766;var $length$8760;var temp$8754;var acc$8748;(acc$8748=[]);(temp$8754=spans$8739);($length$8760=temp$8754.length);($index$8766=0);$8743:for(;($index$8766<$length$8760);($index$8766++)){var start$8785;var end$8786;var attr$8787;var t0$8780;var t1$8781;var m$8775;(m$8775=temp$8754[$index$8766]);(t0$8780=m$8775);if(((t0$8780 instanceof Array)&&(((t1$8781=t0$8780.length)),((t1$8781===3)&&((start$8785=t0$8780[0]),((end$8786=t0$8780[1]),((attr$8787=t0$8780[2]),((end$8786>=bot$8740)&&(start$8785<=top$8741))))))))){acc$8748.push([Math.max(start$8785,bot$8740),Math.min(end$8786,top$8741),attr$8787]);}else{false;}}return acc$8748;});(morsel$8011=function(spans$8809){var jump$8816;var jumptill$8817;var process_elements$8818;var thespans$8819;(jump$8816=function(active$8824,bot$8825,top$8826){var $index$8862;var $length$8856;var temp$8850;var acc$8844;var $index$8915;var $length$8909;var temp$8903;var e$8831;var attributes$8832;(e$8831=$7911(Math.min,[top$8826].concat((((acc$8844=[])),(((temp$8850=active$8824)),((($length$8856=temp$8850.length)),((($index$8862=0)),function(){$8839:for(;($index$8862<$length$8856);($index$8862++)){var x$8881;var t0$8876;var t1$8877;var m$8871;(m$8871=temp$8850[$index$8862]);(t0$8876=m$8871);if(((t0$8876 instanceof Array)&&(((t1$8877=t0$8876.length)),(t1$8877===3)))){t0$8876[0];(x$8881=t0$8876[1]);t0$8876[2];acc$8844.push(x$8881);}else{$10203(m$8871,"/home/olivier/git/earl-grey/src/location.eg",3585,3628);}}}()))),acc$8844))));(attributes$8832=[]);(temp$8903=active$8824);($length$8909=temp$8903.length);($index$8915=0);$8833:for(;($index$8915<$length$8909);($index$8915++)){var X$8934;var t0$8929;var t1$8930;var m$8924;(m$8924=temp$8903[$index$8915]);(t0$8929=m$8924);if(((t0$8929 instanceof Array)&&(((t1$8930=t0$8929.length)),(t1$8930===3)))){t0$8929[0];t0$8929[1];(X$8934=t0$8929[2]);(attributes$8832=attributes$8832.concat(X$8934));}else{$10203(m$8924,"/home/olivier/git/earl-grey/src/location.eg",3654,3695);}}return [e$8831,[bot$8825,e$8831,attributes$8832]];});(jumptill$8817=function(active$8953,bot$8954,top$8955){var t0$8967;var t1$8968;var $index$9006;var $length$9000;var temp$8994;var acc$8988;var t0$9046;var t1$9047;var newbot$8961;var span$8962;var newactive$8963;var spans$8964;var remainder$8965;if((bot$8954===top$8955)){return [[],active$8953];}else{(t0$8967=jump$8816(active$8953,bot$8954,top$8955));if(((t0$8967 instanceof Array)&&(((t1$8968=t0$8967.length)),(t1$8968===2)))){(newbot$8961=t0$8967[0]);(span$8962=t0$8967[1]);}else{$10203(jump$8816(active$8953,bot$8954,top$8955),"/home/olivier/git/earl-grey/src/location.eg",3931,3965);}(newactive$8963=(((acc$8988=[])),(((temp$8994=active$8953)),((($length$9000=temp$8994.length)),((($index$9006=0)),function(){$8983:for(;($index$9006<$length$9000);($index$9006++)){var x$9025;var e$9026;var attr$9027;var t0$9020;var t1$9021;var m$9015;(m$9015=temp$8994[$index$9006]);(t0$9020=m$9015);(x$9025=t0$9020);if(((t0$9020 instanceof Array)&&(((t1$9021=t0$9020.length)),((t1$9021===3)&&(t0$9020[0],((e$9026=t0$9020[1]),((attr$9027=t0$9020[2]),(e$9026>newbot$8961)))))))){acc$8988.push(x$9025);}else{false;}}}()))),acc$8988));(t0$9046=jumptill$8817(newactive$8963,newbot$8961,top$8955));if(((t0$9046 instanceof Array)&&(((t1$9047=t0$9046.length)),(t1$9047===2)))){(spans$8964=t0$9046[0]);(remainder$8965=t0$9046[1]);}else{$10203(jumptill$8817(newactive$8963,newbot$8961,top$8955),"/home/olivier/git/earl-grey/src/location.eg",4080,4124);}return [[span$8962].concat(spans$8964),remainder$8965];}});(process_elements$8818=function(start$9065,active$9066,rem$9067){var $index$9172;var $length$9166;var temp$9160;var acc$9154;var t0$9211;var t1$9212;var top$9144;var bot$9145;var spans$9146;var t0$9264;var t1$9265;var spans$9261;var newactive$9262;var start$9227;var active$9228;var next$9229;var target$9230;var end$9231;var attr$9232;var rest$9233;var start$9124;var active$9125;var $9073$9089;var $9074$9090;var $9075$9091;var t0$9083;var t1$9084;var t2$9085;var t3$9086;var t4$9087;var $9069$9078;($9069$9078=[start$9065,active$9066,rem$9067]);if((($9073$9089=($9069$9078 instanceof Array))&&(((t0$9083=$9069$9078.length)),(($9075$9091=(t0$9083===3))&&($9069$9078[0],(((t1$9084=$9069$9078[1])),((t1$9084 instanceof Array)&&(((t2$9085=t1$9084.length)),((t2$9085===0)&&(((t3$9086=$9069$9078[2])),((t3$9086 instanceof Array)&&(((t4$9087=t3$9086.length)),(t4$9087===0))))))))))))){return [];}else{if(($9075$9091&&((start$9124=$9069$9078[0]),((active$9125=$9069$9078[1]),(((t1$9084=$9069$9078[2])),((t1$9084 instanceof Array)&&(((t2$9085=t1$9084.length)),(t2$9085===0)))))))){(top$9144=$7911(Math.max,(((acc$9154=[])),(((temp$9160=active$9125)),((($length$9166=temp$9160.length)),((($index$9172=0)),function(){$9149:for(;($index$9172<$length$9166);($index$9172++)){var e$9191;var t0$9186;var t1$9187;var m$9181;(m$9181=temp$9160[$index$9172]);(t0$9186=m$9181);if(((t0$9186 instanceof Array)&&(((t1$9187=t0$9186.length)),(t1$9187===3)))){t0$9186[0];(e$9191=t0$9186[1]);t0$9186[2];acc$9154.push(e$9191);}else{$10203(m$9181,"/home/olivier/git/earl-grey/src/location.eg",4309,4347);}}}()))),acc$9154)));(bot$9145=Math.min(start$9124,top$9144));(t0$9211=jumptill$8817(active$9125,start$9124,top$9144));if(((t0$9211 instanceof Array)&&(((t1$9212=t0$9211.length)),(t1$9212===2)))){(spans$9146=t0$9211[0]);t0$9211[1];}else{$10203(jumptill$8817(active$9125,start$9124,top$9144),"/home/olivier/git/earl-grey/src/location.eg",4400,4438);}return spans$9146;}else{if(($9075$9091&&((start$9227=$9069$9078[0]),((active$9228=$9069$9078[1]),(((t1$9084=$9069$9078[2])),((t1$9084 instanceof Array)&&(((t2$9085=t1$9084.length)),((t2$9085>=1)&&(((t3$9086=t1$9084[0])),((next$9229=t3$9086),((t3$9086 instanceof Array)&&(((t4$9087=t3$9086.length)),(t4$9087===3))))))))))))){(target$9230=t3$9086[0]);(end$9231=t3$9086[1]);(attr$9232=t3$9086[2]);(rest$9233=Array.prototype.slice.call(t1$9084,1));(t0$9264=jumptill$8817(active$9228,start$9227,target$9230));if(((t0$9264 instanceof Array)&&(((t1$9265=t0$9264.length)),(t1$9265===2)))){(spans$9261=t0$9264[0]);(newactive$9262=t0$9264[1]);}else{$10203(jumptill$8817(active$9228,start$9227,target$9230),"/home/olivier/git/earl-grey/src/location.eg",4542,4583);}return spans$9261.concat(process_elements$8818(target$9230,[next$9229].concat(newactive$9262),rest$9233));}else{$10203($9069$9078);}}}});(thespans$8819=spans$8809.sort(function($9284$9289,$9286$9290){var t0$9297;var t1$9298;var t0$9312;var t1$9313;var s1$9292;var e1$9293;var s2$9294;var e2$9295;(t0$9297=$9284$9289);if(((t0$9297 instanceof Array)&&(((t1$9298=t0$9297.length)),(t1$9298===3)))){(s1$9292=t0$9297[0]);(e1$9293=t0$9297[1]);t0$9297[2];}else{$10203($9284$9289);}(t0$9312=$9286$9290);if(((t0$9312 instanceof Array)&&(((t1$9313=t0$9312.length)),(t1$9313===3)))){(s2$9294=t0$9312[0]);(e2$9295=t0$9312[1]);t0$9312[2];}else{$10203($9286$9290);}if((s1$9292===s2$9294)){return (e1$9293-e2$9295);}else{return (s1$9292-s2$9294);}}));return process_elements$8818(thespans$8819[0][0],[],thespans$8819);});(highlight_locations$8012=function(){var $index$9377;var $length$9371;var temp$9365;var $index$9445;var $length$9439;var temp$9433;var acc$9427;var srcs$9355;var locations$9345;var context$9346;var t0$9341;var $9332$9336;($9332$9336=arguments);(t0$9341=$9332$9336.length);if(((t0$9341>=1)&&(t0$9341<=2))){(locations$9345=$9332$9336[0]);(context$9346=function(){if((1>=t0$9341)){return 0;}else{return $9332$9336[1];}}());(srcs$9355=({}));(temp$9365=locations$9345);($length$9371=temp$9365.length);($index$9377=0);$9356:for(;($index$9377<$length$9371);($index$9377++)){var key$9411;var loc$9396;var cls$9397;var t0$9391;var t1$9392;var m$9386;(m$9386=temp$9365[$index$9377]);(t0$9391=m$9386);if(((t0$9391 instanceof Array)&&(((t1$9392=t0$9391.length)),(t1$9392===2)))){(loc$9396=t0$9391[0]);(cls$9397=t0$9391[1]);(key$9411=String((loc$9396.source&&loc$9396.source.url)));if((!$7911(srcs$9355,key$9411))){(srcs$9355[key$9411]=[]);}$7911(srcs$9355,key$9411).push([loc$9396,cls$9397]);}else{$10203(m$9386,"/home/olivier/git/earl-grey/src/location.eg",4929,5098);}}return $10481(["div"],({}),(((acc$9427=[])),(((temp$9433=$10888(srcs$9355))),((($length$9439=temp$9433.length)),((($index$9445=0)),function(){$9422:for(;($index$9445<$length$9439);($index$9445++)){var locs$9464;var t0$9459;var t1$9460;var m$9454;(m$9454=temp$9433[$index$9445]);(t0$9459=m$9454);if(((t0$9459 instanceof Array)&&(((t1$9460=t0$9459.length)),(t1$9460===2)))){t0$9459[0];(locs$9464=t0$9459[1]);acc$9427.push(highlight_locations_same_source$8013(locs$9464,context$9346));}else{$10203(m$9454,"/home/olivier/git/earl-grey/src/location.eg",5103,5197);}}}()))),acc$9427));}else{$10203($9332$9336);}});(highlight_locations_same_source$8013=function(){var $index$9544;var $length$9538;var temp$9532;var acc$9526;var t0$9584;var t1$9585;var $index$9627;var $length$9621;var temp$9615;var acc$9609;var $index$9685;var $length$9679;var temp$9673;var acc$9667;var loc$9513;var src$9514;var l1$9515;var l2$9516;var first$9517;var last$9518;var locations$9499;var context$9500;var t0$9495;var $9486$9490;($9486$9490=arguments);(t0$9495=$9486$9490.length);if(((t0$9495>=1)&&(t0$9495<=2))){(locations$9499=$9486$9490[0]);(context$9500=function(){if((1>=t0$9495)){return 0;}else{return $9486$9490[1];}}());(loc$9513=merge_locations$8014((((acc$9526=[])),(((temp$9532=locations$9499)),((($length$9538=temp$9532.length)),((($index$9544=0)),function(){$9521:for(;($index$9544<$length$9538);($index$9544++)){var x$9563;var cls$9564;var t0$9558;var t1$9559;var m$9553;(m$9553=temp$9532[$index$9544]);(t0$9558=m$9553);if(((t0$9558 instanceof Array)&&(((t1$9559=t0$9558.length)),(t1$9559===2)))){(x$9563=t0$9558[0]);(cls$9564=t0$9558[1]);acc$9526.push(x$9563);}else{$10203(m$9553,"/home/olivier/git/earl-grey/src/location.eg",5280,5308);}}}()))),acc$9526)));(src$9514=loc$9513.source);(t0$9584=loc$9513.linerange());if(((t0$9584 instanceof Array)&&(((t1$9585=t0$9584.length)),(t1$9585===2)))){(l1$9515=t0$9584[0]);(l2$9516=t0$9584[1]);}else{$10203(loc$9513.linerange(),"/home/olivier/git/earl-grey/src/location.eg",5344,5363);}(first$9517=Math.max(1,(l1$9515-context$9500)));(last$9518=Math.min(src$9514.nlines,(l2$9516+context$9500)));return $10481(["div",".location"],({}),[$10481(["div",".source"],({}),[$10481([".sourcefile"],({}),(src$9514.url||"???")),(((acc$9609=[])),(((temp$9615=locations$9499)),((($length$9621=temp$9615.length)),((($index$9627=0)),function(){$9604:for(;($index$9627<$length$9621);($index$9627++)){var loc$9646;var cls$9647;var t0$9641;var t1$9642;var m$9636;(m$9636=temp$9615[$index$9627]);(t0$9641=m$9636);if(((t0$9641 instanceof Array)&&(((t1$9642=t0$9641.length)),(t1$9642===2)))){(loc$9646=t0$9641[0]);(cls$9647=t0$9641[1]);acc$9609.push($10481([("."+cls$9647),".sourcepos"],({}),loc$9646.ref()));}else{$10203(m$9636,"/home/olivier/git/earl-grey/src/location.eg",5528,5674);}}}()))),acc$9609)]),src$9514.highlight_lines(first$9517,last$9518,(((acc$9667=[])),(((temp$9673=locations$9499)),((($length$9679=temp$9673.length)),((($index$9685=0)),function(){$9662:for(;($index$9685<$length$9679);($index$9685++)){var loc$9704;var cls$9705;var t0$9699;var t1$9700;var m$9694;(m$9694=temp$9673[$index$9685]);(t0$9699=m$9694);if(((t0$9699 instanceof Array)&&(((t1$9700=t0$9699.length)),(t1$9700===2)))){(loc$9704=t0$9699[0]);(cls$9705=t0$9699[1]);acc$9667.push([loc$9704.start,loc$9704.end,[cls$9705]]);}else{$10203(m$9694,"/home/olivier/git/earl-grey/src/location.eg",5729,5787);}}}()))),acc$9667))]);}else{$10203($9486$9490);}});(merge_locations$8014=function($9726$9729){var $index$9801;var $length$9795;var temp$9789;var acc$9783;var $index$9847;var $length$9841;var temp$9835;var acc$9829;var start$9774;var end$9775;var locs$9768;var loc$9763;var $9735$9750;var $9736$9751;var t0$9748;var $9731$9743;var ph$9737;(ph$9737=$9726$9729);($9731$9743=ph$9737);if((($9735$9750=($9731$9743 instanceof Array))&&(((t0$9748=$9731$9743.length)),(t0$9748===0)))){return Location$8007(null,0,0);}else{if(($9735$9750&&(t0$9748===1))){(loc$9763=$9731$9743[0]);return loc$9763;}else{if(($9735$9750&&(t0$9748>=0))){(locs$9768=Array.prototype.slice.call($9731$9743,0));(start$9774=$7911(Math.min,(((acc$9783=[])),(((temp$9789=locs$9768)),((($length$9795=temp$9789.length)),((($index$9801=0)),function(){$9778:for(;($index$9801<$length$9795);($index$9801++)){var loc$9818;var m$9810;(m$9810=temp$9789[$index$9801]);(loc$9818=m$9810);acc$9783.push(loc$9818.start);}}()))),acc$9783)));(end$9775=$7911(Math.max,(((acc$9829=[])),(((temp$9835=locs$9768)),((($length$9841=temp$9835.length)),((($index$9847=0)),function(){$9824:for(;($index$9847<$length$9841);($index$9847++)){var loc$9864;var m$9856;(m$9856=temp$9835[$index$9847]);(loc$9864=m$9856);acc$9829.push(loc$9864.end);}}()))),acc$9829)));return Location$8007(locs$9768[0].source,start$9774,end$9775);}else{$10203($9731$9743);}}}});(__lt____lt____colon__$8015=function(x$9875,y$9876){if((!$7892(Location$8007)(x$9875.location))){(x$9875["location"]=function(){if(((!y$9876)||$7892(Location$8007)(y$9876))){return y$9876;}else{return y$9876.location;}}());}return x$9875;});(__plus____plus____colon__$8016=function(x$9889,y$9890){var rval$9907;var x2$9895;var y2$9896;(x2$9895=function(){if(((!x$9889)||$7892(Location$8007)(x$9889))){return x$9889;}else{return x$9889.location;}}());(y2$9896=function(){if(((!y$9890)||$7892(Location$8007)(y$9890))){return y$9890;}else{return y$9890.location;}}());(rval$9907=false);try{(rval$9907=merge_locations$8014([x2$9895,y2$9896]));}catch(excv$9918){var e$9924;(e$9924=excv$9918);(rval$9907=(void 0));}return rval$9907;});(format_error$8017=function(){var $index$10040;var $length$10034;var temp$10028;var acc$10022;var hls$10010;var locs$10011;var rval$10122;var loc$10148;var data$10115;var other$10154;var url$10103;var start$10104;var end$10105;var loc$10093;var args$9990;var fmt_args$9980;var $9942$9975;var $9943$9976;var $9944$9977;var t0$9971;var t1$9972;var t2$9973;var e$9957;var context$9958;var $9937$9959;var t0$9952;var t1$9953;var $9935$9947;($9935$9947=arguments);(t0$9952=$9935$9947.length);if(((t0$9952>=1)&&(t0$9952<=2))){(t1$9953=$9935$9947[0]);(e$9957=t1$9953);($9937$9959=t1$9953);(context$9958=function(){if((1>=t0$9952)){return 0;}else{return $9935$9947[1];}}());(fmt_args$9980=function(e$9985){if((e$9985.args&&e$9985.args.length)){return $10481([".error_args"],({}),repr$8004(e$9985.args));}else{return "";}});(t0$9971=$9937$9959);if(($7892($10222(["syntax"]))(t0$9971)&&($10817(t0$9971,"args")&&(((t1$9972=t0$9971.args)),((t1$9972 instanceof Array)&&(((t2$9973=t1$9972.length)),(t2$9973===1))))))){(args$9990=t1$9972[0]);(hls$10010=["hl1","hl2","hl3","hl4"]);(locs$10011=(((acc$10022=[])),(((temp$10028=$10455($10888(args$9990)))),((($length$10034=temp$10028.length)),((($index$10040=0)),function(){$10017:for(;($index$10040<$length$10034);($index$10040++)){var i$10061;var key$10062;var arg$10063;var t0$10054;var t1$10055;var t2$10056;var t3$10057;var m$10049;(m$10049=temp$10028[$index$10040]);(t0$10054=m$10049);if(((t0$10054 instanceof Array)&&(((t1$10055=t0$10054.length)),((t1$10055===2)&&((i$10061=t0$10054[0]),(((t2$10056=t0$10054[1])),((t2$10056 instanceof Array)&&(((t3$10057=t2$10056.length)),((t3$10057===2)&&((key$10062=t2$10056[0]),((arg$10063=t2$10056[1]),(arg$10063&&arg$10063.location)))))))))))){acc$10022.push([arg$10063.location,$7911(hls$10010,(i$10061%4))]);}else{false;}}}()))),acc$10022));return $10481(["div"],({}),[$10481([".error"],({}),[$10481([".error_type"],({}),e$9957.name),$10481([".error_message"],({}),e$9957.message)]),$10481([".error_args",".syntax"],({}),repr$8004(args$9990)),highlight_locations$8012(locs$10011,context$9958)]);}else{if((($9943$9976=$10817(t0$9971,"location"))&&(((t1$9972=t0$9971.location)),$7892(Location$8007)(t1$9972)))){(loc$10093=t1$9972);return $10481(["div"],({}),[$10481([".error"],({}),[$10481([".error_type"],({}),e$9957.name),$10481([".error_message"],({}),e$9957.message)]),fmt_args$9980(e$9957),highlight_locations$8012([[loc$10093,"hl1"]],context$9958),$10481([".traceback"],({}),(e$9957.stack||""))]);}else{if(($9943$9976&&((t1$9972 instanceof Array)&&(((t2$9973=t1$9972.length)),((t2$9973===4)&&(t1$9972[0]==="location")))))){(url$10103=t1$9972[1]);(start$10104=t1$9972[2]);(end$10105=t1$9972[3]);(data$10115=(((rval$10122=false)),(function(){try{(rval$10122=fs$8005.readFileSync(url$10103,"utf8"));}catch(excv$10133){var e$10139;(e$10139=excv$10133);(rval$10122=null);}}(),rval$10122)));if(data$10115){(loc$10148=Location$8007(Source$8006(data$10115,url$10103),start$10104,end$10105));return $10481(["div"],({}),[$10481([".error"],({}),[$10481([".error_type"],({}),e$9957.name),$10481([".error_message"],({}),e$9957.message)]),fmt_args$9980(e$9957),highlight_locations$8012([[loc$10148,"hl1"]],context$9958),$10481([".traceback"],({}),($10481([],({}),e$9957.stack)||""))]);}else{return $10481(["div"],({}),[$10481([".error"],({}),[$10481([".error_type"],({}),e$9957.name),$10481([".error_message"],({}),e$9957.message)]),fmt_args$9980(e$9957),$10481([".traceback"],({}),($10481([],({}),e$9957.stack)||e$9957))]);}}else{(other$10154=$9937$9959);return $10481(["div"],({}),[$10481([".error"],({}),[$10481([".error_type"],({}),e$9957.name),$10481([".error_message"],({}),e$9957.message)]),fmt_args$9980(e$9957),$10481([".traceback"],({}),$10481([],({}),e$9957.stack))]);}}}}else{$10203($9935$9947);}});(display_error$8018=function(e$10163){return __lt____gt__$8003(null,format_error$8017(e$10163));});(exports["Source"]=Source$8006);(exports["Location"]=Location$8007);(exports["highlight"]=highlight$8008);(exports["highlight_locations"]=highlight_locations$8012);(exports["merge_locations"]=merge_locations$8014);(exports["<<:"]=__lt____lt____colon__$8015);(exports["++:"]=__plus____plus____colon__$8016);(exports["format_error"]=format_error$8017);(exports["display_error"]=display_error$8018);

},{"./pp":12,"./util":15,"fs":17}],9:[function(require,module,exports){
var $11141=function(type$11144){var f$11148;(f$11148=type$11144["::check"]);if((f$11148===(void 0))){return function(value$11154){return (value$11154 instanceof type$11144);};}else{return function(value$11158){return f$11148.call(type$11144,value$11158);};}};
var $11160=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $11161=function(dest$11164,values$11165){var k$11170;(k$11170=null);$11168:for(k$11170 in values$11165){if(values$11165.hasOwnProperty(k$11170)){(dest$11164[k$11170]=values$11165[k$11170]);}}return dest$11164;};
var $11178=function($11180$11183){var ph$11189;(ph$11189=$11180$11183);var $11185$11195;($11185$11195=ph$11189);var bridge$11187$11200;var x$11204;(bridge$11187$11200=$11185$11195);if((((typeof(bridge$11187$11200)==="string")&&((x$11204=bridge$11187$11200),true))||((typeof(bridge$11187$11200)==="number")&&((x$11204=bridge$11187$11200),true)))){return ["value",x$11204];}else{var other$11215;(other$11215=$11185$11195);return other$11215["::serialize_ast"]();}};
var send$10915;(send$10915=function(obj$10922,$10919$10923){var ph$10929;var msg$10930;var t0$10932;(t0$10932=$10919$10923);(msg$10930=t0$10932);(ph$10929=t0$10932);var $10925$10941;($10925$10941=ph$10929);var bridge$10927$10946;(bridge$10927$10946=$10925$10941);if(((typeof(bridge$10927$10946)==="string")||(typeof(bridge$10927$10946)==="number"))){return obj$10922[msg$10930];}else{var other$10958;(other$10958=$10925$10941);return obj$10922["::send"](msg$10930);}});(Array[":::project"]=function($10964$10967){var ph$10972;var value$10973;var t0$10975;(t0$10975=$10964$10967);(value$10973=t0$10975);(ph$10972=t0$10975);var $10969$10984;($10969$10984=ph$10972);if($11141(Array)($10969$10984)){return [true,value$10973];}else{$10969$10984;return [true,[value$10973]];}});(Array.prototype["::check"]=function(value$11002){if((value$11002 instanceof Array)){var i$11008;(i$11008=0);$11005:for(;(i$11008<this.length);(i$11008++)){if(($11160(this,i$11008)!==$11160(value$11002,i$11008))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $11161(this.slice(0),this);});(Array.prototype[":::project"]=function(value$11027){if((value$11027 instanceof Array)){var i$11033;(i$11033=0);$11030:for(;(i$11033<this.length);(i$11033++)){if(($11160(this,i$11033)!==$11160(value$11027,i$11033))){return [true,[value$11027]];}}return [true,value$11027.slice(this.length)];}else{return [true,[value$11027]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($11178));});(RegExp.prototype["::check"]=function($11051$11054){var ph$11059;(ph$11059=$11051$11054);var $11056$11065;($11056$11065=ph$11059);var value$11073;if((typeof($11056$11065)==="string")){(value$11073=$11056$11065);if(value$11073.match(this)){return true;}else{return false;}}else{var other$11078;(other$11078=$11056$11065);return false;}});(RegExp.prototype[":::project"]=function($11084$11087){var ph$11092;(ph$11092=$11084$11087);var $11089$11098;($11089$11098=ph$11092);var value$11106;if((typeof($11089$11098)==="string")){(value$11106=$11089$11098);var $11109$11114;($11109$11114=value$11106.match(this));var m$11122;if(($11109$11114===null)){(m$11122=$11109$11114);return [false,null];}else{var m$11127;(m$11127=$11109$11114);return [true,m$11127];}}else{var other$11131;(other$11131=$11089$11098);return [false,null];}});(Function.prototype["::send"]=function(args$11138){return this.apply(this,args$11138);});
var $11834=function(arr$11837){var results$11843;var l$11844;(results$11843=[]);(l$11844=arr$11837.length);var i$11853;(i$11853=0);$11842:for(;(i$11853<l$11844);(i$11853++)){results$11843.push([i$11853,$11160(arr$11837,i$11853)]);}return results$11843;};
var $11601=function(){var $11602$11608;($11602$11608=function(tags$11613){var it$0$11616;(it$0$11616=function(){if((!$11141($11602$11608)(this))){return Object.create($11602$11608.prototype);}else{return this;}}());(it$0$11616["tags"]=tags$11613);return it$0$11616;});($11602$11608.prototype["create"]=function(){var it$0$11636;var self$11637;(it$0$11636=this);(self$11637=this);var $11634$11646;($11634$11646=arguments);var t0$11651;var message$11655;var args$11656;(t0$11651=$11634$11646.length);if((t0$11651>=0)){(message$11655=function(){if((0>=t0$11651)){return "";}else{return $11634$11646[0];}}());(args$11656=Array.prototype.slice.call($11634$11646,1));var e$11669;(e$11669=Error(message$11655));(e$11669["::tags"]=it$0$11636.tags);(e$11669["args"]=args$11656);var temp$11685;(temp$11685=$11834(args$11656));var $length$11691;($length$11691=temp$11685.length);var $index$11697;($index$11697=0);$11670:for(;($index$11697<$length$11691);($index$11697++)){var m$11706;(m$11706=temp$11685[$index$11697]);var t0$11711;var t1$11712;var i$11716;var arg$11717;(t0$11711=m$11706);if(((t0$11711 instanceof Array)&&(((t1$11712=t0$11711.length)),(t1$11712===2)))){(i$11716=t0$11711[0]);(arg$11717=t0$11711[1]);(e$11669[i$11716]=arg$11717);}else{$11582(m$11706);}}(e$11669["length"]=args$11656.length);(e$11669["name"]=["E"].concat(it$0$11636.tags).join("."));return e$11669;}else{$11582($11634$11646);}});($11602$11608.prototype["::check"]=function(e$11747){var it$0$11751;var self$11752;(it$0$11751=this);(self$11752=this);var tags$11762;if(((!e$11747)||(!$11141(Error)(e$11747)))){return false;}(tags$11762=(e$11747["::tags"]||[]));var temp$11773;(temp$11773=it$0$11751.tags);var $length$11779;($length$11779=temp$11773.length);var $index$11785;($index$11785=0);$11763:for(;($index$11785<$length$11779);($index$11785++)){var m$11794;(m$11794=temp$11773[$index$11785]);var tag$11802;(tag$11802=m$11794);if((tags$11762.indexOf(tag$11802)===-1)){return false;}else{false;}}return true;});($11602$11608.prototype["::deconstruct"]=function(e$11811){var it$0$11815;var self$11816;(it$0$11815=this);(self$11816=this);return e$11811.args;});$11161($11602$11608,$11161(function(){var accum$11827;(accum$11827=({}));(accum$11827["::name"]="$11602");return accum$11827;}(),function(){var accum$11831;(accum$11831=({}));(accum$11831["::egclass"]=true);return accum$11831;}()));return $11602$11608;}();
var $11582=function(value$11585,url$11586,start$11587,end$11588){var err$11592;(err$11592=$11601(["match"]).create("Could not find a match for value",({"value":value$11585})));if(url$11586){(err$11592["location"]=["location",url$11586,start$11587,end$11588]);}throw err$11592;};var hoist$11223;var hoistable$11224;var not_hoistable$11225;var hoist_helper$11226;(hoist$11223=function(expr$11231){var t0$11238;var t1$11239;var b$11235;var inner$11236;(t0$11238=hoist_helper$11226(expr$11231));if(((t0$11238 instanceof Array)&&(((t1$11239=t0$11238.length)),(t1$11239===2)))){(b$11235=t0$11238[0]);(inner$11236=t0$11238[1]);}else{$11582(hoist_helper$11226(expr$11231),"/home/olivier/git/earl-grey/src/opt.eg",50,72);}return ["scope",inner$11236,b$11235];});(hoistable$11224=["send","array","object","multi","if","assign","js_break","js_continue","js_return","js_delete","js_throw","js_try","js_new"]);(not_hoistable$11225=["void","js_while","js_for","js_for_in","js_label"]);(hoist_helper$11226=function($11262$11265){var t0$11282;var x$11318;var x$11324;var bridge$11270$11310;var x$11330;var t0$11351;var t1$11352;var newbody$11348;var inner$11349;var t0$11376;var t1$11377;var newbody$11373;var inner$11374;var $index$11431;var $length$11425;var temp$11419;var acc$11413;var accum$11401;var newargs$11402;var $index$11507;var $length$11501;var temp$11495;var acc$11489;var newargs$11481;var other$11574;var type$11473;var args$11474;var type$11392;var args$11393;var vars$11367;var body$11368;var vars$11337;var body$11338;var $11276$11299;var $11277$11300;var $11278$11301;var bridge$11269$11296;var t0$11297;var $11267$11291;var ph$11279;var expr$11280;(t0$11282=$11262$11265);(expr$11280=t0$11282);(ph$11279=t0$11282);($11267$11291=ph$11279);(bridge$11269$11296=$11267$11291);if(((((bridge$11270$11310=bridge$11269$11296)),((((x$11318=bridge$11270$11310)),((x$11318 instanceof Array)&&(x$11318[0]==="symbol")))||(((x$11324=bridge$11270$11310)),((x$11324 instanceof Array)&&(x$11324[0]==="value")))))||(((x$11330=bridge$11269$11296)),((x$11330 instanceof Array)&&(x$11330[0]==="variable"))))){return [expr$11280,[]];}else{if((($11276$11299=($11267$11291 instanceof Array))&&(((t0$11297=$11267$11291.length)),(($11278$11301=(t0$11297===3))&&($11267$11291[0]==="scope"))))){(vars$11337=$11267$11291[1]);(body$11338=$11267$11291[2]);(t0$11351=hoist_helper$11226(body$11338));if(((t0$11351 instanceof Array)&&(((t1$11352=t0$11351.length)),(t1$11352===2)))){(newbody$11348=t0$11351[0]);(inner$11349=t0$11351[1]);}else{$11582(hoist_helper$11226(body$11338),"/home/olivier/git/earl-grey/src/opt.eg",1463,1488);}return [newbody$11348,inner$11349.concat(vars$11337)];}else{if(($11278$11301&&($11267$11291[0]==="lambda"))){(vars$11367=$11267$11291[1]);(body$11368=$11267$11291[2]);(t0$11376=hoist_helper$11226(body$11368));if(((t0$11376 instanceof Array)&&(((t1$11377=t0$11376.length)),(t1$11377===2)))){(newbody$11373=t0$11376[0]);(inner$11374=t0$11376[1]);}else{$11582(hoist_helper$11226(body$11368),"/home/olivier/git/earl-grey/src/opt.eg",1666,1691);}return [["lambda",vars$11367,["scope",inner$11374,newbody$11373]],[]];}else{if(($11276$11299&&(($11278$11301=(t0$11297>=1))&&((type$11392=$11267$11291[0]),((args$11393=Array.prototype.slice.call($11267$11291,1)),(hoistable$11224.indexOf(type$11392)!==-1)))))){(accum$11401=[]);(newargs$11402=(((acc$11413=[])),(((temp$11419=args$11393)),((($length$11425=temp$11419.length)),((($index$11431=0)),function(){$11408:for(;($index$11431<$length$11425);($index$11431++)){var t0$11456;var t1$11457;var b$11453;var inner$11454;var arg$11448;var m$11440;(m$11440=temp$11419[$index$11431]);(arg$11448=m$11440);acc$11413.push(((((t0$11456=hoist_helper$11226(arg$11448))),function(){if(((t0$11456 instanceof Array)&&(((t1$11457=t0$11456.length)),(t1$11457===2)))){(b$11453=t0$11456[0]);(inner$11454=t0$11456[1]);}else{return $11582(hoist_helper$11226(arg$11448),"/home/olivier/git/earl-grey/src/opt.eg",2027,2054);}}()),(accum$11401=accum$11401.concat(inner$11454)),b$11453));}}()))),acc$11413));return [[type$11392].concat(newargs$11402),accum$11401];}else{if(($11278$11301&&((type$11473=$11267$11291[0]),((args$11474=Array.prototype.slice.call($11267$11291,1)),(not_hoistable$11225.indexOf(type$11473)!==-1))))){(newargs$11481=(((acc$11489=[])),(((temp$11495=args$11474)),((($length$11501=temp$11495.length)),((($index$11507=0)),function(){$11484:for(;($index$11507<$length$11501);($index$11507++)){var t0$11535;var t1$11536;var other$11569;var t0$11556;var $11529$11551;var b$11532;var inner$11533;var arg$11524;var m$11516;(m$11516=temp$11495[$index$11507]);(arg$11524=m$11516);acc$11489.push(((((t0$11535=hoist_helper$11226(arg$11524))),function(){if(((t0$11535 instanceof Array)&&(((t1$11536=t0$11535.length)),(t1$11536===2)))){(b$11532=t0$11535[0]);(inner$11533=t0$11535[1]);}else{return $11582(hoist_helper$11226(arg$11524),"/home/olivier/git/earl-grey/src/opt.eg",2370,2397);}}()),((($11529$11551=inner$11533)),function(){if((($11529$11551 instanceof Array)&&(((t0$11556=$11529$11551.length)),(t0$11556===0)))){return b$11532;}else{(other$11569=$11529$11551);return ["scope",inner$11533,b$11532];}}())));}}()))),acc$11489));return [[type$11473].concat(newargs$11481),[]];}else{(other$11574=$11267$11291);throw $11601(["syntax","illegal"]).create("Illegal node -- this should not happen.",({"node":other$11574}));}}}}}});(exports["hoist"]=hoist$11223);

},{}],10:[function(require,module,exports){
var $12096=function(type$12099){var f$12103;(f$12103=type$12099["::check"]);if((f$12103===(void 0))){return function(value$12109){return (value$12109 instanceof type$12099);};}else{return function(value$12113){return f$12103.call(type$12099,value$12113);};}};
var $12115=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $12116=function(dest$12119,values$12120){var k$12125;(k$12125=null);$12123:for(k$12125 in values$12120){if(values$12120.hasOwnProperty(k$12125)){(dest$12119[k$12125]=values$12120[k$12125]);}}return dest$12119;};
var $12133=function($12135$12138){var ph$12144;(ph$12144=$12135$12138);var $12140$12150;($12140$12150=ph$12144);var bridge$12142$12155;var x$12159;(bridge$12142$12155=$12140$12150);if((((typeof(bridge$12142$12155)==="string")&&((x$12159=bridge$12142$12155),true))||((typeof(bridge$12142$12155)==="number")&&((x$12159=bridge$12142$12155),true)))){return ["value",x$12159];}else{var other$12170;(other$12170=$12140$12150);return other$12170["::serialize_ast"]();}};
var send$11870;(send$11870=function(obj$11877,$11874$11878){var ph$11884;var msg$11885;var t0$11887;(t0$11887=$11874$11878);(msg$11885=t0$11887);(ph$11884=t0$11887);var $11880$11896;($11880$11896=ph$11884);var bridge$11882$11901;(bridge$11882$11901=$11880$11896);if(((typeof(bridge$11882$11901)==="string")||(typeof(bridge$11882$11901)==="number"))){return obj$11877[msg$11885];}else{var other$11913;(other$11913=$11880$11896);return obj$11877["::send"](msg$11885);}});(Array[":::project"]=function($11919$11922){var ph$11927;var value$11928;var t0$11930;(t0$11930=$11919$11922);(value$11928=t0$11930);(ph$11927=t0$11930);var $11924$11939;($11924$11939=ph$11927);if($12096(Array)($11924$11939)){return [true,value$11928];}else{$11924$11939;return [true,[value$11928]];}});(Array.prototype["::check"]=function(value$11957){if((value$11957 instanceof Array)){var i$11963;(i$11963=0);$11960:for(;(i$11963<this.length);(i$11963++)){if(($12115(this,i$11963)!==$12115(value$11957,i$11963))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $12116(this.slice(0),this);});(Array.prototype[":::project"]=function(value$11982){if((value$11982 instanceof Array)){var i$11988;(i$11988=0);$11985:for(;(i$11988<this.length);(i$11988++)){if(($12115(this,i$11988)!==$12115(value$11982,i$11988))){return [true,[value$11982]];}}return [true,value$11982.slice(this.length)];}else{return [true,[value$11982]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($12133));});(RegExp.prototype["::check"]=function($12006$12009){var ph$12014;(ph$12014=$12006$12009);var $12011$12020;($12011$12020=ph$12014);var value$12028;if((typeof($12011$12020)==="string")){(value$12028=$12011$12020);if(value$12028.match(this)){return true;}else{return false;}}else{var other$12033;(other$12033=$12011$12020);return false;}});(RegExp.prototype[":::project"]=function($12039$12042){var ph$12047;(ph$12047=$12039$12042);var $12044$12053;($12044$12053=ph$12047);var value$12061;if((typeof($12044$12053)==="string")){(value$12061=$12044$12053);var $12064$12069;($12064$12069=value$12061.match(this));var m$12077;if(($12064$12069===null)){(m$12077=$12064$12069);return [false,null];}else{var m$12082;(m$12082=$12064$12069);return [true,m$12082];}}else{var other$12086;(other$12086=$12044$12053);return [false,null];}});(Function.prototype["::send"]=function(args$12093){return this.apply(this,args$12093);});
var $15182=function(arr$15185){var results$15191;var l$15192;(results$15191=[]);(l$15192=arr$15185.length);var i$15201;(i$15201=0);$15190:for(;(i$15201<l$15192);(i$15201++)){results$15191.push([i$15201,$12115(arr$15185,i$15201)]);}return results$15191;};
var $14949=function(){var $14950$14956;($14950$14956=function(tags$14961){var it$0$14964;(it$0$14964=function(){if((!$12096($14950$14956)(this))){return Object.create($14950$14956.prototype);}else{return this;}}());(it$0$14964["tags"]=tags$14961);return it$0$14964;});($14950$14956.prototype["create"]=function(){var it$0$14984;var self$14985;(it$0$14984=this);(self$14985=this);var $14982$14994;($14982$14994=arguments);var t0$14999;var message$15003;var args$15004;(t0$14999=$14982$14994.length);if((t0$14999>=0)){(message$15003=function(){if((0>=t0$14999)){return "";}else{return $14982$14994[0];}}());(args$15004=Array.prototype.slice.call($14982$14994,1));var e$15017;(e$15017=Error(message$15003));(e$15017["::tags"]=it$0$14984.tags);(e$15017["args"]=args$15004);var temp$15033;(temp$15033=$15182(args$15004));var $length$15039;($length$15039=temp$15033.length);var $index$15045;($index$15045=0);$15018:for(;($index$15045<$length$15039);($index$15045++)){var m$15054;(m$15054=temp$15033[$index$15045]);var t0$15059;var t1$15060;var i$15064;var arg$15065;(t0$15059=m$15054);if(((t0$15059 instanceof Array)&&(((t1$15060=t0$15059.length)),(t1$15060===2)))){(i$15064=t0$15059[0]);(arg$15065=t0$15059[1]);(e$15017[i$15064]=arg$15065);}else{$14930(m$15054);}}(e$15017["length"]=args$15004.length);(e$15017["name"]=["E"].concat(it$0$14984.tags).join("."));return e$15017;}else{$14930($14982$14994);}});($14950$14956.prototype["::check"]=function(e$15095){var it$0$15099;var self$15100;(it$0$15099=this);(self$15100=this);var tags$15110;if(((!e$15095)||(!$12096(Error)(e$15095)))){return false;}(tags$15110=(e$15095["::tags"]||[]));var temp$15121;(temp$15121=it$0$15099.tags);var $length$15127;($length$15127=temp$15121.length);var $index$15133;($index$15133=0);$15111:for(;($index$15133<$length$15127);($index$15133++)){var m$15142;(m$15142=temp$15121[$index$15133]);var tag$15150;(tag$15150=m$15142);if((tags$15110.indexOf(tag$15150)===-1)){return false;}else{false;}}return true;});($14950$14956.prototype["::deconstruct"]=function(e$15159){var it$0$15163;var self$15164;(it$0$15163=this);(self$15164=this);return e$15159.args;});$12116($14950$14956,$12116(function(){var accum$15175;(accum$15175=({}));(accum$15175["::name"]="$14950");return accum$15175;}(),function(){var accum$15179;(accum$15179=({}));(accum$15179["::egclass"]=true);return accum$15179;}()));return $14950$14956;}();
var $14930=function(value$14933,url$14934,start$14935,end$14936){var err$14940;(err$14940=$14949(["match"]).create("Could not find a match for value",({"value":value$14933})));if(url$14934){(err$14940["location"]=["location",url$14934,start$14935,end$14936]);}throw err$14940;};
var $15208=function(obj$15211){var results$15216;(results$15216=[]);var k$15221;(k$15221=null);$15215:for(k$15221 in obj$15211){if(Object.prototype.hasOwnProperty.call(obj$15211,k$15221)){results$15216.push([k$15221,$12115(obj$15211,k$15221)]);}}return results$15216;};
var $15225=function(arrays$15228){var results$15232;(results$15232=[]);var temp$15242;(temp$15242=arrays$15228);var $length$15248;($length$15248=temp$15242.length);var $index$15254;($index$15254=0);$15233:for(;($index$15254<$length$15248);($index$15254++)){var m$15263;(m$15263=temp$15242[$index$15254]);var a$15271;(a$15271=m$15263);(results$15232=results$15232.concat(a$15271));}return results$15232;};
var $15277=function(type$15280){return function(value$15284){var f$15288;(f$15288=type$15280[":::project"]);if((f$15288===(void 0))){(f$15288=type$15280["::project"]);if((f$15288===(void 0))){return [true,type$15280(value$15284)];}else{var rval$15301;(rval$15301=false);try{(rval$15301=[true,f$15288(value$15284)]);}catch(excv$15312){var e$15318;(e$15318=excv$15312);(rval$15301=[false,null]);}return rval$15301;}}else{return f$15288.call(type$15280,value$15284);}};};
var $15496=Object.keys;
var $15497=function($15499$15502,key$15503){var ph$15511;(ph$15511=$15499$15502);var $15505$15517;($15505$15517=ph$15511);var bridge$15507$15522;(bridge$15507$15522=$15505$15517);if(((bridge$15507$15522===null)||(bridge$15507$15522===(void 0)))){return false;}else{var x$15534;if((typeof($15505$15517)==="string")){(x$15534=$15505$15517);return (key$15503 in String.prototype);}else{var x$15539;if((typeof($15505$15517)==="number")){(x$15539=$15505$15517);return (key$15503 in Number.prototype);}else{var x$15544;(x$15544=$15505$15517);return (key$15503 in x$15544);}}}};
var $15324=function($15326$15329,b$15330){var ph$15344;var a$15345;var t0$15347;(t0$15347=$15326$15329);(a$15345=t0$15347);(ph$15344=t0$15347);var $15332$15356;($15332$15356=ph$15344);var bridge$15335$15361;if(($15332$15356===b$15330)){return true;}else{(bridge$15335$15361=$15332$15356);if((function(){var bridge$15336$15375;(bridge$15336$15375=bridge$15335$15361);return (function(){var bridge$15337$15382;(bridge$15337$15382=bridge$15336$15375);return (function(){var bridge$15338$15389;(bridge$15338$15389=bridge$15337$15382);return (function(){var bridge$15339$15396;(bridge$15339$15396=bridge$15338$15389);return ((typeof(bridge$15339$15396)==="number")||(typeof(bridge$15339$15396)==="string"));}()||(bridge$15338$15389===null));}()||(bridge$15337$15382===(void 0)));}()||(bridge$15336$15375===true));}()||(bridge$15335$15361===false))){return false;}else{if($12096(Array)($15332$15356)){if(((!$12096(Array)(b$15330))||(a$15345.length!==b$15330.length))){return false;}var i$15412;(i$15412=0);$15408:for(;(i$15412<a$15345.length);(i$15412++)){if((!$15324(a$15345[i$15412],b$15330[i$15412]))){return false;}}return true;}else{$15332$15356;if((((Object.getPrototypeOf(a$15345)===Object.prototype)&&$12096(Object)(b$15330))&&(Object.getPrototypeOf(b$15330)===Object.prototype))){var ka$15426;(ka$15426=$15496(a$15345));if((!$15324(ka$15426.sort(),$15496(b$15330).sort()))){return false;}var temp$15437;(temp$15437=ka$15426);var $length$15443;($length$15443=temp$15437.length);var $index$15449;($index$15449=0);$15427:for(;($index$15449<$length$15443);($index$15449++)){var m$15458;(m$15458=temp$15437[$index$15449]);var k$15466;(k$15466=m$15458);if((!$15324(a$15345[k$15466],b$15330[k$15466]))){return false;}}return true;}else{if($15497($15332$15356,"::serialize")){$15332$15356["::serialize"];var $15473$15478;($15473$15478=b$15330);if($15497($15473$15478,"::serialize")){$15473$15478["::serialize"];return $15324(a$15345["::serialize"](),b$15330["::serialize"]());}else{var otherwise$15490;(otherwise$15490=$15473$15478);return false;}}else{var otherwise$15494;(otherwise$15494=$15332$15356);return false;}}}}}};
var $15546=function(pairs$15549){var rval$15553;(rval$15553=({}));var temp$15563;(temp$15563=pairs$15549);var $length$15569;($length$15569=temp$15563.length);var $index$15575;($index$15575=0);$15554:for(;($index$15575<$length$15569);($index$15575++)){var m$15584;(m$15584=temp$15563[$index$15575]);var t0$15589;var t1$15590;var k$15594;var v$15595;(t0$15589=m$15584);if(((t0$15589 instanceof Array)&&(((t1$15590=t0$15589.length)),(t1$15590===2)))){(k$15594=t0$15589[0]);(v$15595=t0$15589[1]);(rval$15553[k$15594]=v$15595);}else{$14930(m$15584);}}return rval$15553;};var accum$12757;var accum$12761;var accum$13007;var accum$13523;var accum$13527;var accum$13752;var accum$13756;var accum$13760;var accum$13764;var accum$13768;var accum$13780;var accum$13784;var accum$13788;var accum$13792;var accum$13796;var eg_groups$13538;var eg_prio$13539;var $12174$12196;var __lt____lt____colon__$12197;var __plus____plus____colon__$12198;var transform$12199;var OperatorGroups$12200;var parse_op_description$12201;var eg_groups$12202;var SimplePriority$12203;var MAX$12204;var eg_order$12205;var DONE$12206;var NONE$12207;var LEFT$12208;var RIGHT$12209;var BOTH$12210;var oparse$12211;var finalize$12212;var parse$12213;($12174$12196=require("./location"));(__lt____lt____colon__$12197=$12174$12196["<<:"]);(__plus____plus____colon__$12198=$12174$12196["++:"]);(transform$12199=function(expr$12227,cb$12228){var rval$12248;var tr$12233;var result$12234;(tr$12233=function(x$12239){return transform$12199(x$12239,cb$12228);});(result$12234=(((rval$12248=false)),(function(){try{(rval$12248=cb$12228.call(tr$12233,expr$12227));}catch(excv$12259){var name$12311;var args$12312;var v$12306;var s$12301;var $12275$12287;var $12276$12288;var $12277$12289;var t0$12285;var $12270$12280;var e$12265;(e$12265=excv$12259);(rval$12248=((($12270$12280=expr$12227)),function(){if((($12275$12287=($12270$12280 instanceof Array))&&(((t0$12285=$12270$12280.length)),((t0$12285===1)&&($12270$12280[0]==="void"))))){return ["void"];}else{if(($12275$12287&&(($12277$12289=(t0$12285===2))&&($12270$12280[0]==="symbol")))){(s$12301=$12270$12280[1]);return expr$12227;}else{if(($12277$12289&&($12270$12280[0]==="value"))){(v$12306=$12270$12280[1]);return expr$12227;}else{if(($12275$12287&&(t0$12285>=1))){(name$12311=$12270$12280[0]);(args$12312=Array.prototype.slice.call($12270$12280,1));return [name$12311].concat(args$12312.map(tr$12233));}else{$14930($12270$12280);}}}}}()));}}(),rval$12248)));return __lt____lt____colon__$12197(result$12234,expr$12227);});(OperatorGroups$12200=function(groups$12324){var $index$12371;var $length$12365;var temp$12359;var acc$12353;var $index$12431;var $length$12425;var temp$12419;var acc$12413;var $index$12536;var $length$12530;var temp$12524;var acc$12518;var itg$12339;var it$0$12327;(it$0$12327=function(){if((!$12096(OperatorGroups$12200)(this))){return Object.create(OperatorGroups$12200.prototype);}else{return this;}}());(itg$12339=$15208(groups$12324));(it$0$12327["gnames"]=(((acc$12353=[])),(((temp$12359=itg$12339)),((($length$12365=temp$12359.length)),((($index$12371=0)),function(){$12348:for(;($index$12371<$length$12365);($index$12371++)){var name$12390;var t0$12385;var t1$12386;var m$12380;(m$12380=temp$12359[$index$12371]);(t0$12385=m$12380);if(((t0$12385 instanceof Array)&&(((t1$12386=t0$12385.length)),(t1$12386===2)))){(name$12390=t0$12385[0]);t0$12385[1];acc$12353.push(name$12390);}else{$14930(m$12380,"/home/olivier/git/earl-grey/src/parse.eg",539,565);}}}()))),acc$12353));(it$0$12327["groups"]=(((acc$12413=[])),(((temp$12419=itg$12339)),((($length$12425=temp$12419.length)),((($index$12431=0)),function(){$12408:for(;($index$12431<$length$12425);($index$12431++)){var $index$12487;var $length$12481;var temp$12475;var acc$12469;var name$12450;var descrs$12451;var t0$12445;var t1$12446;var m$12440;(m$12440=temp$12419[$index$12431]);(t0$12445=m$12440);if(((t0$12445 instanceof Array)&&(((t1$12446=t0$12445.length)),(t1$12446===2)))){(name$12450=t0$12445[0]);(descrs$12451=t0$12445[1]);acc$12413.push($15225((((acc$12469=[])),(((temp$12475=descrs$12451)),((($length$12481=temp$12475.length)),((($index$12487=0)),function(){$12464:for(;($index$12487<$length$12481);($index$12487++)){var descr$12504;var m$12496;(m$12496=temp$12475[$index$12487]);(descr$12504=m$12496);acc$12469.push(parse_op_description$12201(descr$12504));}}()))),acc$12469)));}else{$14930(m$12440,"/home/olivier/git/earl-grey/src/parse.eg",582,679);}}}()))),acc$12413));(it$0$12327["fns"]=[]);(it$0$12327["to_gid"]=({"IFX":({"wide":({}),"short":({})}),"PFX":({"wide":({}),"short":({})}),"SFX":({"wide":({}),"short":({})})}));(acc$12518=[]);(temp$12524=$15182(it$0$12327.groups));($length$12530=temp$12524.length);($index$12536=0);$12340:for(;($index$12536<$length$12530);($index$12536++)){var $index$12593;var $length$12587;var temp$12581;var acc$12575;var i$12555;var group$12556;var t0$12550;var t1$12551;var m$12545;(m$12545=temp$12524[$index$12536]);(t0$12550=m$12545);if(((t0$12550 instanceof Array)&&(((t1$12551=t0$12550.length)),(t1$12551===2)))){(i$12555=t0$12550[0]);(group$12556=t0$12550[1]);acc$12518.push((((acc$12575=[])),(((temp$12581=group$12556)),((($length$12587=temp$12581.length)),((($index$12593=0)),function(){$12569:for(;($index$12593<$length$12587);($index$12593++)){var f$12633;var fixity$12612;var width$12613;var name$12614;var t0$12607;var t1$12608;var m$12602;(m$12602=temp$12581[$index$12593]);(t0$12607=m$12602);if(((t0$12607 instanceof Array)&&(((t1$12608=t0$12607.length)),(t1$12608===3)))){(fixity$12612=t0$12607[0]);(width$12613=t0$12607[1]);(name$12614=t0$12607[2]);acc$12575.push((($12115($12115(it$0$12327.to_gid,fixity$12612),width$12613)[name$12614]=i$12555)));}else{(f$12633=m$12602);acc$12575.push(it$0$12327.fns.push([f$12633,i$12555]));}}}()))),acc$12575));}else{$14930(m$12545,"/home/olivier/git/earl-grey/src/parse.eg",844,1045);}}acc$12518;return it$0$12327;});(OperatorGroups$12200.prototype["get_name"]=function(o$12643){var it$0$12647;var self$12648;(it$0$12647=this);(self$12648=this);return $12115(it$0$12647.gnames,it$0$12647.get(o$12643));});(OperatorGroups$12200.prototype["get"]=function($12659$12662){var t0$12680;var t1$12681;var $index$12719;var $length$12713;var temp$12707;var attempt$12696;var o$12675;var fixity$12676;var width$12677;var name$12678;var it$0$12666;var self$12667;(it$0$12666=this);(self$12667=this);(t0$12680=$12659$12662);(o$12675=t0$12680);if(((t0$12680 instanceof Array)&&(((t1$12681=t0$12680.length)),(t1$12681===3)))){(fixity$12676=t0$12680[0]);(width$12677=t0$12680[1]);(name$12678=t0$12680[2]);}else{$14930($12659$12662);}(attempt$12696=$12115($12115($12115(it$0$12666.to_gid,fixity$12676),width$12677),name$12678));if((attempt$12696===(void 0))){(temp$12707=it$0$12666.fns);($length$12713=temp$12707.length);($index$12719=0);$12701:for(;($index$12719<$length$12713);($index$12719++)){var f$12738;var i$12739;var t0$12733;var t1$12734;var m$12728;(m$12728=temp$12707[$index$12719]);(t0$12733=m$12728);if(((t0$12733 instanceof Array)&&(((t1$12734=t0$12733.length)),(t1$12734===2)))){(f$12738=t0$12733[0]);(i$12739=t0$12733[1]);if(f$12738(o$12675)){return i$12739;}}else{$14930(m$12728,"/home/olivier/git/earl-grey/src/parse.eg",1224,1307);}}throw $14949(["syntax","unknown_operator"]).create(("Unknown operator: "+[true,String(o$12675)][1]),({"operator":o$12675}));}else{return attempt$12696;}});$12116(OperatorGroups$12200,$12116(((accum$12757=({})),((accum$12757["::name"]="OperatorGroups"),accum$12757)),((accum$12761=({})),((accum$12761["::egclass"]=true),accum$12761))));OperatorGroups$12200;(parse_op_description$12201=function($12767$12770){var otherwise$12860;var $12840$12849;var $12836$12843;var otherwise$12894;var $12874$12883;var $12870$12877;var t0$12830;var t1$12831;var fixity$12827;var short$12828;var other$12898;var x$12804;var w1$12805;var op$12806;var w2$12807;var y$12808;var f$12799;var rx$12793;var t0$12787;var t1$12788;var t2$12789;var $12772$12782;var ph$12776;(ph$12776=$12767$12770);($12772$12782=ph$12776);(rx$12793=RegExp("(?:^((?:X?))((?:[ _]?))((?:[^ _Y]*))((?:[ _]?))((?:Y?))$)",""));if($12096(Function)($12772$12782)){(f$12799=$12772$12782);return f$12799;}else{(t0$12787=$15277(rx$12793)($12772$12782));if((t0$12787[0]&&(((t1$12788=t0$12787[1])),(((t2$12789=t1$12788.length)),(t2$12789===6))))){t1$12788[0];(x$12804=t1$12788[1]);(w1$12805=t1$12788[2]);(op$12806=t1$12788[3]);(w2$12807=t1$12788[4]);(y$12808=t1$12788[5]);(t0$12830=((($12836$12843=null)),($12836$12843,function(){if((x$12804==="")){return ["PFX",(w2$12807==="")];}else{if((y$12808==="")){return ["SFX",(w1$12805==="")];}else{(otherwise$12860=$12836$12843);return ["IFX",((w1$12805==="")||(w2$12807===""))];}}}())));if(((t0$12830 instanceof Array)&&(((t1$12831=t0$12830.length)),(t1$12831===2)))){(fixity$12827=t0$12830[0]);(short$12828=t0$12830[1]);}else{$14930(((($12870$12877=null)),($12870$12877,function(){if((x$12804==="")){return ["PFX",(w2$12807==="")];}else{if((y$12808==="")){return ["SFX",(w1$12805==="")];}else{(otherwise$12894=$12870$12877);return ["IFX",((w1$12805==="")||(w2$12807===""))];}}}())),"/home/olivier/git/earl-grey/src/parse.eg",1678,1896);}if(((w1$12805==="_")||(w2$12807==="_"))){return [[fixity$12827,"short",op$12806],[fixity$12827,"wide",op$12806]];}else{return [[fixity$12827,function(){if(short$12828){return "short";}else{return "wide";}}(),op$12806]];}}else{(other$12898=$12772$12782);throw $14949(["invalid_op_description"]).create(("Invalid operator description: "+other$12898));}}});(eg_groups$12202=OperatorGroups$12200($12116(({"tokenpfx":[".Y","#Y","@Y"],"sjuxt":["XWHITEY"],"ifx":[function($12905$12908){var t0$12924;var $12910$12919;var ph$12913;(ph$12913=$12905$12908);($12910$12919=ph$12913);if((($12910$12919 instanceof Array)&&(((t0$12924=$12910$12919.length)),((t0$12924===3)&&(($12910$12919[0]==="IFX")&&($12910$12919[1]==="short")))))){$12910$12919[2];return true;}else{$12910$12919;return false;}}],"pfx":[function($12939$12942){var t0$12958;var $12944$12953;var ph$12947;(ph$12947=$12939$12942);($12944$12953=ph$12947);if((($12944$12953 instanceof Array)&&(((t0$12958=$12944$12953.length)),((t0$12958===3)&&(($12944$12953[0]==="PFX")&&($12944$12953[1]==="short")))))){$12944$12953[2];return true;}else{$12944$12953;return false;}}],"sfx":[function($12973$12976){var t0$12992;var $12978$12987;var ph$12981;(ph$12981=$12973$12976);($12978$12987=ph$12981);if((($12978$12987 instanceof Array)&&(((t0$12992=$12978$12987.length)),((t0$12992===3)&&(($12978$12987[0]==="SFX")&&($12978$12987[1]==="short")))))){$12978$12987[2];return true;}else{$12978$12987;return false;}}],"pow":["X ** Y"],"mul":["X * Y","X / Y","X // Y","X mod Y","+ Y","- Y"],"add":["X + Y","X - Y"],"cmp":["X < Y","X <= Y","X == Y","X > Y","X >= Y","X != Y"],"cat":["X ++ Y"],"union":["X & Y"],"range":["X .. Y","X ..",".. Y"],"in":["X in Y"],"wjuxt":["X WHITE Y"],"colon":["X_:_Y"],"and":"X and Y","or":"X or Y","not":"not Y"}),$12116(((accum$13007=({})),((accum$13007["with"]=["X with Y"]),accum$13007)),({"decl":["X -> Y","X = Y","X := Y","X => Y","X where Y","X when Y","X each Y"],"brack":["X_,_Y","(_Y","[_Y","{_Y","X_)","X_]","X_}"],"custom":[function(x$13012){return true;}]})))));(SimplePriority$12203=function(groups$13019,priorities$13020){var $index$13070;var $length$13064;var temp$13058;var acc$13052;var _i$13034;var tracks$13035;var it$0$13023;(it$0$13023=function(){if((!$12096(SimplePriority$12203)(this))){return Object.create(SimplePriority$12203.prototype);}else{return this;}}());(it$0$13023["groups"]=groups$13019);(_i$13034=0);(tracks$13035=({}));(it$0$13023["prio"]=(((acc$13052=[])),(((temp$13058=groups$13019.gnames)),((($length$13064=temp$13058.length)),((($index$13070=0)),function(){$13047:for(;($index$13070<$length$13064);($index$13070++)){var t0$13100;var t1$13101;var t2$13102;var t3$13103;var t4$13104;var t5$13105;var t6$13106;var t7$13107;var $index$13182;var $length$13176;var temp$13170;var acc$13164;var $index$13304;var $length$13298;var temp$13292;var acc$13286;var t0$13153;var t1$13154;var ltracks$13093;var lp$13094;var rtracks$13095;var rp$13096;var lt$13097;var rt$13098;var name$13087;var m$13079;(m$13079=temp$13058[$index$13070]);(name$13087=m$13079);acc$13052.push(((((t0$13100=$12115(priorities$13020,name$13087))),function(){if(((t0$13100 instanceof Array)&&(((t1$13101=t0$13100.length)),((t1$13101===2)&&(((t2$13102=t0$13100[0])),((t2$13102 instanceof Array)&&(((t3$13103=t2$13102.length)),((t3$13103===2)&&(((t4$13104=$15277(Array)(t2$13102[0]))),(t4$13104[0]&&((ltracks$13093=t4$13104[1]),((lp$13094=t2$13102[1]),(((t5$13105=t0$13100[1])),((t5$13105 instanceof Array)&&(((t6$13106=t5$13105.length)),((t6$13106===2)&&(((t7$13107=$15277(Array)(t5$13105[0]))),t7$13107[0]))))))))))))))))){(rtracks$13095=t7$13107[1]);(rp$13096=t5$13105[1]);}else{return $14930($12115(priorities$13020,name$13087),"/home/olivier/git/earl-grey/src/parse.eg",3581,3607);}}()),(((t0$13153=(((acc$13164=[])),(((temp$13170=[ltracks$13093,rtracks$13095])),((($length$13176=temp$13170.length)),((($index$13182=0)),function(){$13159:for(;($index$13182<$length$13176);($index$13182++)){var $index$13228;var $length$13222;var temp$13216;var rval$13204;var tr$13199;var m$13191;(m$13191=temp$13170[$index$13182]);(tr$13199=m$13191);acc$13164.push((((rval$13204=0)),(((temp$13216=tr$13199)),((($length$13222=temp$13216.length)),((($index$13228=0)),function(){$13205:for(;($index$13228<$length$13222);($index$13228++)){var t$13267;var t$13253;var m$13237;(m$13237=temp$13216[$index$13228]);if((m$13237==="all")){(rval$13204=(Math.pow(2,31)-1));}else{(t$13253=m$13237);if((!$12115(tracks$13035,t$13253))){(rval$13204=(rval$13204|Math.pow(2,_i$13034)));(tracks$13035[t$13253]=(_i$13034++));}else{(t$13267=m$13237);(rval$13204=(rval$13204|Math.pow(2,$12115(tracks$13035,t$13267))));}}}}()))),rval$13204));}}()))),acc$13164))),function(){if(((t0$13153 instanceof Array)&&(((t1$13154=t0$13153.length)),(t1$13154===2)))){(lt$13097=t0$13153[0]);(rt$13098=t0$13153[1]);}else{return $14930((((acc$13286=[])),(((temp$13292=[ltracks$13093,rtracks$13095])),((($length$13298=temp$13292.length)),((($index$13304=0)),function(){$13281:for(;($index$13304<$length$13298);($index$13304++)){var $index$13350;var $length$13344;var temp$13338;var rval$13326;var tr$13321;var m$13313;(m$13313=temp$13292[$index$13304]);(tr$13321=m$13313);acc$13286.push((((rval$13326=0)),(((temp$13338=tr$13321)),((($length$13344=temp$13338.length)),((($index$13350=0)),function(){$13327:for(;($index$13350<$length$13344);($index$13350++)){var t$13389;var t$13375;var m$13359;(m$13359=temp$13338[$index$13350]);if((m$13359==="all")){(rval$13326=(Math.pow(2,31)-1));}else{(t$13375=m$13359);if((!$12115(tracks$13035,t$13375))){(rval$13326=(rval$13326|Math.pow(2,_i$13034)));(tracks$13035[t$13375]=(_i$13034++));}else{(t$13389=m$13359);(rval$13326=(rval$13326|Math.pow(2,$12115(tracks$13035,t$13389))));}}}}()))),rval$13326));}}()))),acc$13286),"/home/olivier/git/earl-grey/src/parse.eg",3617,3938);}}()),[[lt$13097,lp$13094],[rt$13098,rp$13096]]));}}()))),acc$13052));return it$0$13023;});(SimplePriority$12203.prototype["compare"]=function(op1$13401,op2$13402){var t0$13439;var t1$13440;var t2$13441;var t3$13442;var t0$13467;var t1$13468;var t2$13469;var t3$13470;var $13425$13501;var $13420$13495;var i1$13426;var i2$13427;var code1$13428;var ord1$13429;var code2$13430;var ord2$13431;var it$0$13406;var self$13407;(it$0$13406=this);(self$13407=this);(i1$13426=it$0$13406.groups.get(op1$13401));(i2$13427=it$0$13406.groups.get(op2$13402));(t0$13439=$12115(it$0$13406.prio,i1$13426));if(((t0$13439 instanceof Array)&&(((t1$13440=t0$13439.length)),((t1$13440===2)&&(t0$13439[0],(((t2$13441=t0$13439[1])),((t2$13441 instanceof Array)&&(((t3$13442=t2$13441.length)),(t3$13442===2))))))))){(code1$13428=t2$13441[0]);(ord1$13429=t2$13441[1]);}else{$14930($12115(it$0$13406.prio,i1$13426),"/home/olivier/git/earl-grey/src/parse.eg",4065,4082);}(t0$13467=$12115(it$0$13406.prio,i2$13427));if(((t0$13467 instanceof Array)&&(((t1$13468=t0$13467.length)),((t1$13468===2)&&(((t2$13469=t0$13467[0])),((t2$13469 instanceof Array)&&(((t3$13470=t2$13469.length)),(t3$13470===2)))))))){(code2$13430=t2$13469[0]);(ord2$13431=t2$13469[1]);t0$13467[1];}else{$14930($12115(it$0$13406.prio,i2$13427),"/home/olivier/git/earl-grey/src/parse.eg",4102,4119);}($13420$13495=null);$13420$13495;if(((code1$13428&code2$13430)===0)){throw $14949(["syntax","order"]).create("Cannot mix operators in the given order",({"left":op1$13401,"right":op2$13402}));}else{if((ord1$13429>ord2$13431)){return LEFT$12208;}else{if((ord1$13429<ord2$13431)){return RIGHT$12209;}else{if((ord1$13429===ord2$13431)){return BOTH$12210;}else{$14930($13420$13495);}}}}});$12116(SimplePriority$12203,$12116(((accum$13523=({})),((accum$13523["::name"]="SimplePriority"),accum$13523)),((accum$13527=({})),((accum$13527["::egclass"]=true),accum$13527))));SimplePriority$12203;(MAX$12204=(1/0));(eg_order$12205=(((eg_groups$13538=OperatorGroups$12200($12116(({"sh_ifx":[function($13548$13551){var t0$13567;var $13553$13562;var ph$13556;(ph$13556=$13548$13551);($13553$13562=ph$13556);if((($13553$13562 instanceof Array)&&(((t0$13567=$13553$13562.length)),((t0$13567===3)&&(($13553$13562[0]==="IFX")&&($13553$13562[1]==="short")))))){$13553$13562[2];return true;}else{$13553$13562;return false;}}],"sh_pfx":[function($13582$13585){var t0$13601;var $13587$13596;var ph$13590;(ph$13590=$13582$13585);($13587$13596=ph$13590);if((($13587$13596 instanceof Array)&&(((t0$13601=$13587$13596.length)),((t0$13601===3)&&(($13587$13596[0]==="PFX")&&($13587$13596[1]==="short")))))){$13587$13596[2];return true;}else{$13587$13596;return false;}}],"sh_sfx":[function($13616$13619){var t0$13635;var $13621$13630;var ph$13624;(ph$13624=$13616$13619);($13621$13630=ph$13624);if((($13621$13630 instanceof Array)&&(((t0$13635=$13621$13630.length)),((t0$13635===3)&&(($13621$13630[0]==="SFX")&&($13621$13630[1]==="short")))))){$13621$13630[2];return true;}else{$13621$13630;return false;}}],"wi_ifx":[function($13650$13653){var t0$13669;var $13655$13664;var ph$13658;(ph$13658=$13650$13653);($13655$13664=ph$13658);if((($13655$13664 instanceof Array)&&(((t0$13669=$13655$13664.length)),((t0$13669===3)&&(($13655$13664[0]==="IFX")&&($13655$13664[1]==="wide")))))){$13655$13664[2];return true;}else{$13655$13664;return false;}}],"wi_pfx":[function($13684$13687){var t0$13703;var $13689$13698;var ph$13692;(ph$13692=$13684$13687);($13689$13698=ph$13692);if((($13689$13698 instanceof Array)&&(((t0$13703=$13689$13698.length)),((t0$13703===3)&&(($13689$13698[0]==="PFX")&&($13689$13698[1]==="wide")))))){$13689$13698[2];return true;}else{$13689$13698;return false;}}],"wi_sfx":[function($13718$13721){var t0$13737;var $13723$13732;var ph$13726;(ph$13726=$13718$13721);($13723$13732=ph$13726);if((($13723$13732 instanceof Array)&&(((t0$13737=$13723$13732.length)),((t0$13737===3)&&(($13723$13732[0]==="SFX")&&($13723$13732[1]==="wide")))))){$13723$13732[2];return true;}else{$13723$13732;return false;}}],"comma":["X_,_Y"],"obrack":["(_Y","[_Y","{_Y"],"cbrack":["X_)","X_]","X_}"]}),$12116(((accum$13752=({})),((accum$13752["with"]=["X with Y"]),accum$13752)),$12116(({"lowprio":["X each Y","X each? Y","X where Y","X !! Y","X -> Y","X => Y","X = Y","X := Y","X += Y","X -= Y","X *= Y","X /= Y","X <<= Y","X >>= Y","X >>>= Y","X ++= Y","X ?= Y","X or= Y","X and= Y","X each= Y","X % Y"]}),$12116(((accum$13756=({})),((accum$13756["when"]=["X when Y"]),accum$13756)),$12116(((accum$13760=({})),((accum$13760["or"]=["X or Y"]),accum$13760)),$12116(((accum$13764=({})),((accum$13764["and"]=["X and Y"]),accum$13764)),$12116(((accum$13768=({})),((accum$13768["not"]=["not Y"]),accum$13768)),({"cmp":["X == Y","X != Y","X >= Y","X <= Y","X > Y","X < Y"],"binxor":["X ^. Y"],"binor":["X |. Y"],"binand":["X &. Y"],"shift":["X << Y","X >> Y","X >>> Y"],"add":["X + Y","X - Y"],"mul":["X * Y","X / Y","X // Y","X mod Y"],"exp":["X ** Y"],"sjuxt":["XWHITEY"],"wjuxt":["X WHITE Y"],"colon":["X_:_Y"],"pfx":["._Y","#_Y","@_Y"],"when2":["when Y"],"pp":["<> Y"],"pipe":["X |> Y"]}))))))))))),((eg_prio$13539=$12116(({"comma":[["all",1],["all",1]],"obrack":[["all",MAX$12204],["all",1]],"cbrack":[["all",1],["all",MAX$12204]]}),$12116(((accum$13780=({})),((accum$13780["with"]=[["all",1999],["all",10]]),accum$13780)),$12116(({"lowprio":[["all",11],["all",10]]}),$12116(((accum$13784=({})),((accum$13784["when"]=[["all",100],["all",101]]),accum$13784)),$12116(((accum$13788=({})),((accum$13788["or"]=[["all",110],["all",111]]),accum$13788)),$12116(((accum$13792=({})),((accum$13792["and"]=[["all",120],["all",121]]),accum$13792)),$12116(((accum$13796=({})),((accum$13796["not"]=[["all",MAX$12204],["all",131]]),accum$13796)),({"cmp":[["all",200],["all",201]],"binxor":[["all",400],["all",401]],"binor":[["all",410],["all",411]],"binand":[["all",420],["all",421]],"shift":[["arith",500],["arith",501]],"add":[["arith",550],["arith",551]],"mul":[["arith",560],["arith",561]],"exp":[["arith",571],["arith",570]],"wjuxt":[["wjuxt",13],["all",12]],"colon":[["all",12],["all",10]],"sjuxt":[["all",2000],["all",2001]],"pfx":[["all",MAX$12204],["all",3000]],"pp":[["all",MAX$12204],["all",5]],"when2":[["all",MAX$12204],["all",101]],"pipe":[["pipe",550],["pipe",551]],"sh_ifx":[["all",1800],["all",1801]],"sh_pfx":[["all",MAX$12204],["all",1901]],"sh_sfx":[["all",1900],["all",MAX$12204]],"wi_ifx":[["customl",900],["customr",901]],"wi_pfx":[["all",MAX$12204],["all",901]],"wi_sfx":[["all",900],["all",MAX$12204]]})))))))))),SimplePriority$12203(eg_groups$13538,eg_prio$13539)));(DONE$12206=-1);(NONE$12207=0);(LEFT$12208=1);(RIGHT$12209=2);(BOTH$12210=3);(oparse$12211=function(next$13820,order$13821,finalize$13822){var between$13830;var right_op$13831;var stack$13832;var left_op$13833;var current$13834;(between$13830=finalize$13822(next$13820()));(right_op$13831=next$13820());(stack$13832=[]);(left_op$13833=null);(current$13834=null);$13835:while(true){var v$13886;var other$13939;var $13855$13867;var o$13861;(o$13861=function(){if(((!left_op$13833)&&(!right_op$13831))){return DONE$12206;}else{return ((((!left_op$13833)&&RIGHT$12209)||((!right_op$13831)&&LEFT$12208))||order$13821(left_op$13833,right_op$13831));}}());($13855$13867=o$13861);if(($13855$13867===DONE$12206)){return between$13830;}else{if(($13855$13867===LEFT$12208)){current$13834.push(between$13830);(between$13830=finalize$13822(current$13834));(v$13886=stack$13832.pop());(left_op$13833=v$13886[0]);(current$13834=v$13886[1]);}else{if(($13855$13867===RIGHT$12209)){stack$13832.push([left_op$13833,current$13834]);(left_op$13833=right_op$13831);(current$13834=[[right_op$13831],between$13830]);(between$13830=finalize$13822(next$13820()));(right_op$13831=next$13820());}else{if(($13855$13867===BOTH$12210)){current$13834[0].push(right_op$13831);current$13834.push(between$13830);(left_op$13833=right_op$13831);(between$13830=finalize$13822(next$13820()));(right_op$13831=next$13820());}else{(other$13939=$13855$13867);throw $14949(["should_never_happen"]).create("undefined priority",({"left":left_op$13833,"right":right_op$13831}));}}}}}});(finalize$12212=function($13945$13948){var t0$13963;var $index$14068;var $length$14062;var temp$14056;var $index$14106;var $length$14100;var temp$14094;var $index$14157;var $length$14151;var temp$14145;var acc$14139;var other$14519;var args$14514;var f$14490;var orig_args$14491;var args$14492;var $14460$14473;var $14461$14474;var t0$14469;var t1$14470;var t2$14471;var $14454$14464;var inserted$14296;var result$14297;var t0$14531;var f$14558;var other$14639;var x$14628;var $14604$14615;var $14605$14616;var t0$14613;var $14600$14608;var result$14548;var f$14665;var oloc$14770;var abloc$14771;var oabloc$14772;var rval$14773;var a$14760;var b$14761;var $14029$14721;var $14030$14722;var $14031$14723;var $14032$14724;var t0$14714;var t1$14715;var t2$14716;var t3$14717;var t4$14718;var t5$14719;var $index$14827;var $length$14821;var temp$14815;var acc$14809;var tokens$14800;var msg$14801;var op_strings$14793;var args$14794;var $14026$14710;var commas$14644;var commas$14523;var target$14256;var _b$14257;var body$14258;var f$14240;var body$14241;var f$14208;var arg$14209;var body$14210;var $14034$14199;var $14035$14200;var $14036$14201;var $14037$14202;var $14038$14203;var $14039$14204;var $14040$14205;var t0$14188;var t1$14189;var t2$14190;var t3$14191;var t4$14192;var t5$14193;var t6$14194;var t7$14195;var t8$14196;var bridge$14022$14197;var $14017$14183;var sumloc$14041;var orig_ops$14042;var op$14043;var other$14870;var ops$14008;var args$14009;var value$13999;var value$13994;var value$13984;var $13957$13979;var $13958$13980;var $13959$13981;var t0$13977;var $13950$13972;var ph$13960;var token$13961;(t0$13963=$13945$13948);(token$13961=t0$13963);(ph$13960=t0$13963);($13950$13972=ph$13960);if((($13957$13979=($13950$13972 instanceof Array))&&(((t0$13977=$13950$13972.length)),(($13959$13981=(t0$13977===2))&&($13950$13972[0]==="ID"))))){(value$13984=$13950$13972[1]);return __lt____lt____colon__$12197(["symbol",value$13984],token$13961);}else{if(($13959$13981&&($13950$13972[0]==="NUM"))){(value$13994=$13950$13972[1]);return __lt____lt____colon__$12197(["value",value$13994],token$13961);}else{if(($13959$13981&&($13950$13972[0]==="STR"))){(value$13999=$13950$13972[1]);return __lt____lt____colon__$12197(["value",value$13999],token$13961);}else{if(($13957$13979&&((t0$13977===1)&&($13950$13972[0]==="VOID")))){return __lt____lt____colon__$12197(["void"],token$13961);}else{if(($13957$13979&&(t0$13977>=1))){(ops$14008=$13950$13972[0]);(args$14009=Array.prototype.slice.call($13950$13972,1));(sumloc$14041=ops$14008[0].location);(temp$14056=ops$14008.slice(1));($length$14062=temp$14056.length);($index$14068=0);$14044:for(;($index$14068<$length$14062);($index$14068++)){var op$14085;var m$14077;(m$14077=temp$14056[$index$14068]);(op$14085=m$14077);(sumloc$14041=__plus____plus____colon__$12198(sumloc$14041,op$14085));}(temp$14094=args$14009);($length$14100=temp$14094.length);($index$14106=0);$14047:for(;($index$14106<$length$14100);($index$14106++)){var arg$14123;var m$14115;(m$14115=temp$14094[$index$14106]);(arg$14123=m$14115);(sumloc$14041=__plus____plus____colon__$12198(sumloc$14041,arg$14123));}(orig_ops$14042=ops$14008);(ops$14008=(((acc$14139=[])),(((temp$14145=ops$14008)),((($length$14151=temp$14145.length)),((($index$14157=0)),function(){$14134:for(;($index$14157<$length$14151);($index$14157++)){var o$14174;var m$14166;(m$14166=temp$14145[$index$14157]);(o$14174=m$14166);acc$14139.push(o$14174[2]);}}()))),acc$14139));(op$14043=ops$14008[0]);($14017$14183=[ops$14008,args$14009]);if((($14034$14199=($14017$14183 instanceof Array))&&(((t0$14188=$14017$14183.length)),(($14036$14201=(t0$14188===2))&&(((t1$14189=$14017$14183[0])),(($14038$14203=(t1$14189 instanceof Array))&&(((t2$14190=t1$14189.length)),((t2$14190===2)&&((t1$14189[0]==="WHITE")&&((t1$14189[1]===":")&&(((t3$14191=$14017$14183[1])),((t3$14191 instanceof Array)&&(((t4$14192=t3$14191.length)),(t4$14192===3)))))))))))))){(f$14208=t3$14191[0]);(arg$14209=t3$14191[1]);(body$14210=t3$14191[2]);return __lt____lt____colon__$12197(["send",f$14208,__lt____lt____colon__$12197(["data",arg$14209,body$14210],__plus____plus____colon__$12198(arg$14209,body$14210))],sumloc$14041);}else{if(($14038$14203&&(($14040$14205=(t2$14190===1))&&((t1$14189[0]===":")&&(((t3$14191=$14017$14183[1])),((t3$14191 instanceof Array)&&(((t4$14192=t3$14191.length)),(t4$14192===2)))))))){(f$14240=t3$14191[0]);(body$14241=t3$14191[1]);return __lt____lt____colon__$12197(["send",f$14240,__lt____lt____colon__$12197(["data",body$14241],body$14241)],sumloc$14041);}else{if(($14040$14205&&((t1$14189[0]==="with")&&(((t3$14191=$14017$14183[1])),((t3$14191 instanceof Array)&&(((t4$14192=t3$14191.length)),((t4$14192===2)&&((target$14256=t3$14191[0]),(((t5$14193=t3$14191[1])),((_b$14257=t5$14193),(((t6$14194=$15277(["multi"])(t5$14193))),(t6$14194[0]&&(((t7$14195=t6$14194[1])),(((t8$14196=t7$14195.length)),(t8$14196>=0))))))))))))))){(body$14258=Array.prototype.slice.call(t7$14195,0));(inserted$14296=false);(result$14297=transform$12199(target$14256,function($14304$14307){var t0$14316;var $index$14412;var $length$14406;var temp$14400;var tr$14385;var res$14386;var args$14374;var x$14350;var f$14351;var a$14352;var b$14353;var t0$14330;var t1$14331;var t2$14332;var $14309$14325;var ph$14313;var expr$14314;(t0$14316=$14304$14307);(expr$14314=t0$14316);(ph$14313=t0$14316);($14309$14325=ph$14313);if((($14309$14325 instanceof Array)&&(((t0$14330=$14309$14325.length)),((t0$14330===2)&&(($14309$14325[0]==="symbol")&&($14309$14325[1]==="...")))))){(inserted$14296=true);return __lt____lt____colon__$12197(["multi"].concat(body$14258),_b$14257);}else{(x$14350=$14309$14325);if((x$14350.fromop&&(($14309$14325 instanceof Array)&&(((t0$14330=$14309$14325.length)),((t0$14330===3)&&(($14309$14325[0]==="send")&&((f$14351=$14309$14325[1]),(((t1$14331=$14309$14325[2])),((t1$14331 instanceof Array)&&(((t2$14332=t1$14331.length)),((t2$14332===3)&&(t1$14331[0]==="data")))))))))))){(a$14352=t1$14331[1]);(b$14353=t1$14331[2]);return ["send",this(f$14351),__lt____lt____colon__$12197(["data",this(a$14352),this(b$14353)],__plus____plus____colon__$12198(a$14352,b$14353))];}else{if((($14309$14325 instanceof Array)&&(((t0$14330=$14309$14325.length)),((t0$14330>=1)&&($14309$14325[0]==="data"))))){(args$14374=Array.prototype.slice.call($14309$14325,1));(tr$14385=this);(res$14386=["data"]);(temp$14400=args$14374);($length$14406=temp$14400.length);($index$14412=0);$14387:for(;($index$14412<$length$14406);($index$14412++)){var other$14449;var t0$14426;var t1$14427;var m$14421;(m$14421=temp$14400[$index$14412]);(t0$14426=m$14421);if(((t0$14426 instanceof Array)&&(((t1$14427=t0$14426.length)),((t1$14427===2)&&((t0$14426[0]==="symbol")&&(t0$14426[1]==="...")))))){(inserted$14296=true);(res$14386=res$14386.concat(body$14258));}else{(other$14449=m$14421);res$14386.push(__lt____lt____colon__$12197(tr$14385(other$14449),other$14449));}}return __lt____lt____colon__$12197(res$14386,expr$14314);}else{$14930($14309$14325);}}}}));if((!inserted$14296)){($14454$14464=target$14256);if((($14454$14464 instanceof Array)&&(((t0$14469=$14454$14464.length)),((t0$14469===1)&&($14454$14464[0]==="void"))))){return __lt____lt____colon__$12197(["data"].concat(body$14258),sumloc$14041);}else{$14454$14464;if(target$14256.fromop){return __lt____lt____colon__$12197(["send",target$14256,__lt____lt____colon__$12197(["data"].concat(body$14258),_b$14257)],sumloc$14041);}else{if((($14460$14473=($14454$14464 instanceof Array))&&(((t0$14469=$14454$14464.length)),((t0$14469===3)&&(($14454$14464[0]==="send")&&((f$14490=$14454$14464[1]),(((t1$14470=$14454$14464[2])),((orig_args$14491=t1$14470),((t1$14470 instanceof Array)&&(((t2$14471=t1$14470.length)),((t2$14471>=1)&&(t1$14470[0]==="data")))))))))))){(args$14492=Array.prototype.slice.call(t1$14470,1));return __lt____lt____colon__$12197(["send",f$14490,__lt____lt____colon__$12197(["data"].concat(args$14492).concat(body$14258),__plus____plus____colon__$12198(orig_args$14491,_b$14257))],sumloc$14041);}else{if(($14460$14473&&((t0$14469>=1)&&($14454$14464[0]==="data")))){(args$14514=Array.prototype.slice.call($14454$14464,1));return __lt____lt____colon__$12197(target$14256.concat(body$14258),sumloc$14041);}else{(other$14519=$14454$14464);return __lt____lt____colon__$12197(["send",target$14256,__lt____lt____colon__$12197(["data"].concat(body$14258),_b$14257)],sumloc$14041);}}}}}else{return __lt____lt____colon__$12197(result$14297,sumloc$14041);}}else{if(($14036$14201&&(((bridge$14022$14197=$14017$14183[0])),((((bridge$14022$14197 instanceof Array)&&(((t0$14531=bridge$14022$14197.length)),((t0$14531>=2)&&((bridge$14022$14197[0]==="[")&&((commas$14523=Array.prototype.slice.call(bridge$14022$14197,1,-1)),(bridge$14022$14197[(t0$14531-1)]==="]"))))))||((commas$14523=bridge$14022$14197),true))&&($14017$14183[1],commas$14523.every(function(x$14542){return $15324(x$14542,",");})))))){if((op$14043==="[")){(args$14009=args$14009.slice(1,-1));}(args$14009=(((f$14558=function($14562$14565){var other$14594;var t0$14581;var $14567$14576;var ph$14570;(ph$14570=$14562$14565);($14567$14576=ph$14570);if((($14567$14576 instanceof Array)&&(((t0$14581=$14567$14576.length)),((t0$14581===1)&&($14567$14576[0]==="void"))))){return false;}else{(other$14594=$14567$14576);return true;}})),args$14009.filter(f$14558)));(result$14548=((($14600$14608=args$14009)),function(){if((($14604$14615=($14600$14608 instanceof Array))&&(((t0$14613=$14600$14608.length)),(t0$14613===0)))){return ["multi"];}else{if(($14604$14615&&(t0$14613===1))){(x$14628=$14600$14608[0]);if(((!isNaN(sumloc$14041.start))&&(!isNaN(sumloc$14041.end)))){(x$14628["location"]=sumloc$14041);}return x$14628;}else{(other$14639=$14600$14608);return ["multi"].concat(args$14009);}}}()));return __lt____lt____colon__$12197(result$14548,sumloc$14041);}else{if(($14036$14201&&(((t1$14189=$14017$14183[0])),(($14038$14203=(t1$14189 instanceof Array))&&(((t2$14190=t1$14189.length)),((t2$14190>=2)&&((t1$14189[0]==="{")&&((commas$14644=Array.prototype.slice.call(t1$14189,1,-1)),((t1$14189[(t2$14190-1)]==="}")&&($14017$14183[1],commas$14644.every(function(x$14660){return $15324(x$14660,",");}))))))))))){(f$14665=function($14669$14672){var other$14701;var t0$14688;var $14674$14683;var ph$14677;(ph$14677=$14669$14672);($14674$14683=ph$14677);if((($14674$14683 instanceof Array)&&(((t0$14688=$14674$14683.length)),((t0$14688===1)&&($14674$14683[0]==="void"))))){return false;}else{(other$14701=$14674$14683);return true;}});return __lt____lt____colon__$12197(["data"].concat(args$14009.slice(1,-1).filter(f$14665)),sumloc$14041);}else{if(($14038$14203&&(($14040$14205=(t2$14190===1))&&(t1$14189[0]==="WHITE")))){$14017$14183[1];return __lt____lt____colon__$12197(["send"].concat(args$14009),sumloc$14041);}else{if($14040$14205){t1$14189[0];($14026$14710=$14017$14183[1]);(t0$14714=$14026$14710);if((($14030$14722=(t0$14714 instanceof Array))&&(((t1$14715=t0$14714.length)),(($14032$14724=(t1$14715===2))&&(((t2$14716=t0$14714[0])),((t2$14716 instanceof Array)&&(((t3$14717=t2$14716.length)),((t3$14717===1)&&((t2$14716[0]==="void")&&(((t4$14718=t0$14714[1])),((t4$14718 instanceof Array)&&(((t5$14719=t4$14718.length)),((t5$14719===1)&&(t4$14718[0]==="void")))))))))))))){return __lt____lt____colon__$12197(["symbol",op$14043],orig_ops$14042[0]);}else{if($14032$14724){(a$14760=t0$14714[0]);(b$14761=t0$14714[1]);(oloc$14770=orig_ops$14042[0].location);(abloc$14771=__plus____plus____colon__$12198(a$14760,b$14761));(oabloc$14772=__plus____plus____colon__$12198(orig_ops$14042[0],abloc$14771));(rval$14773=__lt____lt____colon__$12197(["send",__lt____lt____colon__$12197(["symbol",op$14043],oloc$14770),__lt____lt____colon__$12197(["data",a$14760,b$14761],abloc$14771)],__plus____plus____colon__$12198(oloc$14770,abloc$14771)));(rval$14773["fromop"]=true);return rval$14773;}else{$14930($14026$14710,"/home/olivier/git/earl-grey/src/parse.eg",17400,17405);}}}else{if($14036$14201){(op_strings$14793=$14017$14183[0]);(args$14794=$14017$14183[1]);(tokens$14800=$15546((((acc$14809=[])),(((temp$14815=$15182(orig_ops$14042))),((($length$14821=temp$14815.length)),((($index$14827=0)),function(){$14804:for(;($index$14827<$length$14821);($index$14827++)){var i$14846;var op$14847;var t0$14841;var t1$14842;var m$14836;(m$14836=temp$14815[$index$14827]);(t0$14841=m$14836);if(((t0$14841 instanceof Array)&&(((t1$14842=t0$14841.length)),(t1$14842===2)))){(i$14846=t0$14841[0]);(op$14847=t0$14841[1]);acc$14809.push([("token"+String((i$14846+1))),op$14847]);}else{$14930(m$14836,"/home/olivier/git/earl-grey/src/parse.eg",17916,18015);}}}()))),acc$14809)));(msg$14801="Mismatched/missing brackets/tokens");throw $14949(["syntax","mismatch"]).create(msg$14801,tokens$14800);}else{$14930($14017$14183);}}}}}}}}}else{(other$14870=$13950$13972);throw $14949(["should_never_happen"]).create("unknown node (B)",({"node":token$13961}));}}}}}});(parse$12213=function(tokens$14877){var next$14881;(next$14881=function(){return tokens$14877.shift();});return oparse$12211(next$14881,eg_order$12205.compare.bind(eg_order$12205),finalize$12212);});(exports["OperatorGroups"]=OperatorGroups$12200);(exports["SimplePriority"]=SimplePriority$12203);(exports["parse"]=parse$12213);(exports["oparse"]=oparse$12211);(exports["finalize"]=finalize$12212);(exports["DONE"]=DONE$12206);(exports["NONE"]=NONE$12207);(exports["LEFT"]=LEFT$12208);(exports["RIGHT"]=RIGHT$12209);(exports["BOTH"]=BOTH$12210);

},{"./location":8}],11:[function(require,module,exports){
var $15849=function(type$15852){var f$15856;(f$15856=type$15852["::check"]);if((f$15856===(void 0))){return function(value$15862){return (value$15862 instanceof type$15852);};}else{return function(value$15866){return f$15856.call(type$15852,value$15866);};}};
var $15868=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $15869=function(dest$15872,values$15873){var k$15878;(k$15878=null);$15876:for(k$15878 in values$15873){if(values$15873.hasOwnProperty(k$15878)){(dest$15872[k$15878]=values$15873[k$15878]);}}return dest$15872;};
var $15886=function($15888$15891){var ph$15897;(ph$15897=$15888$15891);var $15893$15903;($15893$15903=ph$15897);var bridge$15895$15908;var x$15912;(bridge$15895$15908=$15893$15903);if((((typeof(bridge$15895$15908)==="string")&&((x$15912=bridge$15895$15908),true))||((typeof(bridge$15895$15908)==="number")&&((x$15912=bridge$15895$15908),true)))){return ["value",x$15912];}else{var other$15923;(other$15923=$15893$15903);return other$15923["::serialize_ast"]();}};
var send$15623;(send$15623=function(obj$15630,$15627$15631){var ph$15637;var msg$15638;var t0$15640;(t0$15640=$15627$15631);(msg$15638=t0$15640);(ph$15637=t0$15640);var $15633$15649;($15633$15649=ph$15637);var bridge$15635$15654;(bridge$15635$15654=$15633$15649);if(((typeof(bridge$15635$15654)==="string")||(typeof(bridge$15635$15654)==="number"))){return obj$15630[msg$15638];}else{var other$15666;(other$15666=$15633$15649);return obj$15630["::send"](msg$15638);}});(Array[":::project"]=function($15672$15675){var ph$15680;var value$15681;var t0$15683;(t0$15683=$15672$15675);(value$15681=t0$15683);(ph$15680=t0$15683);var $15677$15692;($15677$15692=ph$15680);if($15849(Array)($15677$15692)){return [true,value$15681];}else{$15677$15692;return [true,[value$15681]];}});(Array.prototype["::check"]=function(value$15710){if((value$15710 instanceof Array)){var i$15716;(i$15716=0);$15713:for(;(i$15716<this.length);(i$15716++)){if(($15868(this,i$15716)!==$15868(value$15710,i$15716))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $15869(this.slice(0),this);});(Array.prototype[":::project"]=function(value$15735){if((value$15735 instanceof Array)){var i$15741;(i$15741=0);$15738:for(;(i$15741<this.length);(i$15741++)){if(($15868(this,i$15741)!==$15868(value$15735,i$15741))){return [true,[value$15735]];}}return [true,value$15735.slice(this.length)];}else{return [true,[value$15735]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($15886));});(RegExp.prototype["::check"]=function($15759$15762){var ph$15767;(ph$15767=$15759$15762);var $15764$15773;($15764$15773=ph$15767);var value$15781;if((typeof($15764$15773)==="string")){(value$15781=$15764$15773);if(value$15781.match(this)){return true;}else{return false;}}else{var other$15786;(other$15786=$15764$15773);return false;}});(RegExp.prototype[":::project"]=function($15792$15795){var ph$15800;(ph$15800=$15792$15795);var $15797$15806;($15797$15806=ph$15800);var value$15814;if((typeof($15797$15806)==="string")){(value$15814=$15797$15806);var $15817$15822;($15817$15822=value$15814.match(this));var m$15830;if(($15817$15822===null)){(m$15830=$15817$15822);return [false,null];}else{var m$15835;(m$15835=$15817$15822);return [true,m$15835];}}else{var other$15839;(other$15839=$15797$15806);return [false,null];}});(Function.prototype["::send"]=function(args$15846){return this.apply(this,args$15846);});
var $19851=function($19853$19856,key$19857){var ph$19865;(ph$19865=$19853$19856);var $19859$19871;($19859$19871=ph$19865);var bridge$19861$19876;(bridge$19861$19876=$19859$19871);if(((bridge$19861$19876===null)||(bridge$19861$19876===(void 0)))){return false;}else{var x$19888;if((typeof($19859$19871)==="string")){(x$19888=$19859$19871);return (key$19857 in String.prototype);}else{var x$19893;if((typeof($19859$19871)==="number")){(x$19893=$19859$19871);return (key$19857 in Number.prototype);}else{var x$19898;(x$19898=$19859$19871);return (key$19857 in x$19898);}}}};
var $20133=function(arr$20136){var results$20142;var l$20143;(results$20142=[]);(l$20143=arr$20136.length);var i$20152;(i$20152=0);$20141:for(;(i$20152<l$20143);(i$20152++)){results$20142.push([i$20152,$15868(arr$20136,i$20152)]);}return results$20142;};
var $20159=function(value$20162,url$20163,start$20164,end$20165){var err$20169;(err$20169=$19900(["match"]).create("Could not find a match for value",({"value":value$20162})));if(url$20163){(err$20169["location"]=["location",url$20163,start$20164,end$20165]);}throw err$20169;};
var $19900=function(){var $19901$19907;($19901$19907=function(tags$19912){var it$0$19915;(it$0$19915=function(){if((!$15849($19901$19907)(this))){return Object.create($19901$19907.prototype);}else{return this;}}());(it$0$19915["tags"]=tags$19912);return it$0$19915;});($19901$19907.prototype["create"]=function(){var it$0$19935;var self$19936;(it$0$19935=this);(self$19936=this);var $19933$19945;($19933$19945=arguments);var t0$19950;var message$19954;var args$19955;(t0$19950=$19933$19945.length);if((t0$19950>=0)){(message$19954=function(){if((0>=t0$19950)){return "";}else{return $19933$19945[0];}}());(args$19955=Array.prototype.slice.call($19933$19945,1));var e$19968;(e$19968=Error(message$19954));(e$19968["::tags"]=it$0$19935.tags);(e$19968["args"]=args$19955);var temp$19984;(temp$19984=$20133(args$19955));var $length$19990;($length$19990=temp$19984.length);var $index$19996;($index$19996=0);$19969:for(;($index$19996<$length$19990);($index$19996++)){var m$20005;(m$20005=temp$19984[$index$19996]);var t0$20010;var t1$20011;var i$20015;var arg$20016;(t0$20010=m$20005);if(((t0$20010 instanceof Array)&&(((t1$20011=t0$20010.length)),(t1$20011===2)))){(i$20015=t0$20010[0]);(arg$20016=t0$20010[1]);(e$19968[i$20015]=arg$20016);}else{$20159(m$20005);}}(e$19968["length"]=args$19955.length);(e$19968["name"]=["E"].concat(it$0$19935.tags).join("."));return e$19968;}else{$20159($19933$19945);}});($19901$19907.prototype["::check"]=function(e$20046){var it$0$20050;var self$20051;(it$0$20050=this);(self$20051=this);var tags$20061;if(((!e$20046)||(!$15849(Error)(e$20046)))){return false;}(tags$20061=(e$20046["::tags"]||[]));var temp$20072;(temp$20072=it$0$20050.tags);var $length$20078;($length$20078=temp$20072.length);var $index$20084;($index$20084=0);$20062:for(;($index$20084<$length$20078);($index$20084++)){var m$20093;(m$20093=temp$20072[$index$20084]);var tag$20101;(tag$20101=m$20093);if((tags$20061.indexOf(tag$20101)===-1)){return false;}else{false;}}return true;});($19901$19907.prototype["::deconstruct"]=function(e$20110){var it$0$20114;var self$20115;(it$0$20114=this);(self$20115=this);return e$20110.args;});$15869($19901$19907,$15869(function(){var accum$20126;(accum$20126=({}));(accum$20126["::name"]="$19901");return accum$20126;}(),function(){var accum$20130;(accum$20130=({}));(accum$20130["::egclass"]=true);return accum$20130;}()));return $19901$19907;}();
var $19767=function($19769$19772){var ph$19782;var x$19783;var t0$19785;(t0$19785=$19769$19772);(x$19783=t0$19785);(ph$19782=t0$19785);var $19774$19794;($19774$19794=ph$19782);var bridge$19776$19799;(bridge$19776$19799=$19774$19794);if((function(){var bridge$19777$19809;(bridge$19777$19809=bridge$19776$19799);return (function(){var bridge$19778$19816;(bridge$19778$19816=bridge$19777$19809);return ((bridge$19778$19816===(void 0))||(bridge$19778$19816===null));}()||(typeof(bridge$19777$19809)==="string"));}()||(typeof(bridge$19776$19799)==="number"))){return x$19783;}else{if($19851($19774$19794,"::clone")){$19774$19794["::clone"];return x$19783["::clone"]();}else{$19774$19794;if((Object.getPrototypeOf(x$19783)===Object.prototype)){var dest$19834;(dest$19834=({}));var k$19839;(k$19839=null);$19833:for(k$19839 in x$19783){if(Object.prototype.hasOwnProperty.call(x$19783,k$19839)){(dest$19834[k$19839]=x$19783[k$19839]);}}return dest$19834;}else{var other$19849;(other$19849=$19774$19794);throw $19900(["clone"]).create("Object cannot be cloned",({"obj":x$19783}));}}}};
var $20178=function(a$20181,b$20182){var dest$20187;(dest$20187=$19767(a$20181));var k$20192;(k$20192=null);$20186:for(k$20192 in b$20182){if(Object.prototype.hasOwnProperty.call(b$20182,k$20192)){(dest$20187[k$20192]=b$20182[k$20192]);}}return dest$20187;};
var $20200=Object.keys;
var $20201=function(type$20204){return function(value$20208){var f$20212;(f$20212=type$20204[":::project"]);if((f$20212===(void 0))){(f$20212=type$20204["::project"]);if((f$20212===(void 0))){return [true,type$20204(value$20208)];}else{var rval$20225;(rval$20225=false);try{(rval$20225=[true,f$20212(value$20208)]);}catch(excv$20236){var e$20242;(e$20242=excv$20236);(rval$20225=[false,null]);}return rval$20225;}}else{return f$20212.call(type$20204,value$20208);}};};
var $20248=function(xs$20251,ys$20252){var acc$20259;(acc$20259=[]);var temp$20265;(temp$20265=$20133(xs$20251));var $length$20271;($length$20271=temp$20265.length);var $index$20277;($index$20277=0);$20254:for(;($index$20277<$length$20271);($index$20277++)){var m$20286;(m$20286=temp$20265[$index$20277]);var t0$20291;var t1$20292;var i$20296;var x$20297;(t0$20291=m$20286);if(((t0$20291 instanceof Array)&&(((t1$20292=t0$20291.length)),(t1$20292===2)))){(i$20296=t0$20291[0]);(x$20297=t0$20291[1]);acc$20259.push([x$20297,$15868(ys$20252,i$20296)]);}else{$20159(m$20286);}}return acc$20259;};
var $20312=function(from$20315,to$20316){var rval$20321;(rval$20321=[]);var i$20327;(i$20327=from$20315);$20320:for(;(i$20327<=to$20316);(i$20327++)){rval$20321.push(i$20327);}return rval$20321;};var accum$16915;var accum$16919;var accum$17704;var accum$17708;var $15927$15961;var __lt____gt__$15962;var $15928$15963;var __lt____lt____colon__$15964;var util$15965;var GenSym$15966;var gensym$15967;var neighbours$15968;var classify$15969;var classify_contiguous$15970;var identity$15971;var $15930$15972;var checker_db$15973;var PatternParser$15974;var PatternProcessor$15975;var assemble_conditions$15976;var assemble_pattern$15977;var inject_below_uses$15978;var parse_pattern$15979;var checkall$15980;var same_block$15981;var parse_clauses$15982;var opt_clauses$15983;var weave_clauses$15984;($15927$15961=require("./pp"));(__lt____gt__$15962=$15927$15961["<>"]);($15928$15963=require("./location"));(__lt____lt____colon__$15964=$15928$15963["<<:"]);(util$15965=require("./util"));(GenSym$15966=util$15965.GenSym);(gensym$15967=util$15965.gensym);(neighbours$15968=util$15965.neighbours);(classify$15969=util$15965.classify);(classify_contiguous$15970=util$15965.classify_contiguous);(identity$15971=util$15965.identity);($15930$15972=require("./expand"));(checker_db$15973=$15930$15972.checker_db);(PatternParser$15974=function(scope$16028,pattern$16029,opt$16030){var tags$16046;var it$0$16033;(it$0$16033=function(){if((!$15849(PatternParser$15974)(this))){return Object.create(PatternParser$15974.prototype);}else{return this;}}());(it$0$16033["opt"]=opt$16030);(it$0$16033["arguments"]=[]);(it$0$16033["vars"]=[]);(it$0$16033["specials"]=({}));(tags$16046=$19767((opt$16030.tags||({}))));(tags$16046["group_id"]=(tags$16046.group_id||gensym$15967("group")));(it$0$16033["pattern"]=it$0$16033.expand(scope$16028,pattern$16029,tags$16046,true,it$0$16033.opt.indexable));return it$0$16033;});(PatternParser$15974.prototype["parse_specs"]=function(scope$16070,specs$16071,tags$16072){var $index$16133;var $length$16127;var temp$16121;var acc$16115;var rest$16090;var has_defaults$16091;var rval$16092;var it$0$16076;var self$16077;(it$0$16076=this);(self$16077=this);(rest$16090=(void 0));(has_defaults$16091=false);(rval$16092=classify$15969("fw","bw","keys","defaults",(((acc$16115=[])),(((temp$16121=scope$16070.step_all(["pattern"],specs$16071))),((($length$16127=temp$16121.length)),((($index$16133=0)),function(){$16101:for(;($index$16133<$length$16127);($index$16133++)){var v$16207;var v$16201;var variable$16189;var value$16190;var key$16182;var subp$16183;var key$16176;var variable$16156;var $16109$16150;var $16110$16151;var $16111$16152;var $16112$16153;var t0$16147;var t1$16148;var m$16142;(m$16142=temp$16121[$index$16133]);(t0$16147=m$16142);if((($16110$16151=(t0$16147 instanceof Array))&&(((t1$16148=t0$16147.length)),(($16112$16153=(t1$16148===2))&&(t0$16147[0]==="dynsplice"))))){(variable$16156=t0$16147[1]);acc$16115.push((((rest$16090=it$0$16076.expand(scope$16070,variable$16156,tags$16072))),["ignore"]));}else{if(($16112$16153&&(t0$16147[0]==="assoc"))){(key$16176=t0$16147[1]);acc$16115.push(["keys",[key$16176,it$0$16076.expand(scope$16070,key$16176,tags$16072)]]);}else{if(($16110$16151&&(($16112$16153=(t1$16148===3))&&(t0$16147[0]==="assoc")))){(key$16182=t0$16147[1]);(subp$16183=t0$16147[2]);acc$16115.push(["keys",[key$16182,it$0$16076.expand(scope$16070,subp$16183,tags$16072)]]);}else{if(($16112$16153&&(t0$16147[0]==="default"))){(variable$16189=t0$16147[1]);(value$16190=t0$16147[2]);acc$16115.push((((has_defaults$16091=true)),function(){if(rest$16090){throw $19900(["syntax","pattern"]).create("No default arguments after rest arg.");}else{return ["defaults",[it$0$16076.expand(scope$16070,variable$16189,tags$16072),value$16190]];}}()));}else{(v$16201=m$16142);if(((rest$16090===(void 0))&&(!has_defaults$16091))){acc$16115.push(["fw",it$0$16076.expand(scope$16070,v$16201,tags$16072)]);}else{(v$16207=m$16142);acc$16115.push(["bw",it$0$16076.expand(scope$16070,v$16207,tags$16072)]);}}}}}}}()))),acc$16115)));(rval$16092["rest"]=rest$16090);return rval$16092;});(PatternParser$15974.prototype["expand"]=function(){var x$16307;var x$16317;var x$16346;var x$16352;var variable$16359;var variable$16376;var x$16416;var msg$16424;var msg$16440;var $index$16482;var $length$16476;var temp$16470;var acc$16464;var $index$16615;var $length$16609;var temp$16603;var acc$16597;var $index$16651;var $length$16645;var temp$16639;var t0$16726;var t1$16727;var t2$16728;var $index$16774;var $length$16768;var temp$16762;var acc$16756;var patts$16748;var canon$16512;var normalize$16513;var pps$16514;var vars$16515;var patt$16849;var msg$16895;var other$16891;var keys$16855;var fw$16828;var bw$16829;var defaults$16830;var rest$16831;var $16806$16825;var t0$16818;var t1$16819;var t2$16820;var t3$16821;var t4$16822;var t5$16823;var $16802$16813;var specs$16807;var other$16907;var mode$16901;var subp$16902;var args$16797;var xs$16504;var xs$16456;var x$16446;var f$16430;var arg$16431;var f$16405;var arguments$16406;var checker$16399;var subp$16400;var projector$16393;var subp$16394;var condition$16387;var subp$16388;var v$16382;var v$16365;var type$16324;var $16283$16298;var $16284$16299;var $16285$16300;var $16286$16301;var t0$16294;var bridge$16268$16295;var t1$16296;var $16263$16289;var expr$16256;var rval$16257;var scope$16242;var pattern$16243;var tags$16244;var toplevel$16245;var checked$16246;var t0$16238;var $16221$16233;var it$0$16223;var self$16224;(it$0$16223=this);(self$16224=this);($16221$16233=arguments);(t0$16238=$16221$16233.length);if(((t0$16238>=3)&&(t0$16238<=5))){(scope$16242=$16221$16233[0]);(pattern$16243=$16221$16233[1]);(tags$16244=$16221$16233[2]);(toplevel$16245=function(){if((3>=t0$16238)){return false;}else{return $16221$16233[3];}}());(checked$16246=function(){if((4>=t0$16238)){return false;}else{return $16221$16233[4];}}());(expr$16256=scope$16242.step(["pattern"],pattern$16243));(rval$16257=((($16263$16289=expr$16256)),function(){if((((x$16307=$16263$16289)),((x$16307 instanceof Array)&&(x$16307[0]==="void")))){return ["check",checker_db$15973.null,["ignore"]];}else{if((((x$16317=$16263$16289)),((x$16317 instanceof Array)&&(x$16317[0]==="ignore")))){return expr$16256;}else{if((($16263$16289 instanceof Array)&&(((t0$16294=$16263$16289.length)),((t0$16294===2)&&($16263$16289[0]==="special"))))){(type$16324=$16263$16289[1]);(it$0$16223.specials[type$16324]=true);return expr$16256;}else{(bridge$16268$16295=$16263$16289);if(((((x$16346=bridge$16268$16295)),((x$16346 instanceof Array)&&(x$16346[0]==="symbol")))||(((x$16352=bridge$16268$16295)),((x$16352 instanceof Array)&&(x$16352[0]==="variable"))))){(variable$16359=$20178(expr$16256,tags$16244));it$0$16223.vars.push(variable$16359);return ["assign",variable$16359];}else{if((($16283$16298=($16263$16289 instanceof Array))&&(((t0$16294=$16263$16289.length)),(($16285$16300=(t0$16294===2))&&(($16286$16301=($16263$16289[0]==="value"))&&((v$16365=$16263$16289[1]),it$0$16223.opt.strings_as_variables)))))){(variable$16376=__lt____lt____colon__$15964($20178(["symbol",v$16365],tags$16244),expr$16256));it$0$16223.vars.push(variable$16376);return ["assign",variable$16376];}else{if($16286$16301){(v$16382=$16263$16289[1]);return ["check",checker_db$15973(v$16382),["ignore"]];}else{if(($16283$16298&&(($16285$16300=(t0$16294===3))&&($16263$16289[0]==="test")))){(condition$16387=$16263$16289[1]);(subp$16388=$16263$16289[2]);return ["test",condition$16387,it$0$16223.expand(scope$16242,subp$16388,tags$16244,toplevel$16245,false)];}else{if(($16285$16300&&($16263$16289[0]==="project"))){(projector$16393=$16263$16289[1]);(subp$16394=$16263$16289[2]);return ["project",projector$16393,it$0$16223.expand(scope$16242,subp$16394,tags$16244,toplevel$16245,true)];}else{if(($16285$16300&&($16263$16289[0]==="check"))){(checker$16399=$16263$16289[1]);(subp$16400=$16263$16289[2]);return ["check",checker$16399,it$0$16223.expand(scope$16242,subp$16400,tags$16244,toplevel$16245,true)];}else{if(($16285$16300&&(($16286$16301=($16263$16289[0]==="send"))&&((f$16405=$16263$16289[1]),(((t1$16296=$16263$16289[2])),(((x$16416=t1$16296)),((x$16416 instanceof Array)&&(x$16416[0]==="data")))))))){(arguments$16406=t1$16296);if(toplevel$16245){it$0$16223.arguments.unshift(arguments$16406);return it$0$16223.expand(scope$16242,f$16405,tags$16244,true,false);}else{(msg$16424="Function arguments can only be declared as a top level pattern.");throw $19900(["syntax","pattern"]).create(msg$16424,({"node":expr$16256,"arg":arguments$16406}));}}else{if($16286$16301){(f$16430=$16263$16289[1]);(arg$16431=$16263$16289[2]);return ["assign",expr$16256];}else{$16263$16289;if((!it$0$16223.opt.allow_nested)){(msg$16440="Nested patterns are not allowed here.");throw $19900(["syntax","pattern"]).create(msg$16440,({"node":expr$16256}));}else{if((($16283$16298=($16263$16289 instanceof Array))&&(((t0$16294=$16263$16289.length)),((t0$16294===2)&&($16263$16289[0]==="neg"))))){(x$16446=$16263$16289[1]);return ["neg",it$0$16223.expand(scope$16242,x$16446,tags$16244)];}else{if(($16283$16298&&(($16285$16300=(t0$16294>=1))&&($16263$16289[0]==="all")))){(xs$16456=Array.prototype.slice.call($16263$16289,1));return ["all"].concat((((acc$16464=[])),(((temp$16470=xs$16456)),((($length$16476=temp$16470.length)),((($index$16482=0)),function(){$16459:for(;($index$16482<$length$16476);($index$16482++)){var x$16499;var m$16491;(m$16491=temp$16470[$index$16482]);(x$16499=m$16491);acc$16464.push(it$0$16223.expand(scope$16242,x$16499,tags$16244));}}()))),acc$16464));}else{if(($16285$16300&&($16263$16289[0]==="any"))){(xs$16504=Array.prototype.slice.call($16263$16289,1));(canon$16512=function(all$16523){return all$16523.sort().join(",");});(normalize$16513=function(vars$16530){var $index$16555;var $length$16549;var temp$16543;var acc$16537;return canon$16512((((acc$16537=[])),(((temp$16543=vars$16530)),((($length$16549=temp$16543.length)),((($index$16555=0)),function(){$16532:for(;($index$16555<$length$16549);($index$16555++)){var v$16574;var t0$16569;var t1$16570;var m$16564;(m$16564=temp$16543[$index$16555]);(t0$16569=m$16564);if(((t0$16569 instanceof Array)&&(((t1$16570=t0$16569.length)),((t1$16570===2)&&(t0$16569[0]==="symbol"))))){(v$16574=t0$16569[1]);acc$16537.push(v$16574);}else{$20159(m$16564,"/home/olivier/git/earl-grey/src/pattern.eg",3845,3902);}}}()))),acc$16537));});(pps$16514=(((acc$16597=[])),(((temp$16603=xs$16504)),((($length$16609=temp$16603.length)),((($index$16615=0)),function(){$16592:for(;($index$16615<$length$16609);($index$16615++)){var x$16632;var m$16624;(m$16624=temp$16603[$index$16615]);(x$16632=m$16624);acc$16597.push(PatternParser$15974(scope$16242,x$16632,$20178(it$0$16223.opt,({"tags":tags$16244}))));}}()))),acc$16597));(temp$16639=neighbours$15968(pps$16514));($length$16645=temp$16639.length);($index$16651=0);$16516:for(;($index$16651<$length$16645);($index$16651++)){var $index$16702;var $length$16696;var temp$16690;var pp1$16670;var pp2$16671;var t0$16665;var t1$16666;var m$16660;(m$16660=temp$16639[$index$16651]);(t0$16665=m$16660);if(((t0$16665 instanceof Array)&&(((t1$16666=t0$16665.length)),(t1$16666===2)))){(pp1$16670=t0$16665[0]);(pp2$16671=t0$16665[1]);(temp$16690=pps$16514);($length$16696=temp$16690.length);($index$16702=0);$16684:for(;($index$16702<$length$16696);($index$16702++)){var pp$16719;var m$16711;(m$16711=temp$16690[$index$16702]);(pp$16719=m$16711);normalize$16513(pp$16719.vars);}if((normalize$16513(pp1$16670.vars)!==normalize$16513(pp2$16671.vars))){throw $19900(["syntax","pattern"]).create("Both branches of 'or' must contain the same variables",({"vars1":__lt____lt____colon__$15964(pp1$16670.vars.sort(),pp1$16670.pattern),"vars2":__lt____lt____colon__$15964(pp2$16671.vars.sort(),pp2$16671.pattern)}));}if((canon$16512($20200(pp1$16670.specials))!==canon$16512($20200(pp2$16671.specials)))){throw $19900(["syntax","pattern"]).create("Both branches of 'or' must contain the same special tokens",({"special1":__lt____lt____colon__$15964($20200(pp1$16670.specials).sort(),pp1$16670.pattern),"special2":__lt____lt____colon__$15964($20200(pp2$16671.specials).sort(),pp2$16671.pattern)}));}}else{$20159(m$16660,"/home/olivier/git/earl-grey/src/pattern.eg",3994,4791);}}(t0$16726=pps$16514);if(((t0$16726 instanceof Array)&&(((t1$16727=t0$16726.length)),((t1$16727>=1)&&(((t2$16728=t0$16726[0])),$19851(t2$16728,"vars")))))){(vars$16515=t2$16728.vars);Array.prototype.slice.call(t0$16726,1);}else{$20159(pps$16514,"/home/olivier/git/earl-grey/src/pattern.eg",4808,4811);}(it$0$16223["vars"]=it$0$16223.vars.concat(vars$16515));(patts$16748=(((acc$16756=[])),(((temp$16762=pps$16514)),((($length$16768=temp$16762.length)),((($index$16774=0)),function(){$16751:for(;($index$16774<$length$16768);($index$16774++)){var pp$16791;var m$16783;(m$16783=temp$16762[$index$16774]);(pp$16791=m$16783);acc$16756.push(pp$16791.pattern);}}()))),acc$16756));return ["any"].concat(patts$16748);}else{if(($16285$16300&&($16263$16289[0]==="data"))){(args$16797=Array.prototype.slice.call($16263$16289,1));(specs$16807=it$0$16223.parse_specs(scope$16242,args$16797,tags$16244));($16802$16813=specs$16807);if((($16806$16825=$19851($16802$16813,"keys"))&&(((t0$16818=$16802$16813.keys)),((t0$16818 instanceof Array)&&(((t1$16819=t0$16818.length)),((t1$16819===0)&&($19851($16802$16813,"fw")&&((fw$16828=$16802$16813.fw),($19851($16802$16813,"bw")&&((bw$16829=$16802$16813.bw),($19851($16802$16813,"defaults")&&((defaults$16830=$16802$16813.defaults),$19851($16802$16813,"rest"))))))))))))){(rest$16831=$16802$16813.rest);(patt$16849=__lt____lt____colon__$15964(["array_pattern",fw$16828,bw$16829,defaults$16830,rest$16831],pattern$16243));if(checked$16246){return patt$16849;}else{return ["check",checker_db$15973.Array,patt$16849];}}else{if(($16806$16825&&((keys$16855=$16802$16813.keys),($19851($16802$16813,"fw")&&(((t0$16818=$16802$16813.fw)),((t0$16818 instanceof Array)&&(((t1$16819=t0$16818.length)),((t1$16819===0)&&($19851($16802$16813,"bw")&&(((t2$16820=$16802$16813.bw)),((t2$16820 instanceof Array)&&(((t3$16821=t2$16820.length)),((t3$16821===0)&&($19851($16802$16813,"defaults")&&(((t4$16822=$16802$16813.defaults)),((t4$16822 instanceof Array)&&(((t5$16823=t4$16822.length)),((t5$16823===0)&&($19851($16802$16813,"rest")&&($16802$16813.rest===(void 0))))))))))))))))))))){return ["object_pattern"].concat(keys$16855);}else{(other$16891=$16802$16813);(msg$16895="Pattern must be an array or an object.");throw $19900(["syntax","pattern"]).create(msg$16895,({"node":expr$16256,"specs":specs$16807}));}}}else{if(($16283$16298&&((t0$16294===3)&&($16263$16289[0]==="mode")))){(mode$16901=$16263$16289[1]);(subp$16902=$16263$16289[2]);return it$0$16223.expand(scope$16242,subp$16902,$20178(tags$16244,({"declare_mode":mode$16901})),toplevel$16245,checked$16246);}else{(other$16907=$16263$16289);throw $19900(["syntax","pattern"]).create("Illegal pattern",({"node":other$16907}));}}}}}}}}}}}}}}}}}}()));return (it$0$16223.opt.wrap_pattern||identity$15971)(__lt____lt____colon__$15964(rval$16257,pattern$16243),toplevel$16245);}else{$20159($16221$16233);}});$15869(PatternParser$15974,$15869(((accum$16915=({})),((accum$16915["::name"]="PatternParser"),accum$16915)),((accum$16919=({})),((accum$16919["::egclass"]=true),accum$16919))));PatternParser$15974;(PatternProcessor$15975=function(){var it$0$16928;(it$0$16928=function(){if((!$15849(PatternProcessor$15975)(this))){return Object.create(PatternProcessor$15975.prototype);}else{return this;}}());(it$0$16928["temps"]=[]);(it$0$16928["parts"]=[]);(it$0$16928["gen"]=GenSym$15966("t"));return it$0$16928;});(PatternProcessor$15975.prototype["do"]=function(part$16952){var it$0$16956;var self$16957;(it$0$16956=this);(self$16957=this);return it$0$16956.parts.push(["do",part$16952]);});(PatternProcessor$15975.prototype["check"]=function(){var part$16993;var tags$16994;var t0$16989;var $16972$16984;var it$0$16974;var self$16975;(it$0$16974=this);(self$16975=this);($16972$16984=arguments);(t0$16989=$16972$16984.length);if(((t0$16989>=1)&&(t0$16989<=2))){(part$16993=$16972$16984[0]);(tags$16994=function(){if((1>=t0$16989)){return ({});}else{return $16972$16984[1];}}());return it$0$16974.parts.push($20178(["check",part$16993],tags$16994));}else{$20159($16972$16984);}});(PatternProcessor$15975.prototype["temp"]=function(){var x$17061;var x$17067;var init$17074;var bridge$17041$17050;var $17039$17045;var x$17031;var v$17032;var t0$17027;var $17010$17022;var it$0$17012;var self$17013;(it$0$17012=this);(self$17013=this);($17010$17022=arguments);(t0$17027=$17010$17022.length);if(((t0$17027>=1)&&(t0$17027<=2))){(x$17031=$17010$17022[0]);(v$17032=function(){if((1>=t0$17027)){return null;}else{return $17010$17022[1];}}());($17039$17045=x$17031);(bridge$17041$17050=$17039$17045);if((((((x$17061=bridge$17041$17050)),((x$17061 instanceof Array)&&(x$17061[0]==="variable")))||(((x$17067=bridge$17041$17050)),((x$17067 instanceof Array)&&(x$17067[0]==="symbol"))))&&($19851($17039$17045,"single_assignment")&&($17039$17045.single_assignment&&(!v$17032))))){return x$17031;}else{(init$17074=$17039$17045);(v$17032=(v$17032||["symbol",it$0$17012.gen()]));(v$17032["single_assignment"]=true);it$0$17012.temps.push(v$17032);it$0$17012.do(["send",["symbol","="],["data",["send",["symbol","set"],v$17032],init$17074]]);return v$17032;}}else{$20159($17010$17022);}});(PatternProcessor$15975.prototype["process"]=function(pattern$17091,rhs$17092,fns$17093){var x$17146;var x$17180;var t$17193;var t$17205;var pp$17216;var $index$17249;var $length$17243;var temp$17237;var t$17227;var $index$17317;var $length$17311;var temp$17305;var acc$17299;var fn$17282;var parts$17283;var t$17275;var $index$17378;var $length$17372;var temp$17366;var acc$17360;var t$17351;var otherwise$17511;var $17489$17495;var $index$17528;var $length$17522;var temp$17516;var $index$17577;var $length$17571;var temp$17565;var end$17639;var pos$17633;var $index$17663;var $length$17657;var temp$17651;var acc$17645;var nfw$17444;var nbw$17445;var ndflt$17446;var extract_length$17447;var check_length$17448;var lo$17449;var hi$17450;var t$17451;var len$17452;var fw$17428;var bw$17429;var dflt$17430;var rest$17431;var subp$17346;var xs$17270;var xs$17222;var patt$17211;var projector$17199;var subp$17200;var checker$17187;var subp$17188;var checker$17175;var condition$17168;var subp$17169;var kind$17163;var sym$17153;var $17124$17137;var $17125$17138;var $17126$17139;var $17127$17140;var t0$17135;var $17111$17130;var rval$17108;var it$0$17097;var self$17098;(it$0$17097=this);(self$17098=this);(rval$17108=((($17111$17130=pattern$17091)),function(){if((((x$17146=$17111$17130)),((x$17146 instanceof Array)&&(x$17146[0]==="ignore")))){return it$0$17097.do(rhs$17092);}else{if((($17124$17137=($17111$17130 instanceof Array))&&(((t0$17135=$17111$17130.length)),(($17126$17139=(t0$17135===2))&&($17111$17130[0]==="assign"))))){(sym$17153=$17111$17130[1]);return it$0$17097.parts.push(fns$17093.assign(sym$17153,rhs$17092));}else{if(($17126$17139&&($17111$17130[0]==="special"))){(kind$17163=$17111$17130[1]);return it$0$17097.process(fns$17093.special(pattern$17091,rhs$17092),rhs$17092,fns$17093);}else{if(($17124$17137&&(($17126$17139=(t0$17135===3))&&($17111$17130[0]==="test")))){(condition$17168=$17111$17130[1]);(subp$17169=$17111$17130[2]);it$0$17097.process(subp$17169,rhs$17092,fns$17093);return it$0$17097.check(condition$17168,({"test":true}));}else{if(($17126$17139&&(($17127$17140=($17111$17130[0]==="check"))&&((checker$17175=$17111$17130[1]),(((x$17180=$17111$17130[2])),((x$17180 instanceof Array)&&(x$17180[0]==="ignore"))))))){return it$0$17097.check(["send",checker$17175,["data",rhs$17092]]);}else{if($17127$17140){(checker$17187=$17111$17130[1]);(subp$17188=$17111$17130[2]);(t$17193=it$0$17097.temp(rhs$17092));it$0$17097.check(["send",checker$17187,["data",t$17193]]);return it$0$17097.process(subp$17188,t$17193,fns$17093);}else{if(($17126$17139&&($17111$17130[0]==="project"))){(projector$17199=$17111$17130[1]);(subp$17200=$17111$17130[2]);(t$17205=it$0$17097.temp(["send",projector$17199,["data",rhs$17092]]));it$0$17097.check(["send",t$17205,["value",0]]);return it$0$17097.process(subp$17200,["send",t$17205,["value",1]],fns$17093);}else{if(($17124$17137&&((t0$17135===2)&&($17111$17130[0]==="neg")))){(patt$17211=$17111$17130[1]);return it$0$17097.check(["send",["symbol","not"],["data",["void"],(((pp$17216=PatternProcessor$15975())),pp$17216.process(patt$17211,rhs$17092,fns$17093),assemble_conditions$15976(pp$17216))]]);}else{if(($17124$17137&&(($17126$17139=(t0$17135>=1))&&($17111$17130[0]==="all")))){(xs$17222=Array.prototype.slice.call($17111$17130,1));(t$17227=it$0$17097.temp(rhs$17092));(temp$17237=xs$17222);($length$17243=temp$17237.length);($index$17249=0);$17228:for(;($index$17249<$length$17243);($index$17249++)){var x$17266;var m$17258;(m$17258=temp$17237[$index$17249]);(x$17266=m$17258);it$0$17097.process(x$17266,t$17227,fns$17093);}return null;}else{if(($17126$17139&&($17111$17130[0]==="any"))){(xs$17270=Array.prototype.slice.call($17111$17130,1));(t$17275=it$0$17097.temp(rhs$17092,["symbol",gensym$15967("bridge")]));return it$0$17097.check((((fn$17282=function(x$17288,rest$17289){return ["send",["symbol","or"],["data",x$17288,rest$17289]];})),((parts$17283=(((acc$17299=[])),(((temp$17305=xs$17270)),((($length$17311=temp$17305.length)),((($index$17317=0)),function(){$17294:for(;($index$17317<$length$17311);($index$17317++)){var pp$17339;var x$17334;var m$17326;(m$17326=temp$17305[$index$17317]);(x$17334=m$17326);acc$17299.push((((pp$17339=PatternProcessor$15975())),pp$17339.process(x$17334,t$17275,fns$17093),assemble_conditions$15976(pp$17339)));}}()))),acc$17299))),util$15965.construct(parts$17283,fn$17282,["symbol","false"])));}else{if(($17126$17139&&($17111$17130[0]==="object_pattern"))){(subp$17346=Array.prototype.slice.call($17111$17130,1));(t$17351=it$0$17097.temp(rhs$17092));(acc$17360=[]);(temp$17366=subp$17346);($length$17372=temp$17366.length);($index$17378=0);$17352:for(;($index$17378<$length$17372);($index$17378++)){var k$17399;var v$17400;var t0$17392;var t1$17393;var t2$17394;var t3$17395;var m$17387;(m$17387=temp$17366[$index$17378]);(t0$17392=m$17387);if(((t0$17392 instanceof Array)&&(((t1$17393=t0$17392.length)),((t1$17393===2)&&(((t2$17394=t0$17392[0])),((t2$17394 instanceof Array)&&(((t3$17395=t2$17394.length)),((t3$17395===2)&&(t2$17394[0]==="value"))))))))){(k$17399=t2$17394[1]);(v$17400=t0$17392[1]);acc$17360.push((it$0$17097.check(["send",["symbol","___hasprop"],["data",t$17351,["value",k$17399]]]),it$0$17097.process(v$17400,["send",t$17351,["value",k$17399]],fns$17093)));}else{$20159(m$17387,"/home/olivier/git/earl-grey/src/pattern.eg",8140,8272);}}return acc$17360;}else{if(($17124$17137&&((t0$17135===5)&&($17111$17130[0]==="array_pattern")))){(fw$17428=$17111$17130[1]);(bw$17429=$17111$17130[2]);(dflt$17430=$17111$17130[3]);(rest$17431=$17111$17130[4]);(nfw$17444=fw$17428.length);(nbw$17445=bw$17429.length);(ndflt$17446=dflt$17430.length);(extract_length$17447=true);(check_length$17448=true);(lo$17449=(nfw$17444+nbw$17445));(hi$17450=(lo$17449+ndflt$17446));(t$17451=it$0$17097.temp(rhs$17092));(len$17452=it$0$17097.temp(["send",t$17451,["send",["symbol","."],["data",["void"],["symbol","length"]]]]));it$0$17097.check(((($17489$17495=rest$17431)),function(){if($17489$17495){return ["send",["symbol",">="],["data",len$17452,["value",lo$17449]]];}else{$17489$17495;if((lo$17449===hi$17450)){return ["send",["symbol","==="],["data",len$17452,["value",lo$17449]]];}else{(otherwise$17511=$17489$17495);return ["send",["symbol","and"],["data",["send",["symbol",">="],["data",len$17452,["value",lo$17449]]],["send",["symbol","<="],["data",len$17452,["value",hi$17450]]]]];}}}()));(temp$17516=$20133(fw$17428));($length$17522=temp$17516.length);($index$17528=0);$17453:for(;($index$17528<$length$17522);($index$17528++)){var i$17547;var m$17548;var t0$17542;var t1$17543;var m$17537;(m$17537=temp$17516[$index$17528]);(t0$17542=m$17537);if(((t0$17542 instanceof Array)&&(((t1$17543=t0$17542.length)),(t1$17543===2)))){(i$17547=t0$17542[0]);(m$17548=t0$17542[1]);it$0$17097.process(m$17548,["send",t$17451,["value",i$17547]],fns$17093);}else{$20159(m$17537,"/home/olivier/git/earl-grey/src/pattern.eg",9004,9090);}}(temp$17565=$20133(dflt$17430));($length$17571=temp$17565.length);($index$17577=0);$17456:for(;($index$17577<$length$17571);($index$17577++)){var idx$17625;var i$17598;var patt$17599;var value$17600;var t0$17591;var t1$17592;var t2$17593;var t3$17594;var m$17586;(m$17586=temp$17565[$index$17577]);(t0$17591=m$17586);if(((t0$17591 instanceof Array)&&(((t1$17592=t0$17591.length)),((t1$17592===2)&&((i$17598=t0$17591[0]),(((t2$17593=t0$17591[1])),((t2$17593 instanceof Array)&&(((t3$17594=t2$17593.length)),(t3$17594===2))))))))){(patt$17599=t2$17593[0]);(value$17600=t2$17593[1]);(idx$17625=(i$17598+nfw$17444));it$0$17097.process(patt$17599,["send",["symbol","if"],["data",["send",["symbol",">="],["data",["value",(idx$17625+nbw$17445)],len$17452]],value$17600,["send",t$17451,["value",idx$17625]]]],fns$17093);}else{$20159(m$17586,"/home/olivier/git/earl-grey/src/pattern.eg",9090,9259);}}if((rest$17431!==(void 0))){(pos$17633=(nfw$17444+ndflt$17446));(end$17639=function(){if((nbw$17445>0)){return [["value",(-nbw$17445)]];}else{return [];}}());it$0$17097.process(rest$17431,["send",["send",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["send",["symbol","."],["data",["void"],["symbol","slice"]]]],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",t$17451,["value",pos$17633]].concat(end$17639)],fns$17093);}else{[];}(acc$17645=[]);(temp$17651=$20133(bw$17429));($length$17657=temp$17651.length);($index$17663=0);$17459:for(;($index$17663<$length$17657);($index$17663++)){var i$17682;var m$17683;var t0$17677;var t1$17678;var m$17672;(m$17672=temp$17651[$index$17663]);(t0$17677=m$17672);if(((t0$17677 instanceof Array)&&(((t1$17678=t0$17677.length)),(t1$17678===2)))){(i$17682=t0$17677[0]);(m$17683=t0$17677[1]);acc$17645.push(it$0$17097.process(m$17683,["send",["symbol","___js_fetch"],["data",t$17451,["send",["symbol","-"],["data",len$17452,["value",(nbw$17445-i$17682)]]]]],fns$17093));}else{$20159(m$17672,"/home/olivier/git/earl-grey/src/pattern.eg",9710,9861);}}return acc$17645;}else{$20159($17111$17130);}}}}}}}}}}}}}()));return rval$17108;});$15869(PatternProcessor$15975,$15869(((accum$17704=({})),((accum$17704["::name"]="PatternProcessor"),accum$17704)),((accum$17708=({})),((accum$17708["::egclass"]=true),accum$17708))));PatternProcessor$15975;(assemble_conditions$15976=function(pp$17715){var $index$17839;var $length$17833;var temp$17827;var acc$17821;var decls$17813;var construct$17719;(construct$17719=function($17723$17726){var x$17794;var rest$17795;var x$17779;var x$17763;var rest$17764;var $17733$17750;var $17734$17751;var t0$17746;var t1$17747;var t2$17748;var $17728$17741;var ph$17735;(ph$17735=$17723$17726);($17728$17741=ph$17735);if((($17733$17750=($17728$17741 instanceof Array))&&(((t0$17746=$17728$17741.length)),(t0$17746===0)))){return ["value",true];}else{if(($17733$17750&&((t0$17746>=1)&&(((t1$17747=$17728$17741[0])),((t1$17747 instanceof Array)&&(((t2$17748=t1$17747.length)),((t2$17748===2)&&(t1$17747[0]==="do")))))))){(x$17763=t1$17747[1]);(rest$17764=Array.prototype.slice.call($17728$17741,1));return ["multi",x$17763,construct$17719(rest$17764)];}else{if(($17733$17750&&((t0$17746===1)&&(((t1$17747=$17728$17741[0])),((t1$17747 instanceof Array)&&(((t2$17748=t1$17747.length)),((t2$17748===2)&&(t1$17747[0]==="check")))))))){(x$17779=t1$17747[1]);return x$17779;}else{if(($17733$17750&&((t0$17746>=1)&&(((t1$17747=$17728$17741[0])),((t1$17747 instanceof Array)&&(((t2$17748=t1$17747.length)),((t2$17748===2)&&(t1$17747[0]==="check")))))))){(x$17794=t1$17747[1]);(rest$17795=Array.prototype.slice.call($17728$17741,1));return ["send",["symbol","and"],["data",x$17794,construct$17719(rest$17795)]];}else{$20159($17728$17741);}}}}});if(pp$17715.temps.length){(decls$17813=(((acc$17821=[])),(((temp$17827=pp$17715.temps)),((($length$17833=temp$17827.length)),((($index$17839=0)),function(){$17816:for(;($index$17839<$length$17833);($index$17839++)){var t$17856;var m$17848;(m$17848=temp$17827[$index$17839]);(t$17856=m$17848);acc$17821.push(["declare",t$17856]);}}()))),acc$17821));return ["multi"].concat(decls$17813).concat([construct$17719(pp$17715.parts)]);}else{return construct$17719(pp$17715.parts);}});(assemble_pattern$15977=function(){var $index$17928;var $length$17922;var temp$17916;var $index$17989;var $length$17983;var temp$17977;var test$18128;var lead$17891;var trail$17892;var construct$17893;var parts$17878;var t$17879;var f$17880;var t0$17874;var $17865$17869;($17865$17869=arguments);(t0$17874=$17865$17869.length);if(((t0$17874>=2)&&(t0$17874<=3))){(parts$17878=$17865$17869[0]);(t$17879=$17865$17869[1]);(f$17880=function(){if((2>=t0$17874)){return null;}else{return $17865$17869[2];}}());(lead$17891=[]);(temp$17916=parts$17878.slice(0));($length$17922=temp$17916.length);($index$17928=0);$17894:for(;($index$17928<$length$17922);($index$17928++)){var x$17966;var x$17951;var $17898$17945;var $17899$17946;var $17900$17947;var $17901$17948;var t0$17942;var t1$17943;var m$17937;(m$17937=temp$17916[$index$17928]);(t0$17942=m$17937);if((($17899$17946=(t0$17942 instanceof Array))&&(((t1$17943=t0$17942.length)),(($17901$17948=(t1$17943===2))&&(t0$17942[0]==="do"))))){(x$17951=t0$17942[1]);lead$17891.push(x$17951);parts$17878.shift();}else{if(($17901$17948&&(t0$17942[0]==="check"))){(x$17966=t0$17942[1]);break $17894;}else{$20159(m$17937,"/home/olivier/git/earl-grey/src/pattern.eg",10322,10432);}}}(trail$17892=[]);(temp$17977=parts$17878.slice(0).reverse());($length$17983=temp$17977.length);($index$17989=0);$17902:for(;($index$17989<$length$17983);($index$17989++)){var x$18027;var x$18012;var $17906$18006;var $17907$18007;var $17908$18008;var $17909$18009;var t0$18003;var t1$18004;var m$17998;(m$17998=temp$17977[$index$17989]);(t0$18003=m$17998);if((($17907$18007=(t0$18003 instanceof Array))&&(((t1$18004=t0$18003.length)),(($17909$18009=(t1$18004===2))&&(t0$18003[0]==="do"))))){(x$18012=t0$18003[1]);trail$17892.unshift(x$18012);parts$17878.pop();}else{if(($17909$18009&&(t0$18003[0]==="check"))){(x$18027=t0$18003[1]);break $17902;}else{$20159(m$17998,"/home/olivier/git/earl-grey/src/pattern.eg",10446,10568);}}}(construct$17893=function($18035$18038){var other$18123;var x$18107;var rest$18108;var x$18092;var x$18076;var rest$18077;var $18046$18063;var $18047$18064;var t0$18059;var t1$18060;var t2$18061;var $18040$18054;var ph$18048;(ph$18048=$18035$18038);($18040$18054=ph$18048);if((($18046$18063=($18040$18054 instanceof Array))&&(((t0$18059=$18040$18054.length)),(t0$18059===0)))){return ["value",true];}else{if(($18046$18063&&((t0$18059>=1)&&(((t1$18060=$18040$18054[0])),((t1$18060 instanceof Array)&&(((t2$18061=t1$18060.length)),((t2$18061===2)&&(t1$18060[0]==="do")))))))){(x$18076=t1$18060[1]);(rest$18077=Array.prototype.slice.call($18040$18054,1));return ["multi",x$18076,construct$17893(rest$18077)];}else{if(($18046$18063&&((t0$18059===1)&&(((t1$18060=$18040$18054[0])),((t1$18060 instanceof Array)&&(((t2$18061=t1$18060.length)),((t2$18061===2)&&(t1$18060[0]==="check")))))))){(x$18092=t1$18060[1]);return x$18092;}else{if(($18046$18063&&((t0$18059>=1)&&(((t1$18060=$18040$18054[0])),((t1$18060 instanceof Array)&&(((t2$18061=t1$18060.length)),((t2$18061===2)&&(t1$18060[0]==="check")))))))){(x$18107=t1$18060[1]);(rest$18108=Array.prototype.slice.call($18040$18054,1));return ["send",["symbol","and"],["data",x$18107,construct$17893(rest$18108)]];}else{(other$18123=$18040$18054);throw $19900(["oops"]).create("?!?",other$18123);}}}}});if(parts$17878.length){(test$18128=construct$17893(parts$17878));return ["multi"].concat(lead$17891).concat([function(){if(f$17880){return ["send",["symbol","if"],["data",test$18128,["multi"].concat(trail$17892).concat([t$17879]),f$17880]];}else{return ["send",["symbol","if"],["data",test$18128,["multi"].concat(trail$17892).concat([t$17879])]];}}()]);}else{return ["multi"].concat(lead$17891).concat(trail$17892).concat([t$17879]);}}else{$20159($17865$17869);}});(inject_below_uses$15978=function($18138$18141,fn$18142){var other$18173;var scope$18162;var x$18163;var t0$18158;var $18144$18153;var ph$18147;(ph$18147=$18138$18141);($18144$18153=ph$18147);if((($18144$18153 instanceof Array)&&(((t0$18158=$18144$18153.length)),((t0$18158===3)&&($18144$18153[0]==="use"))))){(scope$18162=$18144$18153[1]);(x$18163=$18144$18153[2]);return ["use",scope$18162,inject_below_uses$15978(x$18163,fn$18142)];}else{(other$18173=$18144$18153);return fn$18142(other$18173);}});(parse_pattern$15979=function(scope$18180,pattern$18181,rhs$18182,opt$18183){var t0$18197;var $index$18249;var $length$18243;var temp$18237;var acc$18231;var parse$18189;var target$18190;var proc$18191;(parse$18189=PatternParser$15974(scope$18180,pattern$18181,opt$18183));if(((!opt$18183.allow_arguments)&&parse$18189.arguments.length)){throw $19900(["syntax","pattern","arguments"]).create("Arguments cannot be declared in this pattern",({"args":parse$18189.arguments[0]}));}(t0$18197=$20201((opt$18183.wrap_target||identity$15971))(function(){if(parse$18189.arguments.length){return inject_below_uses$15978(rhs$18182,function(x$18204){return util$15965.construct(parse$18189.arguments.concat([x$18204]),function(args$18208,rest$18209){return ["send",["symbol","->"],["data",args$18208,rest$18209]];});});}else{return rhs$18182;}}()));if(t0$18197[0]){(target$18190=t0$18197[1]);}else{$20159(function(){if(parse$18189.arguments.length){return inject_below_uses$15978(rhs$18182,function(x$18216){return util$15965.construct(parse$18189.arguments.concat([x$18216]),function(args$18220,rest$18221){return ["send",["symbol","->"],["data",args$18220,rest$18221]];});});}else{return rhs$18182;}}(),"/home/olivier/git/earl-grey/src/pattern.eg",11961,12394);}(proc$18191=PatternProcessor$15975());proc$18191.process(parse$18189.pattern,target$18190,opt$18183);if(opt$18183.finalize){return ["splice"].concat(opt$18183.declare(scope$18180,parse$18189.vars)).concat([["multi"].concat((((acc$18231=[])),(((temp$18237=proc$18191.temps)),((($length$18243=temp$18237.length)),((($index$18249=0)),function(){$18226:for(;($index$18249<$length$18243);($index$18249++)){var t$18266;var m$18258;(m$18258=temp$18237[$index$18249]);(t$18266=m$18258);acc$18231.push(["declare",t$18266]);}}()))),acc$18231)).concat([assemble_pattern$15977(proc$18191.parts,opt$18183.success(target$18190),opt$18183.failure(target$18190))])]);}else{return [parse$18189.vars,proc$18191.temps,proc$18191.parts];}});(checkall$15980=["send","data","multi","assign","void","check","do"]);(same_block$15981=function($18276$18279,ban1$18280,ban2$18281){var $index$18445;var $length$18439;var temp$18433;var other$18467;var type1$18406;var args1$18407;var type2$18408;var args2$18409;var m1$18389;var m2$18390;var v1$18372;var v2$18373;var s1$18355;var s2$18356;var v1$18323;var v2$18324;var $18290$18314;var $18291$18315;var $18292$18316;var $18293$18317;var $18294$18318;var $18295$18319;var $18296$18320;var t0$18308;var t1$18309;var t2$18310;var t3$18311;var t4$18312;var $18283$18303;var ph$18297;(ph$18297=$18276$18279);($18283$18303=ph$18297);if((($18290$18314=($18283$18303 instanceof Array))&&(((t0$18308=$18283$18303.length)),(($18292$18316=(t0$18308===2))&&(((t1$18309=$18283$18303[0])),(($18294$18318=(t1$18309 instanceof Array))&&(((t2$18310=t1$18309.length)),(($18296$18320=(t2$18310===2))&&((t1$18309[0]==="variable")&&((v1$18323=t1$18309[1]),(((t3$18311=$18283$18303[1])),((t3$18311 instanceof Array)&&(((t4$18312=t3$18311.length)),((t4$18312===2)&&(t3$18311[0]==="variable"))))))))))))))){(v2$18324=t3$18311[1]);return (v1$18323===v2$18324);}else{if(($18296$18320&&((t1$18309[0]==="symbol")&&((s1$18355=t1$18309[1]),(((t3$18311=$18283$18303[1])),((t3$18311 instanceof Array)&&(((t4$18312=t3$18311.length)),((t4$18312===2)&&(t3$18311[0]==="symbol"))))))))){(s2$18356=t3$18311[1]);return (((!$15868(ban1$18280,s1$18355))&&(!$15868(ban2$18281,s2$18356)))&&(s1$18355===s2$18356));}else{if(($18296$18320&&((t1$18309[0]==="value")&&((v1$18372=t1$18309[1]),(((t3$18311=$18283$18303[1])),((t3$18311 instanceof Array)&&(((t4$18312=t3$18311.length)),((t4$18312===2)&&(t3$18311[0]==="value"))))))))){(v2$18373=t3$18311[1]);return (v1$18372===v2$18373);}else{if(($18296$18320&&((t1$18309[0]==="macro")&&((m1$18389=t1$18309[1]),(((t3$18311=$18283$18303[1])),((t3$18311 instanceof Array)&&(((t4$18312=t3$18311.length)),((t4$18312===2)&&(t3$18311[0]==="macro"))))))))){(m2$18390=t3$18311[1]);return (m1$18389===m2$18390);}else{if(($18294$18318&&((t2$18310>=1)&&((type1$18406=t1$18309[0]),((args1$18407=Array.prototype.slice.call(t1$18309,1)),(((t3$18311=$18283$18303[1])),((t3$18311 instanceof Array)&&(((t4$18312=t3$18311.length)),((t4$18312>=1)&&((type2$18408=t3$18311[0]),((args2$18409=Array.prototype.slice.call(t3$18311,1)),(checkall$15980.indexOf(type1$18406)!==-1)))))))))))){if(((type1$18406===type2$18408)&&(args1$18407.length===args2$18409.length))){(temp$18433=$20248(args1$18407,args2$18409));($length$18439=temp$18433.length);($index$18445=0);$18427:for(;($index$18445<$length$18439);($index$18445++)){var pair$18462;var m$18454;(m$18454=temp$18433[$index$18445]);(pair$18462=m$18454);if((!same_block$15981(pair$18462,ban1$18280,ban2$18281))){return false;}}return true;}else{return false;}}else{(other$18467=$18283$18303);return false;}}}}}});(parse_clauses$15982=function(scope$18474,target$18475,stmts$18476,opt$18477){var $index$18517;var $length$18511;var temp$18505;var acc$18499;var $index$18763;var $length$18757;var temp$18751;var acc$18745;var $index$18826;var $length$18820;var temp$18814;var acc$18808;var decls$18800;var all_temps$18483;var the_parts$18484;var unique_temps$18485;(all_temps$18483=[]);(the_parts$18484=(((acc$18499=[])),(((temp$18505=scope$18474.step_all(["clause"],stmts$18476))),((($length$18511=temp$18505.length)),((($index$18517=0)),function(){$18491:for(;($index$18517<$length$18511);($index$18517++)){var accum$18629;var accum$18647;var t0$18621;var t1$18622;var $index$18674;var $length$18668;var temp$18662;var bod$18715;var placeholder$18556;var special_fn$18557;var vars$18558;var temps$18559;var blocks$18560;var vars2$18561;var x$18725;var other$18733;var b$18721;var pattern$18537;var body$18538;var $18496$18534;var t0$18531;var t1$18532;var m$18526;(m$18526=temp$18505[$index$18517]);(t0$18531=m$18526);if(((t0$18531 instanceof Array)&&(((t1$18532=t0$18531.length)),((t1$18532===3)&&(t0$18531[0]==="clause"))))){(pattern$18537=t0$18531[1]);(body$18538=t0$18531[2]);acc$18499.push((((placeholder$18556=(void 0))),((special_fn$18557=function($18572$18575,value$18576){var t0$18584;var t1$18585;var other$18617;var $18578$18600;var ph$18581;var expr$18582;(t0$18584=$18572$18575);if(((t0$18584 instanceof Array)&&(((t1$18585=t0$18584.length)),((t1$18585===2)&&(t0$18584[0]==="special"))))){(ph$18581=t0$18584[1]);(expr$18582=t0$18584);}else{$20159($18572$18575);}($18578$18600=ph$18581);if(($18578$18600==="match")){(placeholder$18556=__lt____lt____colon__$15964(["symbol",scope$18474.gensym("ph")],expr$18582));return ["assign",placeholder$18556];}else{(other$18617=$18578$18600);throw $19900(["syntax","pattern","special"]).create("Special token cannot be used here",({"special":expr$18582}));}})),(((t0$18621=parse_pattern$15979(scope$18474,pattern$18537,target$18475,$20178(opt$18477,$15869(({"allow_arguments":false,"allow_nested":true,"special":special_fn$18557}),$15869(((accum$18629=({})),((accum$18629["assign"]=function(v$18634,value$18635){return ["do",__lt____lt____colon__$15964(["assign",v$18634,value$18635],v$18634)];}),accum$18629)),({"finalize":false}))))))),function(){if(((t0$18621 instanceof Array)&&(((t1$18622=t0$18621.length)),(t1$18622===3)))){(vars$18558=t0$18621[0]);(temps$18559=t0$18621[1]);(blocks$18560=t0$18621[2]);}else{return $20159(parse_pattern$15979(scope$18474,pattern$18537,target$18475,$20178(opt$18477,$15869(({"allow_arguments":false,"allow_nested":true,"special":special_fn$18557}),$15869(((accum$18647=({})),((accum$18647["assign"]=function(v$18652,value$18653){return ["do",__lt____lt____colon__$15964(["assign",v$18652,value$18653],v$18652)];}),accum$18647)),({"finalize":false}))))),"/home/olivier/git/earl-grey/src/pattern.eg",14032,14379);}}()),(all_temps$18483=all_temps$18483.concat(temps$18559)),function(){if(placeholder$18556){return vars$18558.push(placeholder$18556);}}(),((vars2$18561=({}))),(((temp$18662=vars$18558)),((($length$18668=temp$18662.length)),((($index$18674=0)),function(){$18562:for(;($index$18674<$length$18668);($index$18674++)){var other$18711;var xxx$18693;var t0$18688;var t1$18689;var m$18683;(m$18683=temp$18662[$index$18674]);(t0$18688=m$18683);if(((t0$18688 instanceof Array)&&(((t1$18689=t0$18688.length)),((t1$18689===2)&&(t0$18688[0]==="symbol"))))){(xxx$18693=t0$18688[1]);(vars2$18561[xxx$18693]=true);}else{(other$18711=m$18683);throw $19900(["syntax","unexpected"]).create();}}}()))),(((bod$18715=function(){if(placeholder$18556){return parse_clauses$15982(scope$18474,placeholder$18556,$20201(["multi"])(body$18538)[1],opt$18477);}else{if(opt$18477.wrap){return opt$18477.wrap(body$18538);}else{return body$18538;}}}())),["clause",vars$18558,vars2$18561,blocks$18560,bod$18715])));}else{if((((x$18725=t0$18531)),((x$18725 instanceof Array)&&(x$18725[0]==="block")))){(b$18721=t0$18531);acc$18499.push(b$18721);}else{(other$18733=m$18526);acc$18499.push(function(){throw $19900(["syntax","clause"]).create("Illegal clause",({"clause":other$18733}));}());}}}}()))),acc$18499));if(opt$18477.fallback){the_parts$18484.push(["block",opt$18477.fallback(target$18475)]);}(unique_temps$18485=$20200(util$15965.mkset((((acc$18745=[])),(((temp$18751=all_temps$18483)),((($length$18757=temp$18751.length)),((($index$18763=0)),function(){$18740:for(;($index$18763<$length$18757);($index$18763++)){var t$18782;var t0$18777;var t1$18778;var m$18772;(m$18772=temp$18751[$index$18763]);(t0$18777=m$18772);if(((t0$18777 instanceof Array)&&(((t1$18778=t0$18777.length)),((t1$18778===2)&&(t0$18777[0]==="symbol"))))){(t$18782=t0$18777[1]);acc$18745.push(t$18782);}else{$20159(m$18772,"/home/olivier/git/earl-grey/src/pattern.eg",15188,15218);}}}()))),acc$18745))));(decls$18800=(((acc$18808=[])),(((temp$18814=unique_temps$18485)),((($length$18820=temp$18814.length)),((($index$18826=0)),function(){$18803:for(;($index$18826<$length$18820);($index$18826++)){var t$18843;var m$18835;(m$18835=temp$18814[$index$18826]);(t$18843=m$18835);acc$18808.push(["declare",$15869(["symbol",t$18843],({"mutable":true}))]);}}()))),acc$18808));return ["multi"].concat(decls$18800).concat([weave_clauses$15984(the_parts$18484)]);});(opt_clauses$15983=function(clauses$18852){var $index$18892;var $length$18886;var temp$18880;var acc$18874;var $index$19076;var $length$19070;var temp$19064;var acc$19058;var $index$19136;var $length$19130;var temp$19124;var acc$19118;var $index$19188;var $length$19182;var temp$19176;var acc$19170;var shares$18861;var max$18862;var temps$18863;var shared_last$18864;var idx_last$18865;var new_clauses$18866;(shares$18861=(((acc$18874=[])),(((temp$18880=$20133(clauses$18852.slice(1)))),((($length$18886=temp$18880.length)),((($index$18892=0)),function(){$18869:for(;($index$18892<$length$18886);($index$18892++)){var t0$18953;var t1$18954;var $index$18988;var $length$18982;var temp$18976;var varsd0$18945;var blocks0$18946;var share$18947;var idx$18948;var i$18913;var vars$18914;var varsd$18915;var blocks$18916;var body$18917;var t0$18906;var t1$18907;var t2$18908;var t3$18909;var m$18901;(m$18901=temp$18880[$index$18892]);(t0$18906=m$18901);if(((t0$18906 instanceof Array)&&(((t1$18907=t0$18906.length)),((t1$18907===2)&&((i$18913=t0$18906[0]),(((t2$18908=t0$18906[1])),((t2$18908 instanceof Array)&&(((t3$18909=t2$18908.length)),((t3$18909===5)&&(t2$18908[0]==="clause")))))))))){(vars$18914=t2$18908[1]);(varsd$18915=t2$18908[2]);(blocks$18916=t2$18908[3]);(body$18917=t2$18908[4]);acc$18874.push(((((t0$18953=$15868(clauses$18852,i$18913))),function(){if(((t0$18953 instanceof Array)&&(((t1$18954=t0$18953.length)),((t1$18954===5)&&(t0$18953[0]==="clause"))))){t0$18953[1];(varsd0$18945=t0$18953[2]);(blocks0$18946=t0$18953[3]);t0$18953[4];}else{return $20159($15868(clauses$18852,i$18913),"/home/olivier/git/earl-grey/src/pattern.eg",15511,15531);}}()),((share$18947=0)),((idx$18948=0)),(((temp$18976=blocks$18916)),((($length$18982=temp$18976.length)),((($index$18988=0)),function(){$18949:for(;($index$18988<$length$18982);($index$18988++)){var x$19025;var x$19035;var other$19046;var $19008$19014;var b$19005;var m$18997;(m$18997=temp$18976[$index$18988]);(b$19005=m$18997);if(same_block$15981([$15868(blocks0$18946,share$18947),b$19005],varsd0$18945,varsd$18915)){(share$18947++);($19008$19014=b$19005);if((((x$19025=$19008$19014)),((x$19025 instanceof Array)&&(x$19025[0]==="do")))){null;}else{if((((x$19035=$19008$19014)),((x$19035 instanceof Array)&&(x$19035[0]==="check")))){(idx$18948=share$18947);}else{(other$19046=$19008$19014);__lt____gt__$15962(null,other$19046);}}}else{break $18949;}}}()))),[share$18947,idx$18948]));}else{$20159(m$18901,"/home/olivier/git/earl-grey/src/pattern.eg",15387,15915);}}}()))),acc$18874));(max$18862=$15868(Math.max,(((acc$19058=[])),(((temp$19064=shares$18861)),((($length$19070=temp$19064.length)),((($index$19076=0)),function(){$19053:for(;($index$19076<$length$19070);($index$19076++)){var x$19095;var t0$19090;var t1$19091;var m$19085;(m$19085=temp$19064[$index$19076]);(t0$19090=m$19085);if(((t0$19090 instanceof Array)&&(((t1$19091=t0$19090.length)),(t1$19091===2)))){(x$19095=t0$19090[0]);t0$19090[1];acc$19058.push(x$19095);}else{$20159(m$19085,"/home/olivier/git/earl-grey/src/pattern.eg",15929,15958);}}}()))),acc$19058)));shares$18861.push([0,0]);(temps$18863=(((acc$19118=[])),(((temp$19124=$20312(1,max$18862))),((($length$19130=temp$19124.length)),((($index$19136=0)),function(){$19113:for(;($index$19136<$length$19130);($index$19136++)){var m$19145;(m$19145=temp$19124[$index$19136]);m$19145;acc$19118.push(["symbol",gensym$15967()]);}}()))),acc$19118));(shared_last$18864=0);(idx_last$18865=0);(new_clauses$18866=(((acc$19170=[])),(((temp$19176=$20133(clauses$18852))),((($length$19182=temp$19176.length)),((($index$19188=0)),function(){$19164:for(;($index$19188<$length$19182);($index$19188++)){var t0$19250;var t1$19251;var $index$19300;var $length$19294;var temp$19288;var acc$19282;var rest$19384;var newblocks$19379;var share$19244;var idx$19245;var shared$19246;var n_to_share$19247;var to_share$19248;var other$19391;var i$19209;var vars$19210;var varsd$19211;var blocks$19212;var body$19213;var t0$19202;var t1$19203;var t2$19204;var t3$19205;var m$19197;(m$19197=temp$19176[$index$19188]);(t0$19202=m$19197);if(((t0$19202 instanceof Array)&&(((t1$19203=t0$19202.length)),((t1$19203===2)&&((i$19209=t0$19202[0]),(((t2$19204=t0$19202[1])),((t2$19204 instanceof Array)&&(((t3$19205=t2$19204.length)),((t3$19205===5)&&(t2$19204[0]==="clause")))))))))){(vars$19210=t2$19204[1]);(varsd$19211=t2$19204[2]);(blocks$19212=t2$19204[3]);(body$19213=t2$19204[4]);acc$19170.push(((((t0$19250=$15868(shares$18861,i$19209))),function(){if(((t0$19250 instanceof Array)&&(((t1$19251=t0$19250.length)),(t1$19251===2)))){(share$19244=t0$19250[0]);(idx$19245=t0$19250[1]);}else{return $20159($15868(shares$18861,i$19209),"/home/olivier/git/earl-grey/src/pattern.eg",16187,16206);}}()),((shared$19246=function(){if(idx_last$18865){return [["check",$15868(temps$18863,(idx_last$18865-1))]];}else{return [];}}())),((n_to_share$19247=Math.max(shared_last$18864,share$19244))),((to_share$19248=(((acc$19282=[])),(((temp$19288=$20133(blocks$19212.slice(shared_last$18864,n_to_share$19247)))),((($length$19294=temp$19288.length)),((($index$19300=0)),function(){$19272:for(;($index$19300<$length$19294);($index$19300++)){var j$19352;var x$19353;var j$19325;var x$19326;var $19276$19319;var $19277$19320;var $19278$19321;var $19279$19322;var t0$19314;var t1$19315;var t2$19316;var t3$19317;var m$19309;(m$19309=temp$19288[$index$19300]);(t0$19314=m$19309);if((($19277$19320=(t0$19314 instanceof Array))&&(((t1$19315=t0$19314.length)),(($19279$19322=(t1$19315===2))&&((j$19325=t0$19314[0]),(((t2$19316=t0$19314[1])),((t2$19316 instanceof Array)&&(((t3$19317=t2$19316.length)),((t3$19317===2)&&(t2$19316[0]==="check")))))))))){(x$19326=t2$19316[1]);acc$19282.push(["check",["assign",$15868(temps$18863,(shared_last$18864+j$19325)),x$19326]]);}else{if(($19279$19322&&((j$19352=t0$19314[0]),(((t2$19316=t0$19314[1])),((t2$19316 instanceof Array)&&(((t3$19317=t2$19316.length)),((t3$19317===2)&&(t2$19316[0]==="do")))))))){(x$19353=t2$19316[1]);acc$19282.push(["do",x$19353]);}else{$20159(m$19309,"/home/olivier/git/earl-grey/src/pattern.eg",16335,16506);}}}}()))),acc$19282))),((shared_last$18864=share$19244)),((idx_last$18865=idx$19245)),(((newblocks$19379=(((rest$19384=blocks$19212.slice(n_to_share$19247))),shared$19246.concat(to_share$19248).concat(rest$19384)))),["clause",vars$19210,varsd$19211,newblocks$19379,body$19213])));}else{(other$19391=m$19197);acc$19170.push(function(){throw $19900(["oops"]).create("what",({"value":other$19391}));}());}}}()))),acc$19170));return [temps$18863,new_clauses$18866];});(weave_clauses$15984=function(parts$19400){var $index$19465;var $length$19459;var temp$19453;var $index$19729;var $length$19723;var temp$19717;var acc$19711;var groups$19407;var reassemble$19408;var new_temps$19409;var helper$19410;(groups$19407=classify_contiguous$15970(parts$19400,function($19422$19425){var t0$19429;var t1$19430;var cls$19427;(t0$19429=$19422$19425);if(((t0$19429 instanceof Array)&&(((t1$19430=t0$19429.length)),(t1$19430>=1)))){(cls$19427=t0$19429[0]);Array.prototype.slice.call(t0$19429,1);}else{$20159($19422$19425);}return cls$19427;}));(reassemble$19408=[]);(new_temps$19409=[]);(temp$19453=groups$19407);($length$19459=temp$19453.length);($index$19465=0);$19411:for(;($index$19465<$length$19459);($index$19465++)){var t0$19505;var t1$19506;var ts$19502;var new_clauses$19503;var elems$19521;var elems$19488;var $19415$19482;var $19416$19483;var $19417$19484;var $19418$19485;var t0$19479;var t1$19480;var m$19474;(m$19474=temp$19453[$index$19465]);(t0$19479=m$19474);if((($19416$19483=(t0$19479 instanceof Array))&&(((t1$19480=t0$19479.length)),(($19418$19485=(t1$19480>=1))&&(t0$19479[0]==="clause"))))){(elems$19488=Array.prototype.slice.call(t0$19479,1));(t0$19505=opt_clauses$15983(elems$19488));if(((t0$19505 instanceof Array)&&(((t1$19506=t0$19505.length)),(t1$19506===2)))){(ts$19502=t0$19505[0]);(new_clauses$19503=t0$19505[1]);}else{$20159(opt_clauses$15983(elems$19488),"/home/olivier/git/earl-grey/src/pattern.eg",17015,17043);}(new_temps$19409=new_temps$19409.concat(ts$19502));(reassemble$19408=reassemble$19408.concat(new_clauses$19503));}else{if(($19418$19485&&(t0$19479[0]==="block"))){(elems$19521=Array.prototype.slice.call(t0$19479,1));(reassemble$19408=reassemble$19408.concat(elems$19521));}else{$20159(m$19474,"/home/olivier/git/earl-grey/src/pattern.eg",16949,17154);}}}(helper$19410=function($19529$19532){var $index$19645;var $length$19639;var temp$19633;var acc$19627;var decls$19619;var vars$19610;var varsd$19611;var blocks$19612;var body$19613;var rest$19614;var body$19579;var rest$19580;var $19538$19562;var $19539$19563;var $19540$19564;var $19541$19565;var $19542$19566;var $19543$19567;var t0$19555;var t1$19556;var t2$19557;var t3$19558;var t4$19559;var t5$19560;var $19534$19550;var ph$19544;(ph$19544=$19529$19532);($19534$19550=ph$19544);if((($19538$19562=($19534$19550 instanceof Array))&&(((t0$19555=$19534$19550.length)),(t0$19555===0)))){return ["multi"];}else{if(($19538$19562&&(($19540$19564=(t0$19555>=1))&&(((t1$19556=$19534$19550[0])),(($19542$19566=(t1$19556 instanceof Array))&&(((t2$19557=t1$19556.length)),((t2$19557===2)&&((t1$19556[0]==="block")&&(((t3$19558=$20201(["multi"])(t1$19556[1]))),(t3$19558[0]&&(((t4$19559=t3$19558[1])),(((t5$19560=t4$19559.length)),(t5$19560>=0))))))))))))){(body$19579=Array.prototype.slice.call(t4$19559,0));(rest$19580=Array.prototype.slice.call($19534$19550,1));return ["multi"].concat(body$19579).concat([helper$19410(rest$19580)]);}else{if(($19542$19566&&((t2$19557===5)&&(t1$19556[0]==="clause")))){(vars$19610=t1$19556[1]);(varsd$19611=t1$19556[2]);(blocks$19612=t1$19556[3]);(body$19613=t1$19556[4]);(rest$19614=Array.prototype.slice.call($19534$19550,1));(decls$19619=(((acc$19627=[])),(((temp$19633=vars$19610)),((($length$19639=temp$19633.length)),((($index$19645=0)),function(){$19622:for(;($index$19645<$length$19639);($index$19645++)){var bridge$19670$19678;var $19665$19673;var v$19662;var m$19654;(m$19654=temp$19633[$index$19645]);(v$19662=m$19654);acc$19627.push(((($19665$19673=v$19662.declare_mode)),function(){if(($19665$19673==="set")){return ["splice"];}else{if(($19665$19673==="let")){return ["declare",$20178(v$19662,({"mutable":false}))];}else{if(($19665$19673==="var")){return ["declare",$20178(v$19662,({"mutable":true}))];}else{(bridge$19670$19678=$19665$19673);if(((bridge$19670$19678==="unqualified")||(bridge$19670$19678===(void 0)))){return ["declare",$20178(v$19662,({"mutable":false}))];}else{$20159($19665$19673);}}}}}()));}}()))),acc$19627));return ["tagscope","back",["multi"].concat(decls$19619).concat([assemble_pattern$15977(blocks$19612,body$19613,["use","back",helper$19410(rest$19614)])])];}else{$20159($19534$19550);}}}});return ["multi"].concat((((acc$19711=[])),(((temp$19717=new_temps$19409)),((($length$19723=temp$19717.length)),((($index$19729=0)),function(){$19706:for(;($index$19729<$length$19723);($index$19729++)){var t$19746;var m$19738;(m$19738=temp$19717[$index$19729]);(t$19746=m$19738);acc$19711.push(["declare",t$19746]);}}()))),acc$19711)).concat([helper$19410(reassemble$19408)]);});(exports["PatternParser"]=PatternParser$15974);(exports["PatternProcessor"]=PatternProcessor$15975);(exports["parse_clauses"]=parse_clauses$15982);(exports["parse_pattern"]=parse_pattern$15979);

},{"./expand":6,"./location":8,"./pp":12,"./util":15}],12:[function(require,module,exports){
var $20570=function(type$20573){var f$20577;(f$20577=type$20573["::check"]);if((f$20577===(void 0))){return function(value$20583){return (value$20583 instanceof type$20573);};}else{return function(value$20587){return f$20577.call(type$20573,value$20587);};}};
var $20589=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $20590=function(dest$20593,values$20594){var k$20599;(k$20599=null);$20597:for(k$20599 in values$20594){if(values$20594.hasOwnProperty(k$20599)){(dest$20593[k$20599]=values$20594[k$20599]);}}return dest$20593;};
var $20607=function($20609$20612){var ph$20618;(ph$20618=$20609$20612);var $20614$20624;($20614$20624=ph$20618);var bridge$20616$20629;var x$20633;(bridge$20616$20629=$20614$20624);if((((typeof(bridge$20616$20629)==="string")&&((x$20633=bridge$20616$20629),true))||((typeof(bridge$20616$20629)==="number")&&((x$20633=bridge$20616$20629),true)))){return ["value",x$20633];}else{var other$20644;(other$20644=$20614$20624);return other$20644["::serialize_ast"]();}};
var send$20344;(send$20344=function(obj$20351,$20348$20352){var ph$20358;var msg$20359;var t0$20361;(t0$20361=$20348$20352);(msg$20359=t0$20361);(ph$20358=t0$20361);var $20354$20370;($20354$20370=ph$20358);var bridge$20356$20375;(bridge$20356$20375=$20354$20370);if(((typeof(bridge$20356$20375)==="string")||(typeof(bridge$20356$20375)==="number"))){return obj$20351[msg$20359];}else{var other$20387;(other$20387=$20354$20370);return obj$20351["::send"](msg$20359);}});(Array[":::project"]=function($20393$20396){var ph$20401;var value$20402;var t0$20404;(t0$20404=$20393$20396);(value$20402=t0$20404);(ph$20401=t0$20404);var $20398$20413;($20398$20413=ph$20401);if($20570(Array)($20398$20413)){return [true,value$20402];}else{$20398$20413;return [true,[value$20402]];}});(Array.prototype["::check"]=function(value$20431){if((value$20431 instanceof Array)){var i$20437;(i$20437=0);$20434:for(;(i$20437<this.length);(i$20437++)){if(($20589(this,i$20437)!==$20589(value$20431,i$20437))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $20590(this.slice(0),this);});(Array.prototype[":::project"]=function(value$20456){if((value$20456 instanceof Array)){var i$20462;(i$20462=0);$20459:for(;(i$20462<this.length);(i$20462++)){if(($20589(this,i$20462)!==$20589(value$20456,i$20462))){return [true,[value$20456]];}}return [true,value$20456.slice(this.length)];}else{return [true,[value$20456]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($20607));});(RegExp.prototype["::check"]=function($20480$20483){var ph$20488;(ph$20488=$20480$20483);var $20485$20494;($20485$20494=ph$20488);var value$20502;if((typeof($20485$20494)==="string")){(value$20502=$20485$20494);if(value$20502.match(this)){return true;}else{return false;}}else{var other$20507;(other$20507=$20485$20494);return false;}});(RegExp.prototype[":::project"]=function($20513$20516){var ph$20521;(ph$20521=$20513$20516);var $20518$20527;($20518$20527=ph$20521);var value$20535;if((typeof($20518$20527)==="string")){(value$20535=$20518$20527);var $20538$20543;($20538$20543=value$20535.match(this));var m$20551;if(($20538$20543===null)){(m$20551=$20538$20543);return [false,null];}else{var m$20556;(m$20556=$20538$20543);return [true,m$20556];}}else{var other$20560;(other$20560=$20518$20527);return [false,null];}});(Function.prototype["::send"]=function(args$20567){return this.apply(this,args$20567);});
var $21757=function(type$21760){return function(value$21764){var f$21768;(f$21768=type$21760[":::project"]);if((f$21768===(void 0))){(f$21768=type$21760["::project"]);if((f$21768===(void 0))){return [true,type$21760(value$21764)];}else{var rval$21781;(rval$21781=false);try{(rval$21781=[true,f$21768(value$21764)]);}catch(excv$21792){var e$21798;(e$21798=excv$21792);(rval$21781=[false,null]);}return rval$21781;}}else{return f$21768.call(type$21760,value$21764);}};};
var $22056=function(arr$22059){var results$22065;var l$22066;(results$22065=[]);(l$22066=arr$22059.length);var i$22075;(i$22075=0);$22064:for(;(i$22075<l$22066);(i$22075++)){results$22065.push([i$22075,$20589(arr$22059,i$22075)]);}return results$22065;};
var $21823=function(){var $21824$21830;($21824$21830=function(tags$21835){var it$0$21838;(it$0$21838=function(){if((!$20570($21824$21830)(this))){return Object.create($21824$21830.prototype);}else{return this;}}());(it$0$21838["tags"]=tags$21835);return it$0$21838;});($21824$21830.prototype["create"]=function(){var it$0$21858;var self$21859;(it$0$21858=this);(self$21859=this);var $21856$21868;($21856$21868=arguments);var t0$21873;var message$21877;var args$21878;(t0$21873=$21856$21868.length);if((t0$21873>=0)){(message$21877=function(){if((0>=t0$21873)){return "";}else{return $21856$21868[0];}}());(args$21878=Array.prototype.slice.call($21856$21868,1));var e$21891;(e$21891=Error(message$21877));(e$21891["::tags"]=it$0$21858.tags);(e$21891["args"]=args$21878);var temp$21907;(temp$21907=$22056(args$21878));var $length$21913;($length$21913=temp$21907.length);var $index$21919;($index$21919=0);$21892:for(;($index$21919<$length$21913);($index$21919++)){var m$21928;(m$21928=temp$21907[$index$21919]);var t0$21933;var t1$21934;var i$21938;var arg$21939;(t0$21933=m$21928);if(((t0$21933 instanceof Array)&&(((t1$21934=t0$21933.length)),(t1$21934===2)))){(i$21938=t0$21933[0]);(arg$21939=t0$21933[1]);(e$21891[i$21938]=arg$21939);}else{$21804(m$21928);}}(e$21891["length"]=args$21878.length);(e$21891["name"]=["E"].concat(it$0$21858.tags).join("."));return e$21891;}else{$21804($21856$21868);}});($21824$21830.prototype["::check"]=function(e$21969){var it$0$21973;var self$21974;(it$0$21973=this);(self$21974=this);var tags$21984;if(((!e$21969)||(!$20570(Error)(e$21969)))){return false;}(tags$21984=(e$21969["::tags"]||[]));var temp$21995;(temp$21995=it$0$21973.tags);var $length$22001;($length$22001=temp$21995.length);var $index$22007;($index$22007=0);$21985:for(;($index$22007<$length$22001);($index$22007++)){var m$22016;(m$22016=temp$21995[$index$22007]);var tag$22024;(tag$22024=m$22016);if((tags$21984.indexOf(tag$22024)===-1)){return false;}else{false;}}return true;});($21824$21830.prototype["::deconstruct"]=function(e$22033){var it$0$22037;var self$22038;(it$0$22037=this);(self$22038=this);return e$22033.args;});$20590($21824$21830,$20590(function(){var accum$22049;(accum$22049=({}));(accum$22049["::name"]="$21824");return accum$22049;}(),function(){var accum$22053;(accum$22053=({}));(accum$22053["::egclass"]=true);return accum$22053;}()));return $21824$21830;}();
var $21804=function(value$21807,url$21808,start$21809,end$21810){var err$21814;(err$21814=$21823(["match"]).create("Could not find a match for value",({"value":value$21807})));if(url$21808){(err$21814["location"]=["location",url$21808,start$21809,end$21810]);}throw err$21814;};
var $22082=function($22084$22087,key$22088){var ph$22096;(ph$22096=$22084$22087);var $22090$22102;($22090$22102=ph$22096);var bridge$22092$22107;(bridge$22092$22107=$22090$22102);if(((bridge$22092$22107===null)||(bridge$22092$22107===(void 0)))){return false;}else{var x$22119;if((typeof($22090$22102)==="string")){(x$22119=$22090$22102);return (key$22088 in String.prototype);}else{var x$22124;if((typeof($22090$22102)==="number")){(x$22124=$22090$22102);return (key$22088 in Number.prototype);}else{var x$22129;(x$22129=$22090$22102);return (key$22088 in x$22129);}}}};
var $21468=function(){var $21469$21474;($21469$21474=function($21478$21485,$21480$21486,$21482$21487){var it$0$21490;(it$0$21490=function(){if((!$20570($21469$21474)(this))){return Object.create($21469$21474.prototype);}else{return this;}}());var t0$21497;(t0$21497=$21757(Array)($21478$21485));if(t0$21497[0]){(it$0$21490["tags"]=t0$21497[1]);}else{$21804($21478$21485);}(it$0$21490["props"]=$21480$21486);var t0$21509;(t0$21509=$21757(Array)($21482$21487));if(t0$21509[0]){(it$0$21490["children"]=t0$21509[1]);}else{$21804($21482$21487);}undefined;return it$0$21490;});$20590(function(){var accum$21523;(accum$21523=({}));(accum$21523["::check"]=function(x$21528){return (((x$21528&&x$21528.tags)&&x$21528.props)&&x$21528.children);});return accum$21523;}(),$20590(function(){var accum$21531;(accum$21531=({}));(accum$21531[":::project"]=function($21535$21538){var ph$21543;(ph$21543=$21535$21538);var $21540$21549;($21540$21549=ph$21543);var tags$21557;var props$21558;var children$21559;if(($22082($21540$21549,"tags")&&((tags$21557=$21540$21549.tags),($22082($21540$21549,"props")&&((props$21558=$21540$21549.props),$22082($21540$21549,"children")))))){(children$21559=$21540$21549.children);return [true,[tags$21557,props$21558,children$21559]];}else{$21540$21549;return [false,null];}});return accum$21531;}(),$20590(function(){var accum$21568;(accum$21568=({}));(accum$21568["::name"]="$21469");return accum$21568;}(),function(){var accum$21572;(accum$21572=({}));(accum$21572["::egclass"]=true);return accum$21572;}())));($21469$21474.prototype["::check"]=function($21578$21581){var it$0$21585;var self$21586;(it$0$21585=this);(self$21586=this);var ph$21597;(ph$21597=$21578$21581);var $21594$21603;($21594$21603=ph$21597);var n$21611;if($20570($21468)($21594$21603)){(n$21611=$21594$21603);var temp$21621;(temp$21621=it$0$21585.tags);var $length$21627;($length$21627=temp$21621.length);var $index$21633;($index$21633=0);$21615:for(;($index$21633<$length$21627);($index$21633++)){var m$21642;(m$21642=temp$21621[$index$21633]);var c$21650;(c$21650=m$21642);if((n$21611.tags.indexOf(c$21650)===-1)){return false;}else{false;}}return true;}else{$21594$21603;return false;}});($21469$21474.prototype[":::project"]=function($21661$21664){var it$0$21668;var self$21669;(it$0$21668=this);(self$21669=this);var ph$21680;(ph$21680=$21661$21664);var $21677$21686;($21677$21686=ph$21680);var n$21694;if($20570(it$0$21668)($21677$21686)){(n$21694=$21677$21686);return [true,[n$21694.tags,n$21694.props,n$21694.children]];}else{$21677$21686;return [false,null];}});$20590($21469$21474,$20590(function(){var accum$21705;(accum$21705=({}));(accum$21705["::check"]=function(x$21710){return (((x$21710&&x$21710.tags)&&x$21710.props)&&x$21710.children);});return accum$21705;}(),$20590(function(){var accum$21713;(accum$21713=({}));(accum$21713[":::project"]=function($21717$21720){var ph$21725;(ph$21725=$21717$21720);var $21722$21731;($21722$21731=ph$21725);var tags$21739;var props$21740;var children$21741;if(($22082($21722$21731,"tags")&&((tags$21739=$21722$21731.tags),($22082($21722$21731,"props")&&((props$21740=$21722$21731.props),$22082($21722$21731,"children")))))){(children$21741=$21722$21731.children);return [true,[tags$21739,props$21740,children$21741]];}else{$21722$21731;return [false,null];}});return accum$21713;}(),$20590(function(){var accum$21750;(accum$21750=({}));(accum$21750["::name"]="$21469");return accum$21750;}(),function(){var accum$21754;(accum$21754=({}));(accum$21754["::egclass"]=true);return accum$21754;}()))));return $21469$21474;}();
var $22131=function(obj$22134){var results$22139;(results$22139=[]);var k$22144;(k$22144=null);$22138:for(k$22144 in obj$22134){if(Object.prototype.hasOwnProperty.call(obj$22134,k$22144)){results$22139.push([k$22144,$20589(obj$22134,k$22144)]);}}return results$22139;};var pr_terminus$20655;var pr$20656;var __lt____gt__$20657;var repr$20658;var escape_html$20659;var quotify$20660;var HTML$20661;(pr_terminus$20655=function(node$20666){var r$20672;var pre$20673;var post$20674;(r$20672=HTML$20661(node$20666,"span"));(pre$20673=(String.fromCharCode(27)+"[?0;7y+h <div class=\"ug\">"));(post$20674=("</div>"+String.fromCharCode(7)));return console.log(((pre$20673+r$20672)+post$20674));});(pr$20656=function($20688$20691,r$20692){var x$20716;var n$20711;var $20694$20703;var ph$20697;(ph$20697=$20688$20691);($20694$20703=ph$20697);if($20570($21468)($20694$20703)){(n$20711=$20694$20703);return pr_terminus$20655(n$20711);}else{(x$20716=$20694$20703);return pr_terminus$20655((r$20692||repr$20658)(x$20716));}});(__lt____gt__$20657=function($20722$20725,x$20726){if(($20722$20725===null)){}else{$21804($20722$20725);}return pr$20656(x$20726);});(repr$20658=function(){var $index$20845;var $length$20839;var temp$20833;var acc$20827;var $index$20896;var $length$20890;var temp$20884;var acc$20878;var other$20933;var entries$20815;var $20750$20788;var t0$20786;var x$20764;var recur$20765;var $20739$20766;var t0$20758;var t1$20759;var t2$20760;var $20737$20753;($20737$20753=arguments);(t0$20758=$20737$20753.length);if((((t0$20758>=1)&&(t0$20758<=2))&&(((t1$20759=$20737$20753[0])),((x$20764=t1$20759),(($20739$20766=t1$20759),(((t2$20760=function(){if((1>=t0$20758)){return repr$20658;}else{return $20737$20753[1];}}())),$20570(Function)(t2$20760))))))){(recur$20765=t2$20760);if(($20739$20766===true)){return $21468([".special",".true"],({}),"true");}else{if(($20739$20766===false)){return $21468([".special",".false"],({}),"false");}else{if(($20739$20766===null)){return $21468([".special",".nil"],({}),"null");}else{if(($20739$20766===(void 0))){return $21468([".special",".nil"],({}),"undefined");}else{if((typeof($20739$20766)==="number")){return $21468([".num"],({}),String(x$20764));}else{if((typeof($20739$20766)==="string")){return $21468([".str"],({}),x$20764);}else{(t0$20786=$20739$20766);if($20570(Array)(t0$20786)){(entries$20815=t0$20786);return $21468([".sequence"],({}),(((acc$20827=[])),(((temp$20833=entries$20815)),((($length$20839=temp$20833.length)),((($index$20845=0)),function(){$20822:for(;($index$20845<$length$20839);($index$20845++)){var x$20862;var m$20854;(m$20854=temp$20833[$index$20845]);(x$20862=m$20854);acc$20827.push(recur$20765(x$20862,repr$20658));}}()))),acc$20827));}else{$20739$20766;if(x$20764["::repr"]){return x$20764["::repr"](recur$20765);}else{if((Object.getPrototypeOf(x$20764)===Object.prototype)){return $21468(["table",".object"],({}),(((acc$20878=[])),(((temp$20884=$22131(x$20764))),((($length$20890=temp$20884.length)),((($index$20896=0)),function(){$20873:for(;($index$20896<$length$20890);($index$20896++)){var k$20915;var v$20916;var t0$20910;var t1$20911;var m$20905;(m$20905=temp$20884[$index$20896]);(t0$20910=m$20905);if(((t0$20910 instanceof Array)&&(((t1$20911=t0$20910.length)),(t1$20911===2)))){(k$20915=t0$20910[0]);(v$20916=t0$20910[1]);acc$20878.push($21468(["tr"],({}),[$21468(["th"],({}),recur$20765(k$20915,repr$20658)),$21468(["td"],({}),recur$20765(v$20916,repr$20658))]));}else{$21804(m$20905,"/home/olivier/git/earl-grey/src/pp.eg",914,1244);}}}()))),acc$20878));}else{(other$20933=$20739$20766);return $21468([".unknown"],({}),other$20933.toString());}}}}}}}}}}else{$21804($20737$20753);}});(escape_html$20659=function($20941$20944){var t0$20948;var repl$20958;var s$20946;(t0$20948=[true,String($20941$20944)]);if(t0$20948[0]){(s$20946=t0$20948[1]);}else{$21804($20941$20944);}(repl$20958=({"&":"&amp;","<":"&lt;",">":"&gt;"}));return s$20946.replace(RegExp("[&<>]","g"),function(x$20964){return $20589(repl$20958,x$20964);});});(quotify$20660=function($20970$20973){var t0$20977;var s$20975;(t0$20977=[true,String($20970$20973)]);if(t0$20977[0]){(s$20975=t0$20977[1]);}else{$21804($20970$20973);}return s$20975.replace(RegExp("[\"\\\\]","g"),function(x$20987){return ("\\"+x$20987);});});(HTML$20661=function($20993$20996,default_tag$20997){var $index$21050;var $length$21044;var temp$21038;var acc$21032;var $index$21134;var $length$21128;var temp$21122;var $index$21194;var $length$21188;var temp$21182;var $index$21265;var $length$21259;var temp$21253;var acc$21247;var $index$21345;var $length$21339;var temp$21333;var acc$21327;var $index$21403;var $length$21397;var temp$21391;var acc$21385;var other$21378;var $21306$21311;var x$21442;var other$21438;var $21087$21426;var tag$21090;var classes$21091;var id$21092;var kv$21093;var sub$21094;var accum$21095;var children2$21096;var other$21448;var tags$21072;var props$21073;var children$21074;var children$21023;var s$21018;var $20999$21010;var ph$21004;(ph$21004=$20993$20996);($20999$21010=ph$21004);if((typeof($20999$21010)==="string")){(s$21018=$20999$21010);return escape_html$20659(s$21018);}else{if($20570(Array)($20999$21010)){(children$21023=$20999$21010);return (((acc$21032=[])),(((temp$21038=children$21023)),((($length$21044=temp$21038.length)),((($index$21050=0)),function(){$21027:for(;($index$21050<$length$21044);($index$21050++)){var child$21067;var m$21059;(m$21059=temp$21038[$index$21050]);(child$21067=m$21059);acc$21032.push(HTML$20661(child$21067,default_tag$20997));}}()))),acc$21032).join("");}else{if(($20570($21468)($20999$21010)&&($22082($20999$21010,"tags")&&((tags$21072=$20999$21010.tags),($22082($20999$21010,"props")&&((props$21073=$20999$21010.props),$22082($20999$21010,"children"))))))){(children$21074=$20999$21010.children);(tag$21090=(default_tag$20997||"span"));(classes$21091=[]);(id$21092=null);(kv$21093=[]);(sub$21094=[]);(temp$21122=tags$21072);($length$21128=temp$21122.length);($index$21134=0);$21097:for(;($index$21134<$length$21128);($index$21134++)){var other$21173;var cls$21154;var t0$21148;var t1$21149;var t2$21150;var m$21143;(m$21143=temp$21122[$index$21134]);(t0$21148=$21757(RegExp("^\\.(.*)",""))(m$21143));if((t0$21148[0]&&(((t1$21149=t0$21148[1])),(((t2$21150=t1$21149.length)),(t2$21150===2))))){t1$21149[0];(cls$21154=t1$21149[1]);classes$21091.push(cls$21154);}else{(other$21173=m$21143);(tag$21090=other$21173);}}(temp$21182=$22131(props$21073));($length$21188=temp$21182.length);($index$21194=0);$21101:for(;($index$21194<$length$21188);($index$21194++)){var k$21213;var v$21214;var t0$21208;var t1$21209;var m$21203;(m$21203=temp$21182[$index$21194]);(t0$21208=m$21203);if(((t0$21208 instanceof Array)&&(((t1$21209=t0$21208.length)),(t1$21209===2)))){(k$21213=t0$21208[0]);(v$21214=t0$21208[1]);kv$21093.push([k$21213,v$21214]);}else{$21804(m$21203,"/home/olivier/git/earl-grey/src/pp.eg",1956,2020);}}(accum$21095=function(){if((tag$21090==="raw")){return [];}else{return ["<",tag$21090];}}());if(id$21092){(accum$21095=accum$21095.concat(" id=\"",id$21092,"\""));}if(classes$21091.length){(accum$21095=accum$21095.concat(" class=\"",quotify$20660(classes$21091.join(" ")),"\""));}if(kv$21093){(acc$21247=[]);(temp$21253=kv$21093);($length$21259=temp$21253.length);($index$21265=0);$21242:for(;($index$21265<$length$21259);($index$21265++)){var k$21284;var v$21285;var t0$21279;var t1$21280;var m$21274;(m$21274=temp$21253[$index$21265]);(t0$21279=m$21274);if(((t0$21279 instanceof Array)&&(((t1$21280=t0$21279.length)),(t1$21280===2)))){(k$21284=t0$21279[0]);(v$21285=t0$21279[1]);acc$21247.push(((accum$21095=accum$21095.concat(function(){if((v$21285!==null)){return [" ",k$21284,"=\"",quotify$20660(v$21285),"\""];}else{return [" ",k$21284];}}()))));}else{$21804(m$21274,"/home/olivier/git/earl-grey/src/pp.eg",2282,2482);}}acc$21247;}(children2$21096=((($21306$21311=tag$21090)),function(){if(($21306$21311==="raw")){(acc$21327=[]);(temp$21333=children$21074);($length$21339=temp$21333.length);($index$21345=0);$21321:for(;($index$21345<$length$21339);($index$21345++)){var c$21373;var s$21363;var t0$21359;var m$21354;(m$21354=temp$21333[$index$21345]);(t0$21359=m$21354);if((typeof(t0$21359)==="string")){(s$21363=t0$21359);acc$21327.push(s$21363);}else{(c$21373=m$21354);acc$21327.push(HTML$20661(c$21373,default_tag$20997));}}return acc$21327;}else{(other$21378=$21306$21311);(acc$21385=[]);(temp$21391=children$21074);($length$21397=temp$21391.length);($index$21403=0);$21380:for(;($index$21403<$length$21397);($index$21403++)){var c$21420;var m$21412;(m$21412=temp$21391[$index$21403]);(c$21420=m$21412);acc$21385.push(HTML$20661(c$21420,default_tag$20997));}return acc$21385;}}()));($21087$21426=tag$21090);if(($21087$21426==="raw")){return accum$21095.concat(children2$21096).join("");}else{(other$21438=$21087$21426);(x$21442=[">"].concat(children2$21096).concat(["</",tag$21090,">"]));return accum$21095.concat(x$21442).join("");}}else{(other$21448=$20999$21010);return HTML$20661([true,String(other$21448)][1],default_tag$20997);}}}});(exports["pr_terminus"]=pr_terminus$20655);(exports["pr"]=pr$20656);(exports["<>"]=__lt____gt__$20657);(exports["repr"]=repr$20658);

},{}],13:[function(require,module,exports){
var $25261=function(type$25264){var f$25268;(f$25268=type$25264["::check"]);if((f$25268===(void 0))){return function(value$25274){return (value$25274 instanceof type$25264);};}else{return function(value$25278){return f$25268.call(type$25264,value$25278);};}};
var $25280=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $25281=function(dest$25284,values$25285){var k$25290;(k$25290=null);$25288:for(k$25290 in values$25285){if(values$25285.hasOwnProperty(k$25290)){(dest$25284[k$25290]=values$25285[k$25290]);}}return dest$25284;};
var $25298=function($25300$25303){var ph$25309;(ph$25309=$25300$25303);var $25305$25315;($25305$25315=ph$25309);var bridge$25307$25320;var x$25324;(bridge$25307$25320=$25305$25315);if((((typeof(bridge$25307$25320)==="string")&&((x$25324=bridge$25307$25320),true))||((typeof(bridge$25307$25320)==="number")&&((x$25324=bridge$25307$25320),true)))){return ["value",x$25324];}else{var other$25335;(other$25335=$25305$25315);return other$25335["::serialize_ast"]();}};
var send$25035;(send$25035=function(obj$25042,$25039$25043){var ph$25049;var msg$25050;var t0$25052;(t0$25052=$25039$25043);(msg$25050=t0$25052);(ph$25049=t0$25052);var $25045$25061;($25045$25061=ph$25049);var bridge$25047$25066;(bridge$25047$25066=$25045$25061);if(((typeof(bridge$25047$25066)==="string")||(typeof(bridge$25047$25066)==="number"))){return obj$25042[msg$25050];}else{var other$25078;(other$25078=$25045$25061);return obj$25042["::send"](msg$25050);}});(Array[":::project"]=function($25084$25087){var ph$25092;var value$25093;var t0$25095;(t0$25095=$25084$25087);(value$25093=t0$25095);(ph$25092=t0$25095);var $25089$25104;($25089$25104=ph$25092);if($25261(Array)($25089$25104)){return [true,value$25093];}else{$25089$25104;return [true,[value$25093]];}});(Array.prototype["::check"]=function(value$25122){if((value$25122 instanceof Array)){var i$25128;(i$25128=0);$25125:for(;(i$25128<this.length);(i$25128++)){if(($25280(this,i$25128)!==$25280(value$25122,i$25128))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $25281(this.slice(0),this);});(Array.prototype[":::project"]=function(value$25147){if((value$25147 instanceof Array)){var i$25153;(i$25153=0);$25150:for(;(i$25153<this.length);(i$25153++)){if(($25280(this,i$25153)!==$25280(value$25147,i$25153))){return [true,[value$25147]];}}return [true,value$25147.slice(this.length)];}else{return [true,[value$25147]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($25298));});(RegExp.prototype["::check"]=function($25171$25174){var ph$25179;(ph$25179=$25171$25174);var $25176$25185;($25176$25185=ph$25179);var value$25193;if((typeof($25176$25185)==="string")){(value$25193=$25176$25185);if(value$25193.match(this)){return true;}else{return false;}}else{var other$25198;(other$25198=$25176$25185);return false;}});(RegExp.prototype[":::project"]=function($25204$25207){var ph$25212;(ph$25212=$25204$25207);var $25209$25218;($25209$25218=ph$25212);var value$25226;if((typeof($25209$25218)==="string")){(value$25226=$25209$25218);var $25229$25234;($25229$25234=value$25226.match(this));var m$25242;if(($25229$25234===null)){(m$25242=$25229$25234);return [false,null];}else{var m$25247;(m$25247=$25229$25234);return [true,m$25247];}}else{var other$25251;(other$25251=$25209$25218);return [false,null];}});(Function.prototype["::send"]=function(args$25258){return this.apply(this,args$25258);});
var $36512=function($36514$36517,key$36518){var ph$36526;(ph$36526=$36514$36517);var $36520$36532;($36520$36532=ph$36526);var bridge$36522$36537;(bridge$36522$36537=$36520$36532);if(((bridge$36522$36537===null)||(bridge$36522$36537===(void 0)))){return false;}else{var x$36549;if((typeof($36520$36532)==="string")){(x$36549=$36520$36532);return (key$36518 in String.prototype);}else{var x$36554;if((typeof($36520$36532)==="number")){(x$36554=$36520$36532);return (key$36518 in Number.prototype);}else{var x$36559;(x$36559=$36520$36532);return (key$36518 in x$36559);}}}};
var $36794=function(arr$36797){var results$36803;var l$36804;(results$36803=[]);(l$36804=arr$36797.length);var i$36813;(i$36813=0);$36802:for(;(i$36813<l$36804);(i$36813++)){results$36803.push([i$36813,$25280(arr$36797,i$36813)]);}return results$36803;};
var $36820=function(value$36823,url$36824,start$36825,end$36826){var err$36830;(err$36830=$36561(["match"]).create("Could not find a match for value",({"value":value$36823})));if(url$36824){(err$36830["location"]=["location",url$36824,start$36825,end$36826]);}throw err$36830;};
var $36561=function(){var $36562$36568;($36562$36568=function(tags$36573){var it$0$36576;(it$0$36576=function(){if((!$25261($36562$36568)(this))){return Object.create($36562$36568.prototype);}else{return this;}}());(it$0$36576["tags"]=tags$36573);return it$0$36576;});($36562$36568.prototype["create"]=function(){var it$0$36596;var self$36597;(it$0$36596=this);(self$36597=this);var $36594$36606;($36594$36606=arguments);var t0$36611;var message$36615;var args$36616;(t0$36611=$36594$36606.length);if((t0$36611>=0)){(message$36615=function(){if((0>=t0$36611)){return "";}else{return $36594$36606[0];}}());(args$36616=Array.prototype.slice.call($36594$36606,1));var e$36629;(e$36629=Error(message$36615));(e$36629["::tags"]=it$0$36596.tags);(e$36629["args"]=args$36616);var temp$36645;(temp$36645=$36794(args$36616));var $length$36651;($length$36651=temp$36645.length);var $index$36657;($index$36657=0);$36630:for(;($index$36657<$length$36651);($index$36657++)){var m$36666;(m$36666=temp$36645[$index$36657]);var t0$36671;var t1$36672;var i$36676;var arg$36677;(t0$36671=m$36666);if(((t0$36671 instanceof Array)&&(((t1$36672=t0$36671.length)),(t1$36672===2)))){(i$36676=t0$36671[0]);(arg$36677=t0$36671[1]);(e$36629[i$36676]=arg$36677);}else{$36820(m$36666);}}(e$36629["length"]=args$36616.length);(e$36629["name"]=["E"].concat(it$0$36596.tags).join("."));return e$36629;}else{$36820($36594$36606);}});($36562$36568.prototype["::check"]=function(e$36707){var it$0$36711;var self$36712;(it$0$36711=this);(self$36712=this);var tags$36722;if(((!e$36707)||(!$25261(Error)(e$36707)))){return false;}(tags$36722=(e$36707["::tags"]||[]));var temp$36733;(temp$36733=it$0$36711.tags);var $length$36739;($length$36739=temp$36733.length);var $index$36745;($index$36745=0);$36723:for(;($index$36745<$length$36739);($index$36745++)){var m$36754;(m$36754=temp$36733[$index$36745]);var tag$36762;(tag$36762=m$36754);if((tags$36722.indexOf(tag$36762)===-1)){return false;}else{false;}}return true;});($36562$36568.prototype["::deconstruct"]=function(e$36771){var it$0$36775;var self$36776;(it$0$36775=this);(self$36776=this);return e$36771.args;});$25281($36562$36568,$25281(function(){var accum$36787;(accum$36787=({}));(accum$36787["::name"]="$36562");return accum$36787;}(),function(){var accum$36791;(accum$36791=({}));(accum$36791["::egclass"]=true);return accum$36791;}()));return $36562$36568;}();
var $36428=function($36430$36433){var ph$36443;var x$36444;var t0$36446;(t0$36446=$36430$36433);(x$36444=t0$36446);(ph$36443=t0$36446);var $36435$36455;($36435$36455=ph$36443);var bridge$36437$36460;(bridge$36437$36460=$36435$36455);if((function(){var bridge$36438$36470;(bridge$36438$36470=bridge$36437$36460);return (function(){var bridge$36439$36477;(bridge$36439$36477=bridge$36438$36470);return ((bridge$36439$36477===(void 0))||(bridge$36439$36477===null));}()||(typeof(bridge$36438$36470)==="string"));}()||(typeof(bridge$36437$36460)==="number"))){return x$36444;}else{if($36512($36435$36455,"::clone")){$36435$36455["::clone"];return x$36444["::clone"]();}else{$36435$36455;if((Object.getPrototypeOf(x$36444)===Object.prototype)){var dest$36495;(dest$36495=({}));var k$36500;(k$36500=null);$36494:for(k$36500 in x$36444){if(Object.prototype.hasOwnProperty.call(x$36444,k$36500)){(dest$36495[k$36500]=x$36444[k$36500]);}}return dest$36495;}else{var other$36510;(other$36510=$36435$36455);throw $36561(["clone"]).create("Object cannot be cloned",({"obj":x$36444}));}}}};
var $36406=function(a$36409,b$36410){var dest$36415;(dest$36415=$36428(a$36409));var k$36420;(k$36420=null);$36414:for(k$36420 in b$36410){if(Object.prototype.hasOwnProperty.call(b$36410,k$36420)){(dest$36415[k$36420]=b$36410[k$36420]);}}return dest$36415;};
var $36839=function(type$36842){return function(value$36846){var f$36850;(f$36850=type$36842[":::project"]);if((f$36850===(void 0))){(f$36850=type$36842["::project"]);if((f$36850===(void 0))){return [true,type$36842(value$36846)];}else{var rval$36863;(rval$36863=false);try{(rval$36863=[true,f$36850(value$36846)]);}catch(excv$36874){var e$36880;(e$36880=excv$36874);(rval$36863=[false,null]);}return rval$36863;}}else{return f$36850.call(type$36842,value$36846);}};};
var $36886=function(obj$36889){var results$36894;(results$36894=[]);var k$36899;(k$36899=null);$36893:for(k$36899 in obj$36889){if(Object.prototype.hasOwnProperty.call(obj$36889,k$36899)){results$36894.push([k$36899,$25280(obj$36889,k$36899)]);}}return results$36894;};
var $37075=Object.keys;
var $36903=function($36905$36908,b$36909){var ph$36923;var a$36924;var t0$36926;(t0$36926=$36905$36908);(a$36924=t0$36926);(ph$36923=t0$36926);var $36911$36935;($36911$36935=ph$36923);var bridge$36914$36940;if(($36911$36935===b$36909)){return true;}else{(bridge$36914$36940=$36911$36935);if((function(){var bridge$36915$36954;(bridge$36915$36954=bridge$36914$36940);return (function(){var bridge$36916$36961;(bridge$36916$36961=bridge$36915$36954);return (function(){var bridge$36917$36968;(bridge$36917$36968=bridge$36916$36961);return (function(){var bridge$36918$36975;(bridge$36918$36975=bridge$36917$36968);return ((typeof(bridge$36918$36975)==="number")||(typeof(bridge$36918$36975)==="string"));}()||(bridge$36917$36968===null));}()||(bridge$36916$36961===(void 0)));}()||(bridge$36915$36954===true));}()||(bridge$36914$36940===false))){return false;}else{if($25261(Array)($36911$36935)){if(((!$25261(Array)(b$36909))||(a$36924.length!==b$36909.length))){return false;}var i$36991;(i$36991=0);$36987:for(;(i$36991<a$36924.length);(i$36991++)){if((!$36903(a$36924[i$36991],b$36909[i$36991]))){return false;}}return true;}else{$36911$36935;if((((Object.getPrototypeOf(a$36924)===Object.prototype)&&$25261(Object)(b$36909))&&(Object.getPrototypeOf(b$36909)===Object.prototype))){var ka$37005;(ka$37005=$37075(a$36924));if((!$36903(ka$37005.sort(),$37075(b$36909).sort()))){return false;}var temp$37016;(temp$37016=ka$37005);var $length$37022;($length$37022=temp$37016.length);var $index$37028;($index$37028=0);$37006:for(;($index$37028<$length$37022);($index$37028++)){var m$37037;(m$37037=temp$37016[$index$37028]);var k$37045;(k$37045=m$37037);if((!$36903(a$36924[k$37045],b$36909[k$37045]))){return false;}}return true;}else{if($36512($36911$36935,"::serialize")){$36911$36935["::serialize"];var $37052$37057;($37052$37057=b$36909);if($36512($37052$37057,"::serialize")){$37052$37057["::serialize"];return $36903(a$36924["::serialize"](),b$36909["::serialize"]());}else{var otherwise$37069;(otherwise$37069=$37052$37057);return false;}}else{var otherwise$37073;(otherwise$37073=$36911$36935);return false;}}}}}};
var $37076=function(xs$37079,ys$37080){var acc$37087;(acc$37087=[]);var temp$37093;(temp$37093=$36794(xs$37079));var $length$37099;($length$37099=temp$37093.length);var $index$37105;($index$37105=0);$37082:for(;($index$37105<$length$37099);($index$37105++)){var m$37114;(m$37114=temp$37093[$index$37105]);var t0$37119;var t1$37120;var i$37124;var x$37125;(t0$37119=m$37114);if(((t0$37119 instanceof Array)&&(((t1$37120=t0$37119.length)),(t1$37120===2)))){(i$37124=t0$37119[0]);(x$37125=t0$37119[1]);acc$37087.push([x$37125,$25280(ys$37080,i$37124)]);}else{$36820(m$37114);}}return acc$37087;};var accum$25575;var accum$25579;var $index$25625;var $length$25619;var temp$25613;var accum$26455;var accum$26502;var accum$26585;var accum$26598;var accum$26610;var accum$26654;var accum$26663;var accum$26676;var accum$27053;var accum$27141;var accum$27233;var accum$27322;var accum$27352;var accum$27476;var accum$27612;var accum$27652;var accum$27704;var accum$27777;var accum$27839;var accum$27901;var accum$27956;var accum$28110;var accum$28251;var accum$28447;var accum$28477;var accum$28764;var accum$29102;var accum$29293;var accum$29426;var accum$30047;var t0$30152;var accum$30150;var t0$30376;var accum$30374;var t0$30464;var accum$30462;var t0$30672;var accum$30670;var t0$31174;var accum$31172;var accum$31472;var accum$31700;var accum$31723;var accum$31746;var t0$31918;var accum$31916;var accum$32188;var t0$32220;var accum$32218;var t0$32242;var accum$32240;var t0$32264;var accum$32262;var accum$32284;var accum$32333;var accum$32380;var accum$32689;var accum$32974;var accum$33176;var accum$33493;var accum$33665;var accum$34358;var accum$34884;var $index$34998;var $length$34992;var temp$27003;var accum$36167;var accum$36171;var mac$36183;var $index$36345;var $length$36339;var temp$36333;var $25339$25404;var __lt____gt__$25405;var $25340$25406;var __lt____lt____colon__$25407;var util$25408;var GenSym$25409;var neighbours$25410;var classify_contiguous$25411;var $25342$25412;var PatternParser$25413;var PatternProcessor$25414;var parse_pattern$25415;var parse_clauses$25416;var mt$25417;var Expander$25418;var Scope$25419;var Env$25420;var nullenv$25421;var mac1$25422;var checker_db$25423;var generic_nodes$25424;var mkid$25425;var Embedded$25426;var stdenv$25427;var mkstdenv$25428;var expander$25429;var expand$25430;var topscope$25431;var embed_location$25432;var error_embed_location$25433;var match_error$25434;var drop_ctx$25435;var expr_mac$25436;var overridable$25437;var protected_value$25438;var setup_label$25439;var break_mac$25440;var continue_mac$25441;var var_operator$25442;var accum_flags$25443;var pattern_constructors$25444;var disregard_specials$25445;var pattern_handlers$25446;var build_loop$25447;var partial_pattern$25448;var make_assigner$25449;var blocktest_wrap$25450;var blocktest_mac$25451;var qqstruct$25452;var qq$25453;var RegexBuilder$25454;var build_regexp$25455;var errf_macro$25456;var stdprelude$25457;($25339$25404=require("./pp"));(__lt____gt__$25405=$25339$25404["<>"]);($25340$25406=require("./location"));(__lt____lt____colon__$25407=$25340$25406["<<:"]);(util$25408=require("./util"));(GenSym$25409=util$25408.GenSym);(neighbours$25410=util$25408.neighbours);(classify_contiguous$25411=util$25408.classify_contiguous);($25342$25412=require("./pattern"));(PatternParser$25413=$25342$25412.PatternParser);(PatternProcessor$25414=$25342$25412.PatternProcessor);(parse_pattern$25415=$25342$25412.parse_pattern);(parse_clauses$25416=$25342$25412.parse_clauses);(mt$25417=require("./expand"));(Expander$25418=mt$25417.Expander);(Scope$25419=mt$25417.Scope);(Env$25420=mt$25417.Env);(nullenv$25421=mt$25417.nullenv);(mac1$25422=mt$25417["mac1"]);(checker_db$25423=mt$25417.checker_db);(generic_nodes$25424=["if","js_while","js_for","js_for_in","js_label","js_break","js_continue","js_return","js_delete","js_throw","js_try","js_new"]);(mkid$25425=GenSym$25409("#"));(Embedded$25426=function(code$25537){var it$0$25540;(it$0$25540=function(){if((!$25261(Embedded$25426)(this))){return Object.create(Embedded$25426.prototype);}else{return this;}}());(it$0$25540["code"]=mkstdenv$25428().mark(code$25537));(it$0$25540["::id"]=mkid$25425());return it$0$25540;});(Embedded$25426.prototype["::serialize_ast"]=function(){var it$0$25563;var self$25564;(it$0$25563=this);(self$25564=this);return expand$25430(["top"],topscope$25431,it$0$25563.code);});$25281(Embedded$25426,$25281(((accum$25575=({})),((accum$25575["::name"]="Embedded"),accum$25575)),((accum$25579=({})),((accum$25579["::egclass"]=true),accum$25579))));Embedded$25426;(stdenv$25427=Env$25420());(mkstdenv$25428=function(){var e$25593;(e$25593=Env$25420());(e$25593.scopes["top"]=stdenv$25427.scopes.top);return e$25593;});(expander$25429=Expander$25418(mkstdenv$25428,generic_nodes$25424));(expand$25430=expander$25429.expand.bind(expander$25429));(topscope$25431=Scope$25419(null,"top",expander$25429));(temp$25613=["+","-","*","/","mod","&.","|.","^.","and","or","not","===","!==","<",">","<=",">=","<<",">>",">>>","in","instanceof","--","++","true","false","null","undefined","typeof","String","Array","Number","Boolean","Object","RegExp","Function","Date","parseInt","parseFloat","Math","Error","TypeError","ReferenceError","console","process","eval","setTimeout","clearTimeout","___js_fetch","___node","arguments","this","exports","global"]);($length$25619=temp$25613.length);($index$25625=0);$25458:for(;($index$25625<$length$25619);($index$25625++)){var k$25642;var m$25634;(m$25634=temp$25613[$index$25625]);(k$25642=m$25634);stdenv$25427.bind(topscope$25431,k$25642,$36406(["variable",k$25642],({"mutable":false,"assigned":true})));}stdenv$25427.bind(topscope$25431,"pass",["variable","undefined"]);(embed_location$25432=function($25647$25650){var other$25690;var url$25671;var start$25672;var end$25673;var t0$25666;var t1$25667;var $25652$25661;var ph$25655;(ph$25655=$25647$25650);($25652$25661=ph$25655);if(($36512($25652$25661,"location")&&(((t0$25666=$25652$25661.location)),($36512(t0$25666,"source")&&(((t1$25667=t0$25666.source)),($36512(t1$25667,"url")&&((url$25671=t1$25667.url),($36512(t0$25666,"start")&&((start$25672=t0$25666.start),$36512(t0$25666,"end")))))))))){(end$25673=t0$25666.end);return ["send",["send",["symbol","#"],["data",["void"],["symbol","location"]]],["data",["value",url$25671],["value",start$25672],["value",end$25673]]];}else{(other$25690=$25652$25661);return ["send",["send",["symbol","#"],["data",["void"],["symbol","location"]]],["data",["symbol","null"],["value",0],["value",0]]];}});(error_embed_location$25433=function(error$25697,target$25698){return ["send",["symbol","throw"],["send",["symbol","&:"],["data",error$25697,["data",["send",["symbol","="],["data",["symbol","location"],embed_location$25432(target$25698)]]]]]];});(match_error$25434=function($25704$25707){var t0$25715;var other$25753;var url$25734;var start$25735;var end$25736;var t0$25729;var t1$25730;var $25709$25724;var ph$25712;var target$25713;(t0$25715=$25704$25707);(target$25713=t0$25715);(ph$25712=t0$25715);($25709$25724=ph$25712);if(($36512($25709$25724,"location")&&(((t0$25729=$25709$25724.location)),($36512(t0$25729,"source")&&(((t1$25730=t0$25729.source)),($36512(t1$25730,"url")&&((url$25734=t1$25730.url),($36512(t0$25729,"start")&&((start$25735=t0$25729.start),$36512(t0$25729,"end")))))))))){(end$25736=t0$25729.end);return ["send",["symbol","___match_error"],["data",target$25713,["value",url$25734],["value",start$25735],["value",end$25736]]];}else{(other$25753=$25709$25724);return ["send",["symbol","___match_error"],["data",other$25753]];}});(drop_ctx$25435=function(f$25760){return function(context$25764,scope$25765,form$25766,arg$25767){var rval$25773;(rval$25773=false);try{(rval$25773=f$25760(context$25764,scope$25765,form$25766,arg$25767));}catch(excv$25784){var t0$25821;var e$25834;var t0$25787;var t1$25788;var t2$25789;var t3$25790;var t4$25791;(t0$25787=excv$25784);if(($25261($36561(["match"]))(t0$25787)&&($36512(t0$25787,"args")&&(((t1$25788=t0$25787.args)),((t1$25788 instanceof Array)&&(((t2$25789=t1$25788.length)),((t2$25789===1)&&(((t3$25790=t1$25788[0])),($36512(t3$25790,"value")&&(((t4$25791=t3$25790.value)),((t4$25791===context$25764)&&(!((t4$25791 instanceof Array)&&(((t0$25821=t4$25791.length)),((t0$25821===2)&&((t4$25791[0]==="expr")&&(t4$25791[1]==="expr"))))))))))))))))){(rval$25773=["nostep",form$25766]);}else{(e$25834=excv$25784);(rval$25773=function(){throw e$25834;}());}}return rval$25773;};});(expr_mac$25436=function(f$25845){return function($25848$25851,scope$25852,form$25853,arg$25854){var t0$25881;var t0$25888;var otherwise$25897;var bridge$25858$25871;var $25856$25866;var ph$25860;(ph$25860=$25848$25851);($25856$25866=ph$25860);(bridge$25858$25871=$25856$25866);if((((bridge$25858$25871 instanceof Array)&&(((t0$25881=bridge$25858$25871.length)),((t0$25881===2)&&((bridge$25858$25871[0]==="expr")&&(bridge$25858$25871[1]==="expr")))))||((bridge$25858$25871 instanceof Array)&&(((t0$25888=bridge$25858$25871.length)),((t0$25888===2)&&((bridge$25858$25871[0]==="expr")&&(bridge$25858$25871[1]==="head"))))))){return f$25845(scope$25852,form$25853,arg$25854);}else{(otherwise$25897=$25856$25866);return ["nostep",form$25853];}};});(overridable$25437=function(f$25904){return function($25907$25910,scope$25911,form$25912,arg$25913){var t0$25922;var x$25943;var other$25959;var t0$25936;var $25915$25931;var ph$25919;var context$25920;(t0$25922=$25907$25910);(context$25920=t0$25922);(ph$25919=t0$25922);($25915$25931=ph$25919);if((((x$25943=$25915$25931)),((x$25943 instanceof Array)&&(x$25943[0]==="pattern")))){return ["nostep",form$25912];}else{if((($25915$25931 instanceof Array)&&(((t0$25936=$25915$25931.length)),((t0$25936===2)&&(($25915$25931[0]==="expr")&&($25915$25931[1]==="multi")))))){return ["nostep",form$25912];}else{(other$25959=$25915$25931);return f$25904(context$25920,scope$25911,form$25912,arg$25913);}}};});(protected_value$25438=function(name$25966,value$25967){return function($25970$25973,scope$25974,form$25975,arg$25976){var x$25998;var other$26030;var t0$26017;var $26007$26012;var other$26005;var $25978$25987;var ph$25981;(ph$25981=$25970$25973);($25978$25987=ph$25981);if((((x$25998=$25978$25987)),((x$25998 instanceof Array)&&(x$25998[0]==="pattern")))){throw $36561(["syntax","pattern"]).create((("'"+name$25966)+"' is not a valid pattern and cannot be redeclared"));}else{(other$26005=$25978$25987);($26007$26012=arg$25976);if((($26007$26012 instanceof Array)&&(((t0$26017=$26007$26012.length)),((t0$26017===1)&&($26007$26012[0]==="void"))))){return ["value",value$25967];}else{(other$26030=$26007$26012);return ["send",["value",value$25967],arg$25976];}}};});(setup_label$25439=function(label$26037,env$26038,body$26039){return ["bind",$36406(["symbol","break"],({"env":env$26038})),["macro",break_mac$25440(label$26037)],["bind",$36406(["symbol","continue"],({"env":env$26038})),["macro",continue_mac$25441(label$26037)],["js_label",["value",label$26037],body$26039]]];});(break_mac$25440=function(default_label$26046){return overridable$25437(function(context$26052,scope$26053,form$26054,$26049$26055){var t0$26069;var v$26109;var v$26104;var $26062$26085;var $26063$26086;var $26064$26087;var $26065$26088;var t0$26083;var $26057$26078;var ph$26066;var expr$26067;(t0$26069=$26049$26055);(expr$26067=t0$26069);(ph$26066=t0$26069);($26057$26078=ph$26066);if((($26062$26085=($26057$26078 instanceof Array))&&(((t0$26083=$26057$26078.length)),(($26064$26087=(t0$26083===1))&&(($26065$26088=($26057$26078[0]==="void"))&&default_label$26046))))){return ["js_break",["value",default_label$26046]];}else{if($26065$26088){return ["js_break"];}else{if(($26062$26085&&(($26064$26087=(t0$26083===2))&&($26057$26078[0]==="value")))){(v$26104=$26057$26078[1]);return ["js_break",expr$26067];}else{if(($26064$26087&&($26057$26078[0]==="symbol"))){(v$26109=$26057$26078[1]);return ["js_break",["value",v$26109]];}else{$36820($26057$26078);}}}}});});(continue_mac$25441=function(default_label$26119){return overridable$25437(function(context$26125,scope$26126,form$26127,$26122$26128){var t0$26142;var v$26182;var v$26177;var $26135$26158;var $26136$26159;var $26137$26160;var $26138$26161;var t0$26156;var $26130$26151;var ph$26139;var expr$26140;(t0$26142=$26122$26128);(expr$26140=t0$26142);(ph$26139=t0$26142);($26130$26151=ph$26139);if((($26135$26158=($26130$26151 instanceof Array))&&(((t0$26156=$26130$26151.length)),(($26137$26160=(t0$26156===1))&&(($26138$26161=($26130$26151[0]==="void"))&&default_label$26119))))){return ["js_continue",["value",default_label$26119]];}else{if($26138$26161){return ["js_continue"];}else{if(($26135$26158&&(($26137$26160=(t0$26156===2))&&($26130$26151[0]==="value")))){(v$26177=$26130$26151[1]);return ["js_continue",expr$26140];}else{if(($26137$26160&&($26130$26151[0]==="symbol"))){(v$26182=$26130$26151[1]);return ["js_continue",["value",v$26182]];}else{$36820($26130$26151);}}}}});});(var_operator$25442=function(name$26192){return function(context$26196,scope$26197,form$26198,expr$26199){var t0$26215;var x$26252;var other$26277;var s$26263;var t0$26258;var t1$26259;var $26207$26248;var $26210$26235;var $26211$26236;var t0$26233;var $26204$26228;var env$26212;var sym$26213;(t0$26215=form$26198);if($36512(t0$26215,"env")){(env$26212=t0$26215.env);}else{$36820(form$26198,"/home/olivier/git/earl-grey/src/stdenv.eg",3659,3663);}(sym$26213=$36406(["symbol",name$26192],({"env":env$26212})));($26204$26228=expr$26199);if((($26210$26235=($26204$26228 instanceof Array))&&(((t0$26233=$26204$26228.length)),((t0$26233===1)&&($26204$26228[0]==="void"))))){return sym$26213;}else{if(($26210$26235&&((t0$26233===3)&&(($26204$26228[0]==="data")&&(((x$26252=$26204$26228[1])),((x$26252 instanceof Array)&&(x$26252[0]==="void"))))))){($26207$26248=$26204$26228[2]);(t0$26258=$26207$26248);if(((t0$26258 instanceof Array)&&(((t1$26259=t0$26258.length)),((t1$26259===2)&&(t0$26258[0]==="symbol"))))){(s$26263=t0$26258[1]);return ["send",sym$26213,["value",s$26263]];}else{(other$26277=$26207$26248);return ["send",sym$26213,other$26277];}}else{$36820($26204$26228);}}};});(accum_flags$25443=function(){var make$26309;var mac$26299;var also_values$26300;var t0$26295;var $26286$26290;($26286$26290=arguments);(t0$26295=$26286$26290.length);if(((t0$26295>=1)&&(t0$26295<=2))){(mac$26299=$26286$26290[0]);(also_values$26300=function(){if((1>=t0$26295)){return true;}else{return $26286$26290[1];}}());(make$26309=function(flags$26314){return function(context$26320,scope$26321,form$26322,$26317$26323){var other$26412;var flag$26367;var flag$26356;var $26329$26352;var $26330$26353;var t0$26342;var t1$26343;var t2$26344;var t3$26345;var t4$26346;var t5$26347;var t6$26348;var t7$26349;var t8$26350;var $26325$26337;var ph$26331;(ph$26331=$26317$26323);($26325$26337=ph$26331);if((($26329$26352=($26325$26337 instanceof Array))&&(((t0$26342=$26325$26337.length)),((t0$26342===2)&&(($26325$26337[0]==="value")&&((flag$26356=$26325$26337[1]),also_values$26300)))))){return ["macro",make$26309(flags$26314.concat([flag$26356]))];}else{if(($26329$26352&&((t0$26342===3)&&(($26325$26337[0]==="send")&&(((t1$26343=$26325$26337[1])),((t1$26343 instanceof Array)&&(((t2$26344=t1$26343.length)),((t2$26344===2)&&((t1$26343[0]==="symbol")&&((t1$26343[1]===".")&&(((t3$26345=$26325$26337[2])),((t3$26345 instanceof Array)&&(((t4$26346=t3$26345.length)),((t4$26346===3)&&((t3$26345[0]==="data")&&(((t5$26347=t3$26345[1])),((t5$26347 instanceof Array)&&(((t6$26348=t5$26347.length)),((t6$26348===1)&&((t5$26347[0]==="void")&&(((t7$26349=t3$26345[2])),((t7$26349 instanceof Array)&&(((t8$26350=t7$26349.length)),((t8$26350===2)&&(t7$26349[0]==="symbol"))))))))))))))))))))))))){(flag$26367=t7$26349[1]);return ["macro",make$26309(flags$26314.concat([flag$26367]))];}else{(other$26412=$26325$26337);return mac$26299(context$26320,scope$26321,form$26322,other$26412,flags$26314);}}};});return make$26309([]);}else{$36820($26286$26290);}});(pattern_constructors$25444=({}));(disregard_specials$25445=function($26424$26427,value$26428){var t0$26433;var t1$26434;var kind$26430;var expr$26431;(t0$26433=$26424$26427);if(((t0$26433 instanceof Array)&&(((t1$26434=t0$26433.length)),((t1$26434===2)&&(t0$26433[0]==="special"))))){(kind$26430=t0$26433[1]);(expr$26431=t0$26433);}else{$36820($26424$26427);}throw $36561(["syntax","pattern","special"]).create("Special token cannot be used here",({"special":expr$26431}));});(pattern_handlers$25446=({"declare_variables":$25281(({"allow_nested":true,"allow_arguments":true,"special":disregard_specials$25445}),$25281(((accum$26455=({})),((accum$26455["assign"]=function($26459$26462,value$26463){var t0$26471;var v$26499;var name$26489;var t0$26485;var $26465$26480;var ph$26468;var v$26469;(t0$26471=$26459$26462);(v$26469=t0$26471);(ph$26468=t0$26471);($26465$26480=ph$26468);if((($26465$26480 instanceof Array)&&(((t0$26485=$26465$26480.length)),((t0$26485===2)&&($26465$26480[0]==="symbol"))))){(name$26489=$26465$26480[1]);return ["do",__lt____lt____colon__$25407(["assign",v$26469,$25281(value$26463,({"name":name$26489}))],v$26469)];}else{(v$26499=$26465$26480);return ["do",__lt____lt____colon__$25407(["assign",v$26499,value$26463],v$26499)];}}),accum$26455)),$25281(({"finalize":true,"tags":({"declare_mode":"unqualified"})}),$25281(((accum$26502=({})),((accum$26502["declare"]=function(scope$26507,vars$26508){var $index$26533;var $length$26527;var temp$26521;var acc$26515;(acc$26515=[]);(temp$26521=vars$26508);($length$26527=temp$26521.length);($index$26533=0);$26510:for(;($index$26533<$length$26527);($index$26533++)){var $26553$26560;var v$26550;var m$26542;(m$26542=temp$26521[$index$26533]);(v$26550=m$26542);acc$26515.push(((($26553$26560=v$26550.declare_mode)),function(){if(($26553$26560==="set")){return ["splice"];}else{if(($26553$26560==="let")){return ["declare",$36406(v$26550,({"mutable":false}))];}else{if(($26553$26560==="var")){return ["declare",$36406(v$26550,({"mutable":true}))];}else{if(($26553$26560==="unqualified")){return ["declare",$36406(v$26550,({"mutable":false,"use_previous":true}))];}else{$36820($26553$26560);}}}}}()));}return acc$26515;}),accum$26502)),$25281(((accum$26585=({})),((accum$26585["success"]=function($26589$26592){$26589$26592;return ["multi"];}),accum$26585)),((accum$26598=({})),((accum$26598["failure"]=function(target$26603){return match_error$25434(target$26603);}),accum$26598))))))),"build_object":$25281(({"strings_as_variables":true,"allow_nested":true,"allow_arguments":true,"special":disregard_specials$25445}),$25281(((accum$26610=({})),((accum$26610["assign"]=function($26614$26620,value$26621,$26617$26622){var t0$26633;var t0$26641;var bridge$26616$26626;var v$26624;(bridge$26616$26626=$26614$26620);if((((bridge$26616$26626 instanceof Array)&&(((t0$26633=bridge$26616$26626.length)),((t0$26633===2)&&((bridge$26616$26626[0]==="symbol")&&((v$26624=bridge$26616$26626[1]),true)))))||((bridge$26616$26626 instanceof Array)&&(((t0$26641=bridge$26616$26626.length)),((t0$26641===2)&&((bridge$26616$26626[0]==="value")&&((v$26624=bridge$26616$26626[1]),true))))))){}else{$36820($26614$26620);}$26617$26622;return ["do",__lt____lt____colon__$25407(["assign",["send",["symbol","accum"],["value",v$26624]],value$26621],v$26624)];}),accum$26610)),$25281(({"finalize":true}),$25281(((accum$26654=({})),((accum$26654["declare"]=function(scope$26659,vars$26660){return [["declare",["symbol","accum"],["data",["symbol","="]]]];}),accum$26654)),$25281(((accum$26663=({})),((accum$26663["success"]=function($26667$26670){$26667$26670;return ["symbol","accum"];}),accum$26663)),((accum$26676=({})),((accum$26676["failure"]=function(target$26681){return match_error$25434(target$26681);}),accum$26676)))))))}));(build_loop$25447=function(scope$26688,env$26689,form$26690,li$26691,clauses$26692,wrap$26693,pre$26694,post$26695,opt$26696){var t0$26723;var t0$26770;var accum$26824;var lbl$26706;var i$26707;var len$26708;var first_mac$26709;var last_mac$26710;var newscope$26711;var m$26712;(lbl$26706=function(){if(env$26689){return $36406(["value",scope$26688.gensym()],({"env":env$26689}));}else{return ["value",scope$26688.gensym()];}}());(i$26707=$36406(["symbol","$index"],({"env":env$26689})));(len$26708=$36406(["symbol","$length"],({"env":env$26689})));(t0$26723=$36839(drop_ctx$25435)(function($26729$26732,scope$26733,form$26734,subp$26735){var x$26741;if((((x$26741=$26729$26732)),((x$26741 instanceof Array)&&(x$26741[0]==="pattern")))){}else{$36820($26729$26732);}return ["test",["send",["symbol","==="],["data",i$26707,["value",0]]],subp$26735];}));if(t0$26723[0]){(first_mac$26709=t0$26723[1]);}else{$36820(function($26751$26754,scope$26755,form$26756,subp$26757){var x$26763;if((((x$26763=$26751$26754)),((x$26763 instanceof Array)&&(x$26763[0]==="pattern")))){}else{$36820($26751$26754);}return ["test",["send",["symbol","==="],["data",i$26707,["value",0]]],subp$26757];});}(t0$26770=$36839(drop_ctx$25435)(function($26776$26779,scope$26780,form$26781,subp$26782){var x$26788;if((((x$26788=$26776$26779)),((x$26788 instanceof Array)&&(x$26788[0]==="pattern")))){}else{$36820($26776$26779);}return ["test",["send",["symbol","==="],["data",i$26707,["send",["symbol","-"],["data",len$26708,["value",1]]]]],subp$26782];}));if(t0$26770[0]){(last_mac$26710=t0$26770[1]);}else{$36820(function($26798$26801,scope$26802,form$26803,subp$26804){var x$26810;if((((x$26810=$26798$26801)),((x$26810 instanceof Array)&&(x$26810[0]==="pattern")))){}else{$36820($26798$26801);}return ["test",["send",["symbol","==="],["data",i$26707,["send",["symbol","-"],["data",len$26708,["value",1]]]]],subp$26804];});}(newscope$26711=Scope$25419(scope$26688));env$26689.bind(newscope$26711,"first",["macro",first_mac$26709]);env$26689.bind(newscope$26711,"last",["macro",last_mac$26710]);(m$26712=__lt____lt____colon__$25407(["symbol","m"],form$26690));return ["multi",pre$26694,["send",["symbol","let"],["data",["multi",["send",["symbol","="],["data",["symbol","temp"],li$26691]],["send",["symbol","="],["data",len$26708,["send",["symbol","temp"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]]],["send",["send",["symbol","for"],lbl$26706],["data",["multi",["send",["symbol","="],["data",["send",["symbol","var"],i$26707],["value",0]]],["send",["symbol","<"],["data",i$26707,len$26708]],["send",["symbol","++"],["data",i$26707,["void"]]]],["multi",["send",["symbol","="],["data",m$26712,["send",["symbol","___js_fetch"],["data",["symbol","temp"],i$26707]]]],parse_clauses$25416(newscope$26711,m$26712,clauses$26692,$36406(opt$26696,((accum$26824=({})),((accum$26824["wrap"]=function(x$26829){return wrap$26693(x$26829,i$26707);}),accum$26824))))]]]]],post$26695];});(partial_pattern$25448=function(operator$26836){var x$26860;var $26844$26849;var op$26841;(op$26841=((($26844$26849=operator$26836)),function(){if((((x$26860=$26844$26849)),((x$26860 instanceof Array)&&(x$26860[0]==="symbol")))){return operator$26836;}else{if((typeof($26844$26849)==="string")){return ["variable",operator$26836];}else{$36820($26844$26849);}}}()));return function(context$26873,scope$26874,form$26875,expr$26876){var x$26912;var m$26939;var other$26964;var val$26903;var $26882$26898;var $26883$26899;var $26884$26900;var t0$26892;var t1$26893;var t2$26894;var t3$26895;var t4$26896;var $26878$26887;($26878$26887=[context$26873,expr$26876]);if((($26882$26898=($26878$26887 instanceof Array))&&(((t0$26892=$26878$26887.length)),(($26884$26900=(t0$26892===2))&&((((x$26912=$26878$26887[0])),((x$26912 instanceof Array)&&(x$26912[0]==="pattern")))&&(((t1$26893=$26878$26887[1])),((t1$26893 instanceof Array)&&(((t2$26894=t1$26893.length)),((t2$26894===3)&&((t1$26893[0]==="data")&&(((t3$26895=t1$26893[1])),((t3$26895 instanceof Array)&&(((t4$26896=t3$26895.length)),((t4$26896===1)&&(t3$26895[0]==="void"))))))))))))))){(val$26903=t1$26893[2]);(m$26939=mac1$25422(function(x$26944){return ["send",op$26841,["data",x$26944,val$26903]];}));return ["check",m$26939,["ignore"]];}else{if(($26884$26900&&($26878$26887[0],(((t1$26893=$26878$26887[1])),((t1$26893 instanceof Array)&&(((t2$26894=t1$26893.length)),((t2$26894===1)&&(t1$26893[0]==="void")))))))){return op$26841;}else{(other$26964=$26878$26887);return ["send",op$26841,expr$26876];}}};});(make_assigner$25449=function(op$26971){return function(context$26977,scope$26978,form$26979,$26974$26980){var t0$26985;var t1$26986;var a$26982;var b$26983;(t0$26985=$26974$26980);if(((t0$26985 instanceof Array)&&(((t1$26986=t0$26985.length)),((t1$26986===3)&&(t0$26985[0]==="data"))))){(a$26982=t0$26985[1]);(b$26983=t0$26985[2]);}else{$36820($26974$26980);}return ["assign",a$26982,["send",["symbol",op$26971],["data",a$26982,b$26983]]];};});(temp$27003=$36886($25281(({"true":protected_value$25438("true",true),"false":protected_value$25438("false",false),"null":protected_value$25438("null",null),"undefined":protected_value$25438("undefined",(void 0)),"===":partial_pattern$25448("==="),"!==":partial_pattern$25448("!=="),"==":partial_pattern$25448(["symbol","___equal"]),"!=":partial_pattern$25448(["symbol","___nequal"]),"<=":partial_pattern$25448("<="),">=":partial_pattern$25448(">="),"<":partial_pattern$25448("<"),">":partial_pattern$25448(">")}),$25281(((accum$27053=({})),((accum$27053["-"]=function(context$27060,scope$27061,form$27062,$27057$27063){var t0$27074;var other$27138;var n$27099;var $27069$27095;var $27070$27096;var t0$27088;var t1$27089;var t2$27090;var t3$27091;var t4$27092;var t5$27093;var $27065$27083;var ph$27071;var expr$27072;(t0$27074=$27057$27063);(expr$27072=t0$27074);(ph$27071=t0$27074);($27065$27083=ph$27071);if((($27069$27095=($27065$27083 instanceof Array))&&(((t0$27088=$27065$27083.length)),((t0$27088===3)&&(($27065$27083[0]==="data")&&(((t1$27089=$27065$27083[1])),((t1$27089 instanceof Array)&&(((t2$27090=t1$27089.length)),((t2$27090===1)&&((t1$27089[0]==="void")&&(((t3$27091=$27065$27083[2])),((t3$27091 instanceof Array)&&(((t4$27092=t3$27091.length)),((t4$27092===2)&&((t3$27091[0]==="value")&&(((t5$27093=t3$27091[1])),(typeof(t5$27093)==="number"))))))))))))))))){(n$27099=t5$27093);return ["value",(-n$27099)];}else{if(($27069$27095&&((t0$27088===1)&&($27065$27083[0]==="void")))){return ["variable","-"];}else{(other$27138=$27065$27083);return ["send",["variable","-"],expr$27072];}}}),accum$27053)),$25281(((accum$27141=({})),((accum$27141["++"]=function(context$27148,scope$27149,form$27150,$27145$27151){var other$27230;var x$27220;var y$27221;var x$27204;var x$27184;var $27159$27178;var $27160$27179;var $27161$27180;var $27162$27181;var t0$27174;var t1$27175;var t2$27176;var $27153$27169;var ph$27163;(ph$27163=$27145$27151);($27153$27169=ph$27163);if((($27159$27178=($27153$27169 instanceof Array))&&(((t0$27174=$27153$27169.length)),(($27161$27180=(t0$27174===3))&&(($27162$27181=($27153$27169[0]==="data"))&&(((t1$27175=$27153$27169[1])),((t1$27175 instanceof Array)&&(((t2$27176=t1$27175.length)),((t2$27176===1)&&(t1$27175[0]==="void")))))))))){(x$27184=$27153$27169[2]);return ["send",["variable","++"],["data",["void"],x$27184]];}else{if(($27162$27181&&((x$27204=$27153$27169[1]),(((t1$27175=$27153$27169[2])),((t1$27175 instanceof Array)&&(((t2$27176=t1$27175.length)),((t2$27176===1)&&(t1$27175[0]==="void")))))))){return ["send",["variable","++"],["data",x$27204,["void"]]];}else{if($27162$27181){(x$27220=$27153$27169[1]);(y$27221=$27153$27169[2]);return ["send",["send",x$27220,["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",y$27221]];}else{if(($27159$27178&&((t0$27174===1)&&($27153$27169[0]==="void")))){return ["send",["symbol","->"],["data",["data",["symbol","x"],["symbol","y"]],["send",["send",["symbol","x"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",["symbol","y"]]]]];}else{(other$27230=$27153$27169);return ["send",["symbol","___build_array"],["data",other$27230]];}}}}}),accum$27141)),$25281(((accum$27233=({})),((accum$27233[".."]=function(context$27240,scope$27241,form$27242,$27237$27243){var x$27311;var y$27312;var x$27295;var x$27275;var $27250$27269;var $27251$27270;var $27252$27271;var $27253$27272;var t0$27265;var t1$27266;var t2$27267;var $27245$27260;var ph$27254;(ph$27254=$27237$27243);($27245$27260=ph$27254);if((($27250$27269=($27245$27260 instanceof Array))&&(((t0$27265=$27245$27260.length)),(($27252$27271=(t0$27265===3))&&(($27253$27272=($27245$27260[0]==="data"))&&(((t1$27266=$27245$27260[1])),((t1$27266 instanceof Array)&&(((t2$27267=t1$27266.length)),((t2$27267===1)&&(t1$27266[0]==="void")))))))))){(x$27275=$27245$27260[2]);return ["send",["symbol","range"],["data",["value",1],x$27275]];}else{if(($27253$27272&&((x$27295=$27245$27260[1]),(((t1$27266=$27245$27260[2])),((t1$27266 instanceof Array)&&(((t2$27267=t1$27266.length)),((t2$27267===1)&&(t1$27266[0]==="void")))))))){return ["send",["symbol","range"],["data",x$27295]];}else{if($27253$27272){(x$27311=$27245$27260[1]);(y$27312=$27245$27260[2]);return ["send",["symbol","range"],["data",x$27311,y$27312]];}else{if(($27250$27269&&((t0$27265===1)&&($27245$27260[0]==="void")))){return ["symbol","range"];}else{$36820($27245$27260);}}}}}),accum$27233)),$25281(((accum$27322=({})),((accum$27322["//"]=function(context$27329,scope$27330,form$27331,$27326$27332){var t0$27337;var t1$27338;var a$27334;var b$27335;(t0$27337=$27326$27332);if(((t0$27337 instanceof Array)&&(((t1$27338=t0$27337.length)),((t1$27338===3)&&(t0$27337[0]==="data"))))){(a$27334=t0$27337[1]);(b$27335=t0$27337[2]);}else{$36820($27326$27332);}return ["send",["send",["symbol","Math"],["send",["symbol","."],["data",["void"],["symbol","floor"]]]],["data",["send",["symbol","/"],["data",a$27334,b$27335]]]];}),accum$27322)),$25281(((accum$27352=({})),((accum$27352["*"]=function(context$27357,scope$27358,form$27359,expr$27360){var x$27398;var x$27424;var t0$27429;var other$27473;var val$27415;var $27368$27385;var $27369$27386;var $27370$27387;var t0$27378;var t1$27379;var t2$27380;var bridge$27365$27381;var t3$27382;var t4$27383;var $27362$27373;($27362$27373=[context$27357,expr$27360]);if((($27368$27385=($27362$27373 instanceof Array))&&(((t0$27378=$27362$27373.length)),(($27370$27387=(t0$27378===2))&&((((x$27398=$27362$27373[0])),((x$27398 instanceof Array)&&(x$27398[0]==="pattern")))&&(((t1$27379=$27362$27373[1])),((t1$27379 instanceof Array)&&(((t2$27380=t1$27379.length)),((t2$27380===1)&&(t1$27379[0]==="void")))))))))){return ["dynsplice",["ignore"]];}else{if(($27370$27387&&(((bridge$27365$27381=$27362$27373[0])),(((((x$27424=bridge$27365$27381)),((x$27424 instanceof Array)&&(x$27424[0]==="pattern")))||((bridge$27365$27381 instanceof Array)&&(((t0$27429=bridge$27365$27381.length)),((t0$27429===2)&&((bridge$27365$27381[0]==="expr")&&(bridge$27365$27381[1]==="data"))))))&&(((t1$27379=$27362$27373[1])),((t1$27379 instanceof Array)&&(((t2$27380=t1$27379.length)),((t2$27380===3)&&((t1$27379[0]==="data")&&(((t3$27382=t1$27379[1])),((t3$27382 instanceof Array)&&(((t4$27383=t3$27382.length)),((t4$27383===1)&&(t3$27382[0]==="void")))))))))))))){(val$27415=t1$27379[2]);return ["dynsplice",val$27415];}else{if(($27370$27387&&($27362$27373[0],(((t1$27379=$27362$27373[1])),((t1$27379 instanceof Array)&&(((t2$27380=t1$27379.length)),((t2$27380===1)&&(t1$27379[0]==="void")))))))){return ["variable","*"];}else{(other$27473=$27362$27373);return ["send",["variable","*"],expr$27360];}}}}),accum$27352)),$25281(((accum$27476=({})),((accum$27476["**"]=function(context$27481,scope$27482,form$27483,expr$27484){var x$27530;var x$27556;var t0$27561;var a$27605;var b$27606;var val$27547;var $27492$27513;var $27493$27514;var $27494$27515;var $27495$27516;var $27496$27517;var $27497$27518;var $27498$27519;var t0$27506;var t1$27507;var t2$27508;var bridge$27489$27509;var t3$27510;var t4$27511;var $27486$27501;($27486$27501=[context$27481,expr$27484]);if((($27492$27513=($27486$27501 instanceof Array))&&(((t0$27506=$27486$27501.length)),(($27494$27515=(t0$27506===2))&&((((x$27530=$27486$27501[0])),((x$27530 instanceof Array)&&(x$27530[0]==="pattern")))&&(((t1$27507=$27486$27501[1])),((t1$27507 instanceof Array)&&(((t2$27508=t1$27507.length)),((t2$27508===1)&&(t1$27507[0]==="void")))))))))){return ["objsplice",["ignore"]];}else{if(($27494$27515&&(((bridge$27489$27509=$27486$27501[0])),(((((x$27556=bridge$27489$27509)),((x$27556 instanceof Array)&&(x$27556[0]==="pattern")))||((bridge$27489$27509 instanceof Array)&&(((t0$27561=bridge$27489$27509.length)),((t0$27561===2)&&((bridge$27489$27509[0]==="expr")&&(bridge$27489$27509[1]==="data"))))))&&(((t1$27507=$27486$27501[1])),((t1$27507 instanceof Array)&&(((t2$27508=t1$27507.length)),((t2$27508===3)&&((t1$27507[0]==="data")&&(((t3$27510=t1$27507[1])),((t3$27510 instanceof Array)&&(((t4$27511=t3$27510.length)),((t4$27511===1)&&(t3$27510[0]==="void")))))))))))))){(val$27547=t1$27507[2]);return ["objsplice",val$27547];}else{if(($27494$27515&&($27486$27501[0],(((t1$27507=$27486$27501[1])),(($27497$27518=(t1$27507 instanceof Array))&&(((t2$27508=t1$27507.length)),((t2$27508===1)&&(t1$27507[0]==="void")))))))){return ["send",["symbol","Math"],["send",["symbol","."],["data",["void"],["symbol","pow"]]]];}else{if(($27497$27518&&((t2$27508===3)&&(t1$27507[0]==="data")))){(a$27605=t1$27507[1]);(b$27606=t1$27507[2]);return ["send",["send",["symbol","Math"],["send",["symbol","."],["data",["void"],["symbol","pow"]]]],["data",a$27605,b$27606]];}else{$36820($27486$27501);}}}}}),accum$27476)),$25281(((accum$27612=({})),((accum$27612["_"]=function($27616$27621,scope$27622,form$27623,$27618$27624){var x$27630;var t0$27637;var t1$27638;if((((x$27630=$27616$27621)),((x$27630 instanceof Array)&&(x$27630[0]==="pattern")))){}else{$36820($27616$27621);}(t0$27637=$27618$27624);if(((t0$27637 instanceof Array)&&(((t1$27638=t0$27637.length)),((t1$27638===1)&&(t0$27637[0]==="void"))))){}else{$36820($27618$27624);}return ["ignore"];}),accum$27612)),$25281(((accum$27652=({})),((accum$27652["else"]=function($27656$27661,scope$27662,form$27663,$27658$27664){var x$27689;var msg$27699;var $27666$27678;var ph$27669;(ph$27669=$27656$27661);$27658$27664;($27666$27678=ph$27669);if((((x$27689=$27666$27678)),((x$27689 instanceof Array)&&(x$27689[0]==="pattern")))){return ["ignore"];}else{$27666$27678;(msg$27699="'else' should be found inside an 'if' block");throw $36561(["syntax","else"]).create(msg$27699,({"node":form$27663}));}}),accum$27652)),$25281(((accum$27704=({})),((accum$27704["not"]=function($27708$27713,scope$27714,form$27715,$27710$27716){var t0$27728;var t1$27729;var t2$27730;var t3$27731;var x$27767;var other$27774;var $27718$27756;var ph$27721;var rhs$27722;var arg$27723;(ph$27721=$27708$27713);(t0$27728=$27710$27716);if(((t0$27728 instanceof Array)&&(((t1$27729=t0$27728.length)),((t1$27729===3)&&((t0$27728[0]==="data")&&(((t2$27730=t0$27728[1])),((t2$27730 instanceof Array)&&(((t3$27731=t2$27730.length)),((t3$27731===1)&&(t2$27730[0]==="void")))))))))){(rhs$27722=t0$27728[2]);(arg$27723=t0$27728);}else{$36820($27710$27716);}($27718$27756=ph$27721);if((((x$27767=$27718$27756)),((x$27767 instanceof Array)&&(x$27767[0]==="pattern")))){return ["neg",rhs$27722];}else{(other$27774=$27718$27756);return ["send",["variable","not"],arg$27723];}}),accum$27704)),$25281(((accum$27777=({})),((accum$27777["and"]=function($27781$27786,scope$27787,form$27788,$27783$27789){var t0$27802;var t1$27803;var x$27829;var other$27836;var $27791$27818;var ph$27794;var lhs$27795;var rhs$27796;var arg$27797;(ph$27794=$27781$27786);(t0$27802=$27783$27789);if(((t0$27802 instanceof Array)&&(((t1$27803=t0$27802.length)),((t1$27803===3)&&(t0$27802[0]==="data"))))){(lhs$27795=t0$27802[1]);(rhs$27796=t0$27802[2]);(arg$27797=t0$27802);}else{$36820($27783$27789);}($27791$27818=ph$27794);if((((x$27829=$27791$27818)),((x$27829 instanceof Array)&&(x$27829[0]==="pattern")))){return ["all",lhs$27795,rhs$27796];}else{(other$27836=$27791$27818);return ["send",["variable","and"],arg$27797];}}),accum$27777)),$25281(((accum$27839=({})),((accum$27839["or"]=function($27843$27848,scope$27849,form$27850,$27845$27851){var t0$27864;var t1$27865;var x$27891;var other$27898;var $27853$27880;var ph$27856;var lhs$27857;var rhs$27858;var arg$27859;(ph$27856=$27843$27848);(t0$27864=$27845$27851);if(((t0$27864 instanceof Array)&&(((t1$27865=t0$27864.length)),((t1$27865===3)&&(t0$27864[0]==="data"))))){(lhs$27857=t0$27864[1]);(rhs$27858=t0$27864[2]);(arg$27859=t0$27864);}else{$36820($27845$27851);}($27853$27880=ph$27856);if((((x$27891=$27853$27880)),((x$27891 instanceof Array)&&(x$27891[0]==="pattern")))){return ["any",lhs$27857,rhs$27858];}else{(other$27898=$27853$27880);return ["send",["variable","or"],arg$27859];}}),accum$27839)),$25281(((accum$27901=({})),((accum$27901["when"]=function(context$27908,scope$27909,form$27910,$27905$27911){var t0$27919;var t1$27920;var other$27953;var t0$27940;var $27913$27935;var ph$27916;var condition$27917;(t0$27919=$27905$27911);if(((t0$27919 instanceof Array)&&(((t1$27920=t0$27919.length)),((t1$27920===3)&&(t0$27919[0]==="data"))))){(ph$27916=t0$27919[1]);(condition$27917=t0$27919[2]);}else{$36820($27905$27911);}($27913$27935=ph$27916);if((($27913$27935 instanceof Array)&&(((t0$27940=$27913$27935.length)),((t0$27940===1)&&($27913$27935[0]==="void"))))){return ["test",condition$27917,["ignore"]];}else{(other$27953=$27913$27935);return ["test",condition$27917,other$27953];}}),accum$27901)),$25281(((accum$27956=({})),((accum$27956["."]=function(context$27963,scope$27964,form$27965,$27960$27966){var t0$27970;var t1$27971;var t2$27972;var t3$27973;var f$27998;var expr$27968;(t0$27970=$27960$27966);if(((t0$27970 instanceof Array)&&(((t1$27971=t0$27970.length)),((t1$27971===3)&&((t0$27970[0]==="data")&&(((t2$27972=t0$27970[1])),((t2$27972 instanceof Array)&&(((t3$27973=t2$27972.length)),((t3$27973===1)&&(t2$27972[0]==="void")))))))))){(expr$27968=t0$27970[2]);}else{$36820($27960$27966);}(f$27998=function($28002$28005){var t0$28035;var t0$28043;var $index$28084;var $length$28078;var temp$28072;var acc$28066;var other$28106;var args$28053;var x$28028;var bridge$28009$28023;var t0$28024;var $28007$28018;var ph$28012;(ph$28012=$28002$28005);($28007$28018=ph$28012);(bridge$28009$28023=$28007$28018);if((((bridge$28009$28023 instanceof Array)&&(((t0$28035=bridge$28009$28023.length)),((t0$28035===2)&&((bridge$28009$28023[0]==="symbol")&&((x$28028=bridge$28009$28023[1]),true)))))||((bridge$28009$28023 instanceof Array)&&(((t0$28043=bridge$28009$28023.length)),((t0$28043===2)&&((bridge$28009$28023[0]==="value")&&((x$28028=bridge$28009$28023[1]),true))))))){return ["value",x$28028];}else{if((($28007$28018 instanceof Array)&&(((t0$28024=$28007$28018.length)),((t0$28024>=1)&&($28007$28018[0]==="data"))))){(args$28053=Array.prototype.slice.call($28007$28018,1));return ["data"].concat((((acc$28066=[])),(((temp$28072=args$28053)),((($length$28078=temp$28072.length)),((($index$28084=0)),function(){$28061:for(;($index$28084<$length$28078);($index$28084++)){var arg$28101;var m$28093;(m$28093=temp$28072[$index$28084]);(arg$28101=m$28093);acc$28066.push(f$27998(arg$28101));}}()))),acc$28066));}else{(other$28106=$28007$28018);throw $36561(["syntax","dot"]).create("Argument to '.' must be a symbol or an array",({"argument":other$28106}));}}});return f$27998(expr$27968);}),accum$27956)),$25281(((accum$28110=({})),((accum$28110["="]=function(context$28115,scope$28116,form$28117,expr$28118){var x$28138;var t0$28148;var t1$28149;var lhs$28145;var rhs$28146;var lhs$28221;var rhs$28222;var s$28205;var rhs$28206;var $28175$28190;var $28176$28191;var $28177$28192;var $28178$28193;var t0$28186;var t1$28187;var t2$28188;var $28171$28181;var t0$28236;var t1$28237;var lhs$28233;var rhs$28234;var other$28229;var t0$28131;var $28120$28126;($28120$28126=context$28115);if((((x$28138=$28120$28126)),((x$28138 instanceof Array)&&(x$28138[0]==="pattern")))){(t0$28148=expr$28118);if(((t0$28148 instanceof Array)&&(((t1$28149=t0$28148.length)),((t1$28149===3)&&(t0$28148[0]==="data"))))){(lhs$28145=t0$28148[1]);(rhs$28146=t0$28148[2]);}else{$36820(expr$28118,"/home/olivier/git/earl-grey/src/stdenv.eg",11731,11735);}return ["default",lhs$28145,rhs$28146];}else{if((($28120$28126 instanceof Array)&&(((t0$28131=$28120$28126.length)),((t0$28131===2)&&(($28120$28126[0]==="expr")&&($28120$28126[1]==="data")))))){($28171$28181=expr$28118);if((($28175$28190=($28171$28181 instanceof Array))&&(((t0$28186=$28171$28181.length)),((t0$28186===1)&&($28171$28181[0]==="void"))))){return ["assoc"];}else{if(($28175$28190&&(($28177$28192=(t0$28186===3))&&(($28178$28193=($28171$28181[0]==="data"))&&(((t1$28187=$28171$28181[1])),((t1$28187 instanceof Array)&&(((t2$28188=t1$28187.length)),((t2$28188===2)&&(t1$28187[0]==="symbol"))))))))){(s$28205=t1$28187[1]);(rhs$28206=$28171$28181[2]);return ["assoc",["value",s$28205],rhs$28206];}else{if($28178$28193){(lhs$28221=$28171$28181[1]);(rhs$28222=$28171$28181[2]);return ["objsplice",["multi",parse_pattern$25415(scope$28116,lhs$28221,__lt____lt____colon__$25407(["use",scope$28116,rhs$28222],rhs$28222),pattern_handlers$25446.build_object)]];}else{$36820($28171$28181);}}}}else{(other$28229=$28120$28126);(t0$28236=expr$28118);if(((t0$28236 instanceof Array)&&(((t1$28237=t0$28236.length)),((t1$28237===3)&&(t0$28236[0]==="data"))))){(lhs$28233=t0$28236[1]);(rhs$28234=t0$28236[2]);}else{$36820(expr$28118,"/home/olivier/git/earl-grey/src/stdenv.eg",12306,12310);}return parse_pattern$25415(scope$28116,lhs$28233,__lt____lt____colon__$25407(["use",scope$28116,rhs$28234],rhs$28234),pattern_handlers$25446.declare_variables);}}}),accum$28110)),$25281(((accum$28251=({})),((accum$28251["=>"]=function($28255$28262,scope$28263,$28257$28264,$28259$28265){var t0$28279;var t0$28288;var t1$28289;var x$28315;var x$28353;var t0$28363;var t0$28371;var t0$28390;var t0$28398;var k$28381;var rhs$28382;var k$28344;var $28325$28339;var $28326$28340;var $28327$28341;var t0$28335;var bridge$28322$28336;var bridge$28324$28337;var $28320$28330;var x$28413;var t0$28422;var t1$28423;var t2$28424;var stmts$28420;var other$28444;var $28267$28304;var ph$28271;var env$28272;var lhs$28273;var rhs$28274;(ph$28271=$28255$28262);(t0$28279=$28257$28264);if($36512(t0$28279,"env")){(env$28272=t0$28279.env);}else{$36820($28257$28264);}(t0$28288=$28259$28265);if(((t0$28288 instanceof Array)&&(((t1$28289=t0$28288.length)),((t1$28289===3)&&(t0$28288[0]==="data"))))){(lhs$28273=t0$28288[1]);(rhs$28274=t0$28288[2]);}else{$36820($28259$28265);}($28267$28304=ph$28271);if((((x$28315=$28267$28304)),((x$28315 instanceof Array)&&(x$28315[0]==="pattern")))){($28320$28330=[lhs$28273,rhs$28274]);if((($28325$28339=($28320$28330 instanceof Array))&&(((t0$28335=$28320$28330.length)),(($28327$28341=(t0$28335===2))&&((((x$28353=$28320$28330[0])),((x$28353 instanceof Array)&&(x$28353[0]==="void")))&&(((bridge$28322$28336=$28320$28330[1])),(((bridge$28322$28336 instanceof Array)&&(((t0$28363=bridge$28322$28336.length)),((t0$28363===2)&&((bridge$28322$28336[0]==="symbol")&&((k$28344=bridge$28322$28336[1]),true)))))||((bridge$28322$28336 instanceof Array)&&(((t0$28371=bridge$28322$28336.length)),((t0$28371===2)&&((bridge$28322$28336[0]==="value")&&((k$28344=bridge$28322$28336[1]),true)))))))))))){return ["assoc",["value",k$28344],$36406(__lt____lt____colon__$25407(["symbol",k$28344],rhs$28274),({"env":env$28272}))];}else{if(($28327$28341&&(((bridge$28324$28337=$28320$28330[0])),(((bridge$28324$28337 instanceof Array)&&(((t0$28390=bridge$28324$28337.length)),((t0$28390===2)&&((bridge$28324$28337[0]==="symbol")&&((k$28381=bridge$28324$28337[1]),true)))))||((bridge$28324$28337 instanceof Array)&&(((t0$28398=bridge$28324$28337.length)),((t0$28398===2)&&((bridge$28324$28337[0]==="value")&&((k$28381=bridge$28324$28337[1]),true))))))))){(rhs$28382=$28320$28330[1]);return ["assoc",["value",k$28381],rhs$28382];}else{$36820($28320$28330);}}}else{if((((x$28413=$28267$28304)),((x$28413 instanceof Array)&&(x$28413[0]==="test")))){(t0$28422=$36839(["multi"])(rhs$28274));if((t0$28422[0]&&(((t1$28423=t0$28422[1])),(((t2$28424=t1$28423.length)),(t2$28424>=0))))){(stmts$28420=Array.prototype.slice.call(t1$28423,0));}else{$36820(rhs$28274,"/home/olivier/git/earl-grey/src/stdenv.eg",12881,12884);}return ["blocktest",lhs$28273,stmts$28420];}else{(other$28444=$28267$28304);return ["assoc",lhs$28273,rhs$28274];}}}),accum$28251)),$25281(((accum$28447=({})),((accum$28447[":="]=function(context$28454,scope$28455,form$28456,$28451$28457){var t0$28462;var t1$28463;var lhs$28459;var rhs$28460;(t0$28462=$28451$28457);if(((t0$28462 instanceof Array)&&(((t1$28463=t0$28462.length)),((t1$28463===3)&&(t0$28462[0]==="data"))))){(lhs$28459=t0$28462[1]);(rhs$28460=t0$28462[2]);}else{$36820($28451$28457);}return ["assign",lhs$28459,rhs$28460];}),accum$28447)),$25281(({"+=":make_assigner$25449("+"),"-=":make_assigner$25449("-"),"*=":make_assigner$25449("*"),"/=":make_assigner$25449("/"),"<<=":make_assigner$25449("<<"),">>=":make_assigner$25449(">>"),">>>=":make_assigner$25449(">>>"),"++=":make_assigner$25449("++"),"?=":make_assigner$25449("match"),"or=":make_assigner$25449("or"),"and=":make_assigner$25449("and"),"each=":make_assigner$25449("each")}),$25281(((accum$28477=({})),((accum$28477["_lambda"]=function(context$28484,scope$28485,form$28486,$28481$28487){var t0$28495;var t1$28496;var t2$28497;var t3$28498;var $index$28625;var $length$28619;var temp$28613;var acc$28607;var decls$28592;var newargs$28593;var body2$28759;var a$28753;var other$28749;var fw$28560;var t0$28552;var t1$28553;var t2$28554;var t3$28555;var t4$28556;var $28524$28547;var wrap$28527;var pp$28528;var args$28489;var arg$28490;var pre$28491;var body$28492;var post$28493;(t0$28495=$28481$28487);if(((t0$28495 instanceof Array)&&(((t1$28496=t0$28495.length)),((t1$28496===5)&&((t0$28495[0]==="data")&&(((t2$28497=t0$28495[1])),((t2$28497 instanceof Array)&&(((t3$28498=t2$28497.length)),((t3$28498>=1)&&(t2$28497[0]==="data")))))))))){(args$28489=Array.prototype.slice.call(t2$28497,1));(arg$28490=t2$28497);(pre$28491=t0$28495[2]);(body$28492=t0$28495[3]);(post$28493=t0$28495[4]);}else{$36820($28481$28487);}(wrap$28527=function(body2$28533){var body3$28537;(body3$28537=function(){if($36903(post$28493,["value",null])){return body2$28533;}else{return ["multi",body2$28533,post$28493];}}());if($36903(pre$28491,["value",null])){return body3$28537;}else{return ["multi",pre$28491,body3$28537];}});(pp$28528=PatternParser$25413(scope$28485,arg$28490,({"indexable":true,"allow_nested":true})));($28524$28547=pp$28528.pattern);if((($28524$28547 instanceof Array)&&(((t0$28552=$28524$28547.length)),((t0$28552===5)&&(($28524$28547[0]==="array_pattern")&&((fw$28560=$28524$28547[1]),(((t1$28553=$28524$28547[2])),((t1$28553 instanceof Array)&&(((t2$28554=t1$28553.length)),((t2$28554===0)&&(((t3$28555=$28524$28547[3])),((t3$28555 instanceof Array)&&(((t4$28556=t3$28555.length)),((t4$28556===0)&&($28524$28547[4]===(void 0)))))))))))))))){(decls$28592=function(){if(pp$28528.specials.match){return [["declare",["symbol","ph"]]];}else{return [];}}());(newargs$28593=(((acc$28607=[])),(((temp$28613=$37076(fw$28560,args$28489))),((($length$28619=temp$28613.length)),((($index$28625=0)),function(){$28599:for(;($index$28625<$length$28619);($index$28625++)){var newv$28697;var other$28692;var expr$28665;var v$28666;var t0$28658;var t1$28659;var t2$28660;var t3$28661;var arg$28644;var $28602$28645;var t0$28639;var t1$28640;var m$28634;(m$28634=temp$28613[$index$28625]);(t0$28639=m$28634);if(((t0$28639 instanceof Array)&&(((t1$28640=t0$28639.length)),(t1$28640===2)))){($28602$28645=t0$28639[0]);(arg$28644=t0$28639[1]);(t0$28658=$28602$28645);if(((t0$28658 instanceof Array)&&(((t1$28659=t0$28658.length)),((t1$28659===2)&&((t0$28658[0]==="assign")&&(((t2$28660=t0$28658[1])),((expr$28665=t2$28660),((t2$28660 instanceof Array)&&(((t3$28661=t2$28660.length)),((t3$28661===2)&&(t2$28660[0]==="symbol"))))))))))){(v$28666=t2$28660[1]);acc$28607.push(expr$28665);}else{(other$28692=$28602$28645);acc$28607.push((((newv$28697=$36406(["symbol",scope$28485.gensym("temp")],({"env":stdenv$25427})))),decls$28592.push(parse_pattern$25415(scope$28485,arg$28644,newv$28697,$36406(pattern_handlers$25446.declare_variables,({"tags":({"declare_mode":"let"}),"special":function($28702$28705,value$28706){var t0$28714;var t1$28715;var other$28742;var $28708$28730;var ph$28711;var expr$28712;(t0$28714=$28702$28705);if(((t0$28714 instanceof Array)&&(((t1$28715=t0$28714.length)),((t1$28715===2)&&(t0$28714[0]==="special"))))){(ph$28711=t0$28714[1]);(expr$28712=t0$28714);}else{$36820($28702$28705);}($28708$28730=ph$28711);if(($28708$28730==="match")){return ["assign",["symbol","ph"]];}else{(other$28742=$28708$28730);throw $36561(["syntax","pattern","special"]).create("Special token cannot be used here",({"special":expr$28712}));}}})))),newv$28697));}}else{$36820(m$28634,"/home/olivier/git/earl-grey/src/stdenv.eg",13961,14826);}}}()))),acc$28607));return ["lambda",newargs$28593,wrap$28527(["multi"].concat(decls$28592).concat([function(){if(pp$28528.specials.match){return ["send",["symbol","match"],["data",["symbol","ph"],body$28492]];}else{return body$28492;}}()]))];}else{(other$28749=$28524$28547);(a$28753=__lt____lt____colon__$25407(["symbol","arguments"],arg$28490));(body2$28759=["send",["send",["symbol","match"],["send",["symbol","."],["data",["void"],["symbol","indexable"]]]],["data",a$28753,["send",["symbol","->"],["data",arg$28490,body$28492]]]]);return ["lambda",[],wrap$28527(body2$28759)];}}),accum$28477)),$25281(((accum$28764=({})),((accum$28764["->"]=function($28768$28771,scope$28772,form$28773,expr$28774){var x$28798;var t0$28808;var t1$28809;var lhs$28805;var rhs$28806;var other$28851;var args$28840;var body$28841;var t0$28836;var $28826$28831;var other$28824;var $28776$28785;var ph$28779;(ph$28779=$28768$28771);($28776$28785=ph$28779);if(form$28773.name){console.log(form$28773.name);}if((((x$28798=$28776$28785)),((x$28798 instanceof Array)&&(x$28798[0]==="clause")))){(t0$28808=expr$28774);if(((t0$28808 instanceof Array)&&(((t1$28809=t0$28808.length)),((t1$28809===3)&&(t0$28808[0]==="data"))))){(lhs$28805=t0$28808[1]);(rhs$28806=t0$28808[2]);}else{$36820(expr$28774,"/home/olivier/git/earl-grey/src/stdenv.eg",15325,15329);}return ["clause",lhs$28805,rhs$28806];}else{(other$28824=$28776$28785);($28826$28831=expr$28774);if((($28826$28831 instanceof Array)&&(((t0$28836=$28826$28831.length)),((t0$28836===3)&&($28826$28831[0]==="data"))))){(args$28840=$28826$28831[1]);(body$28841=$28826$28831[2]);return ["send",["symbol","_lambda"],["data",args$28840,["value",null],body$28841,["value",null]]];}else{(other$28851=$28826$28831);throw $36561(["syntax","lambda"]).create("Bad lambda syntax",({"node":other$28851}));}}}),accum$28764)),$25281(({"match":accum_flags$25443(function($28854$28857,scope$28858,form$28859,expr$28860,flags$28861){var x$28883;var other$28911;var t0$28898;var $28888$28893;var v$28984;var b$28985;var b$28959;var $28941$28955;var $28942$28956;var t0$28950;var t1$28951;var t2$28952;var t3$28953;var $28938$28945;var v$29060;var b$29061;var b$29035;var $29017$29031;var $29018$29032;var t0$29026;var t1$29027;var t2$29028;var t3$29029;var $29014$29021;var t0$28932;var t1$28933;var accum$29089;var mbody$29084;var opt$28921;var to_match$28922;var value$28923;var body$28924;var other$28915;var $28863$28872;var ph$28866;(ph$28866=$28854$28857);($28863$28872=ph$28866);if((((x$28883=$28863$28872)),((x$28883 instanceof Array)&&(x$28883[0]==="pattern")))){($28888$28893=expr$28860);if((($28888$28893 instanceof Array)&&(((t0$28898=$28888$28893.length)),((t0$28898===1)&&($28888$28893[0]==="void"))))){return ["special","match"];}else{(other$28911=$28888$28893);return ["all",__lt____lt____colon__$25407(other$28911,expr$28860),__lt____lt____colon__$25407(["special","match"],form$28859)];}}else{(other$28915=$28863$28872);(opt$28921=util$25408.mkset(flags$28861));(to_match$28922=$36406(["symbol",scope$28858.gensym("m")],({"single_assignment":true})));(t0$28932=((($28938$28945=expr$28860)),function(){if((($28941$28955=($28938$28945 instanceof Array))&&(((t0$28950=$28938$28945.length)),((t0$28950===2)&&(($28938$28945[0]==="data")&&(((t1$28951=$36839(["multi"])($28938$28945[1]))),(t1$28951[0]&&(((t2$28952=t1$28951[1])),(((t3$28953=t2$28952.length)),(t3$28953>=0)))))))))){(b$28959=Array.prototype.slice.call(t2$28952,0));return [["value",null],b$28959];}else{if(($28941$28955&&((t0$28950===3)&&(($28938$28945[0]==="data")&&((v$28984=$28938$28945[1]),(((t1$28951=$36839(["multi"])($28938$28945[2]))),(t1$28951[0]&&(((t2$28952=t1$28951[1])),(((t3$28953=t2$28952.length)),(t3$28953>=0)))))))))){(b$28985=Array.prototype.slice.call(t2$28952,0));return [v$28984,b$28985];}else{$36820($28938$28945);}}}()));if(((t0$28932 instanceof Array)&&(((t1$28933=t0$28932.length)),(t1$28933===2)))){(value$28923=t0$28932[0]);(body$28924=t0$28932[1]);}else{$36820(((($29014$29021=expr$28860)),function(){if((($29017$29031=($29014$29021 instanceof Array))&&(((t0$29026=$29014$29021.length)),((t0$29026===2)&&(($29014$29021[0]==="data")&&(((t1$29027=$36839(["multi"])($29014$29021[1]))),(t1$29027[0]&&(((t2$29028=t1$29027[1])),(((t3$29029=t2$29028.length)),(t3$29029>=0)))))))))){(b$29035=Array.prototype.slice.call(t2$29028,0));return [["value",null],b$29035];}else{if(($29017$29031&&((t0$29026===3)&&(($29014$29021[0]==="data")&&((v$29060=$29014$29021[1]),(((t1$29027=$36839(["multi"])($29014$29021[2]))),(t1$29027[0]&&(((t2$29028=t1$29027[1])),(((t3$29029=t2$29028.length)),(t3$29029>=0)))))))))){(b$29061=Array.prototype.slice.call(t2$29028,0));return [v$29060,b$29061];}else{$36820($29014$29021);}}}()),"/home/olivier/git/earl-grey/src/stdenv.eg",17959,18078);}(mbody$29084=parse_clauses$25416(scope$28858,to_match$28922,body$28924,$36406(opt$28921,$25281(((accum$29089=({})),((accum$29089["fallback"]=function(target$29094){return match_error$25434(target$29094);}),accum$29089)),({"wrap":function(x$29098){return x$29098;}})))));return ["send",["symbol","let"],["data",["send",["symbol","="],["data",to_match$28922,value$28923]],mbody$29084]];}})}),$25281(((accum$29102=({})),((accum$29102["each"]=function($29106$29113,scope$29114,$29108$29115,$29110$29116){var t0$29136;var t0$29145;var t1$29146;var t2$29147;var t3$29148;var t4$29149;var x$29262;var other$29286;var ends_with_test$29194;var _build_loop$29195;var $29123$29187;var $29124$29188;var $29125$29189;var $29126$29190;var t0$29185;var $29118$29180;var ph$29127;var form$29128;var env$29129;var li$29130;var clauses$29131;(ph$29127=$29106$29113);(t0$29136=$29108$29115);(form$29128=t0$29136);if($36512(t0$29136,"env")){(env$29129=t0$29136.env);}else{$36820($29108$29115);}(t0$29145=$29110$29116);if(((t0$29145 instanceof Array)&&(((t1$29146=t0$29145.length)),((t1$29146===3)&&((t0$29145[0]==="data")&&((li$29130=t0$29145[1]),(((t2$29147=$36839(["multi"])(t0$29145[2]))),(t2$29147[0]&&(((t3$29148=t2$29147[1])),(((t4$29149=t3$29148.length)),(t4$29149>=0))))))))))){(clauses$29131=Array.prototype.slice.call(t3$29148,0));}else{$36820($29110$29116);}($29118$29180=ph$29127);(ends_with_test$29194=false);(_build_loop$29195=function(wrap$29203,pre$29204,post$29205){var accum$29210;var accum$29249;return build_loop$25447(scope$29114,env$29129,form$29128,li$29130,clauses$29131,wrap$29203,pre$29204,post$29205,$25281(((accum$29210=({})),((accum$29210["wrap_pattern"]=function(x$29215,toplevel$29216){var x$29238;var other$29245;var $29222$29227;(ends_with_test$29194=((($29222$29227=x$29215)),function(){if((((x$29238=$29222$29227)),((x$29238 instanceof Array)&&(x$29238[0]==="test")))){return toplevel$29216;}else{(other$29245=$29222$29227);return false;}}()));return x$29215;}),accum$29210)),((accum$29249=({})),((accum$29249["fallback"]=function(target$29254){if(ends_with_test$29194){return ["symbol","false"];}else{return match_error$25434(target$29254);}}),accum$29249))));});if((((x$29262=$29118$29180)),((x$29262 instanceof Array)&&(x$29262[0]==="test")))){return $36406(["test_factory",li$29130,clauses$29131],({"env":env$29129}));}else{if((($29123$29187=($29118$29180 instanceof Array))&&(((t0$29185=$29118$29180.length)),(($29125$29189=(t0$29185===2))&&(($29126$29190=($29118$29180[0]==="expr"))&&($29118$29180[1]==="multi")))))){return ["nostep",form$29128];}else{if(($29126$29190&&($29118$29180[1]==="ignore"))){return _build_loop$29195(function(x$29282){return x$29282;},["splice"],["splice"]);}else{(other$29286=$29118$29180);return _build_loop$29195(function(x$29290){return ["send",["send",["symbol","acc"],["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["multi",x$29290]]];},["send",["symbol","="],["data",["send",["symbol","var"],["symbol","acc"]],["data"]]],["symbol","acc"]);}}}}),accum$29102)),$25281(((accum$29293=({})),((accum$29293["each?"]=function($29297$29304,scope$29305,$29299$29306,$29301$29307){var t0$29327;var t0$29336;var t1$29337;var t2$29338;var t3$29339;var t4$29340;var x$29387;var other$29415;var $29314$29378;var $29315$29379;var $29316$29380;var $29317$29381;var t0$29376;var $29309$29371;var ph$29318;var form$29319;var env$29320;var li$29321;var clauses$29322;(ph$29318=$29297$29304);(t0$29327=$29299$29306);(form$29319=t0$29327);if($36512(t0$29327,"env")){(env$29320=t0$29327.env);}else{$36820($29299$29306);}(t0$29336=$29301$29307);if(((t0$29336 instanceof Array)&&(((t1$29337=t0$29336.length)),((t1$29337===3)&&((t0$29336[0]==="data")&&((li$29321=t0$29336[1]),(((t2$29338=$36839(["multi"])(t0$29336[2]))),(t2$29338[0]&&(((t3$29339=t2$29338[1])),(((t4$29340=t3$29339.length)),(t4$29340>=0))))))))))){(clauses$29322=Array.prototype.slice.call(t3$29339,0));}else{$36820($29301$29307);}($29309$29371=ph$29318);if((((x$29387=$29309$29371)),((x$29387 instanceof Array)&&(x$29387[0]==="test")))){return $36406(["test_factory",li$29321,clauses$29322],({"env":env$29320}));}else{if((($29314$29378=($29309$29371 instanceof Array))&&(((t0$29376=$29309$29371.length)),(($29316$29380=(t0$29376===2))&&(($29317$29381=($29309$29371[0]==="expr"))&&($29309$29371[1]==="multi")))))){return ["nostep",form$29319];}else{if(($29317$29381&&($29309$29371[1]==="ignore"))){return build_loop$25447(scope$29305,env$29320,form$29319,li$29321,clauses$29322,function(x$29407){return x$29407;},["splice"],["splice"],({"fallback":function(target$29411){return ["symbol","false"];}}));}else{(other$29415=$29309$29371);return build_loop$25447(scope$29305,env$29320,form$29319,li$29321,clauses$29322,function(x$29419){return ["send",["send",["symbol","acc"],["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",x$29419]];},["send",["symbol","="],["data",["send",["symbol","var"],["symbol","acc"]],["data"]]],["symbol","acc"],({"fallback":function(target$29423){return ["symbol","false"];}}));}}}}),accum$29293)),$25281(((accum$29426=({})),((accum$29426["try"]=function($29430$29435,scope$29436,form$29437,$29432$29438){var t0$29454;var t1$29455;var t2$29456;var t3$29457;var t4$29458;var msg$29807;var otherwise$29803;var a$29756;var c$29757;var a$29729;var b$29730;var a$29655;var b$29656;var c$29657;var $29616$29645;var $29617$29646;var $29618$29647;var $29619$29648;var $29620$29649;var $29621$29650;var $29622$29651;var $29623$29652;var t0$29631;var t1$29632;var t2$29633;var t3$29634;var t4$29635;var t5$29636;var t6$29637;var t7$29638;var t8$29639;var t9$29640;var t10$29641;var t11$29642;var t12$29643;var $29611$29626;var msg$30015;var otherwise$30011;var a$29964;var c$29965;var a$29937;var b$29938;var a$29863;var b$29864;var c$29865;var $29824$29853;var $29825$29854;var $29826$29855;var $29827$29856;var $29828$29857;var $29829$29858;var $29830$29859;var $29831$29860;var t0$29839;var t1$29840;var t2$29841;var t3$29842;var t4$29843;var t5$29844;var t6$29845;var t7$29846;var t8$29847;var t9$29848;var t10$29849;var t11$29850;var t12$29851;var $29819$29834;var t0$29605;var t1$29606;var other$30039;var grouped$29502;var stmts$29503;var clauses$29504;var finally$29505;var $29444$29495;var $29445$29496;var $29446$29497;var $29447$29498;var t0$29493;var $29440$29488;var ph$29448;var parts$29449;(ph$29448=$29430$29435);(t0$29454=$29432$29438);if(((t0$29454 instanceof Array)&&(((t1$29455=t0$29454.length)),((t1$29455===2)&&((t0$29454[0]==="data")&&(((t2$29456=$36839(["multi"])(t0$29454[1]))),(t2$29456[0]&&(((t3$29457=t2$29456[1])),(((t4$29458=t3$29457.length)),(t4$29458>=0)))))))))){(parts$29449=Array.prototype.slice.call(t3$29457,0));}else{$36820($29432$29438);}($29440$29488=ph$29448);(grouped$29502=classify_contiguous$25411(parts$29449,function($29509$29512){var other$29601;var e$29585;var b$29586;var b$29555;var $29518$29544;var $29519$29545;var $29520$29546;var $29521$29547;var $29522$29548;var $29523$29549;var $29524$29550;var $29525$29551;var $29526$29552;var t0$29538;var t1$29539;var t2$29540;var t3$29541;var t4$29542;var $29514$29533;var ph$29527;(ph$29527=$29509$29512);($29514$29533=ph$29527);if((($29518$29544=($29514$29533 instanceof Array))&&(((t0$29538=$29514$29533.length)),(($29520$29546=(t0$29538===3))&&(($29521$29547=($29514$29533[0]==="send"))&&(((t1$29539=$29514$29533[1])),(($29523$29549=(t1$29539 instanceof Array))&&(((t2$29540=t1$29539.length)),(($29525$29551=(t2$29540===2))&&(($29526$29552=(t1$29539[0]==="symbol"))&&((t1$29539[1]==="finally")&&(((t3$29541=$29514$29533[2])),((t3$29541 instanceof Array)&&(((t4$29542=t3$29541.length)),((t4$29542===2)&&(t3$29541[0]==="data")))))))))))))))){(b$29555=t3$29541[1]);return "finally";}else{if(($29526$29552&&((t1$29539[1]==="->")&&(((t3$29541=$29514$29533[2])),((t3$29541 instanceof Array)&&(((t4$29542=t3$29541.length)),((t4$29542===3)&&(t3$29541[0]==="data")))))))){(e$29585=t3$29541[1]);(b$29586=t3$29541[2]);return "clause";}else{(other$29601=$29514$29533);return "stmt";}}}));(t0$29605=((($29611$29626=grouped$29502)),function(){if((($29616$29645=($29611$29626 instanceof Array))&&(((t0$29631=$29611$29626.length)),((t0$29631===3)&&(((t1$29632=$29611$29626[0])),((t1$29632 instanceof Array)&&(((t2$29633=t1$29632.length)),((t2$29633>=1)&&((t1$29632[0]==="stmt")&&((a$29655=Array.prototype.slice.call(t1$29632,1)),(((t3$29634=$29611$29626[1])),((t3$29634 instanceof Array)&&(((t4$29635=t3$29634.length)),((t4$29635>=1)&&((t3$29634[0]==="clause")&&((b$29656=Array.prototype.slice.call(t3$29634,1)),(((t5$29636=$29611$29626[2])),((t5$29636 instanceof Array)&&(((t6$29637=t5$29636.length)),((t6$29637===2)&&((t5$29636[0]==="finally")&&(((t7$29638=t5$29636[1])),((t7$29638 instanceof Array)&&(((t8$29639=t7$29638.length)),((t8$29639===3)&&((t7$29638[0]==="send")&&(((t9$29640=t7$29638[1])),((t9$29640 instanceof Array)&&(((t10$29641=t9$29640.length)),((t10$29641===2)&&((t9$29640[0]==="symbol")&&((t9$29640[1]==="finally")&&(((t11$29642=t7$29638[2])),((t11$29642 instanceof Array)&&(((t12$29643=t11$29642.length)),((t12$29643===2)&&(t11$29642[0]==="data"))))))))))))))))))))))))))))))))))))){(c$29657=t11$29642[1]);return [a$29655,b$29656,c$29657];}else{if(($29616$29645&&(($29618$29647=(t0$29631===2))&&(((t1$29632=$29611$29626[0])),(($29620$29649=(t1$29632 instanceof Array))&&(((t2$29633=t1$29632.length)),(($29622$29651=(t2$29633>=1))&&(($29623$29652=(t1$29632[0]==="stmt"))&&((a$29729=Array.prototype.slice.call(t1$29632,1)),(((t3$29634=$29611$29626[1])),((t3$29634 instanceof Array)&&(((t4$29635=t3$29634.length)),((t4$29635>=1)&&(t3$29634[0]==="clause")))))))))))))){(b$29730=Array.prototype.slice.call(t3$29634,1));return [a$29729,b$29730,null];}else{if(($29623$29652&&((a$29756=Array.prototype.slice.call(t1$29632,1)),(((t3$29634=$29611$29626[1])),((t3$29634 instanceof Array)&&(((t4$29635=t3$29634.length)),((t4$29635===2)&&((t3$29634[0]==="finally")&&(((t5$29636=t3$29634[1])),((t5$29636 instanceof Array)&&(((t6$29637=t5$29636.length)),((t6$29637===3)&&((t5$29636[0]==="send")&&(((t7$29638=t5$29636[1])),((t7$29638 instanceof Array)&&(((t8$29639=t7$29638.length)),((t8$29639===2)&&((t7$29638[0]==="symbol")&&((t7$29638[1]==="finally")&&(((t9$29640=t5$29636[2])),((t9$29640 instanceof Array)&&(((t10$29641=t9$29640.length)),((t10$29641===2)&&(t9$29640[0]==="data")))))))))))))))))))))))){(c$29757=t9$29640[1]);return [a$29756,[],c$29757];}else{(otherwise$29803=$29611$29626);(msg$29807=["try expects a list of statements","and one or more catch clauses and/or","a finally clause"].join(" "));throw $36561(["syntax","try"]).create(msg$29807,({"node":form$29437}));}}}}()));if(((t0$29605 instanceof Array)&&(((t1$29606=t0$29605.length)),(t1$29606===3)))){(stmts$29503=t0$29605[0]);(clauses$29504=t0$29605[1]);(finally$29505=t0$29605[2]);}else{$36820(((($29819$29834=grouped$29502)),function(){if((($29824$29853=($29819$29834 instanceof Array))&&(((t0$29839=$29819$29834.length)),((t0$29839===3)&&(((t1$29840=$29819$29834[0])),((t1$29840 instanceof Array)&&(((t2$29841=t1$29840.length)),((t2$29841>=1)&&((t1$29840[0]==="stmt")&&((a$29863=Array.prototype.slice.call(t1$29840,1)),(((t3$29842=$29819$29834[1])),((t3$29842 instanceof Array)&&(((t4$29843=t3$29842.length)),((t4$29843>=1)&&((t3$29842[0]==="clause")&&((b$29864=Array.prototype.slice.call(t3$29842,1)),(((t5$29844=$29819$29834[2])),((t5$29844 instanceof Array)&&(((t6$29845=t5$29844.length)),((t6$29845===2)&&((t5$29844[0]==="finally")&&(((t7$29846=t5$29844[1])),((t7$29846 instanceof Array)&&(((t8$29847=t7$29846.length)),((t8$29847===3)&&((t7$29846[0]==="send")&&(((t9$29848=t7$29846[1])),((t9$29848 instanceof Array)&&(((t10$29849=t9$29848.length)),((t10$29849===2)&&((t9$29848[0]==="symbol")&&((t9$29848[1]==="finally")&&(((t11$29850=t7$29846[2])),((t11$29850 instanceof Array)&&(((t12$29851=t11$29850.length)),((t12$29851===2)&&(t11$29850[0]==="data"))))))))))))))))))))))))))))))))))))){(c$29865=t11$29850[1]);return [a$29863,b$29864,c$29865];}else{if(($29824$29853&&(($29826$29855=(t0$29839===2))&&(((t1$29840=$29819$29834[0])),(($29828$29857=(t1$29840 instanceof Array))&&(((t2$29841=t1$29840.length)),(($29830$29859=(t2$29841>=1))&&(($29831$29860=(t1$29840[0]==="stmt"))&&((a$29937=Array.prototype.slice.call(t1$29840,1)),(((t3$29842=$29819$29834[1])),((t3$29842 instanceof Array)&&(((t4$29843=t3$29842.length)),((t4$29843>=1)&&(t3$29842[0]==="clause")))))))))))))){(b$29938=Array.prototype.slice.call(t3$29842,1));return [a$29937,b$29938,null];}else{if(($29831$29860&&((a$29964=Array.prototype.slice.call(t1$29840,1)),(((t3$29842=$29819$29834[1])),((t3$29842 instanceof Array)&&(((t4$29843=t3$29842.length)),((t4$29843===2)&&((t3$29842[0]==="finally")&&(((t5$29844=t3$29842[1])),((t5$29844 instanceof Array)&&(((t6$29845=t5$29844.length)),((t6$29845===3)&&((t5$29844[0]==="send")&&(((t7$29846=t5$29844[1])),((t7$29846 instanceof Array)&&(((t8$29847=t7$29846.length)),((t8$29847===2)&&((t7$29846[0]==="symbol")&&((t7$29846[1]==="finally")&&(((t9$29848=t5$29844[2])),((t9$29848 instanceof Array)&&(((t10$29849=t9$29848.length)),((t10$29849===2)&&(t9$29848[0]==="data")))))))))))))))))))))))){(c$29965=t9$29848[1]);return [a$29964,[],c$29965];}else{(otherwise$30011=$29819$29834);(msg$30015=["try expects a list of statements","and one or more catch clauses and/or","a finally clause"].join(" "));throw $36561(["syntax","try"]).create(msg$30015,({"node":form$29437}));}}}}()),"/home/olivier/git/earl-grey/src/stdenv.eg",21330,21854);}if((($29444$29495=($29440$29488 instanceof Array))&&(((t0$29493=$29440$29488.length)),(($29446$29497=(t0$29493===2))&&(($29447$29498=($29440$29488[0]==="expr"))&&($29440$29488[1]==="multi")))))){return ["nostep",form$29437];}else{if(($29447$29498&&($29440$29488[1]==="ignore"))){clauses$29504.push(mkstdenv$25428().mark(["send",["symbol","->"],["data",["symbol","e"],["send",["symbol","throw"],["symbol","e"]]]]));return ["js_try",["multi"].concat(stmts$29503),["send",["symbol","->"],["data",["data",["symbol","excv"]],parse_clauses$25416(scope$29436,["symbol","excv"],clauses$29504,({"wrap":function(x$30035){return x$30035;}}))]],(finally$29505||["void"])];}else{(other$30039=$29440$29488);clauses$29504.push(mkstdenv$25428().mark(["send",["symbol","->"],["data",["symbol","e"],["send",["symbol","throw"],["symbol","e"]]]]));return ["send",["symbol","let"],["data",["send",["symbol","="],["data",["send",["symbol","var"],["symbol","rval"]],["symbol","false"]]],["multi",["js_try",["send",["symbol","="],["data",["send",["symbol","set"],["symbol","rval"]],["multi"].concat(stmts$29503)]],["send",["symbol","->"],["data",["data",["symbol","excv"]],parse_clauses$25416(scope$29436,["symbol","excv"],clauses$29504,({"wrap":function(x$30044){return ["send",["symbol","="],["data",["send",["symbol","set"],["symbol","rval"]],x$30044]];}}))]],(finally$29505||["void"])],["symbol","rval"]]]];}}}),accum$29426)),$25281(((accum$30047=({})),((accum$30047["!!"]=function($30051$30056,scope$30057,form$30058,$30053$30059){var t0$30076;var t1$30077;var t2$30078;var t3$30079;var t4$30080;var other$30142;var $30065$30118;var $30066$30119;var $30067$30120;var $30068$30121;var t0$30116;var $30061$30111;var ph$30069;var expr$30070;var clauses$30071;(ph$30069=$30051$30056);(t0$30076=$30053$30059);if(((t0$30076 instanceof Array)&&(((t1$30077=t0$30076.length)),((t1$30077===3)&&((t0$30076[0]==="data")&&((expr$30070=t0$30076[1]),(((t2$30078=$36839(["multi"])(t0$30076[2]))),(t2$30078[0]&&(((t3$30079=t2$30078[1])),(((t4$30080=t3$30079.length)),(t4$30080>=0))))))))))){(clauses$30071=Array.prototype.slice.call(t3$30079,0));}else{$36820($30053$30059);}($30061$30111=ph$30069);if((($30065$30118=($30061$30111 instanceof Array))&&(((t0$30116=$30061$30111.length)),(($30067$30120=(t0$30116===2))&&(($30068$30121=($30061$30111[0]==="expr"))&&($30061$30111[1]==="multi")))))){return ["nostep",form$30058];}else{if(($30068$30121&&($30061$30111[1]==="ignore"))){clauses$30071.push(mkstdenv$25428().mark(["send",["symbol","->"],["data",["symbol","e"],["send",["symbol","throw"],["symbol","e"]]]]));return ["js_try",expr$30070,["send",["symbol","->"],["data",["data",["symbol","excv"]],parse_clauses$25416(scope$30057,["symbol","excv"],clauses$30071,({"wrap":function(x$30138){return x$30138;}}))]],["void"]];}else{(other$30142=$30061$30111);clauses$30071.push(mkstdenv$25428().mark(["send",["symbol","->"],["data",["symbol","e"],["send",["symbol","throw"],["symbol","e"]]]]));return ["send",["symbol","let"],["data",["send",["symbol","="],["data",["send",["symbol","var"],["symbol","rval"]],["symbol","false"]]],["multi",["js_try",["send",["symbol","="],["data",["send",["symbol","set"],["symbol","rval"]],expr$30070]],["send",["symbol","->"],["data",["data",["symbol","excv"]],parse_clauses$25416(scope$30057,["symbol","excv"],clauses$30071,({"wrap":function(x$30147){return ["send",["symbol","="],["data",["send",["symbol","set"],["symbol","rval"]],x$30147]];}}))]],["void"]],["symbol","rval"]]]];}}}),accum$30047)),$25281(({"@":var_operator$25442(expander$25429.gensym("it"))}),$25281(((accum$30150=({})),(((t0$30152=$36839(expr_mac$25436)(function(scope$30161,form$30162,$30158$30163){var t0$30169;var t1$30170;var t2$30171;var t3$30172;var t4$30173;var t5$30174;var it$30212;var construct$30213;var defn$30165;var env$30166;var body$30167;(t0$30169=$30158$30163);if(((t0$30169 instanceof Array)&&(((t1$30170=t0$30169.length)),((t1$30170===3)&&((t0$30169[0]==="data")&&(((t2$30171=t0$30169[1])),((defn$30165=t2$30171),($36512(t2$30171,"env")&&((env$30166=t2$30171.env),(((t3$30172=$36839(["multi"])(t0$30169[2]))),(t3$30172[0]&&(((t4$30173=t3$30172[1])),(((t5$30174=t4$30173.length)),(t5$30174>=0)))))))))))))){(body$30167=Array.prototype.slice.call(t4$30173,0));}else{$36820($30158$30163);}(it$30212=$36406(["symbol","@"],({"env":env$30166})));(construct$30213=function($30220$30223){var x$30257;var rest$30258;var x$30247;var $30228$30243;var $30229$30244;var t0$30241;var $30225$30236;var ph$30230;(ph$30230=$30220$30223);($30225$30236=ph$30230);if((($30228$30243=($30225$30236 instanceof Array))&&(((t0$30241=$30225$30236.length)),(t0$30241===1)))){(x$30247=$30225$30236[0]);return x$30247;}else{if(($30228$30243&&(t0$30241>=1))){(x$30257=$30225$30236[0]);(rest$30258=Array.prototype.slice.call($30225$30236,1));return ["send",["symbol","let"],["data",["send",["symbol","="],["data",it$30212,x$30257]],construct$30213(rest$30258)]];}else{$36820($30225$30236);}}});return construct$30213([defn$30165].concat(body$30167));}))),function(){if(t0$30152[0]){(accum$30150["chain"]=t0$30152[1]);return accum$30150;}else{return $36820(function(scope$30270,form$30271,$30267$30272){var t0$30278;var t1$30279;var t2$30280;var t3$30281;var t4$30282;var t5$30283;var it$30321;var construct$30322;var defn$30274;var env$30275;var body$30276;(t0$30278=$30267$30272);if(((t0$30278 instanceof Array)&&(((t1$30279=t0$30278.length)),((t1$30279===3)&&((t0$30278[0]==="data")&&(((t2$30280=t0$30278[1])),((defn$30274=t2$30280),($36512(t2$30280,"env")&&((env$30275=t2$30280.env),(((t3$30281=$36839(["multi"])(t0$30278[2]))),(t3$30281[0]&&(((t4$30282=t3$30281[1])),(((t5$30283=t4$30282.length)),(t5$30283>=0)))))))))))))){(body$30276=Array.prototype.slice.call(t4$30282,0));}else{$36820($30267$30272);}(it$30321=$36406(["symbol","@"],({"env":env$30275})));(construct$30322=function($30329$30332){var x$30366;var rest$30367;var x$30356;var $30337$30352;var $30338$30353;var t0$30350;var $30334$30345;var ph$30339;(ph$30339=$30329$30332);($30334$30345=ph$30339);if((($30337$30352=($30334$30345 instanceof Array))&&(((t0$30350=$30334$30345.length)),(t0$30350===1)))){(x$30356=$30334$30345[0]);return x$30356;}else{if(($30337$30352&&(t0$30350>=1))){(x$30366=$30334$30345[0]);(rest$30367=Array.prototype.slice.call($30334$30345,1));return ["send",["symbol","let"],["data",["send",["symbol","="],["data",it$30321,x$30366]],construct$30322(rest$30367)]];}else{$36820($30334$30345);}}});return construct$30322([defn$30274].concat(body$30276));});}}())),$25281(((accum$30374=({})),(((t0$30376=$36839(expr_mac$25436)(function(scope$30385,form$30386,$30382$30387){var t0$30393;var t1$30394;var t2$30395;var it$30416;var defn$30389;var env$30390;var body$30391;(t0$30393=$30382$30387);if(((t0$30393 instanceof Array)&&(((t1$30394=t0$30393.length)),((t1$30394===3)&&((t0$30393[0]==="data")&&(((t2$30395=t0$30393[1])),((defn$30389=t2$30395),$36512(t2$30395,"env")))))))){(env$30390=t2$30395.env);(body$30391=t0$30393[2]);}else{$36820($30382$30387);}(it$30416=$36406(["symbol","@"],({"env":env$30390})));return ["send",["symbol","let"],["data",["send",["symbol","="],["data",it$30416,defn$30389]],body$30391]];}))),function(){if(t0$30376[0]){(accum$30374["using"]=t0$30376[1]);return accum$30374;}else{return $36820(function(scope$30426,form$30427,$30423$30428){var t0$30434;var t1$30435;var t2$30436;var it$30457;var defn$30430;var env$30431;var body$30432;(t0$30434=$30423$30428);if(((t0$30434 instanceof Array)&&(((t1$30435=t0$30434.length)),((t1$30435===3)&&((t0$30434[0]==="data")&&(((t2$30436=t0$30434[1])),((defn$30430=t2$30436),$36512(t2$30436,"env")))))))){(env$30431=t2$30436.env);(body$30432=t0$30434[2]);}else{$36820($30423$30428);}(it$30457=$36406(["symbol","@"],({"env":env$30431})));return ["send",["symbol","let"],["data",["send",["symbol","="],["data",it$30457,defn$30430]],body$30432]];});}}())),$25281(((accum$30462=({})),(((t0$30464=$36839(overridable$25437)(function($30470$30475,scope$30476,form$30477,$30472$30478){var t0$30490;var t1$30491;var x$30517;var x$30527;var t0$30536;var t1$30537;var t2$30538;var stmts$30534;var x$30561;var $30480$30506;var ph$30484;var body$30485;(ph$30484=$30470$30475);(t0$30490=$30472$30478);if(((t0$30490 instanceof Array)&&(((t1$30491=t0$30490.length)),((t1$30491===2)&&(t0$30490[0]==="data"))))){(body$30485=t0$30490[1]);}else{$36820($30472$30478);}($30480$30506=ph$30484);if((((x$30517=$30480$30506)),((x$30517 instanceof Array)&&(x$30517[0]==="clause")))){return ["block",body$30485];}else{if((((x$30527=$30480$30506)),((x$30527 instanceof Array)&&(x$30527[0]==="test")))){(t0$30536=$36839(["multi"])(body$30485));if((t0$30536[0]&&(((t1$30537=t0$30536[1])),(((t2$30538=t1$30537.length)),(t2$30538>=0))))){(stmts$30534=Array.prototype.slice.call(t1$30537,0));}else{$36820(body$30485,"/home/olivier/git/earl-grey/src/stdenv.eg",24013,24017);}return ["do",["splice"].concat(stmts$30534)];}else{if((((x$30561=$30480$30506)),((x$30561 instanceof Array)&&(x$30561[0]==="expr")))){return ["multi",body$30485];}else{$36820($30480$30506);}}}}))),function(){if(t0$30464[0]){(accum$30462["do"]=t0$30464[1]);return accum$30462;}else{return $36820(function($30571$30576,scope$30577,form$30578,$30573$30579){var t0$30591;var t1$30592;var x$30618;var x$30628;var t0$30637;var t1$30638;var t2$30639;var stmts$30635;var x$30662;var $30581$30607;var ph$30585;var body$30586;(ph$30585=$30571$30576);(t0$30591=$30573$30579);if(((t0$30591 instanceof Array)&&(((t1$30592=t0$30591.length)),((t1$30592===2)&&(t0$30591[0]==="data"))))){(body$30586=t0$30591[1]);}else{$36820($30573$30579);}($30581$30607=ph$30585);if((((x$30618=$30581$30607)),((x$30618 instanceof Array)&&(x$30618[0]==="clause")))){return ["block",body$30586];}else{if((((x$30628=$30581$30607)),((x$30628 instanceof Array)&&(x$30628[0]==="test")))){(t0$30637=$36839(["multi"])(body$30586));if((t0$30637[0]&&(((t1$30638=t0$30637[1])),(((t2$30639=t1$30638.length)),(t2$30639>=0))))){(stmts$30635=Array.prototype.slice.call(t1$30638,0));}else{$36820(body$30586,"/home/olivier/git/earl-grey/src/stdenv.eg",24013,24017);}return ["do",["splice"].concat(stmts$30635)];}else{if((((x$30662=$30581$30607)),((x$30662 instanceof Array)&&(x$30662[0]==="expr")))){return ["multi",body$30586];}else{$36820($30581$30607);}}}});}}())),$25281(((accum$30670=({})),(((t0$30672=$36839(expr_mac$25436)(function(scope$30681,form$30682,$30678$30683){var other$30919;var s1$30882;var b$30883;var a$30815;var b$30816;var a$30771;var $30693$30766;var $30694$30767;var $30695$30768;var t0$30751;var t1$30752;var t2$30753;var t3$30754;var t4$30755;var t5$30756;var t6$30757;var t7$30758;var t8$30759;var t9$30760;var t10$30761;var t11$30762;var t12$30763;var t13$30764;var test$30730;var $30688$30731;var test$30718;var a$30719;var b$30720;var $30696$30714;var $30697$30715;var t0$30709;var t1$30710;var t2$30711;var t3$30712;var $30685$30704;var ph$30698;(ph$30698=$30678$30683);($30685$30704=ph$30698);if((($30696$30714=($30685$30704 instanceof Array))&&(((t0$30709=$30685$30704.length)),((t0$30709===4)&&($30685$30704[0]==="data"))))){(test$30718=$30685$30704[1]);(a$30719=$30685$30704[2]);(b$30720=$30685$30704[3]);return ["if",test$30718,a$30719,b$30720];}else{if(($30696$30714&&((t0$30709===3)&&(($30685$30704[0]==="data")&&((test$30730=$30685$30704[1]),(((t1$30710=$36839(["multi"])($30685$30704[2]))),(t1$30710[0]&&(((t2$30711=t1$30710[1])),(((t3$30712=t2$30711.length)),(t3$30712>=0)))))))))){($30688$30731=Array.prototype.slice.call(t2$30711,0));(t0$30751=$30688$30731);if((($30694$30767=(t0$30751 instanceof Array))&&(((t1$30752=t0$30751.length)),((t1$30752===1)&&(((t2$30753=t0$30751[0])),((t2$30753 instanceof Array)&&(((t3$30754=t2$30753.length)),((t3$30754===3)&&((t2$30753[0]==="send")&&(((t4$30755=t2$30753[1])),((t4$30755 instanceof Array)&&(((t5$30756=t4$30755.length)),((t5$30756===2)&&((t4$30755[0]==="symbol")&&((t4$30755[1]==="then")&&(((t6$30757=t2$30753[2])),((t6$30757 instanceof Array)&&(((t7$30758=t6$30757.length)),((t7$30758===2)&&(t6$30757[0]==="data")))))))))))))))))))){(a$30771=t6$30757[1]);return ["if",test$30730,a$30771,["value",(void 0)]];}else{if(($30694$30767&&((t1$30752===2)&&(((t2$30753=t0$30751[0])),((t2$30753 instanceof Array)&&(((t3$30754=t2$30753.length)),((t3$30754===3)&&((t2$30753[0]==="send")&&(((t4$30755=t2$30753[1])),((t4$30755 instanceof Array)&&(((t5$30756=t4$30755.length)),((t5$30756===2)&&((t4$30755[0]==="symbol")&&((t4$30755[1]==="then")&&(((t6$30757=t2$30753[2])),((t6$30757 instanceof Array)&&(((t7$30758=t6$30757.length)),((t7$30758===2)&&((t6$30757[0]==="data")&&((a$30815=t6$30757[1]),(((t8$30759=t0$30751[1])),((t8$30759 instanceof Array)&&(((t9$30760=t8$30759.length)),((t9$30760===3)&&((t8$30759[0]==="send")&&(((t10$30761=t8$30759[1])),((t10$30761 instanceof Array)&&(((t11$30762=t10$30761.length)),((t11$30762===2)&&((t10$30761[0]==="symbol")&&((t10$30761[1]==="else")&&(((t12$30763=t8$30759[2])),((t12$30763 instanceof Array)&&(((t13$30764=t12$30763.length)),((t13$30764===2)&&(t12$30763[0]==="data")))))))))))))))))))))))))))))))))))){(b$30816=t12$30763[1]);return ["if",test$30730,a$30815,b$30816];}else{if(($30694$30767&&((t1$30752>=1)&&((s1$30882=Array.prototype.slice.call(t0$30751,0,-1)),(((t2$30753=t0$30751[(t1$30752-1)])),((t2$30753 instanceof Array)&&(((t3$30754=t2$30753.length)),((t3$30754===3)&&((t2$30753[0]==="send")&&(((t4$30755=t2$30753[1])),((t4$30755 instanceof Array)&&(((t5$30756=t4$30755.length)),((t5$30756===2)&&((t4$30755[0]==="symbol")&&((t4$30755[1]==="else")&&(((t6$30757=t2$30753[2])),((t6$30757 instanceof Array)&&(((t7$30758=t6$30757.length)),((t7$30758===2)&&(t6$30757[0]==="data")))))))))))))))))))){(b$30883=t6$30757[1]);return ["if",test$30730,["multi"].concat(s1$30882),b$30883];}else{(other$30919=$30688$30731);return ["if",test$30730,["multi"].concat(other$30919),["value",(void 0)]];}}}}else{$36820($30685$30704);}}}))),function(){if(t0$30672[0]){(accum$30670["if"]=t0$30672[1]);return accum$30670;}else{return $36820(function(scope$30929,form$30930,$30926$30931){var other$31167;var s1$31130;var b$31131;var a$31063;var b$31064;var a$31019;var $30941$31014;var $30942$31015;var $30943$31016;var t0$30999;var t1$31000;var t2$31001;var t3$31002;var t4$31003;var t5$31004;var t6$31005;var t7$31006;var t8$31007;var t9$31008;var t10$31009;var t11$31010;var t12$31011;var t13$31012;var test$30978;var $30936$30979;var test$30966;var a$30967;var b$30968;var $30944$30962;var $30945$30963;var t0$30957;var t1$30958;var t2$30959;var t3$30960;var $30933$30952;var ph$30946;(ph$30946=$30926$30931);($30933$30952=ph$30946);if((($30944$30962=($30933$30952 instanceof Array))&&(((t0$30957=$30933$30952.length)),((t0$30957===4)&&($30933$30952[0]==="data"))))){(test$30966=$30933$30952[1]);(a$30967=$30933$30952[2]);(b$30968=$30933$30952[3]);return ["if",test$30966,a$30967,b$30968];}else{if(($30944$30962&&((t0$30957===3)&&(($30933$30952[0]==="data")&&((test$30978=$30933$30952[1]),(((t1$30958=$36839(["multi"])($30933$30952[2]))),(t1$30958[0]&&(((t2$30959=t1$30958[1])),(((t3$30960=t2$30959.length)),(t3$30960>=0)))))))))){($30936$30979=Array.prototype.slice.call(t2$30959,0));(t0$30999=$30936$30979);if((($30942$31015=(t0$30999 instanceof Array))&&(((t1$31000=t0$30999.length)),((t1$31000===1)&&(((t2$31001=t0$30999[0])),((t2$31001 instanceof Array)&&(((t3$31002=t2$31001.length)),((t3$31002===3)&&((t2$31001[0]==="send")&&(((t4$31003=t2$31001[1])),((t4$31003 instanceof Array)&&(((t5$31004=t4$31003.length)),((t5$31004===2)&&((t4$31003[0]==="symbol")&&((t4$31003[1]==="then")&&(((t6$31005=t2$31001[2])),((t6$31005 instanceof Array)&&(((t7$31006=t6$31005.length)),((t7$31006===2)&&(t6$31005[0]==="data")))))))))))))))))))){(a$31019=t6$31005[1]);return ["if",test$30978,a$31019,["value",(void 0)]];}else{if(($30942$31015&&((t1$31000===2)&&(((t2$31001=t0$30999[0])),((t2$31001 instanceof Array)&&(((t3$31002=t2$31001.length)),((t3$31002===3)&&((t2$31001[0]==="send")&&(((t4$31003=t2$31001[1])),((t4$31003 instanceof Array)&&(((t5$31004=t4$31003.length)),((t5$31004===2)&&((t4$31003[0]==="symbol")&&((t4$31003[1]==="then")&&(((t6$31005=t2$31001[2])),((t6$31005 instanceof Array)&&(((t7$31006=t6$31005.length)),((t7$31006===2)&&((t6$31005[0]==="data")&&((a$31063=t6$31005[1]),(((t8$31007=t0$30999[1])),((t8$31007 instanceof Array)&&(((t9$31008=t8$31007.length)),((t9$31008===3)&&((t8$31007[0]==="send")&&(((t10$31009=t8$31007[1])),((t10$31009 instanceof Array)&&(((t11$31010=t10$31009.length)),((t11$31010===2)&&((t10$31009[0]==="symbol")&&((t10$31009[1]==="else")&&(((t12$31011=t8$31007[2])),((t12$31011 instanceof Array)&&(((t13$31012=t12$31011.length)),((t13$31012===2)&&(t12$31011[0]==="data")))))))))))))))))))))))))))))))))))){(b$31064=t12$31011[1]);return ["if",test$30978,a$31063,b$31064];}else{if(($30942$31015&&((t1$31000>=1)&&((s1$31130=Array.prototype.slice.call(t0$30999,0,-1)),(((t2$31001=t0$30999[(t1$31000-1)])),((t2$31001 instanceof Array)&&(((t3$31002=t2$31001.length)),((t3$31002===3)&&((t2$31001[0]==="send")&&(((t4$31003=t2$31001[1])),((t4$31003 instanceof Array)&&(((t5$31004=t4$31003.length)),((t5$31004===2)&&((t4$31003[0]==="symbol")&&((t4$31003[1]==="else")&&(((t6$31005=t2$31001[2])),((t6$31005 instanceof Array)&&(((t7$31006=t6$31005.length)),((t7$31006===2)&&(t6$31005[0]==="data")))))))))))))))))))){(b$31131=t6$31005[1]);return ["if",test$30978,["multi"].concat(s1$31130),b$31131];}else{(other$31167=$30936$30979);return ["if",test$30978,["multi"].concat(other$31167),["value",(void 0)]];}}}}else{$36820($30933$30952);}}});}}())),$25281(((accum$31172=({})),(((t0$31174=$36839(expr_mac$25436)(function(scope$31183,form$31184,$31180$31185){var t0$31194;var t0$31221;var t1$31222;var t2$31223;var t3$31224;var t4$31225;var t5$31226;var t6$31227;var t7$31228;var t8$31229;var t0$31277;var test$31313;var body$31314;var label$31214;var bridge$31189$31209;var t0$31210;var $31187$31204;var ph$31191;var env$31192;(t0$31194=$31180$31185);if($36512(t0$31194,"env")){(env$31192=t0$31194.env);(ph$31191=t0$31194);}else{$36820($31180$31185);}($31187$31204=ph$31191);(bridge$31189$31209=$31187$31204);if((((bridge$31189$31209 instanceof Array)&&(((t0$31221=bridge$31189$31209.length)),((t0$31221===3)&&((bridge$31189$31209[0]==="send")&&(((t1$31222=bridge$31189$31209[1])),((t1$31222 instanceof Array)&&(((t2$31223=t1$31222.length)),((t2$31223===2)&&((t1$31222[0]==="symbol")&&((t1$31222[1]===".")&&(((t3$31224=bridge$31189$31209[2])),((t3$31224 instanceof Array)&&(((t4$31225=t3$31224.length)),((t4$31225===3)&&((t3$31224[0]==="data")&&(((t5$31226=t3$31224[1])),((t5$31226 instanceof Array)&&(((t6$31227=t5$31226.length)),((t6$31227===1)&&((t5$31226[0]==="void")&&(((t7$31228=t3$31224[2])),((t7$31228 instanceof Array)&&(((t8$31229=t7$31228.length)),((t8$31229===2)&&((t7$31228[0]==="symbol")&&((label$31214=t7$31228[1]),true))))))))))))))))))))))))))||((bridge$31189$31209 instanceof Array)&&(((t0$31277=bridge$31189$31209.length)),((t0$31277===2)&&((bridge$31189$31209[0]==="value")&&((label$31214=bridge$31189$31209[1]),true))))))){return ["macro",function(context$31289,scope$31290,form$31291,$31286$31292){var t0$31297;var t1$31298;var test$31294;var body$31295;(t0$31297=$31286$31292);if(((t0$31297 instanceof Array)&&(((t1$31298=t0$31297.length)),((t1$31298===3)&&(t0$31297[0]==="data"))))){(test$31294=t0$31297[1]);(body$31295=t0$31297[2]);}else{$36820($31286$31292);}return setup_label$25439(label$31214,env$31192,["js_while",test$31294,body$31295]);}];}else{if((($31187$31204 instanceof Array)&&(((t0$31210=$31187$31204.length)),((t0$31210===3)&&($31187$31204[0]==="data"))))){(test$31313=$31187$31204[1]);(body$31314=$31187$31204[2]);return setup_label$25439(scope$31183.gensym(),env$31192,["js_while",test$31313,body$31314]);}else{$36820($31187$31204);}}}))),function(){if(t0$31174[0]){(accum$31172["while"]=t0$31174[1]);return accum$31172;}else{return $36820(function(scope$31330,form$31331,$31327$31332){var t0$31341;var t0$31368;var t1$31369;var t2$31370;var t3$31371;var t4$31372;var t5$31373;var t6$31374;var t7$31375;var t8$31376;var t0$31424;var test$31460;var body$31461;var label$31361;var bridge$31336$31356;var t0$31357;var $31334$31351;var ph$31338;var env$31339;(t0$31341=$31327$31332);if($36512(t0$31341,"env")){(env$31339=t0$31341.env);(ph$31338=t0$31341);}else{$36820($31327$31332);}($31334$31351=ph$31338);(bridge$31336$31356=$31334$31351);if((((bridge$31336$31356 instanceof Array)&&(((t0$31368=bridge$31336$31356.length)),((t0$31368===3)&&((bridge$31336$31356[0]==="send")&&(((t1$31369=bridge$31336$31356[1])),((t1$31369 instanceof Array)&&(((t2$31370=t1$31369.length)),((t2$31370===2)&&((t1$31369[0]==="symbol")&&((t1$31369[1]===".")&&(((t3$31371=bridge$31336$31356[2])),((t3$31371 instanceof Array)&&(((t4$31372=t3$31371.length)),((t4$31372===3)&&((t3$31371[0]==="data")&&(((t5$31373=t3$31371[1])),((t5$31373 instanceof Array)&&(((t6$31374=t5$31373.length)),((t6$31374===1)&&((t5$31373[0]==="void")&&(((t7$31375=t3$31371[2])),((t7$31375 instanceof Array)&&(((t8$31376=t7$31375.length)),((t8$31376===2)&&((t7$31375[0]==="symbol")&&((label$31361=t7$31375[1]),true))))))))))))))))))))))))))||((bridge$31336$31356 instanceof Array)&&(((t0$31424=bridge$31336$31356.length)),((t0$31424===2)&&((bridge$31336$31356[0]==="value")&&((label$31361=bridge$31336$31356[1]),true))))))){return ["macro",function(context$31436,scope$31437,form$31438,$31433$31439){var t0$31444;var t1$31445;var test$31441;var body$31442;(t0$31444=$31433$31439);if(((t0$31444 instanceof Array)&&(((t1$31445=t0$31444.length)),((t1$31445===3)&&(t0$31444[0]==="data"))))){(test$31441=t0$31444[1]);(body$31442=t0$31444[2]);}else{$36820($31433$31439);}return setup_label$25439(label$31361,env$31339,["js_while",test$31441,body$31442]);}];}else{if((($31334$31351 instanceof Array)&&(((t0$31357=$31334$31351.length)),((t0$31357===3)&&($31334$31351[0]==="data"))))){(test$31460=$31334$31351[1]);(body$31461=$31334$31351[2]);return setup_label$25439(scope$31330.gensym(),env$31339,["js_while",test$31460,body$31461]);}else{$36820($31334$31351);}}});}}())),$25281(((accum$31472=({})),((accum$31472["for"]=function(context$31479,scope$31480,form$31481,$31476$31482){var t0$31491;var t0$31596;var t1$31597;var t2$31598;var t3$31599;var t4$31600;var t5$31601;var t6$31602;var t7$31603;var t8$31604;var t0$31652;var spec$31688;var body$31689;var label$31589;var setup_for$31510;var bridge$31486$31505;var t0$31506;var $31484$31500;var ph$31488;var expr$31489;(t0$31491=$31476$31482);(expr$31489=t0$31491);(ph$31488=t0$31491);($31484$31500=ph$31488);(setup_for$31510=function(label$31517,env$31518,$31514$31519,body$31520){var a$31560;var b$31561;var a$31548;var b$31549;var c$31550;var $31525$31544;var $31526$31545;var t0$31538;var t1$31539;var t2$31540;var t3$31541;var t4$31542;var $31522$31533;var ph$31527;(ph$31527=$31514$31519);($31522$31533=ph$31527);if((($31525$31544=($31522$31533 instanceof Array))&&(((t0$31538=$31522$31533.length)),((t0$31538===4)&&($31522$31533[0]==="multi"))))){(a$31548=$31522$31533[1]);(b$31549=$31522$31533[2]);(c$31550=$31522$31533[3]);return ["multi",a$31548,setup_label$25439(label$31517,env$31518,["js_for",["multi"],b$31549,c$31550,body$31520])];}else{if(($31525$31544&&((t0$31538===3)&&(($31522$31533[0]==="send")&&(((t1$31539=$31522$31533[1])),((t1$31539 instanceof Array)&&(((t2$31540=t1$31539.length)),((t2$31540===2)&&((t1$31539[0]==="symbol")&&((t1$31539[1]==="in")&&(((t3$31541=$31522$31533[2])),((t3$31541 instanceof Array)&&(((t4$31542=t3$31541.length)),((t4$31542===3)&&(t3$31541[0]==="data"))))))))))))))){(a$31560=t3$31541[1]);(b$31561=t3$31541[2]);return ["multi",["declare",a$31560,["value",null]],setup_label$25439(label$31517,env$31518,["js_for_in",a$31560,b$31561,body$31520])];}else{$36820($31522$31533);}}});(bridge$31486$31505=$31484$31500);if((((bridge$31486$31505 instanceof Array)&&(((t0$31596=bridge$31486$31505.length)),((t0$31596===3)&&((bridge$31486$31505[0]==="send")&&(((t1$31597=bridge$31486$31505[1])),((t1$31597 instanceof Array)&&(((t2$31598=t1$31597.length)),((t2$31598===2)&&((t1$31597[0]==="symbol")&&((t1$31597[1]===".")&&(((t3$31599=bridge$31486$31505[2])),((t3$31599 instanceof Array)&&(((t4$31600=t3$31599.length)),((t4$31600===3)&&((t3$31599[0]==="data")&&(((t5$31601=t3$31599[1])),((t5$31601 instanceof Array)&&(((t6$31602=t5$31601.length)),((t6$31602===1)&&((t5$31601[0]==="void")&&(((t7$31603=t3$31599[2])),((t7$31603 instanceof Array)&&(((t8$31604=t7$31603.length)),((t8$31604===2)&&((t7$31603[0]==="symbol")&&((label$31589=t7$31603[1]),true))))))))))))))))))))))))))||((bridge$31486$31505 instanceof Array)&&(((t0$31652=bridge$31486$31505.length)),((t0$31652===2)&&((bridge$31486$31505[0]==="value")&&((label$31589=bridge$31486$31505[1]),true))))))){return ["macro",function(context$31664,scope$31665,form$31666,$31661$31667){var t0$31672;var t1$31673;var spec$31669;var body$31670;(t0$31672=$31661$31667);if(((t0$31672 instanceof Array)&&(((t1$31673=t0$31672.length)),((t1$31673===3)&&(t0$31672[0]==="data"))))){(spec$31669=t0$31672[1]);(body$31670=t0$31672[2]);}else{$36820($31661$31667);}return setup_for$31510(label$31589,expr$31489.env,spec$31669,body$31670);}];}else{if((($31484$31500 instanceof Array)&&(((t0$31506=$31484$31500.length)),((t0$31506===3)&&($31484$31500[0]==="data"))))){(spec$31688=$31484$31500[1]);(body$31689=$31484$31500[2]);return setup_for$31510(scope$31480.gensym(),form$31481.env,spec$31688,body$31689);}else{$36820($31484$31500);}}}),accum$31472)),$25281(((accum$31700=({})),((accum$31700["var"]=function($31704$31707,scope$31708,form$31709,argument$31710){var x$31716;if((((x$31716=$31704$31707)),((x$31716 instanceof Array)&&(x$31716[0]==="pattern")))){}else{$36820($31704$31707);}return ["mode","var",argument$31710];}),accum$31700)),$25281(((accum$31723=({})),((accum$31723["set"]=function($31727$31730,scope$31731,form$31732,argument$31733){var x$31739;if((((x$31739=$31727$31730)),((x$31739 instanceof Array)&&(x$31739[0]==="pattern")))){}else{$36820($31727$31730);}return ["mode","set",argument$31733];}),accum$31723)),$25281(((accum$31746=({})),((accum$31746["let"]=function($31750$31753,scope$31754,form$31755,argument$31756){var x$31778;var construct$31829;var bindings$31803;var body$31804;var t0$31796;var t1$31797;var t2$31798;var t3$31799;var $31787$31791;var other$31785;var $31758$31767;var ph$31761;(ph$31761=$31750$31753);($31758$31767=ph$31761);if((((x$31778=$31758$31767)),((x$31778 instanceof Array)&&(x$31778[0]==="pattern")))){return ["mode","let",argument$31756];}else{(other$31785=$31758$31767);($31787$31791=argument$31756);if((($31787$31791 instanceof Array)&&(((t0$31796=$31787$31791.length)),((t0$31796===3)&&(($31787$31791[0]==="data")&&(((t1$31797=$36839(["multi"])($31787$31791[1]))),(t1$31797[0]&&(((t2$31798=t1$31797[1])),(((t3$31799=t2$31798.length)),(t3$31799>=0)))))))))){(bindings$31803=Array.prototype.slice.call(t2$31798,0));(body$31804=$31787$31791[2]);(construct$31829=function($31833$31836){var bind$31875;var val$31876;var xs$31877;var $31841$31862;var $31842$31863;var t0$31854;var t1$31855;var t2$31856;var t3$31857;var t4$31858;var t5$31859;var t6$31860;var $31838$31849;var ph$31843;(ph$31843=$31833$31836);($31838$31849=ph$31843);if((($31841$31862=($31838$31849 instanceof Array))&&(((t0$31854=$31838$31849.length)),(t0$31854===0)))){return body$31804;}else{if(($31841$31862&&((t0$31854>=1)&&(((t1$31855=$31838$31849[0])),((t1$31855 instanceof Array)&&(((t2$31856=t1$31855.length)),((t2$31856===3)&&((t1$31855[0]==="send")&&(((t3$31857=t1$31855[1])),((t3$31857 instanceof Array)&&(((t4$31858=t3$31857.length)),((t4$31858===2)&&((t3$31857[0]==="symbol")&&((t3$31857[1]==="=")&&(((t5$31859=t1$31855[2])),((t5$31859 instanceof Array)&&(((t6$31860=t5$31859.length)),((t6$31860===3)&&(t5$31859[0]==="data"))))))))))))))))))){(bind$31875=t5$31859[1]);(val$31876=t5$31859[2]);(xs$31877=Array.prototype.slice.call($31838$31849,1));return $36406(["multi",["send",["symbol","="],["data",["send",["symbol","let"],bind$31875],val$31876]],construct$31829(xs$31877)],({"nonrecursive":true}));}else{$36820($31838$31849);}}});return construct$31829(bindings$31803);}else{$36820($31787$31791);}}}),accum$31746)),$25281(((accum$31916=({})),(((t0$31918=$36839(expr_mac$25436)(function(scope$31927,form$31928,$31924$31929){var t0$31934;var t1$31935;var t2$31936;var t3$31937;var t4$31938;var $index$31994;var $length$31988;var temp$31982;var acc$31976;var let_bindings$31968;var bindings$31931;var body$31932;(t0$31934=$31924$31929);if(((t0$31934 instanceof Array)&&(((t1$31935=t0$31934.length)),((t1$31935===3)&&((t0$31934[0]==="data")&&(((t2$31936=$36839(["multi"])(t0$31934[1]))),(t2$31936[0]&&(((t3$31937=t2$31936[1])),(((t4$31938=t3$31937.length)),(t4$31938>=0)))))))))){(bindings$31931=Array.prototype.slice.call(t3$31937,0));(body$31932=t0$31934[2]);}else{$36820($31924$31929);}(let_bindings$31968=(((acc$31976=[])),(((temp$31982=bindings$31931)),((($length$31988=temp$31982.length)),((($index$31994=0)),function(){$31971:for(;($index$31994<$length$31988);($index$31994++)){var b$32017;var v$32018;var t0$32008;var t1$32009;var t2$32010;var t3$32011;var t4$32012;var t5$32013;var m$32003;(m$32003=temp$31982[$index$31994]);(t0$32008=m$32003);if(((t0$32008 instanceof Array)&&(((t1$32009=t0$32008.length)),((t1$32009===3)&&((t0$32008[0]==="send")&&(((t2$32010=t0$32008[1])),((t2$32010 instanceof Array)&&(((t3$32011=t2$32010.length)),((t3$32011===2)&&((t2$32010[0]==="symbol")&&((t2$32010[1]==="=")&&(((t4$32012=t0$32008[2])),((t4$32012 instanceof Array)&&(((t5$32013=t4$32012.length)),((t5$32013===3)&&(t4$32012[0]==="data")))))))))))))))){(b$32017=t4$32012[1]);(v$32018=t4$32012[2]);acc$31976.push(["send",["symbol","="],["data",["send",["symbol","let"],b$32017],v$32018]]);}else{$36820(m$32003,"/home/olivier/git/earl-grey/src/stdenv.eg",26625,26672);}}}()))),acc$31976));return ["multi"].concat(let_bindings$31968).concat([body$31932]);}))),function(){if(t0$31918[0]){(accum$31916["letrec"]=t0$31918[1]);return accum$31916;}else{return $36820(function(scope$32060,form$32061,$32057$32062){var t0$32067;var t1$32068;var t2$32069;var t3$32070;var t4$32071;var $index$32127;var $length$32121;var temp$32115;var acc$32109;var let_bindings$32101;var bindings$32064;var body$32065;(t0$32067=$32057$32062);if(((t0$32067 instanceof Array)&&(((t1$32068=t0$32067.length)),((t1$32068===3)&&((t0$32067[0]==="data")&&(((t2$32069=$36839(["multi"])(t0$32067[1]))),(t2$32069[0]&&(((t3$32070=t2$32069[1])),(((t4$32071=t3$32070.length)),(t4$32071>=0)))))))))){(bindings$32064=Array.prototype.slice.call(t3$32070,0));(body$32065=t0$32067[2]);}else{$36820($32057$32062);}(let_bindings$32101=(((acc$32109=[])),(((temp$32115=bindings$32064)),((($length$32121=temp$32115.length)),((($index$32127=0)),function(){$32104:for(;($index$32127<$length$32121);($index$32127++)){var b$32150;var v$32151;var t0$32141;var t1$32142;var t2$32143;var t3$32144;var t4$32145;var t5$32146;var m$32136;(m$32136=temp$32115[$index$32127]);(t0$32141=m$32136);if(((t0$32141 instanceof Array)&&(((t1$32142=t0$32141.length)),((t1$32142===3)&&((t0$32141[0]==="send")&&(((t2$32143=t0$32141[1])),((t2$32143 instanceof Array)&&(((t3$32144=t2$32143.length)),((t3$32144===2)&&((t2$32143[0]==="symbol")&&((t2$32143[1]==="=")&&(((t4$32145=t0$32141[2])),((t4$32145 instanceof Array)&&(((t5$32146=t4$32145.length)),((t5$32146===3)&&(t4$32145[0]==="data")))))))))))))))){(b$32150=t4$32145[1]);(v$32151=t4$32145[2]);acc$32109.push(["send",["symbol","="],["data",["send",["symbol","let"],b$32150],v$32151]]);}else{$36820(m$32136,"/home/olivier/git/earl-grey/src/stdenv.eg",26625,26672);}}}()))),acc$32109));return ["multi"].concat(let_bindings$32101).concat([body$32065]);});}}())),$25281(((accum$32188=({})),((accum$32188["where"]=function(context$32195,scope$32196,form$32197,$32192$32198){var t0$32203;var t1$32204;var body$32200;var bindings$32201;(t0$32203=$32192$32198);if(((t0$32203 instanceof Array)&&(((t1$32204=t0$32203.length)),((t1$32204===3)&&(t0$32203[0]==="data"))))){(body$32200=t0$32203[1]);(bindings$32201=t0$32203[2]);}else{$36820($32192$32198);}return ["send",["symbol","letrec"],["data",bindings$32201,body$32200]];}),accum$32188)),$25281(({"break":break_mac$25440(null),"continue":continue_mac$25441(null)}),$25281(((accum$32218=({})),(((t0$32220=$36839(expr_mac$25436)(function(scope$32227,form$32228,arg$32229){return ["js_throw",arg$32229];}))),function(){if(t0$32220[0]){(accum$32218["throw"]=t0$32220[1]);return accum$32218;}else{return $36820(function(scope$32235,form$32236,arg$32237){return ["js_throw",arg$32237];});}}())),$25281(((accum$32240=({})),(((t0$32242=$36839(expr_mac$25436)(function(scope$32249,form$32250,arg$32251){return ["js_return",arg$32251];}))),function(){if(t0$32242[0]){(accum$32240["return"]=t0$32242[1]);return accum$32240;}else{return $36820(function(scope$32257,form$32258,arg$32259){return ["js_return",arg$32259];});}}())),$25281(((accum$32262=({})),(((t0$32264=$36839(expr_mac$25436)(function(scope$32271,form$32272,arg$32273){return ["js_new",arg$32273];}))),function(){if(t0$32264[0]){(accum$32262["new"]=t0$32264[1]);return accum$32262;}else{return $36820(function(scope$32279,form$32280,arg$32281){return ["js_new",arg$32281];});}}())),$25281(((accum$32284=({})),((accum$32284["delete"]=function(context$32291,scope$32292,form$32293,$32288$32294){var t0$32302;var other$32330;var s$32320;var t0$32316;var $32296$32311;var ph$32299;var arg$32300;(t0$32302=$32288$32294);(arg$32300=t0$32302);(ph$32299=t0$32302);($32296$32311=ph$32299);if((($32296$32311 instanceof Array)&&(((t0$32316=$32296$32311.length)),((t0$32316===2)&&($32296$32311[0]==="symbol"))))){(s$32320=$32296$32311[1]);return ["undeclare",arg$32300];}else{(other$32330=$32296$32311);return ["js_delete",other$32330];}}),accum$32284)),$25281(((accum$32333=({})),((accum$32333["splice"]=function(context$32340,scope$32341,form$32342,$32337$32343){var t0$32347;var t1$32348;var t2$32349;var t3$32350;var t4$32351;var stmts$32345;(t0$32347=$32337$32343);if(((t0$32347 instanceof Array)&&(((t1$32348=t0$32347.length)),((t1$32348===2)&&((t0$32347[0]==="data")&&(((t2$32349=$36839(["multi"])(t0$32347[1]))),(t2$32349[0]&&(((t3$32350=t2$32349[1])),(((t4$32351=t3$32350.length)),(t4$32351>=0)))))))))){(stmts$32345=Array.prototype.slice.call(t3$32350,0));}else{$36820($32337$32343);}return ["splice"].concat(stmts$32345);}),accum$32333)),$25281(((accum$32380=({})),((accum$32380["?"]=function(context$32387,scope$32388,form$32389,$32384$32390){var other$32500;var $32452$32465;var $32453$32466;var $32454$32467;var $32455$32468;var t0$32463;var $32444$32458;var checker$32441;var other$32636;var $32588$32601;var $32589$32602;var $32590$32603;var $32591$32604;var t0$32599;var $32580$32594;var x$32652;var other$32680;var t0$32667;var $32657$32662;var other$32684;var $32574$32641;var checker$32577;var chk$32568;var target$32569;var expr$32420;var $32395$32414;var $32396$32415;var $32397$32416;var $32398$32417;var t0$32410;var t1$32411;var t2$32412;var $32392$32405;var ph$32399;(ph$32399=$32384$32390);($32392$32405=ph$32399);if((($32395$32414=($32392$32405 instanceof Array))&&(((t0$32410=$32392$32405.length)),(($32397$32416=(t0$32410===3))&&(($32398$32417=($32392$32405[0]==="data"))&&((expr$32420=$32392$32405[1]),(((t1$32411=$32392$32405[2])),((t1$32411 instanceof Array)&&(((t2$32412=t1$32411.length)),((t2$32412===1)&&(t1$32411[0]==="void"))))))))))){(checker$32441=((($32444$32458=expr$32420)),function(){if((($32452$32465=($32444$32458 instanceof Array))&&(((t0$32463=$32444$32458.length)),(($32454$32467=(t0$32463===2))&&(($32455$32468=($32444$32458[0]==="symbol"))&&($32444$32458[1]==="String")))))){return checker_db$25423.String;}else{if(($32455$32468&&($32444$32458[1]==="Number"))){return checker_db$25423.Number;}else{if(($32455$32468&&($32444$32458[1]==="true"))){return checker_db$25423.true;}else{if(($32455$32468&&($32444$32458[1]==="false"))){return checker_db$25423.false;}else{if(($32455$32468&&($32444$32458[1]==="null"))){return checker_db$25423.null;}else{if(($32455$32468&&($32444$32458[1]==="undefined"))){return checker_db$25423.undefined;}else{(other$32500=$32444$32458);return ["send",["symbol","___checker"],["data",expr$32420]];}}}}}}}()));return ["macro",function($32504$32507,env$32508,form$32509,expr$32510){var x$32532;var other$32560;var t0$32547;var $32537$32542;var other$32564;var $32512$32521;var ph$32515;(ph$32515=$32504$32507);($32512$32521=ph$32515);if((((x$32532=$32512$32521)),((x$32532 instanceof Array)&&(x$32532[0]==="pattern")))){($32537$32542=expr$32510);if((($32537$32542 instanceof Array)&&(((t0$32547=$32537$32542.length)),((t0$32547===1)&&($32537$32542[0]==="void"))))){return ["check",checker$32441,["ignore"]];}else{(other$32560=$32537$32542);return ["check",checker$32441,expr$32510];}}else{(other$32564=$32512$32521);return ["send",checker$32441,["data",expr$32510]];}}];}else{if($32398$32417){(chk$32568=$32392$32405[1]);(target$32569=$32392$32405[2]);(checker$32577=((($32580$32594=chk$32568)),function(){if((($32588$32601=($32580$32594 instanceof Array))&&(((t0$32599=$32580$32594.length)),(($32590$32603=(t0$32599===2))&&(($32591$32604=($32580$32594[0]==="symbol"))&&($32580$32594[1]==="String")))))){return checker_db$25423.String;}else{if(($32591$32604&&($32580$32594[1]==="Number"))){return checker_db$25423.Number;}else{if(($32591$32604&&($32580$32594[1]==="true"))){return checker_db$25423.true;}else{if(($32591$32604&&($32580$32594[1]==="false"))){return checker_db$25423.false;}else{if(($32591$32604&&($32580$32594[1]==="null"))){return checker_db$25423.null;}else{if(($32591$32604&&($32580$32594[1]==="undefined"))){return checker_db$25423.undefined;}else{(other$32636=$32580$32594);return ["send",["symbol","___checker"],["data",chk$32568]];}}}}}}}()));($32574$32641=context$32387);if((((x$32652=$32574$32641)),((x$32652 instanceof Array)&&(x$32652[0]==="pattern")))){($32657$32662=target$32569);if((($32657$32662 instanceof Array)&&(((t0$32667=$32657$32662.length)),((t0$32667===1)&&($32657$32662[0]==="void"))))){return ["check",checker$32577,["ignore"]];}else{(other$32680=$32657$32662);return ["check",checker$32577,target$32569];}}else{(other$32684=$32574$32641);return ["send",checker$32577,["data",target$32569]];}}else{$36820($32392$32405);}}}),accum$32380)),$25281(((accum$32689=({})),((accum$32689["!"]=function(context$32696,scope$32697,form$32698,$32693$32699){var other$32797;var $32757$32770;var $32758$32771;var $32759$32772;var $32760$32773;var t0$32768;var $32753$32763;var projector$32750;var other$32921;var $32881$32894;var $32882$32895;var $32883$32896;var $32884$32897;var t0$32892;var $32877$32887;var x$32937;var other$32965;var t0$32952;var $32942$32947;var other$32969;var $32871$32926;var projector$32874;var prj$32865;var target$32866;var expr$32729;var $32704$32723;var $32705$32724;var $32706$32725;var $32707$32726;var t0$32719;var t1$32720;var t2$32721;var $32701$32714;var ph$32708;(ph$32708=$32693$32699);($32701$32714=ph$32708);if((($32704$32723=($32701$32714 instanceof Array))&&(((t0$32719=$32701$32714.length)),(($32706$32725=(t0$32719===3))&&(($32707$32726=($32701$32714[0]==="data"))&&((expr$32729=$32701$32714[1]),(((t1$32720=$32701$32714[2])),((t1$32720 instanceof Array)&&(((t2$32721=t1$32720.length)),((t2$32721===1)&&(t1$32720[0]==="void"))))))))))){(projector$32750=((($32753$32763=expr$32729)),function(){if((($32757$32770=($32753$32763 instanceof Array))&&(((t0$32768=$32753$32763.length)),(($32759$32772=(t0$32768===2))&&(($32760$32773=($32753$32763[0]==="symbol"))&&($32753$32763[1]==="String")))))){return mac1$25422(function(x$32785){return ["data",["symbol","true"],["send",["symbol","String"],["data",x$32785]]];});}else{if(($32760$32773&&($32753$32763[1]==="Number"))){return mac1$25422(function(x$32793){return ["data",["symbol","true"],["send",["symbol","parseFloat"],["data",x$32793]]];});}else{(other$32797=$32753$32763);return ["send",["symbol","___projector"],["data",expr$32729]];}}}()));return ["macro",function($32801$32804,env$32805,form$32806,expr$32807){var x$32829;var other$32857;var t0$32844;var $32834$32839;var other$32861;var $32809$32818;var ph$32812;(ph$32812=$32801$32804);($32809$32818=ph$32812);if((((x$32829=$32809$32818)),((x$32829 instanceof Array)&&(x$32829[0]==="pattern")))){($32834$32839=expr$32807);if((($32834$32839 instanceof Array)&&(((t0$32844=$32834$32839.length)),((t0$32844===1)&&($32834$32839[0]==="void"))))){return ["project",projector$32750,["ignore"]];}else{(other$32857=$32834$32839);return ["project",projector$32750,expr$32807];}}else{(other$32861=$32809$32818);return ["send",["send",projector$32750,["data",expr$32807]],["value",1]];}}];}else{if($32707$32726){(prj$32865=$32701$32714[1]);(target$32866=$32701$32714[2]);(projector$32874=((($32877$32887=prj$32865)),function(){if((($32881$32894=($32877$32887 instanceof Array))&&(((t0$32892=$32877$32887.length)),(($32883$32896=(t0$32892===2))&&(($32884$32897=($32877$32887[0]==="symbol"))&&($32877$32887[1]==="String")))))){return mac1$25422(function(x$32909){return ["data",["symbol","true"],["send",["symbol","String"],["data",x$32909]]];});}else{if(($32884$32897&&($32877$32887[1]==="Number"))){return mac1$25422(function(x$32917){return ["data",["symbol","true"],["send",["symbol","parseFloat"],["data",x$32917]]];});}else{(other$32921=$32877$32887);return ["send",["symbol","___projector"],["data",prj$32865]];}}}()));($32871$32926=context$32696);if((((x$32937=$32871$32926)),((x$32937 instanceof Array)&&(x$32937[0]==="pattern")))){($32942$32947=target$32866);if((($32942$32947 instanceof Array)&&(((t0$32952=$32942$32947.length)),((t0$32952===1)&&($32942$32947[0]==="void"))))){return ["project",projector$32874,["ignore"]];}else{(other$32965=$32942$32947);return ["project",projector$32874,target$32866];}}else{(other$32969=$32871$32926);return ["send",["send",projector$32874,["data",target$32866]],["value",1]];}}else{$36820($32701$32714);}}}),accum$32689)),$25281(((accum$32974=({})),((accum$32974["#"]=function(context$32981,scope$32982,form$32983,$32978$32984){var t0$32988;var t1$32989;var t2$32990;var t3$32991;var t4$32992;var t5$32993;var f$33033;var tag$32986;(t0$32988=$32978$32984);if(((t0$32988 instanceof Array)&&(((t1$32989=t0$32988.length)),((t1$32989===3)&&((t0$32988[0]==="data")&&(((t2$32990=t0$32988[1])),((t2$32990 instanceof Array)&&(((t3$32991=t2$32990.length)),((t3$32991===1)&&((t2$32990[0]==="void")&&(((t4$32992=t0$32988[2])),((t4$32992 instanceof Array)&&(((t5$32993=t4$32992.length)),((t5$32993===2)&&(t4$32992[0]==="symbol"))))))))))))))){(tag$32986=t4$32992[1]);}else{$36820($32978$32984);}(tag$32986=["value",tag$32986]);(f$33033=function($33037$33040,scope$33041,form$33042,expr$33043){var x$33065;var other$33134;var subp$33120;var $33076$33116;var $33077$33117;var t0$33114;var $33072$33109;var checker_mac$33078;var other$33172;var args$33167;var $33143$33154;var $33144$33155;var t0$33152;var $33139$33147;var $33045$33054;var ph$33048;(ph$33048=$33037$33040);($33045$33054=ph$33048);if((((x$33065=$33045$33054)),((x$33065 instanceof Array)&&(x$33065[0]==="pattern")))){(checker_mac$33078=["macro",function(context$33085,scope$33086,form$33087,$33082$33088){var t0$33092;var t1$33093;var expr$33090;(t0$33092=$33082$33088);if(((t0$33092 instanceof Array)&&(((t1$33093=t0$33092.length)),((t1$33093===2)&&(t0$33092[0]==="data"))))){(expr$33090=t0$33092[1]);}else{$36820($33082$33088);}return ["send",["symbol","let"],["data",["send",["symbol","="],["data",["symbol","x"],expr$33090]],["send",["symbol","and"],["data",["send",["symbol","instanceof"],["data",["symbol","x"],["symbol","Array"]]],["send",["symbol","==="],["data",["send",["symbol","x"],["value",0]],tag$32986]]]]]];}]);($33072$33109=expr$33043);if((($33076$33116=($33072$33109 instanceof Array))&&(((t0$33114=$33072$33109.length)),((t0$33114>=1)&&($33072$33109[0]==="data"))))){(subp$33120=Array.prototype.slice.call($33072$33109,1));return ["data",tag$32986].concat(subp$33120);}else{if(($33076$33116&&((t0$33114===1)&&($33072$33109[0]==="void")))){return ["check",checker_mac$33078,["ignore"]];}else{(other$33134=$33072$33109);return ["check",checker_mac$33078,expr$33043];}}}else{$33045$33054;($33139$33147=expr$33043);if((($33143$33154=($33139$33147 instanceof Array))&&(((t0$33152=$33139$33147.length)),((t0$33152===1)&&($33139$33147[0]==="void"))))){return ["data",tag$32986];}else{if(($33143$33154&&((t0$33152>=1)&&($33139$33147[0]==="data")))){(args$33167=Array.prototype.slice.call($33139$33147,1));return ["data",tag$32986].concat(args$33167);}else{(other$33172=$33139$33147);return ["send",["data",tag$32986],other$33172];}}}});return ["macro",f$33033];}),accum$32974)),$25281(((accum$33176=({})),((accum$33176["require"]=function(context$33183,scope$33184,form$33185,$33180$33186){var req$33224;var stmts$33225;var topfetch$33226;var produce$33227;var arg$33490;var expr$33211;var $33192$33207;var $33193$33208;var t0$33205;var $33188$33200;var ph$33194;(ph$33194=$33180$33186);($33188$33200=ph$33194);if((($33192$33207=($33188$33200 instanceof Array))&&(((t0$33205=$33188$33200.length)),((t0$33205===2)&&($33188$33200[0]==="data"))))){(expr$33211=$33188$33200[1]);(req$33224=["variable","require"]);(stmts$33225=[]);(topfetch$33226=function(pkg$33238,v$33239){stmts$33225.push(["send",["symbol","="],["data",v$33239,["send",req$33224,["data",pkg$33238]]]]);return v$33239;});(produce$33227=function($33246$33249,fetch$33250){var t0$33272;var t0$33333;var t0$33341;var $index$33368;var $length$33362;var temp$33356;var pkgv$33471;var pkg$33455;var subp$33456;var pkg$33429;var s$33430;var name$33389;var subp$33326;var s$33316;var s$33306;var $33260$33295;var $33261$33296;var $33262$33297;var $33263$33298;var $33264$33299;var $33265$33300;var $33266$33301;var $33267$33302;var $33268$33303;var t0$33286;var t1$33287;var bridge$33256$33288;var t2$33289;var t3$33290;var t4$33291;var t5$33292;var t6$33293;var $33252$33281;var ph$33269;var expr$33270;(t0$33272=$33246$33249);(expr$33270=t0$33272);(ph$33269=t0$33272);($33252$33281=ph$33269);if((($33260$33295=($33252$33281 instanceof Array))&&(((t0$33286=$33252$33281.length)),(($33262$33297=(t0$33286===2))&&($33252$33281[0]==="symbol"))))){(s$33306=$33252$33281[1]);return fetch$33250(["value",s$33306],expr$33270);}else{if(($33262$33297&&(($33252$33281[0]==="value")&&(((t1$33287=$33252$33281[1])),(typeof(t1$33287)==="string"))))){(s$33316=t1$33287);return fetch$33250(expr$33270,["symbol",scope$33184.gensym()]);}else{(bridge$33256$33288=$33252$33281);if((((bridge$33256$33288 instanceof Array)&&(((t0$33333=bridge$33256$33288.length)),((t0$33333>=1)&&((bridge$33256$33288[0]==="multi")&&((subp$33326=Array.prototype.slice.call(bridge$33256$33288,1)),true)))))||((bridge$33256$33288 instanceof Array)&&(((t0$33341=bridge$33256$33288.length)),((t0$33341>=1)&&((bridge$33256$33288[0]==="data")&&((subp$33326=Array.prototype.slice.call(bridge$33256$33288,1)),true))))))){(temp$33356=subp$33326);($length$33362=temp$33356.length);($index$33368=0);$33350:for(;($index$33368<$length$33362);($index$33368++)){var p$33385;var m$33377;(m$33377=temp$33356[$index$33368]);(p$33385=m$33377);produce$33227(p$33385,fetch$33250);}return null;}else{if((($33260$33295=($33252$33281 instanceof Array))&&(((t0$33286=$33252$33281.length)),(($33262$33297=(t0$33286===3))&&(($33263$33298=($33252$33281[0]==="send"))&&(((t1$33287=$33252$33281[1])),(($33265$33300=(t1$33287 instanceof Array))&&(((t2$33289=t1$33287.length)),(($33267$33302=(t2$33289===2))&&(($33268$33303=(t1$33287[0]==="symbol"))&&((t1$33287[1]==="^")&&(((t3$33290=$33252$33281[2])),((t3$33290 instanceof Array)&&(((t4$33291=t3$33290.length)),((t4$33291===3)&&((t3$33290[0]==="data")&&(((t5$33292=t3$33290[1])),((t5$33292 instanceof Array)&&(((t6$33293=t5$33292.length)),((t6$33293===1)&&(t5$33292[0]==="void"))))))))))))))))))))){(name$33389=t3$33290[2]);return fetch$33250(name$33389,["symbol",scope$33184.gensym()]);}else{if(($33268$33303&&((t1$33287[1]==="as")&&(((t3$33290=$33252$33281[2])),((t3$33290 instanceof Array)&&(((t4$33291=t3$33290.length)),((t4$33291===3)&&(t3$33290[0]==="data")))))))){(pkg$33429=t3$33290[1]);(s$33430=t3$33290[2]);return produce$33227(pkg$33429,function(the_pkg$33447,$33444$33448){$33444$33448;return fetch$33250(the_pkg$33447,s$33430);});}else{if(($33268$33303&&((t1$33287[1]==="->")&&(((t3$33290=$33252$33281[2])),((t3$33290 instanceof Array)&&(((t4$33291=t3$33290.length)),((t4$33291===3)&&(t3$33290[0]==="data")))))))){(pkg$33455=t3$33290[1]);(subp$33456=t3$33290[2]);(pkgv$33471=produce$33227(pkg$33455,fetch$33250));return produce$33227(subp$33456,function(pkg$33477,v$33478){stmts$33225.push(["send",["symbol","="],["data",v$33478,["send",pkgv$33471,pkg$33477]]]);return v$33478;});}else{$36820($33252$33281);}}}}}}});produce$33227(expr$33211,topfetch$33226);return ["splice"].concat(stmts$33225);}else{if(($33192$33207&&((t0$33205===1)&&($33188$33200[0]==="void")))){return ["variable","require"];}else{(arg$33490=$33188$33200);return ["send",["variable","require"],arg$33490];}}}),accum$33176)),$25281(((accum$33493=({})),((accum$33493["provide"]=function(context$33500,scope$33501,form$33502,$33497$33503){var t0$33507;var t1$33508;var t2$33509;var t3$33510;var t4$33511;var $index$33566;var $length$33560;var temp$33554;var acc$33548;var expr$33505;(t0$33507=$33497$33503);if(((t0$33507 instanceof Array)&&(((t1$33508=t0$33507.length)),((t1$33508===2)&&((t0$33507[0]==="data")&&(((t2$33509=$36839(["multi"])(t0$33507[1]))),(t2$33509[0]&&(((t3$33510=t2$33509[1])),(((t4$33511=t3$33510.length)),(t4$33511>=0)))))))))){(expr$33505=Array.prototype.slice.call(t3$33510,0));}else{$36820($33497$33503);}return ["sink",["multi"].concat((((acc$33548=[])),(((temp$33554=expr$33505)),((($length$33560=temp$33554.length)),((($index$33566=0)),function(){$33539:for(;($index$33566<$length$33560);($index$33566++)){var t0$33642;var t0$33650;var other$33661;var s$33607;var name$33608;var s$33591;var name$33592;var $33545$33588;var t0$33580;var t1$33581;var t2$33582;var t3$33583;var t4$33584;var t5$33585;var bridge$33543$33586;var m$33575;(m$33575=temp$33554[$index$33566]);(t0$33580=m$33575);(s$33591=t0$33580);if(((t0$33580 instanceof Array)&&(((t1$33581=t0$33580.length)),((t1$33581===2)&&(t0$33580[0]==="symbol"))))){(name$33592=t0$33580[1]);acc$33548.push(["send",["symbol","="],["data",["send",["symbol","exports"],["value",name$33592]],s$33591]]);}else{if(((t0$33580 instanceof Array)&&(((t1$33581=t0$33580.length)),((t1$33581===3)&&((t0$33580[0]==="send")&&(((t2$33582=t0$33580[1])),((t2$33582 instanceof Array)&&(((t3$33583=t2$33582.length)),((t3$33583===2)&&((t2$33582[0]==="symbol")&&((t2$33582[1]==="as")&&(((t4$33584=t0$33580[2])),((t4$33584 instanceof Array)&&(((t5$33585=t4$33584.length)),((t5$33585===3)&&((t4$33584[0]==="data")&&((s$33607=t4$33584[1]),(((bridge$33543$33586=t4$33584[2])),(((bridge$33543$33586 instanceof Array)&&(((t0$33642=bridge$33543$33586.length)),((t0$33642===2)&&((bridge$33543$33586[0]==="symbol")&&((name$33608=bridge$33543$33586[1]),true)))))||((bridge$33543$33586 instanceof Array)&&(((t0$33650=bridge$33543$33586.length)),((t0$33650===2)&&((bridge$33543$33586[0]==="value")&&((name$33608=bridge$33543$33586[1]),true)))))))))))))))))))))))){acc$33548.push(["send",["symbol","="],["data",["send",["symbol","exports"],["value",name$33608]],s$33607]]);}else{(other$33661=m$33575);acc$33548.push(function(){throw $36561(["syntax","provide"]).create("Each clause of provide must be 'sym' or 'sym as name'");}());}}}}()))),acc$33548))];}),accum$33493)),$25281(((accum$33665=({})),((accum$33665["class"]=function(context$33672,scope$33673,$33669$33674,expr$33675){var t0$33679;var name$34333;var name$34307;var super$34308;var t0$34300;var t1$34301;var t2$34302;var t3$34303;var stmts$34337;var stmts$34274;var $33691$34275;var $33695$34270;var $33696$34271;var t0$34265;var t1$34266;var t2$34267;var t3$34268;var $33689$34260;var helper$33697;var env$33677;(t0$33679=$33669$33674);if($36512(t0$33679,"env")){(env$33677=t0$33679.env);}else{$36820($33669$33674);}(helper$33697=function(name$33702,super$33703,stmts$33704){var $index$33759;var $length$33753;var temp$33747;var acc$33741;var t0$34178;var t1$34179;var t0$34202;var env2$34198;var it$34199;var cls$34200;var t0$34218;var t1$34219;var other$34255;var t0$34242;var $33714$34237;var statics$33717;var ctor$33718;var new_stmts$33719;var ctor_args$33720;var ctor_body$33721;var ctor_expr$33722;var name_str$33723;var node$33724;(statics$33717=["data",["symbol","="]]);(ctor$33718=[["data"],$36406(["multi"],({"env":env$33677}))]);(new_stmts$33719=(((acc$33741=[])),(((temp$33747=stmts$33704)),((($length$33753=temp$33747.length)),((($index$33759=0)),function(){$33733:for(;($index$33759<$length$33753);($index$33759++)){var t0$33844;var t1$33845;var t2$33846;var t3$33847;var t4$33848;var t5$33849;var t6$33850;var t7$33851;var t8$33852;var t0$33901;var t1$33902;var t2$33903;var t3$33904;var t4$33905;var t5$33906;var t6$33907;var t7$33908;var t8$33909;var t9$33910;var t10$33911;var t11$33912;var t12$33913;var accum$34029;var accum$34067;var accum$34075;var accum$34162;var lhs$33990;var rhs$33991;var args$33836;var body$33837;var methods$33786;var t0$33773;var t1$33774;var t2$33775;var t3$33776;var t4$33777;var t5$33778;var t6$33779;var t7$33780;var t8$33781;var bridge$33737$33782;var m$33768;(m$33768=temp$33747[$index$33759]);(t0$33773=m$33768);if(((t0$33773 instanceof Array)&&(((t1$33774=t0$33773.length)),((t1$33774===3)&&((t0$33773[0]==="send")&&(((t2$33775=t0$33773[1])),((t2$33775 instanceof Array)&&(((t3$33776=t2$33775.length)),((t3$33776===2)&&((t2$33775[0]==="symbol")&&((t2$33775[1]==="static")&&(((t4$33777=t0$33773[2])),((t4$33777 instanceof Array)&&(((t5$33778=t4$33777.length)),((t5$33778===2)&&((t4$33777[0]==="data")&&(((t6$33779=$36839(["multi"])(t4$33777[1]))),(t6$33779[0]&&(((t7$33780=t6$33779[1])),(((t8$33781=t7$33780.length)),(t8$33781>=0))))))))))))))))))))){(methods$33786=Array.prototype.slice.call(t7$33780,0));acc$33741.push((statics$33717=statics$33717.concat(methods$33786)));}else{(bridge$33737$33782=m$33768);if((((bridge$33737$33782 instanceof Array)&&(((t0$33844=bridge$33737$33782.length)),((t0$33844===3)&&((bridge$33737$33782[0]==="send")&&(((t1$33845=bridge$33737$33782[1])),((t1$33845 instanceof Array)&&(((t2$33846=t1$33845.length)),((t2$33846===2)&&((t1$33845[0]==="symbol")&&((t1$33845[1]==="=")&&(((t3$33847=bridge$33737$33782[2])),((t3$33847 instanceof Array)&&(((t4$33848=t3$33847.length)),((t4$33848===3)&&((t3$33847[0]==="data")&&(((t5$33849=t3$33847[1])),((t5$33849 instanceof Array)&&(((t6$33850=t5$33849.length)),((t6$33850===3)&&((t5$33849[0]==="send")&&(((t7$33851=t5$33849[1])),((t7$33851 instanceof Array)&&(((t8$33852=t7$33851.length)),((t8$33852===2)&&((t7$33851[0]==="symbol")&&((t7$33851[1]==="constructor")&&((args$33836=t5$33849[2]),((body$33837=t3$33847[2]),true))))))))))))))))))))))))))))||((bridge$33737$33782 instanceof Array)&&(((t0$33901=bridge$33737$33782.length)),((t0$33901===3)&&((bridge$33737$33782[0]==="send")&&(((t1$33902=bridge$33737$33782[1])),((t1$33902 instanceof Array)&&(((t2$33903=t1$33902.length)),((t2$33903===2)&&((t1$33902[0]==="symbol")&&((t1$33902[1]==="=")&&(((t3$33904=bridge$33737$33782[2])),((t3$33904 instanceof Array)&&(((t4$33905=t3$33904.length)),((t4$33905===3)&&((t3$33904[0]==="data")&&(((t5$33906=t3$33904[1])),((t5$33906 instanceof Array)&&(((t6$33907=t5$33906.length)),((t6$33907===2)&&((t5$33906[0]==="symbol")&&((t5$33906[1]==="constructor")&&(((t7$33908=t3$33904[2])),((t7$33908 instanceof Array)&&(((t8$33909=t7$33908.length)),((t8$33909===3)&&((t7$33908[0]==="send")&&(((t9$33910=t7$33908[1])),((t9$33910 instanceof Array)&&(((t10$33911=t9$33910.length)),((t10$33911===2)&&((t9$33910[0]==="symbol")&&((t9$33910[1]==="->")&&(((t11$33912=t7$33908[2])),((t11$33912 instanceof Array)&&(((t12$33913=t11$33912.length)),((t12$33913===3)&&((t11$33912[0]==="data")&&((args$33836=t11$33912[1]),((body$33837=t11$33912[2]),true))))))))))))))))))))))))))))))))))))))))){acc$33741.push((((ctor$33718=[args$33836,body$33837])),["splice"]));}else{(t0$33773=m$33768);if(((t0$33773 instanceof Array)&&(((t1$33774=t0$33773.length)),((t1$33774===3)&&((t0$33773[0]==="send")&&(((t2$33775=t0$33773[1])),((t2$33775 instanceof Array)&&(((t3$33776=t2$33775.length)),((t3$33776===2)&&((t2$33775[0]==="symbol")&&((t2$33775[1]==="=")&&(((t4$33777=t0$33773[2])),((t4$33777 instanceof Array)&&(((t5$33778=t4$33777.length)),((t5$33778===3)&&(t4$33777[0]==="data")))))))))))))))){(lhs$33990=t4$33777[1]);(rhs$33991=t4$33777[2]);acc$33741.push(parse_pattern$25415(scope$33673,lhs$33990,rhs$33991,$36406(pattern_handlers$25446.build_object,$25281(({"allow_nested":false}),$25281(((accum$34029=({})),((accum$34029["assign"]=function($34033$34037,value$34038){var t0$34049;var t0$34057;var bridge$34035$34042;var v$34040;(bridge$34035$34042=$34033$34037);if((((bridge$34035$34042 instanceof Array)&&(((t0$34049=bridge$34035$34042.length)),((t0$34049===2)&&((bridge$34035$34042[0]==="symbol")&&((v$34040=bridge$34035$34042[1]),true)))))||((bridge$34035$34042 instanceof Array)&&(((t0$34057=bridge$34035$34042.length)),((t0$34057===2)&&((bridge$34035$34042[0]==="value")&&((v$34040=bridge$34035$34042[1]),true))))))){}else{$36820($34033$34037);}return ["do",__lt____lt____colon__$25407(["assign",["send",["send",name$33702,["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value",v$34040]],value$34038],v$34040)];}),accum$34029)),$25281(((accum$34067=({})),((accum$34067["declare"]=function(vars$34072){return [];}),accum$34067)),$25281(((accum$34075=({})),((accum$34075["wrap_target"]=function($34079$34082){var t0$34143;var other_env$34139;var it$34140;var it2$34141;var other$34159;var args$34106;var body$34107;var t0$34098;var t1$34099;var t2$34100;var t3$34101;var t4$34102;var $34084$34093;var ph$34087;(ph$34087=$34079$34082);($34084$34093=ph$34087);if((($34084$34093 instanceof Array)&&(((t0$34098=$34084$34093.length)),((t0$34098===3)&&(($34084$34093[0]==="send")&&(((t1$34099=$34084$34093[1])),((t1$34099 instanceof Array)&&(((t2$34100=t1$34099.length)),((t2$34100===2)&&((t1$34099[0]==="symbol")&&((t1$34099[1]==="->")&&(((t3$34101=$34084$34093[2])),((t3$34101 instanceof Array)&&(((t4$34102=t3$34101.length)),((t4$34102===3)&&(t3$34101[0]==="data")))))))))))))))){(args$34106=t3$34101[1]);(body$34107=t3$34101[2]);(t0$34143=body$34107);if($36512(t0$34143,"env")){(other_env$34139=t0$34143.env);}else{$36820(body$34107,"/home/olivier/git/earl-grey/src/stdenv.eg",33026,33030);}(it$34140=$36406(["symbol","@"],({"env":other_env$34139})));(it2$34141=$36406(["symbol","self"],({"env":other_env$34139})));return ["send",["symbol","_lambda"],["data",args$34106,["send",["symbol","splice"],["data",["multi",["send",["symbol","="],["data",["send",["symbol","let"],it$34140],["symbol","this"]]],["send",["symbol","="],["data",["send",["symbol","let"],it2$34141],["symbol","this"]]]]]],body$34107,["value",null]]];}else{(other$34159=$34084$34093);return other$34159;}}),accum$34075)),((accum$34162=({})),((accum$34162["success"]=function($34166$34169){$34166$34169;return ["splice"];}),accum$34162)))))))));}else{$36820(m$33768,"/home/olivier/git/earl-grey/src/stdenv.eg",32292,33538);}}}}}()))),acc$33741));(t0$34178=ctor$33718);if(((t0$34178 instanceof Array)&&(((t1$34179=t0$34178.length)),(t1$34179===2)))){(ctor_args$33720=t0$34178[0]);(ctor_body$33721=t0$34178[1]);}else{$36820(ctor$33718,"/home/olivier/git/earl-grey/src/stdenv.eg",33563,33567);}(ctor_expr$33722=((((t0$34202=ctor_body$33721)),function(){if($36512(t0$34202,"env")){(env2$34198=t0$34202.env);}else{return $36820(ctor_body$33721,"/home/olivier/git/earl-grey/src/stdenv.eg",33617,33626);}}()),((it$34199=$36406(["symbol","@"],({"env":env2$34198})))),((cls$34200=["send",["symbol","_lambda"],["data",ctor_args$33720,["send",["symbol","="],["data",it$34199,["send",["symbol","if"],["data",["send",["symbol","not"],["data",["void"],["send",["symbol","?"],["data",name$33702,["symbol","this"]]]]],["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","create"]]]],["data",["send",name$33702,["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]],["symbol","this"]]]]],ctor_body$33721,it$34199]])),function(){if(super$33703){return ["send",["symbol","___extend"],["data",cls$34200,super$33703]];}else{return cls$34200;}}()));(t0$34218=name$33702);if(((t0$34218 instanceof Array)&&(((t1$34219=t0$34218.length)),((t1$34219===2)&&(t0$34218[0]==="symbol"))))){(name_str$33723=t0$34218[1]);}else{$36820(name$33702,"/home/olivier/git/earl-grey/src/stdenv.eg",34286,34290);}statics$33717.push(["send",["symbol","="],["data",["value","::name"],["value",name_str$33723]]]);statics$33717.push(["send",["symbol","="],["data",["value","::egclass"],["symbol","true"]]]);(node$33724=["splice",["send",["symbol","="],["data",name$33702,ctor_expr$33722]]].concat(new_stmts$33719).concat([["send",["symbol","&:"],["data",name$33702,statics$33717]],name$33702]));($33714$34237=context$33672);if((($33714$34237 instanceof Array)&&(((t0$34242=$33714$34237.length)),((t0$34242===2)&&(($33714$34237[0]==="expr")&&($33714$34237[1]==="multi")))))){return node$33724;}else{(other$34255=$33714$34237);return ["multi",node$33724];}});($33689$34260=expr$33675);if((($33695$34270=($33689$34260 instanceof Array))&&(((t0$34265=$33689$34260.length)),((t0$34265===3)&&(($33689$34260[0]==="data")&&(($33691$34275=$33689$34260[1]),(((t1$34266=$36839(["multi"])($33689$34260[2]))),(t1$34266[0]&&(((t2$34267=t1$34266[1])),(((t3$34268=t2$34267.length)),(t3$34268>=0))))))))))){(stmts$34274=Array.prototype.slice.call(t2$34267,0));(t0$34300=$33691$34275);if(((t0$34300 instanceof Array)&&(((t1$34301=t0$34300.length)),((t1$34301===3)&&((t0$34300[0]==="send")&&((name$34307=t0$34300[1]),(((t2$34302=t0$34300[2])),((t2$34302 instanceof Array)&&(((t3$34303=t2$34302.length)),((t3$34303===2)&&(t2$34302[0]==="data"))))))))))){(super$34308=t2$34302[1]);return helper$33697(name$34307,super$34308,stmts$34274);}else{(name$34333=$33691$34275);return helper$33697(name$34333,null,stmts$34274);}}else{if(($33695$34270&&((t0$34265===2)&&(($33689$34260[0]==="data")&&(((t1$34266=$36839(["multi"])($33689$34260[1]))),(t1$34266[0]&&(((t2$34267=t1$34266[1])),(((t3$34268=t2$34267.length)),(t3$34268>=0))))))))){(stmts$34337=Array.prototype.slice.call(t2$34267,0));return helper$33697(["symbol",scope$33673.gensym()],null,stmts$34337);}else{$36820($33689$34260);}}}),accum$33665)),$25281(((accum$34358=({})),((accum$34358["%"]=function(context$34367,scope$34368,$34362$34369,$34364$34370){var t0$34376;var t0$34385;var t1$34386;var $index$34742;var $length$34736;var temp$34730;var xs$34717;var x$34881;var pair$34848;var k$34849;var v$34850;var args$34712;var $34684$34699;var $34685$34700;var t0$34693;var t1$34694;var t2$34695;var t3$34696;var t4$34697;var $34679$34688;var tags$34403;var kv$34404;var parse$34405;var env$34372;var descr$34373;var contents$34374;(t0$34376=$34362$34369);if($36512(t0$34376,"env")){(env$34372=t0$34376.env);}else{$36820($34362$34369);}(t0$34385=$34364$34370);if(((t0$34385 instanceof Array)&&(((t1$34386=t0$34385.length)),((t1$34386===3)&&(t0$34385[0]==="data"))))){(descr$34373=t0$34385[1]);(contents$34374=t0$34385[2]);}else{$36820($34364$34370);}(tags$34403=["data"]);(kv$34404=["data",["symbol","="]]);(parse$34405=function($34415$34418){var t0$34443;var t0$34540;var t0$34548;var t1$34549;var t0$34617;var t0$34625;var $index$34656;var $length$34650;var temp$34644;var acc$34638;var args$34610;var expr$34603;var rest$34604;var expr$34564;var x$34502;var x$34492;var s$34487;var $34431$34467;var $34432$34468;var $34433$34469;var $34434$34470;var $34435$34471;var $34436$34472;var $34437$34473;var $34438$34474;var $34439$34475;var t0$34457;var t1$34458;var t2$34459;var t3$34460;var t4$34461;var t5$34462;var t6$34463;var bridge$34425$34464;var bridge$34430$34465;var $34420$34452;var ph$34440;var whole$34441;(t0$34443=$34415$34418);(whole$34441=t0$34443);(ph$34440=t0$34443);($34420$34452=ph$34440);if((($34431$34467=($34420$34452 instanceof Array))&&(((t0$34457=$34420$34452.length)),((t0$34457===1)&&($34420$34452[0]==="void"))))){return null;}else{if(($34431$34467&&(($34433$34469=(t0$34457===2))&&($34420$34452[0]==="symbol")))){(s$34487=$34420$34452[1]);return tags$34403.push(["value",s$34487]);}else{if(($34433$34469&&(($34420$34452[0]==="value")&&(((t1$34458=[true,String($34420$34452[1])])),t1$34458[0])))){(x$34492=t1$34458[1]);return tags$34403.push(["value",x$34492]);}else{if(($34431$34467&&(($34433$34469=(t0$34457===3))&&(($34434$34470=($34420$34452[0]==="send"))&&(((t1$34458=$34420$34452[1])),(($34436$34472=(t1$34458 instanceof Array))&&(((t2$34459=t1$34458.length)),(($34438$34474=(t2$34459===2))&&(($34439$34475=(t1$34458[0]==="symbol"))&&((t1$34458[1]===".")&&(((t3$34460=$34420$34452[2])),((t3$34460 instanceof Array)&&(((t4$34461=t3$34460.length)),((t4$34461===3)&&((t3$34460[0]==="data")&&(((t5$34462=t3$34460[1])),((t5$34462 instanceof Array)&&(((t6$34463=t5$34462.length)),((t6$34463===1)&&((t5$34462[0]==="void")&&(((bridge$34425$34464=t3$34460[2])),(((bridge$34425$34464 instanceof Array)&&(((t0$34540=bridge$34425$34464.length)),((t0$34540===2)&&((bridge$34425$34464[0]==="symbol")&&((x$34502=bridge$34425$34464[1]),true)))))||((bridge$34425$34464 instanceof Array)&&(((t0$34548=bridge$34425$34464.length)),((t0$34548===2)&&((bridge$34425$34464[0]==="value")&&(((t1$34549=[true,String(bridge$34425$34464[1])])),(t1$34549[0]&&((x$34502=t1$34549[1]),true))))))))))))))))))))))))))))){return tags$34403.push(["value",("."+x$34502)]);}else{if(($34439$34475&&((t1$34458[1]==="^")&&(((t3$34460=$34420$34452[2])),((t3$34460 instanceof Array)&&(((t4$34461=t3$34460.length)),((t4$34461===3)&&((t3$34460[0]==="data")&&(((t5$34462=t3$34460[1])),((t5$34462 instanceof Array)&&(((t6$34463=t5$34462.length)),((t6$34463===1)&&(t5$34462[0]==="void"))))))))))))){(expr$34564=t3$34460[2]);return tags$34403.push(expr$34564);}else{if(($34439$34475&&((t1$34458[1]==="=")&&(((t3$34460=$34420$34452[2])),((t3$34460 instanceof Array)&&(((t4$34461=t3$34460.length)),((t4$34461===3)&&(t3$34460[0]==="data")))))))){t3$34460[1];t3$34460[2];return kv$34404.push(whole$34441);}else{if($34434$34470){(expr$34603=$34420$34452[1]);(rest$34604=$34420$34452[2]);parse$34405(expr$34603);return parse$34405(rest$34604);}else{(bridge$34430$34465=$34420$34452);if((((bridge$34430$34465 instanceof Array)&&(((t0$34617=bridge$34430$34465.length)),((t0$34617>=1)&&((bridge$34430$34465[0]==="multi")&&((args$34610=Array.prototype.slice.call(bridge$34430$34465,1)),true)))))||((bridge$34430$34465 instanceof Array)&&(((t0$34625=bridge$34430$34465.length)),((t0$34625>=1)&&((bridge$34430$34465[0]==="data")&&((args$34610=Array.prototype.slice.call(bridge$34430$34465,1)),true))))))){(acc$34638=[]);(temp$34644=args$34610);($length$34650=temp$34644.length);($index$34656=0);$34633:for(;($index$34656<$length$34650);($index$34656++)){var arg$34673;var m$34665;(m$34665=temp$34644[$index$34656]);(arg$34673=m$34665);acc$34638.push(parse$34405(arg$34673));}return acc$34638;}else{$36820($34420$34452);}}}}}}}}});parse$34405(descr$34373);(contents$34374=((($34679$34688=contents$34374)),function(){if((($34684$34699=($34679$34688 instanceof Array))&&(((t0$34693=$34679$34688.length)),((t0$34693===1)&&($34679$34688[0]==="void"))))){return ["array"];}else{if(($34684$34699&&((t0$34693>=1)&&($34679$34688[0]==="multi")))){(args$34712=Array.prototype.slice.call($34679$34688,1));(xs$34717=[]);(temp$34730=args$34712);($length$34736=temp$34730.length);($index$34742=0);$34718:for(;($index$34742<$length$34736);($index$34742++)){var other$34844;var spl$34804;var pair$34768;var k$34769;var v$34770;var $34723$34765;var t0$34756;var t1$34757;var t2$34758;var t3$34759;var t4$34760;var t5$34761;var t6$34762;var t7$34763;var m$34751;(m$34751=temp$34730[$index$34742]);(t0$34756=m$34751);(pair$34768=t0$34756);if(((t0$34756 instanceof Array)&&(((t1$34757=t0$34756.length)),((t1$34757===3)&&((t0$34756[0]==="send")&&(((t2$34758=t0$34756[1])),((t2$34758 instanceof Array)&&(((t3$34759=t2$34758.length)),((t3$34759===2)&&((t2$34758[0]==="symbol")&&((t2$34758[1]==="=")&&(((t4$34760=t0$34756[2])),((t4$34760 instanceof Array)&&(((t5$34761=t4$34760.length)),((t5$34761===3)&&(t4$34760[0]==="data")))))))))))))))){(k$34769=t4$34760[1]);(v$34770=t4$34760[2]);kv$34404.push(pair$34768);}else{(spl$34804=t0$34756);if(((t0$34756 instanceof Array)&&(((t1$34757=t0$34756.length)),((t1$34757===3)&&((t0$34756[0]==="send")&&(((t2$34758=t0$34756[1])),((t2$34758 instanceof Array)&&(((t3$34759=t2$34758.length)),((t3$34759===2)&&((t2$34758[0]==="symbol")&&((t2$34758[1]==="**")&&(((t4$34760=t0$34756[2])),((t4$34760 instanceof Array)&&(((t5$34761=t4$34760.length)),((t5$34761===3)&&((t4$34760[0]==="data")&&(((t6$34762=t4$34760[1])),((t6$34762 instanceof Array)&&(((t7$34763=t6$34762.length)),((t7$34763===1)&&(t6$34762[0]==="void"))))))))))))))))))))){t4$34760[2];kv$34404.push(spl$34804);}else{(other$34844=m$34751);xs$34717.push(other$34844);}}}return ["array"].concat(xs$34717);}else{(pair$34848=$34679$34688);if((($34679$34688 instanceof Array)&&(((t0$34693=$34679$34688.length)),((t0$34693===3)&&(($34679$34688[0]==="send")&&(((t1$34694=$34679$34688[1])),((t1$34694 instanceof Array)&&(((t2$34695=t1$34694.length)),((t2$34695===2)&&((t1$34694[0]==="symbol")&&((t1$34694[1]==="=")&&(((t3$34696=$34679$34688[2])),((t3$34696 instanceof Array)&&(((t4$34697=t3$34696.length)),((t4$34697===3)&&(t3$34696[0]==="data")))))))))))))))){(k$34849=t3$34696[1]);(v$34850=t3$34696[2]);kv$34404.push(pair$34848);return ["array"];}else{(x$34881=$34679$34688);return x$34881;}}}}()));return ["send",["symbol","Node"],["data",tags$34403,kv$34404,contents$34374]];}),accum$34358)),((accum$34884=({})),((accum$34884["globals"]=function(context$34891,scope$34892,form$34893,$34888$34894){var t0$34898;var t1$34899;var t2$34900;var t3$34901;var t4$34902;var $index$34954;var $length$34948;var temp$34942;var acc$34936;var vars$34896;(t0$34898=$34888$34894);if(((t0$34898 instanceof Array)&&(((t1$34899=t0$34898.length)),((t1$34899===2)&&((t0$34898[0]==="data")&&(((t2$34900=$36839(["multi"])(t0$34898[1]))),(t2$34900[0]&&(((t3$34901=t2$34900[1])),(((t4$34902=t3$34901.length)),(t4$34902>=0)))))))))){(vars$34896=Array.prototype.slice.call(t3$34901,0));}else{$36820($34888$34894);}return ["splice"].concat((((acc$34936=[])),(((temp$34942=vars$34896)),((($length$34948=temp$34942.length)),((($index$34954=0)),function(){$34931:for(;($index$34954<$length$34948);($index$34954++)){var variable$34973;var s$34974;var t0$34968;var t1$34969;var m$34963;(m$34963=temp$34942[$index$34954]);(t0$34968=m$34963);(variable$34973=t0$34968);if(((t0$34968 instanceof Array)&&(((t1$34969=t0$34968.length)),((t1$34969===2)&&(t0$34968[0]==="symbol"))))){(s$34974=t0$34968[1]);acc$34936.push(["declare_raw",variable$34973,["variable",s$34974]]);}else{$36820(m$34963,"/home/olivier/git/earl-grey/src/stdenv.eg",37331,37418);}}}()))),acc$34936));}),accum$34884))))))))))))))))))))))))))))))))))))))))))))))))))))));($length$34992=temp$27003.length);($index$34998=0);$25461:for(;($index$34998<$length$34992);($index$34998++)){var k$35017;var v$35018;var t0$35012;var t1$35013;var m$35007;(m$35007=temp$27003[$index$34998]);(t0$35012=m$35007);if(((t0$35012 instanceof Array)&&(((t1$35013=t0$35012.length)),(t1$35013===2)))){(k$35017=t0$35012[0]);(v$35018=t0$35012[1]);stdenv$25427.bind(topscope$25431,k$35017,["macro",v$35018]);}else{$36820(m$35007,"/home/olivier/git/earl-grey/src/stdenv.eg",8445,8511);}}(blocktest_wrap$25450=function(expr$35036){return ["multi",["send",["symbol","="],["data",["symbol","value"],["send",["symbol","!!"],["data",["multi",["send",["symbol","match"],["data",expr$35036,["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","true"],["symbol","x"]]],["send",["send",["symbol","#"],["data",["void"],["symbol","success"]]],["data",["symbol","x"]]]]],["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","false"],["symbol","x"]]],["send",["send",["symbol","#"],["data",["void"],["symbol","failure"]]],["data",["symbol","x"]]]]]]]]],["send",["symbol","->"],["data",["symbol","e"],["send",["send",["symbol","#"],["data",["void"],["symbol","error"]]],["data",["symbol","e"]]]]]]]]],["send",["send",["symbol","acc"],["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["send",["send",["symbol","#"],["data",["void"],["symbol","test_result"]]],["data",["symbol","label"],["symbol","value"]]]]]];});(blocktest_mac$25451=function(scope$35043,tests$35044){var $index$35091;var $length$35085;var temp$35079;var acc$35073;var exptests$35050;var n$35051;var stmts$35052;(exptests$35050=$36794(scope$35043.step_all(["test"],tests$35044)));(n$35051=exptests$35050.length);(stmts$35052=(((acc$35073=[])),(((temp$35079=exptests$35050)),((($length$35085=temp$35079.length)),((($index$35091=0)),function(){$35061:for(;($index$35091<$length$35085);($index$35091++)){var wrap$35185;var fall$35186;var lbl$35211;var i$35204;var expr$35205;var i$35162;var elements$35163;var clauses$35164;var env$35165;var i$35143;var more_labels$35144;var more_tests$35145;var i$35116;var stmt$35117;var $35067$35110;var $35068$35111;var $35069$35112;var $35070$35113;var t0$35105;var t1$35106;var t2$35107;var t3$35108;var m$35100;(m$35100=temp$35079[$index$35091]);(t0$35105=m$35100);if((($35068$35111=(t0$35105 instanceof Array))&&(((t1$35106=t0$35105.length)),(($35070$35113=(t1$35106===2))&&((i$35116=t0$35105[0]),(((t2$35107=t0$35105[1])),((t2$35107 instanceof Array)&&(((t3$35108=t2$35107.length)),((t3$35108===2)&&(t2$35107[0]==="do")))))))))){(stmt$35117=t2$35107[1]);acc$35073.push(stmt$35117);}else{if(($35070$35113&&((i$35143=t0$35105[0]),(((t2$35107=t0$35105[1])),((t2$35107 instanceof Array)&&(((t3$35108=t2$35107.length)),((t3$35108===3)&&(t2$35107[0]==="blocktest")))))))){(more_labels$35144=t2$35107[1]);(more_tests$35145=t2$35107[2]);acc$35073.push(["send",["symbol","let"],["data",["send",["symbol","="],["data",["symbol","label"],["send",["send",["symbol","label"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",["send",["symbol","!"],["data",["symbol","Array"],more_labels$35144]]]]]],["send",["symbol","="],["data",["send",["symbol","set"],["symbol","acc"]],["send",["send",["symbol","acc"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",blocktest_mac$25451(scope$35043,more_tests$35145)]]]]]]);}else{if(($35070$35113&&((i$35162=t0$35105[0]),(((t2$35107=t0$35105[1])),((t2$35107 instanceof Array)&&(((t3$35108=t2$35107.length)),((t3$35108===3)&&((t2$35107[0]==="test_factory")&&((elements$35163=t2$35107[1]),((clauses$35164=t2$35107[2]),$36512(t2$35107,"env"))))))))))){(env$35165=t2$35107.env);acc$35073.push((((wrap$35185=function(expr$35191,index$35192){return ["send",["symbol","let"],["data",["send",["symbol","="],["data",["symbol","label"],["send",["send",["symbol","label"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",["data",index$35192]]]]],blocktest_wrap$25450(expr$35191)]];})),((fall$35186=function(target$35199){return match_error$25434(target$35199);})),build_loop$25447(scope$35043,env$35165,["void"],elements$35163,clauses$35164,wrap$35185,["splice"],["splice"],({"fallback":fall$35186}))));}else{if($35070$35113){(i$35204=t0$35105[0]);(expr$35205=t0$35105[1]);acc$35073.push((((lbl$35211=function(){if((n$35051===1)){return ["data"];}else{return ["data",["value",i$35204]];}}())),["send",["symbol","let"],["data",["send",["symbol","="],["data",["symbol","label"],["send",["send",["symbol","label"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",lbl$35211]]]],blocktest_wrap$25450(expr$35205)]]));}else{$36820(m$35100,"/home/olivier/git/earl-grey/src/stdenv.eg",37755,38564);}}}}}}()))),acc$35073));return ["send",["symbol","let"],["data",["send",["symbol","="],["data",["send",["symbol","var"],["symbol","acc"]],["data"]]],["send",["symbol","!!"],["data",["multi"].concat(stmts$35052).concat([["symbol","acc"]]),["send",["symbol","->"],["data",["symbol","e"],["send",["send",["symbol","acc"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",["data",["send",["send",["symbol","#"],["data",["void"],["symbol","error"]]],["data",["symbol","label"],["symbol","e"]]]]]]]]]]]];});stdenv$25427.bind(topscope$25431,"blocktest",["macro",function(context$35223,scope$35224,form$35225,$35220$35226){var t0$35235;var t1$35236;var labels$35290;var tests$35291;var tests$35265;var $35231$35261;var $35232$35262;var t0$35256;var t1$35257;var t2$35258;var t3$35259;var $35228$35251;var args$35233;(t0$35235=$35220$35226);if(((t0$35235 instanceof Array)&&(((t1$35236=t0$35235.length)),((t1$35236>=1)&&(t0$35235[0]==="data"))))){(args$35233=Array.prototype.slice.call(t0$35235,1));}else{$36820($35220$35226);}($35228$35251=args$35233);if((($35231$35261=($35228$35251 instanceof Array))&&(((t0$35256=$35228$35251.length)),((t0$35256===1)&&(((t1$35257=$36839(["multi"])($35228$35251[0]))),(t1$35257[0]&&(((t2$35258=t1$35257[1])),(((t3$35259=t2$35258.length)),(t3$35259>=0))))))))){(tests$35265=Array.prototype.slice.call(t2$35258,0));return ["multi",["send",["symbol","="],["data",["symbol","label"],["data"]]],blocktest_mac$25451(scope$35224,tests$35265)];}else{if(($35231$35261&&((t0$35256===2)&&((labels$35290=$35228$35251[0]),(((t1$35257=$36839(["multi"])($35228$35251[1]))),(t1$35257[0]&&(((t2$35258=t1$35257[1])),(((t3$35259=t2$35258.length)),(t3$35259>=0))))))))){(tests$35291=Array.prototype.slice.call(t2$35258,0));return ["multi",["send",["symbol","="],["data",["symbol","label"],["send",["symbol","!"],["data",["symbol","Array"],labels$35290]]]],blocktest_mac$25451(scope$35224,tests$35291)];}else{$36820($35228$35251);}}}]);(qqstruct$25452=function(name$35316,args$35317){return ["data",["value",name$35316]].concat(args$35317);});(qq$25453=function($35323$35326){var t0$35348;var $index$35512;var $length$35506;var temp$35500;var acc$35494;var name$35485;var args$35486;var insert$35460;var insert$35435;var insert$35400;var v$35395;var s$35381;var $35336$35370;var $35337$35371;var $35338$35372;var $35339$35373;var $35340$35374;var $35341$35375;var $35342$35376;var $35343$35377;var $35344$35378;var t0$35362;var t1$35363;var t2$35364;var t3$35365;var t4$35366;var t5$35367;var t6$35368;var $35328$35357;var ph$35345;var expr$35346;(t0$35348=$35323$35326);(expr$35346=t0$35348);(ph$35345=t0$35348);($35328$35357=ph$35345);if((($35336$35370=($35328$35357 instanceof Array))&&(((t0$35362=$35328$35357.length)),((t0$35362===2)&&($35328$35357[0]==="symbol"))))){(s$35381=$35328$35357[1]);return qqstruct$25452("symbol",[["value",s$35381]]);}else{if(($35336$35370&&((t0$35362===1)&&($35328$35357[0]==="void")))){return qqstruct$25452("void",[]);}else{if(($35336$35370&&((t0$35362===2)&&($35328$35357[0]==="value")))){(v$35395=$35328$35357[1]);return qqstruct$25452("value",[expr$35346]);}else{if(($35336$35370&&(($35338$35372=(t0$35362===3))&&(($35339$35373=($35328$35357[0]==="send"))&&(((t1$35363=$35328$35357[1])),(($35341$35375=(t1$35363 instanceof Array))&&(((t2$35364=t1$35363.length)),(($35343$35377=(t2$35364===2))&&(($35344$35378=(t1$35363[0]==="symbol"))&&((t1$35363[1]==="^")&&(((t3$35365=$35328$35357[2])),((t3$35365 instanceof Array)&&(((t4$35366=t3$35365.length)),((t4$35366===3)&&((t3$35365[0]==="data")&&(((t5$35367=t3$35365[1])),((t5$35367 instanceof Array)&&(((t6$35368=t5$35367.length)),((t6$35368===1)&&(t5$35367[0]==="void")))))))))))))))))))){(insert$35400=t3$35365[2]);return insert$35400;}else{if(($35344$35378&&((t1$35363[1]==="^=")&&(((t3$35365=$35328$35357[2])),((t3$35365 instanceof Array)&&(((t4$35366=t3$35365.length)),((t4$35366===3)&&((t3$35365[0]==="data")&&(((t5$35367=t3$35365[1])),((t5$35367 instanceof Array)&&(((t6$35368=t5$35367.length)),((t6$35368===1)&&(t5$35367[0]==="void"))))))))))))){(insert$35435=t3$35365[2]);return qqstruct$25452("value",[insert$35435]);}else{if(($35344$35378&&((t1$35363[1]==="^*")&&(((t3$35365=$35328$35357[2])),((t3$35365 instanceof Array)&&(((t4$35366=t3$35365.length)),((t4$35366===3)&&((t3$35365[0]==="data")&&(((t5$35367=t3$35365[1])),((t5$35367 instanceof Array)&&(((t6$35368=t5$35367.length)),((t6$35368===1)&&(t5$35367[0]==="void"))))))))))))){(insert$35460=t3$35365[2]);return ["send",["symbol","*"],["data",["void"],insert$35460]];}else{if(($35336$35370&&(t0$35362>=1))){(name$35485=$35328$35357[0]);(args$35486=Array.prototype.slice.call($35328$35357,1));return qqstruct$25452(name$35485,(((acc$35494=[])),(((temp$35500=args$35486)),((($length$35506=temp$35500.length)),((($index$35512=0)),function(){$35489:for(;($index$35512<$length$35506);($index$35512++)){var arg$35529;var m$35521;(m$35521=temp$35500[$index$35512]);(arg$35529=m$35521);acc$35494.push(qq$25453(arg$35529));}}()))),acc$35494));}else{$36820($35328$35357);}}}}}}}});stdenv$25427.bind(topscope$25431,"'",["macro",function(context$35539,scope$35540,form$35541,$35536$35542){var t0$35546;var t1$35547;var t2$35548;var t3$35549;var expr$35544;(t0$35546=$35536$35542);if(((t0$35546 instanceof Array)&&(((t1$35547=t0$35546.length)),((t1$35547===3)&&((t0$35546[0]==="data")&&(((t2$35548=t0$35546[1])),((t2$35548 instanceof Array)&&(((t3$35549=t2$35548.length)),((t3$35549===1)&&(t2$35548[0]==="void")))))))))){(expr$35544=t0$35546[2]);}else{$36820($35536$35542);}return qq$25453(expr$35544);}]);(RegexBuilder$25454=function(){var it$0$35578;(it$0$35578=function(){if((!$25261(RegexBuilder$25454)(this))){return Object.create(RegexBuilder$25454.prototype);}else{return this;}}());return it$0$35578;});(RegexBuilder$25454.prototype["wrap"]=function(x$35590){var it$0$35594;var self$35595;(it$0$35594=this);(self$35595=this);return (("(?:"+x$35590)+")");});(RegexBuilder$25454.prototype["quote"]=function(x$35607){var it$0$35611;var self$35612;(it$0$35611=this);(self$35612=this);return x$35607.replace(RegExp("([.?*+\\^$\\[\\]\\(\\)\\{\\}|\\\\])","g"),"\\$1");});(RegexBuilder$25454.prototype["quote_charset"]=function(x$35624){var it$0$35628;var self$35629;(it$0$35628=this);(self$35629=this);return x$35624.replace(RegExp("([\\[\\]\\(\\)\\{\\}\\^])","g"),"\\$1");});(RegexBuilder$25454.prototype["build"]=function(expr$35641){var t0$35846;var t1$35847;var t0$35867;var t1$35868;var t0$35888;var t1$35889;var t0$35911;var t1$35912;var t0$35926;var t1$35927;var x$35942;var v$35909;var t0$35955;var t1$35956;var t0$35970;var t1$35971;var t2$35972;var t3$35973;var t4$35974;var t5$35975;var t6$35976;var t7$35977;var t8$35978;var t9$35979;var x$36034;var v$35953;var $index$36080;var $length$36074;var temp$36068;var acc$36062;var $index$36140;var $length$36134;var temp$36128;var acc$36122;var other$36162;var args$36102;var args$36042;var a$35813;var b$35814;var $35673$35815;var s$35788;var x$35783;var $35656$35717;var $35684$35706;var $35685$35707;var $35686$35708;var $35687$35709;var $35688$35710;var $35689$35711;var $35690$35712;var $35691$35713;var $35692$35714;var t0$35700;var t1$35701;var t2$35702;var t3$35703;var t4$35704;var $35654$35695;var it$0$35645;var self$35646;(it$0$35645=this);(self$35646=this);($35654$35695=expr$35641);if((($35684$35706=($35654$35695 instanceof Array))&&(((t0$35700=$35654$35695.length)),(($35686$35708=(t0$35700===2))&&($35654$35695[0]==="symbol"))))){($35656$35717=$35654$35695[1]);if(($35656$35717==="any")){return ".";}else{if(($35656$35717==="start")){return "^";}else{if(($35656$35717==="end")){return "$";}else{if(($35656$35717==="alpha")){return "\\a";}else{if(($35656$35717==="digit")){return "\\d";}else{if(($35656$35717==="word")){return "\\w";}else{if(($35656$35717==="space")){return "\\s";}else{if(($35656$35717==="boundary")){return "\\b";}else{if(($35656$35717==="a")){return "\\a";}else{if(($35656$35717==="d")){return "\\d";}else{if(($35656$35717==="w")){return "\\w";}else{if(($35656$35717==="s")){return "\\s";}else{if(($35656$35717==="b")){return "\\b";}else{$36820($35656$35717,"/home/olivier/git/earl-grey/src/stdenv.eg",39862,39867);}}}}}}}}}}}}}}else{if(($35686$35708&&($35654$35695[0]==="value"))){(x$35783=$35654$35695[1]);return it$0$35645.quote(x$35783);}else{if(($35684$35706&&(($35686$35708=(t0$35700===3))&&(($35687$35709=($35654$35695[0]==="send"))&&(((t1$35701=$35654$35695[1])),(($35689$35711=(t1$35701 instanceof Array))&&(((t2$35702=t1$35701.length)),(($35691$35713=(t2$35702===2))&&(($35692$35714=(t1$35701[0]==="symbol"))&&((t1$35701[1]==="raw")&&(((t3$35703=$35654$35695[2])),((t3$35703 instanceof Array)&&(((t4$35704=t3$35703.length)),((t4$35704===2)&&(t3$35703[0]==="value"))))))))))))))){(s$35788=t3$35703[1]);return s$35788;}else{if(($35692$35714&&(($35673$35815=t1$35701[1]),(((t3$35703=$35654$35695[2])),((t3$35703 instanceof Array)&&(((t4$35704=t3$35703.length)),((t4$35704===3)&&(t3$35703[0]==="data")))))))){(a$35813=t3$35703[1]);(b$35814=t3$35703[2]);if(($35673$35815==="||")){return it$0$35645.wrap(((it$0$35645.build(a$35813)+"|")+it$0$35645.build(b$35814)));}else{if(($35673$35815==="or")){return it$0$35645.wrap(((it$0$35645.build(a$35813)+"|")+it$0$35645.build(b$35814)));}else{if(($35673$35815==="*")){(t0$35846=a$35813);if(((t0$35846 instanceof Array)&&(((t1$35847=t0$35846.length)),((t1$35847===1)&&(t0$35846[0]==="void"))))){}else{$36820(a$35813,"/home/olivier/git/earl-grey/src/stdenv.eg",40534,40535);}return it$0$35645.wrap((it$0$35645.build(b$35814)+"*"));}else{if(($35673$35815==="+")){(t0$35867=a$35813);if(((t0$35867 instanceof Array)&&(((t1$35868=t0$35867.length)),((t1$35868===1)&&(t0$35867[0]==="void"))))){}else{$36820(a$35813,"/home/olivier/git/earl-grey/src/stdenv.eg",40618,40619);}return it$0$35645.wrap((it$0$35645.build(b$35814)+"+"));}else{if(($35673$35815==="?")){(t0$35888=a$35813);if(((t0$35888 instanceof Array)&&(((t1$35889=t0$35888.length)),((t1$35889===1)&&(t0$35888[0]==="void"))))){}else{$36820(a$35813,"/home/olivier/git/earl-grey/src/stdenv.eg",40702,40703);}return it$0$35645.wrap((it$0$35645.build(b$35814)+"?"));}else{if(($35673$35815==="in")){(t0$35911=a$35813);if(((t0$35911 instanceof Array)&&(((t1$35912=t0$35911.length)),((t1$35912===1)&&(t0$35911[0]==="void"))))){}else{$36820(a$35813,"/home/olivier/git/earl-grey/src/stdenv.eg",40787,40788);}(t0$35926=b$35814);if(((t0$35926 instanceof Array)&&(((t1$35927=t0$35926.length)),((t1$35927===2)&&(t0$35926[0]==="value"))))){(v$35909=t0$35926[1]);}else{$36820(b$35814,"/home/olivier/git/earl-grey/src/stdenv.eg",40816,40817);}(x$35942=it$0$35645.quote_charset(v$35909));return (("["+x$35942)+"]");}else{if(($35673$35815==="not")){(t0$35955=a$35813);if(((t0$35955 instanceof Array)&&(((t1$35956=t0$35955.length)),((t1$35956===1)&&(t0$35955[0]==="void"))))){}else{$36820(a$35813,"/home/olivier/git/earl-grey/src/stdenv.eg",40941,40942);}(t0$35970=b$35814);if(((t0$35970 instanceof Array)&&(((t1$35971=t0$35970.length)),((t1$35971===3)&&((t0$35970[0]==="send")&&(((t2$35972=t0$35970[1])),((t2$35972 instanceof Array)&&(((t3$35973=t2$35972.length)),((t3$35973===2)&&((t2$35972[0]==="symbol")&&((t2$35972[1]==="in")&&(((t4$35974=t0$35970[2])),((t4$35974 instanceof Array)&&(((t5$35975=t4$35974.length)),((t5$35975===3)&&((t4$35974[0]==="data")&&(((t6$35976=t4$35974[1])),((t6$35976 instanceof Array)&&(((t7$35977=t6$35976.length)),((t7$35977===1)&&((t6$35976[0]==="void")&&(((t8$35978=t4$35974[2])),((t8$35978 instanceof Array)&&(((t9$35979=t8$35978.length)),((t9$35979===2)&&(t8$35978[0]==="value")))))))))))))))))))))))))){(v$35953=t8$35978[1]);}else{$36820(b$35814,"/home/olivier/git/earl-grey/src/stdenv.eg",41008,41009);}(x$36034=it$0$35645.quote_charset(v$35953));return (("[^"+x$36034)+"]");}else{$36820($35673$35815,"/home/olivier/git/earl-grey/src/stdenv.eg",40326,40331);}}}}}}}}else{if(($35684$35706&&(($35686$35708=(t0$35700>=1))&&($35654$35695[0]==="data")))){(args$36042=Array.prototype.slice.call($35654$35695,1));return (("("+(((acc$36062=[])),(((temp$36068=args$36042)),((($length$36074=temp$36068.length)),((($index$36080=0)),function(){$36057:for(;($index$36080<$length$36074);($index$36080++)){var arg$36097;var m$36089;(m$36089=temp$36068[$index$36080]);(arg$36097=m$36089);acc$36062.push(it$0$35645.build(arg$36097));}}()))),acc$36062).join(""))+")");}else{if(($35686$35708&&($35654$35695[0]==="multi"))){(args$36102=Array.prototype.slice.call($35654$35695,1));return (("(?:"+(((acc$36122=[])),(((temp$36128=args$36102)),((($length$36134=temp$36128.length)),((($index$36140=0)),function(){$36117:for(;($index$36140<$length$36134);($index$36140++)){var arg$36157;var m$36149;(m$36149=temp$36128[$index$36140]);(arg$36157=m$36149);acc$36122.push(it$0$35645.build(arg$36157));}}()))),acc$36122).join(""))+")");}else{(other$36162=$35654$35695);return $36561(["syntax","regexp"]).create("Illegal regular expression",({"expr":expr$35641}));}}}}}}});$25281(RegexBuilder$25454,$25281(((accum$36167=({})),((accum$36167["::name"]="RegexBuilder"),accum$36167)),((accum$36171=({})),((accum$36171["::egclass"]=true),accum$36171))));RegexBuilder$25454;(build_regexp$25455=function(x$36178){return RegexBuilder$25454().build(x$36178);});(mac$36183=function(context$36190,scope$36191,form$36192,$36187$36193,flags$36194){var arg$36239;var v$36224;var $36199$36220;var $36200$36221;var t0$36212;var t1$36213;var t2$36214;var t3$36215;var t4$36216;var t5$36217;var t6$36218;var $36196$36207;var ph$36201;(ph$36201=$36187$36193);($36196$36207=ph$36201);if((($36199$36220=($36196$36207 instanceof Array))&&(((t0$36212=$36196$36207.length)),((t0$36212===2)&&(($36196$36207[0]==="value")&&(((t1$36213=$36196$36207[1])),(typeof(t1$36213)==="string"))))))){(v$36224=t1$36213);return ["send",["symbol","RegExp"],["data",["value",v$36224],["value",flags$36194.join("")]]];}else{if(($36199$36220&&((t0$36212===3)&&(($36196$36207[0]==="send")&&(((t1$36213=$36196$36207[1])),((t1$36213 instanceof Array)&&(((t2$36214=t1$36213.length)),((t2$36214===2)&&((t1$36213[0]==="symbol")&&((t1$36213[1]==="'")&&(((t3$36215=$36196$36207[2])),((t3$36215 instanceof Array)&&(((t4$36216=t3$36215.length)),((t4$36216===3)&&((t3$36215[0]==="data")&&(((t5$36217=t3$36215[1])),((t5$36217 instanceof Array)&&(((t6$36218=t5$36217.length)),((t6$36218===1)&&(t5$36217[0]==="void")))))))))))))))))))){(arg$36239=t3$36215[2]);return ["send",["symbol","RegExp"],["data",["value",build_regexp$25455(arg$36239)],["value",flags$36194.join("")]]];}else{$36820($36196$36207);}}});stdenv$25427.bind(topscope$25431,"R",["macro",accum_flags$25443(mac$36183,false)]);(errf_macro$25456=function(tags$36279){return function(context$36285,scope$36286,form$36287,$36282$36288){var other$36327;var args$36322;var $36294$36309;var $36295$36310;var t0$36307;var $36290$36302;var ph$36296;(ph$36296=$36282$36288);($36290$36302=ph$36296);if((($36294$36309=($36290$36302 instanceof Array))&&(((t0$36307=$36290$36302.length)),((t0$36307===1)&&($36290$36302[0]==="void"))))){return ["send",["symbol","ErrorFactory"],["data",["data"].concat(tags$36279)]];}else{if(($36294$36309&&((t0$36307>=1)&&($36290$36302[0]==="data")))){(args$36322=Array.prototype.slice.call($36290$36302,1));return ["send",["send",["send",["symbol","ErrorFactory"],["data",["data"].concat(tags$36279)]],["send",["symbol","."],["data",["void"],["symbol","create"]]]],["data"].concat(args$36322)];}else{(other$36327=$36290$36302);return ["macro",errf_macro$25456(tags$36279.concat([other$36327]))];}}};});stdenv$25427.bind(topscope$25431,"E",["macro",errf_macro$25456([])]);(temp$36333=$36886(({"___build_array":Embedded$25426(["send",["symbol","->"],["data",["data",["symbol","arrays"]],["multi",["send",["symbol","="],["data",["send",["symbol","var"],["symbol","results"]],["data"]]],["send",["symbol","each"],["data",["symbol","arrays"],["send",["symbol","->"],["data",["symbol","a"],["send",["symbol","="],["data",["send",["symbol","set"],["symbol","results"]],["send",["send",["symbol","results"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",["symbol","a"]]]]]]]]],["symbol","results"]]]]),"object":Embedded$25426(["send",["symbol","->"],["data",["data",["symbol","pairs"]],["multi",["send",["symbol","="],["data",["symbol","rval"],["data",["symbol","="]]]],["send",["symbol","each"],["data",["symbol","pairs"],["send",["symbol","->"],["data",["data",["symbol","k"],["symbol","v"]],["send",["symbol","="],["data",["send",["symbol","rval"],["symbol","k"]],["symbol","v"]]]]]]],["symbol","rval"]]]]),"items":Embedded$25426(["send",["symbol","->"],["data",["data",["symbol","obj"]],["multi",["send",["symbol","="],["data",["symbol","results"],["data"]]],["send",["symbol","for"],["data",["send",["symbol","in"],["data",["symbol","k"],["symbol","obj"]]],["send",["symbol","if"],["data",["send",["send",["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["send",["symbol","."],["data",["void"],["symbol","hasOwnProperty"]]]],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","obj"],["symbol","k"]]],["send",["send",["symbol","results"],["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["data",["symbol","k"],["send",["symbol","obj"],["symbol","k"]]]]]]]]],["symbol","results"]]]]),"keys":Embedded$25426(["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","keys"]]]]),"enumerate":Embedded$25426(["send",["symbol","->"],["data",["data",["symbol","arr"]],["multi",["send",["symbol","="],["data",["symbol","results"],["data"]]],["send",["symbol","="],["data",["symbol","l"],["send",["symbol","arr"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["send",["symbol","for"],["data",["multi",["send",["symbol","="],["data",["symbol","i"],["value",0]]],["send",["symbol","<"],["data",["symbol","i"],["symbol","l"]]],["send",["symbol","++"],["data",["symbol","i"],["void"]]]],["send",["send",["symbol","results"],["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["data",["symbol","i"],["send",["symbol","arr"],["symbol","i"]]]]]]],["symbol","results"]]]]),"zip":Embedded$25426(["send",["symbol","->"],["data",["data",["symbol","xs"],["symbol","ys"]],["send",["symbol","each"],["data",["send",["symbol","enumerate"],["data",["symbol","xs"]]],["send",["symbol","->"],["data",["data",["symbol","i"],["symbol","x"]],["data",["symbol","x"],["send",["symbol","ys"],["symbol","i"]]]]]]]]]),"predicate":Embedded$25426(["send",["symbol","->"],["data",["data",["symbol","f"]],["multi",["send",["symbol","="],["data",["send",["symbol","f"],["value","::check"]],["symbol","f"]]],["symbol","f"]]]]),"___nequal":Embedded$25426(["send",["symbol","->"],["data",["data",["symbol","x"],["symbol","y"]],["send",["symbol","not"],["data",["void"],["send",["symbol","=="],["data",["symbol","x"],["symbol","y"]]]]]]]),"___equal":Embedded$25426(["send",["symbol","->"],["data",["data",["send",["symbol","match"],["symbol","a"]],["symbol","b"]],["multi",["send",["symbol","->"],["data",["send",["symbol","==="],["data",["void"],["symbol","b"]]],["symbol","true"]]],["send",["symbol","->"],["data",["send",["symbol","or"],["data",["send",["symbol","or"],["data",["send",["symbol","or"],["data",["send",["symbol","or"],["data",["send",["symbol","or"],["data",["send",["symbol","?"],["data",["symbol","Number"],["void"]]],["send",["symbol","?"],["data",["symbol","String"],["void"]]]]],["send",["symbol","?"],["data",["symbol","null"],["void"]]]]],["send",["symbol","?"],["data",["symbol","undefined"],["void"]]]]],["send",["symbol","==="],["data",["void"],["symbol","true"]]]]],["send",["symbol","==="],["data",["void"],["symbol","false"]]]]],["symbol","false"]]],["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","Array"],["void"]]],["multi",["send",["symbol","if"],["data",["send",["symbol","or"],["data",["send",["symbol","not"],["data",["void"],["send",["symbol","?"],["data",["symbol","Array"],["symbol","b"]]]]],["send",["symbol","!=="],["data",["send",["symbol","a"],["send",["symbol","."],["data",["void"],["symbol","length"]]]],["send",["symbol","b"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]]]],["send",["symbol","return"],["symbol","false"]]]],["send",["symbol","for"],["data",["multi",["send",["symbol","="],["data",["symbol","i"],["value",0]]],["send",["symbol","<"],["data",["symbol","i"],["send",["symbol","a"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["send",["symbol","++"],["data",["symbol","i"],["void"]]]],["send",["symbol","if"],["data",["send",["symbol","not"],["data",["void"],["send",["symbol","=="],["data",["send",["symbol","___js_fetch"],["data",["symbol","a"],["symbol","i"]]],["send",["symbol","___js_fetch"],["data",["symbol","b"],["symbol","i"]]]]]]],["send",["symbol","return"],["symbol","false"]]]]]],["symbol","true"]]]],["send",["symbol","->"],["data",["send",["symbol","when"],["data",["void"],["send",["symbol","and"],["data",["send",["symbol","and"],["data",["send",["symbol","==="],["data",["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","getPrototypeOf"]]]],["data",["symbol","a"]]],["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]],["send",["symbol","?"],["data",["symbol","Object"],["symbol","b"]]]]],["send",["symbol","==="],["data",["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","getPrototypeOf"]]]],["data",["symbol","b"]]],["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]]]]]],["multi",["send",["symbol","="],["data",["symbol","ka"],["send",["symbol","keys"],["data",["symbol","a"]]]]],["send",["symbol","if"],["data",["send",["symbol","not"],["data",["void"],["send",["symbol","=="],["data",["send",["send",["symbol","ka"],["send",["symbol","."],["data",["void"],["symbol","sort"]]]],["data"]],["send",["send",["send",["symbol","keys"],["data",["symbol","b"]]],["send",["symbol","."],["data",["void"],["symbol","sort"]]]],["data"]]]]]],["send",["symbol","return"],["symbol","false"]]]],["send",["symbol","each"],["data",["symbol","ka"],["send",["symbol","->"],["data",["symbol","k"],["send",["symbol","if"],["data",["send",["symbol","not"],["data",["void"],["send",["symbol","=="],["data",["send",["symbol","___js_fetch"],["data",["symbol","a"],["symbol","k"]]],["send",["symbol","___js_fetch"],["data",["symbol","b"],["symbol","k"]]]]]]],["send",["symbol","return"],["symbol","false"]]]]]]]],["symbol","true"]]]],["send",["symbol","->"],["data",["data",["send",["symbol","=>"],["data",["value","::serialize"],["symbol","_"]]]],["send",["symbol","match"],["data",["symbol","b"],["multi",["send",["symbol","->"],["data",["data",["send",["symbol","=>"],["data",["value","::serialize"],["symbol","_"]]]],["send",["symbol","=="],["data",["send",["send",["symbol","a"],["value","::serialize"]],["data"]],["send",["send",["symbol","b"],["value","::serialize"]],["data"]]]]]],["send",["symbol","->"],["data",["symbol","otherwise"],["symbol","false"]]]]]]]],["send",["symbol","->"],["data",["symbol","otherwise"],["symbol","false"]]]]]]),"&:":Embedded$25426(["send",["symbol","->"],["data",["data",["symbol","dest"],["symbol","values"]],["multi",["send",["symbol","for"],["data",["send",["symbol","in"],["data",["symbol","k"],["symbol","values"]]],["send",["symbol","if"],["data",["send",["send",["symbol","values"],["send",["symbol","."],["data",["void"],["symbol","hasOwnProperty"]]]],["data",["symbol","k"]]],["send",["symbol","="],["data",["send",["symbol","dest"],["symbol","k"]],["send",["symbol","___js_fetch"],["data",["symbol","values"],["symbol","k"]]]]]]]]],["symbol","dest"]]]]),"&":Embedded$25426(["send",["symbol","->"],["data",["data",["symbol","a"],["symbol","b"]],["multi",["send",["symbol","="],["data",["symbol","dest"],["send",["symbol","clone"],["data",["symbol","a"]]]]],["send",["symbol","for"],["data",["send",["symbol","in"],["data",["symbol","k"],["symbol","b"]]],["send",["symbol","if"],["data",["send",["send",["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["send",["symbol","."],["data",["void"],["symbol","hasOwnProperty"]]]],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","b"],["symbol","k"]]],["send",["symbol","="],["data",["send",["symbol","dest"],["symbol","k"]],["send",["symbol","___js_fetch"],["data",["symbol","b"],["symbol","k"]]]]]]]]],["symbol","dest"]]]]),"&+":Embedded$25426(["send",["symbol","->"],["data",["data",["symbol","a"],["symbol","b"]],["multi",["send",["symbol","="],["data",["symbol","dest"],["send",["symbol","clone"],["data",["symbol","a"]]]]],["send",["symbol","for"],["data",["send",["symbol","in"],["data",["symbol","k"],["symbol","b"]]],["send",["symbol","if"],["data",["send",["send",["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["send",["symbol","."],["data",["void"],["symbol","hasOwnProperty"]]]],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","b"],["symbol","k"]]],["send",["symbol","="],["data",["send",["symbol","dest"],["symbol","k"]],["send",["symbol","___js_fetch"],["data",["symbol","b"],["symbol","k"]]]]]]]]],["symbol","dest"]]]]),"|>":Embedded$25426(["send",["symbol","->"],["data",["data",["symbol","f"],["symbol","g"]],["send",["symbol","->"],["data",["data",["symbol","x"]],["send",["symbol","g"],["data",["send",["symbol","f"],["data",["symbol","x"]]]]]]]]]),"clone":Embedded$25426(["send",["symbol","->"],["data",["data",["send",["symbol","match"],["symbol","x"]]],["multi",["send",["symbol","->"],["data",["send",["symbol","or"],["data",["send",["symbol","or"],["data",["send",["symbol","or"],["data",["send",["symbol","?"],["data",["symbol","undefined"],["void"]]],["send",["symbol","?"],["data",["symbol","null"],["void"]]]]],["send",["symbol","?"],["data",["symbol","String"],["void"]]]]],["send",["symbol","?"],["data",["symbol","Number"],["void"]]]]],["symbol","x"]]],["send",["symbol","->"],["data",["data",["send",["symbol","=>"],["data",["value","::clone"],["symbol","_"]]]],["send",["send",["symbol","x"],["value","::clone"]],["data"]]]],["send",["symbol","->"],["data",["send",["symbol","when"],["data",["void"],["send",["symbol","==="],["data",["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","getPrototypeOf"]]]],["data",["symbol","x"]]],["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]]]],["multi",["send",["symbol","="],["data",["symbol","dest"],["data",["symbol","="]]]],["send",["symbol","for"],["data",["send",["symbol","in"],["data",["symbol","k"],["symbol","x"]]],["send",["symbol","if"],["data",["send",["send",["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["send",["symbol","."],["data",["void"],["symbol","hasOwnProperty"]]]],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","x"],["symbol","k"]]],["send",["symbol","="],["data",["send",["symbol","dest"],["symbol","k"]],["send",["symbol","___js_fetch"],["data",["symbol","x"],["symbol","k"]]]]]]]]],["symbol","dest"]]]],["send",["symbol","->"],["data",["symbol","other"],["send",["symbol","throw"],["send",["send",["symbol","E"],["send",["symbol","."],["data",["void"],["symbol","clone"]]]],["data",["value","Object cannot be cloned"],["data",["send",["symbol","="],["data",["symbol","obj"],["symbol","x"]]]]]]]]]]]]),"___checker":Embedded$25426(["send",["symbol","->"],["data",["data",["symbol","type"]],["multi",["send",["symbol","="],["data",["symbol","f"],["send",["symbol","type"],["value","::check"]]]],["send",["symbol","if"],["data",["send",["symbol","==="],["data",["symbol","f"],["symbol","undefined"]]],["multi",["send",["symbol","then"],["data",["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["symbol","instanceof"],["data",["symbol","value"],["symbol","type"]]]]]]],["send",["symbol","else"],["data",["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["send",["symbol","f"],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","type"],["symbol","value"]]]]]]]]]]]]]),"___projector":Embedded$25426(["send",["symbol","->"],["data",["data",["symbol","type"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["multi",["send",["symbol","="],["data",["send",["symbol","var"],["symbol","f"]],["send",["symbol","type"],["value",":::project"]]]],["send",["symbol","if"],["data",["send",["symbol","==="],["data",["symbol","f"],["symbol","undefined"]]],["multi",["send",["symbol","then"],["data",["multi",["send",["symbol","="],["data",["send",["symbol","set"],["symbol","f"]],["send",["symbol","type"],["value","::project"]]]],["send",["symbol","if"],["data",["send",["symbol","==="],["data",["symbol","f"],["symbol","undefined"]]],["multi",["send",["symbol","then"],["data",["data",["symbol","true"],["send",["symbol","type"],["data",["symbol","value"]]]]]],["send",["symbol","else"],["data",["send",["symbol","!!"],["data",["data",["symbol","true"],["send",["symbol","f"],["data",["symbol","value"]]]],["send",["symbol","->"],["data",["symbol","e"],["data",["symbol","false"],["symbol","null"]]]]]]]]]]]]]],["send",["symbol","else"],["data",["send",["send",["symbol","f"],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","type"],["symbol","value"]]]]]]]]]]]]]),"___hasprop":Embedded$25426(["send",["symbol","->"],["data",["data",["symbol","match"],["symbol","key"]],["multi",["send",["symbol","->"],["data",["send",["symbol","or"],["data",["send",["symbol","?"],["data",["symbol","null"],["void"]]],["send",["symbol","?"],["data",["symbol","undefined"],["void"]]]]],["symbol","false"]]],["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","String"],["symbol","x"]]],["send",["symbol","in"],["data",["symbol","key"],["send",["symbol","String"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]]]],["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","Number"],["symbol","x"]]],["send",["symbol","in"],["data",["symbol","key"],["send",["symbol","Number"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]]]],["send",["symbol","->"],["data",["symbol","x"],["send",["symbol","in"],["data",["symbol","key"],["symbol","x"]]]]]]]]),"range":Embedded$25426(["send",["symbol","->"],["data",["data",["symbol","from"],["symbol","to"]],["multi",["send",["symbol","="],["data",["symbol","rval"],["data"]]],["send",["symbol","for"],["data",["multi",["send",["symbol","="],["data",["symbol","i"],["symbol","from"]]],["send",["symbol","<="],["data",["symbol","i"],["symbol","to"]]],["send",["symbol","++"],["data",["symbol","i"],["void"]]]],["send",["send",["symbol","rval"],["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["symbol","i"]]]]],["symbol","rval"]]]]),"___serialize_ast":Embedded$25426(["send",["symbol","->"],["data",["data",["symbol","match"]],["multi",["send",["symbol","->"],["data",["send",["symbol","or"],["data",["send",["symbol","?"],["data",["symbol","String"],["symbol","x"]]],["send",["symbol","?"],["data",["symbol","Number"],["symbol","x"]]]]],["send",["send",["symbol","#"],["data",["void"],["symbol","value"]]],["data",["symbol","x"]]]]],["send",["symbol","->"],["data",["symbol","other"],["send",["send",["symbol","other"],["value","::serialize_ast"]],["data"]]]]]]]),"___match_error":Embedded$25426(["send",["symbol","->"],["data",["data",["symbol","value"],["symbol","url"],["symbol","start"],["symbol","end"]],["multi",["send",["symbol","="],["data",["symbol","err"],["send",["send",["symbol","E"],["send",["symbol","."],["data",["void"],["symbol","match"]]]],["data",["value","Could not find a match for value"],["data",["send",["symbol","="],["data",["symbol","value"],["symbol","value"]]]]]]]],["send",["symbol","if"],["data",["symbol","url"],["send",["symbol","="],["data",["send",["symbol","err"],["send",["symbol","."],["data",["void"],["symbol","location"]]]],["send",["send",["symbol","#"],["data",["void"],["symbol","location"]]],["data",["symbol","url"],["symbol","start"],["symbol","end"]]]]]]],["send",["symbol","throw"],["symbol","err"]]]]]),"___extend":Embedded$25426(["send",["symbol","->"],["data",["data",["symbol","child"],["symbol","parent"]],["multi",["send",["symbol","each"],["data",["send",["symbol","items"],["data",["symbol","parent"]]],["send",["symbol","->"],["data",["data",["symbol","key"],["symbol","value"]],["send",["symbol","="],["data",["send",["symbol","child"],["symbol","key"]],["symbol","value"]]]]]]],["send",["symbol","="],["data",["send",["symbol","child"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","create"]]]],["data",["send",["symbol","parent"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]]]],["send",["symbol","="],["data",["send",["send",["symbol","child"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["send",["symbol","."],["data",["void"],["symbol","constructor"]]]],["symbol","child"]]],["send",["symbol","="],["data",["send",["symbol","child"],["value","::super"]],["send",["symbol","parent"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]],["symbol","child"]]]]),"ErrorFactory":Embedded$25426(["send",["symbol","class"],["data",["multi",["send",["symbol","="],["data",["send",["symbol","constructor"],["data",["symbol","tags"]]],["send",["symbol","="],["data",["send",["symbol","@"],["data",["void"],["symbol","tags"]]],["symbol","tags"]]]]],["send",["symbol","="],["data",["send",["symbol","create"],["data",["send",["symbol","="],["data",["symbol","message"],["value",""]]],["send",["symbol","*"],["data",["void"],["symbol","args"]]]]],["multi",["send",["symbol","="],["data",["symbol","e"],["send",["symbol","Error"],["data",["symbol","message"]]]]],["send",["symbol","="],["data",["send",["symbol","e"],["value","::tags"]],["send",["symbol","@"],["data",["void"],["symbol","tags"]]]]],["send",["symbol","="],["data",["send",["symbol","e"],["send",["symbol","."],["data",["void"],["symbol","args"]]]],["symbol","args"]]],["send",["symbol","each"],["data",["send",["symbol","enumerate"],["data",["symbol","args"]]],["send",["symbol","->"],["data",["data",["symbol","i"],["symbol","arg"]],["send",["symbol","="],["data",["send",["symbol","e"],["symbol","i"]],["symbol","arg"]]]]]]],["send",["symbol","="],["data",["send",["symbol","e"],["send",["symbol","."],["data",["void"],["symbol","length"]]]],["send",["symbol","args"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["send",["symbol","="],["data",["send",["symbol","e"],["send",["symbol","."],["data",["void"],["symbol","name"]]]],["send",["send",["send",["symbol","++"],["data",["data",["send",["symbol","."],["data",["void"],["symbol","E"]]]],["send",["symbol","@"],["data",["void"],["symbol","tags"]]]]],["send",["symbol","."],["data",["void"],["symbol","join"]]]],["data",["value","."]]]]],["symbol","e"]]]],["send",["symbol","="],["data",["send",["value","::check"],["data",["symbol","e"]]],["multi",["send",["symbol","if"],["data",["send",["symbol","or"],["data",["send",["symbol","not"],["data",["void"],["symbol","e"]]],["send",["symbol","not"],["data",["void"],["send",["symbol","?"],["data",["symbol","Error"],["symbol","e"]]]]]]],["send",["symbol","return"],["symbol","false"]]]],["send",["symbol","="],["data",["symbol","tags"],["send",["symbol","or"],["data",["send",["symbol","e"],["value","::tags"]],["data"]]]]],["send",["symbol","each?"],["data",["send",["symbol","@"],["data",["void"],["symbol","tags"]]],["send",["symbol","->"],["data",["send",["symbol","when"],["data",["symbol","tag"],["send",["symbol","==="],["data",["send",["send",["symbol","tags"],["send",["symbol","."],["data",["void"],["symbol","indexOf"]]]],["data",["symbol","tag"]]],["send",["symbol","-"],["data",["void"],["value",1]]]]]]],["send",["symbol","return"],["symbol","false"]]]]]],["symbol","true"]]]],["send",["symbol","="],["data",["send",["value","::deconstruct"],["data",["symbol","e"]]],["send",["symbol","e"],["send",["symbol","."],["data",["void"],["symbol","args"]]]]]]]]]),"Node":Embedded$25426(["send",["symbol","class"],["data",["multi",["send",["symbol","static"],["data",["multi",["send",["symbol","="],["data",["send",["value","::check"],["data",["symbol","x"]]],["send",["symbol","and"],["data",["send",["symbol","and"],["data",["send",["symbol","and"],["data",["symbol","x"],["send",["symbol","x"],["send",["symbol","."],["data",["void"],["symbol","tags"]]]]]],["send",["symbol","x"],["send",["symbol","."],["data",["void"],["symbol","props"]]]]]],["send",["symbol","x"],["send",["symbol","."],["data",["void"],["symbol","children"]]]]]]]],["send",["symbol","="],["data",["send",["value",":::project"],["data",["symbol","match"]]],["multi",["send",["symbol","->"],["data",["data",["send",["symbol","=>"],["data",["void"],["symbol","tags"]]],["send",["symbol","=>"],["data",["void"],["symbol","props"]]],["send",["symbol","=>"],["data",["void"],["symbol","children"]]]],["data",["symbol","true"],["data",["symbol","tags"],["symbol","props"],["symbol","children"]]]]],["send",["symbol","->"],["data",["symbol","else"],["data",["symbol","false"],["symbol","null"]]]]]]]]]],["send",["symbol","="],["data",["send",["symbol","constructor"],["data",["send",["symbol","!"],["data",["symbol","Array"],["send",["symbol","@"],["data",["void"],["symbol","tags"]]]]],["send",["symbol","@"],["data",["void"],["symbol","props"]]],["send",["symbol","!"],["data",["symbol","Array"],["send",["symbol","@"],["data",["void"],["symbol","children"]]]]]]],["symbol","pass"]]],["send",["symbol","="],["data",["send",["value","::check"],["data",["symbol","match"]]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","Node"],["symbol","n"]]],["multi",["send",["symbol","each?"],["data",["send",["symbol","@"],["data",["void"],["symbol","tags"]]],["send",["symbol","->"],["data",["send",["symbol","when"],["data",["symbol","c"],["send",["symbol","==="],["data",["send",["send",["send",["symbol","n"],["send",["symbol","."],["data",["void"],["symbol","tags"]]]],["send",["symbol","."],["data",["void"],["symbol","indexOf"]]]],["data",["symbol","c"]]],["send",["symbol","-"],["data",["void"],["value",1]]]]]]],["send",["symbol","return"],["symbol","false"]]]]]],["symbol","true"]]]],["send",["symbol","->"],["data",["symbol","else"],["symbol","false"]]]]]],["send",["symbol","="],["data",["send",["value",":::project"],["data",["symbol","match"]]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","@"],["symbol","n"]]],["data",["symbol","true"],["data",["send",["symbol","n"],["send",["symbol","."],["data",["void"],["symbol","tags"]]]],["send",["symbol","n"],["send",["symbol","."],["data",["void"],["symbol","props"]]]],["send",["symbol","n"],["send",["symbol","."],["data",["void"],["symbol","children"]]]]]]]],["send",["symbol","->"],["data",["symbol","else"],["data",["symbol","false"],["symbol","null"]]]]]]]]]])})));($length$36339=temp$36333.length);($index$36345=0);$25464:for(;($index$36345<$length$36339);($index$36345++)){var k$36364;var v$36365;var t0$36359;var t1$36360;var m$36354;(m$36354=temp$36333[$index$36345]);(t0$36359=m$36354);if(((t0$36359 instanceof Array)&&(((t1$36360=t0$36359.length)),(t1$36360===2)))){(k$36364=t0$36359[0]);(v$36365=t0$36359[1]);stdenv$25427.bind(topscope$25431,k$36364,["value",v$36365]);}else{$36820(m$36354,"/home/olivier/git/earl-grey/src/stdenv.eg",42093,42159);}}(stdprelude$25457=Embedded$25426(["multi",["send",["symbol","="],["data",["send",["symbol","send"],["data",["symbol","obj"],["send",["symbol","match"],["symbol","msg"]]]],["multi",["send",["symbol","->"],["data",["send",["symbol","or"],["data",["send",["symbol","?"],["data",["symbol","String"],["void"]]],["send",["symbol","?"],["data",["symbol","Number"],["void"]]]]],["send",["symbol","___js_fetch"],["data",["symbol","obj"],["symbol","msg"]]]]],["send",["symbol","->"],["data",["symbol","other"],["send",["send",["symbol","obj"],["value","::send"]],["data",["symbol","msg"]]]]]]]],["send",["symbol","="],["data",["send",["send",["symbol","Array"],["value",":::project"]],["data",["send",["symbol","match"],["symbol","value"]]]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","Array"],["void"]]],["data",["symbol","true"],["symbol","value"]]]],["send",["symbol","->"],["data",["symbol","_"],["data",["symbol","true"],["data",["symbol","value"]]]]]]]],["send",["symbol","="],["data",["send",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value","::check"]],["data",["symbol","value"]]],["send",["symbol","if"],["data",["send",["symbol","instanceof"],["data",["symbol","value"],["symbol","Array"]]],["multi",["send",["symbol","then"],["data",["multi",["send",["symbol","for"],["data",["multi",["send",["symbol","="],["data",["symbol","i"],["value",0]]],["send",["symbol","<"],["data",["symbol","i"],["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["send",["symbol","++"],["data",["symbol","i"],["void"]]]],["send",["symbol","if"],["data",["send",["symbol","!=="],["data",["send",["symbol","this"],["symbol","i"]],["send",["symbol","value"],["symbol","i"]]]],["send",["symbol","return"],["symbol","false"]]]]]],["symbol","true"]]]],["send",["symbol","else"],["data",["symbol","false"]]]]]]]],["send",["symbol","="],["data",["send",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value","::clone"]],["data"]],["send",["symbol","&:"],["data",["send",["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","slice"]]]],["data",["value",0]]],["symbol","this"]]]]],["send",["symbol","="],["data",["send",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value",":::project"]],["data",["symbol","value"]]],["send",["symbol","if"],["data",["send",["symbol","instanceof"],["data",["symbol","value"],["symbol","Array"]]],["multi",["send",["symbol","then"],["data",["multi",["send",["symbol","for"],["data",["multi",["send",["symbol","="],["data",["symbol","i"],["value",0]]],["send",["symbol","<"],["data",["symbol","i"],["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["send",["symbol","++"],["data",["symbol","i"],["void"]]]],["send",["symbol","if"],["data",["send",["symbol","!=="],["data",["send",["symbol","this"],["symbol","i"]],["send",["symbol","value"],["symbol","i"]]]],["send",["symbol","return"],["data",["symbol","true"],["data",["symbol","value"]]]]]]]],["data",["symbol","true"],["send",["send",["symbol","value"],["send",["symbol","."],["data",["void"],["symbol","slice"]]]],["data",["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]]]]]],["send",["symbol","else"],["data",["data",["symbol","true"],["data",["symbol","value"]]]]]]]]]],["send",["symbol","="],["data",["send",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value","::serialize_ast"]],["data"]],["send",["send",["symbol","#"],["data",["void"],["symbol","array"]]],["data",["send",["symbol","*"],["data",["void"],["send",["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","map"]]]],["data",["symbol","___serialize_ast"]]]]]]]]],["send",["symbol","="],["data",["send",["send",["send",["symbol","RegExp"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value","::check"]],["data",["symbol","match"]]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","String"],["symbol","value"]]],["send",["symbol","if"],["data",["send",["send",["symbol","value"],["send",["symbol","."],["data",["void"],["symbol","match"]]]],["data",["symbol","this"]]],["symbol","true"],["symbol","false"]]]]],["send",["symbol","->"],["data",["symbol","other"],["symbol","false"]]]]]],["send",["symbol","="],["data",["send",["send",["send",["symbol","RegExp"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value",":::project"]],["data",["symbol","match"]]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","String"],["symbol","value"]]],["send",["symbol","match"],["data",["send",["send",["symbol","value"],["send",["symbol","."],["data",["void"],["symbol","match"]]]],["data",["symbol","this"]]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","null"],["symbol","m"]]],["data",["symbol","false"],["symbol","null"]]]],["send",["symbol","->"],["data",["symbol","m"],["data",["symbol","true"],["symbol","m"]]]]]]]]],["send",["symbol","->"],["data",["symbol","other"],["data",["symbol","false"],["symbol","null"]]]]]]],["send",["symbol","="],["data",["send",["send",["send",["symbol","Function"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value","::send"]],["data",["symbol","args"]]],["send",["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","apply"]]]],["data",["symbol","this"],["symbol","args"]]]]]]));(expander$25429["utils"]=({"var_operator":var_operator$25442}));(exports["topscope"]=topscope$25431);(exports["stdenv"]=stdenv$25427);(exports["expander"]=expander$25429);(exports["expand"]=expand$25430);(exports["stdprelude"]=stdprelude$25457);

},{"./expand":6,"./location":8,"./pattern":11,"./pp":12,"./util":15}],14:[function(require,module,exports){
var $37376=function(type$37379){var f$37383;(f$37383=type$37379["::check"]);if((f$37383===(void 0))){return function(value$37389){return (value$37389 instanceof type$37379);};}else{return function(value$37393){return f$37383.call(type$37379,value$37393);};}};
var $37395=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $37396=function(dest$37399,values$37400){var k$37405;(k$37405=null);$37403:for(k$37405 in values$37400){if(values$37400.hasOwnProperty(k$37405)){(dest$37399[k$37405]=values$37400[k$37405]);}}return dest$37399;};
var $37413=function($37415$37418){var ph$37424;(ph$37424=$37415$37418);var $37420$37430;($37420$37430=ph$37424);var bridge$37422$37435;var x$37439;(bridge$37422$37435=$37420$37430);if((((typeof(bridge$37422$37435)==="string")&&((x$37439=bridge$37422$37435),true))||((typeof(bridge$37422$37435)==="number")&&((x$37439=bridge$37422$37435),true)))){return ["value",x$37439];}else{var other$37450;(other$37450=$37420$37430);return other$37450["::serialize_ast"]();}};
var send$37150;(send$37150=function(obj$37157,$37154$37158){var ph$37164;var msg$37165;var t0$37167;(t0$37167=$37154$37158);(msg$37165=t0$37167);(ph$37164=t0$37167);var $37160$37176;($37160$37176=ph$37164);var bridge$37162$37181;(bridge$37162$37181=$37160$37176);if(((typeof(bridge$37162$37181)==="string")||(typeof(bridge$37162$37181)==="number"))){return obj$37157[msg$37165];}else{var other$37193;(other$37193=$37160$37176);return obj$37157["::send"](msg$37165);}});(Array[":::project"]=function($37199$37202){var ph$37207;var value$37208;var t0$37210;(t0$37210=$37199$37202);(value$37208=t0$37210);(ph$37207=t0$37210);var $37204$37219;($37204$37219=ph$37207);if($37376(Array)($37204$37219)){return [true,value$37208];}else{$37204$37219;return [true,[value$37208]];}});(Array.prototype["::check"]=function(value$37237){if((value$37237 instanceof Array)){var i$37243;(i$37243=0);$37240:for(;(i$37243<this.length);(i$37243++)){if(($37395(this,i$37243)!==$37395(value$37237,i$37243))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $37396(this.slice(0),this);});(Array.prototype[":::project"]=function(value$37262){if((value$37262 instanceof Array)){var i$37268;(i$37268=0);$37265:for(;(i$37268<this.length);(i$37268++)){if(($37395(this,i$37268)!==$37395(value$37262,i$37268))){return [true,[value$37262]];}}return [true,value$37262.slice(this.length)];}else{return [true,[value$37262]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($37413));});(RegExp.prototype["::check"]=function($37286$37289){var ph$37294;(ph$37294=$37286$37289);var $37291$37300;($37291$37300=ph$37294);var value$37308;if((typeof($37291$37300)==="string")){(value$37308=$37291$37300);if(value$37308.match(this)){return true;}else{return false;}}else{var other$37313;(other$37313=$37291$37300);return false;}});(RegExp.prototype[":::project"]=function($37319$37322){var ph$37327;(ph$37327=$37319$37322);var $37324$37333;($37324$37333=ph$37327);var value$37341;if((typeof($37324$37333)==="string")){(value$37341=$37324$37333);var $37344$37349;($37344$37349=value$37341.match(this));var m$37357;if(($37344$37349===null)){(m$37357=$37344$37349);return [false,null];}else{var m$37362;(m$37362=$37344$37349);return [true,m$37362];}}else{var other$37366;(other$37366=$37324$37333);return [false,null];}});(Function.prototype["::send"]=function(args$37373){return this.apply(this,args$37373);});
var $39816=function(arr$39819){var results$39825;var l$39826;(results$39825=[]);(l$39826=arr$39819.length);var i$39835;(i$39835=0);$39824:for(;(i$39835<l$39826);(i$39835++)){results$39825.push([i$39835,$37395(arr$39819,i$39835)]);}return results$39825;};
var $39583=function(){var $39584$39590;($39584$39590=function(tags$39595){var it$0$39598;(it$0$39598=function(){if((!$37376($39584$39590)(this))){return Object.create($39584$39590.prototype);}else{return this;}}());(it$0$39598["tags"]=tags$39595);return it$0$39598;});($39584$39590.prototype["create"]=function(){var it$0$39618;var self$39619;(it$0$39618=this);(self$39619=this);var $39616$39628;($39616$39628=arguments);var t0$39633;var message$39637;var args$39638;(t0$39633=$39616$39628.length);if((t0$39633>=0)){(message$39637=function(){if((0>=t0$39633)){return "";}else{return $39616$39628[0];}}());(args$39638=Array.prototype.slice.call($39616$39628,1));var e$39651;(e$39651=Error(message$39637));(e$39651["::tags"]=it$0$39618.tags);(e$39651["args"]=args$39638);var temp$39667;(temp$39667=$39816(args$39638));var $length$39673;($length$39673=temp$39667.length);var $index$39679;($index$39679=0);$39652:for(;($index$39679<$length$39673);($index$39679++)){var m$39688;(m$39688=temp$39667[$index$39679]);var t0$39693;var t1$39694;var i$39698;var arg$39699;(t0$39693=m$39688);if(((t0$39693 instanceof Array)&&(((t1$39694=t0$39693.length)),(t1$39694===2)))){(i$39698=t0$39693[0]);(arg$39699=t0$39693[1]);(e$39651[i$39698]=arg$39699);}else{$39564(m$39688);}}(e$39651["length"]=args$39638.length);(e$39651["name"]=["E"].concat(it$0$39618.tags).join("."));return e$39651;}else{$39564($39616$39628);}});($39584$39590.prototype["::check"]=function(e$39729){var it$0$39733;var self$39734;(it$0$39733=this);(self$39734=this);var tags$39744;if(((!e$39729)||(!$37376(Error)(e$39729)))){return false;}(tags$39744=(e$39729["::tags"]||[]));var temp$39755;(temp$39755=it$0$39733.tags);var $length$39761;($length$39761=temp$39755.length);var $index$39767;($index$39767=0);$39745:for(;($index$39767<$length$39761);($index$39767++)){var m$39776;(m$39776=temp$39755[$index$39767]);var tag$39784;(tag$39784=m$39776);if((tags$39744.indexOf(tag$39784)===-1)){return false;}else{false;}}return true;});($39584$39590.prototype["::deconstruct"]=function(e$39793){var it$0$39797;var self$39798;(it$0$39797=this);(self$39798=this);return e$39793.args;});$37396($39584$39590,$37396(function(){var accum$39809;(accum$39809=({}));(accum$39809["::name"]="$39584");return accum$39809;}(),function(){var accum$39813;(accum$39813=({}));(accum$39813["::egclass"]=true);return accum$39813;}()));return $39584$39590;}();
var $39564=function(value$39567,url$39568,start$39569,end$39570){var err$39574;(err$39574=$39583(["match"]).create("Could not find a match for value",({"value":value$39567})));if(url$39568){(err$39574["location"]=["location",url$39568,start$39569,end$39570]);}throw err$39574;};
var $39842=function(type$39845){return function(value$39849){var f$39853;(f$39853=type$39845[":::project"]);if((f$39853===(void 0))){(f$39853=type$39845["::project"]);if((f$39853===(void 0))){return [true,type$39845(value$39849)];}else{var rval$39866;(rval$39866=false);try{(rval$39866=[true,f$39853(value$39849)]);}catch(excv$39877){var e$39883;(e$39883=excv$39877);(rval$39866=[false,null]);}return rval$39866;}}else{return f$39853.call(type$39845,value$39849);}};};
var $39889=function($39891$39894,key$39895){var ph$39903;(ph$39903=$39891$39894);var $39897$39909;($39897$39909=ph$39903);var bridge$39899$39914;(bridge$39899$39914=$39897$39909);if(((bridge$39899$39914===null)||(bridge$39899$39914===(void 0)))){return false;}else{var x$39926;if((typeof($39897$39909)==="string")){(x$39926=$39897$39909);return (key$39895 in String.prototype);}else{var x$39931;if((typeof($39897$39909)==="number")){(x$39931=$39897$39909);return (key$39895 in Number.prototype);}else{var x$39936;(x$39936=$39897$39909);return (key$39895 in x$39936);}}}};var accum$39529;var accum$39533;var $37454$37472;var gensym$37473;var $37455$37474;var __lt____gt__$37475;var js_op_table2$37476;var js_op_table$37477;var Translator$37478;var translate$37479;($37454$37472=require("./util"));(gensym$37473=$37454$37472.gensym);($37455$37474=require("./pp"));(__lt____gt__$37475=$37455$37474["<>"]);(js_op_table2$37476=({"+":"+","-":"-","*":"*","/":"/","mod":"%","&.":"&","|.":"|","^.":"^","~":"~","and":"&&","or":"||","not":"!","==":"===","!=":"!==","===":"===","!==":"!==","<":"<",">":">","<=":"<=",">=":">=","<<":"<<",">>":">>",">>>":">>>","in":" in ","instanceof":" instanceof ","++":"++","--":"--"}));(js_op_table$37477=({"___plus":"+","___minus":"-","___times":"*","___div":"/","___mod":"%","___binxor":"^","___binand":"&","___binor":"|","___binnot":"~","___and":"&&","___or":"||","___not":"!","___is":"===","___isnt":"!==","___eq":"===","___neq":"!==","___lt":"<","___gt":">","___lte":"<=","___gte":">=","___shl":"<<","___shr":">>","___shr2":">>>","___in":" in ","___instanceof":" instanceof ","___plusplus":"++","___minusminus":"--"}));(Translator$37478=function(){var prelude$37522;var t0$37518;var $37509$37513;var it$0$37504;(it$0$37504=function(){if((!$37376(Translator$37478)(this))){return Object.create(Translator$37478.prototype);}else{return this;}}());($37509$37513=arguments);(t0$37518=$37509$37513.length);if(((t0$37518>=0)&&(t0$37518<=1))){(prelude$37522=function(){if((0>=t0$37518)){return null;}else{return $37509$37513[0];}}());(it$0$37504["cache"]=({}));(it$0$37504["prepend"]=[]);if(prelude$37522){it$0$37504.prepend.push(it$0$37504.translate($37413(prelude$37522),"stmt"));}}else{$39564($37509$37513);}return it$0$37504;});(Translator$37478.prototype["register_value"]=function(v$37546,id$37547){var temp$37578;var name$37587;var $37560$37565;var it$0$37551;var self$37552;(it$0$37551=this);(self$37552=this);($37560$37565=$37395(it$0$37551.cache,id$37547));if(($37560$37565===(void 0))){(temp$37578=["symbol",gensym$37473()]);(it$0$37551.cache[id$37547]=temp$37578);it$0$37551.prepend.push(it$0$37551.translate(["declare",temp$37578,$37413(v$37546)],"stmt"));return temp$37578;}else{(name$37587=$37560$37565);return name$37587;}});(Translator$37478.prototype["register_raw"]=function(raw$37593,id$37594){var temp$37625;var name$37634;var $37607$37612;var it$0$37598;var self$37599;(it$0$37598=this);(self$37599=this);($37607$37612=$37395(it$0$37598.cache,id$37594));if(($37607$37612===(void 0))){(temp$37625=["symbol",gensym$37473()]);(it$0$37598.cache[id$37594]=temp$37625);it$0$37598.prepend.push(it$0$37598.translate(["declare",temp$37625,["raw",raw$37593]],"stmt"));return temp$37625;}else{(name$37634=$37607$37612);return name$37634;}});(Translator$37478.prototype["dump_store"]=function(){var rval$37655;var it$0$37643;var self$37644;(it$0$37643=this);(self$37644=this);(rval$37655=it$0$37643.prepend.join("\n"));(it$0$37643["prepend"]=[]);return rval$37655;});(Translator$37478.prototype["mangle"]=function(name$37666){var i$37693;var tr$37683;var r$37684;var it$0$37670;var self$37671;(it$0$37670=this);(self$37671=this);(tr$37683=({"+":"__plus__","-":"__minus__","*":"__asterisk__","/":"__slash__","%":"__percent__","^":"__caret__","#":"__hash__","&":"__amp__","|":"__pipe__","@":"__at__","!":"__bang__","?":"__qmark__","=":"__equal__","<":"__lt__",">":"__gt__","~":"__tilde__",".":"__dot__",":":"__colon__"}));(r$37684=[]);(i$37693=0);$37682:for(;(i$37693<name$37666.length);(++i$37693)){var c$37702;(c$37702=$37395(name$37666,i$37693));r$37684.push(($37395(tr$37683,c$37702)||c$37702));}return r$37684.join("");});(Translator$37478.prototype["body"]=function(orig$37710,mode$37711){var t0$37735;var t1$37736;var t2$37737;var x$37776;var stmts$37787;var ret$37788;var other$37801;var $37727$37764;var b$37732;var trst$37733;var it$0$37715;var self$37716;(it$0$37715=this);(self$37716=this);(t0$37735=$39842(["multi"])(orig$37710));if((t0$37735[0]&&(((t1$37736=t0$37735[1])),(((t2$37737=t1$37736.length)),(t2$37737>=0))))){(b$37732=Array.prototype.slice.call(t1$37736,0));}else{$39564(orig$37710,"/home/olivier/git/earl-grey/src/translate-js.eg",3071,3075);}(trst$37733=function(stmt$37759){return it$0$37715.translate(stmt$37759,"stmt");});($37727$37764=mode$37711);if(($37727$37764==="expr")){(x$37776=["send",["lambda",[],orig$37710],["array"]]);return it$0$37715.translate(x$37776,mode$37711);}else{if(($37727$37764==="return")){(stmts$37787=b$37732.slice(0,-1));(ret$37788=$37395(b$37732,(b$37732.length-1)));return (stmts$37787.map(trst$37733).join("")+it$0$37715.translate(ret$37788,"return"));}else{if(($37727$37764==="stmt")){return b$37732.map(trst$37733).join("");}else{(other$37801=$37727$37764);throw $39583(["syntax","mode"]).create("Unknown mode",({"mode":mode$37711}));}}}});(Translator$37478.prototype["expr"]=function(x$37807,mode$37808){var other$37848;var $37821$37828;var it$0$37812;var self$37813;(it$0$37812=this);(self$37813=this);($37821$37828=mode$37808);if(($37821$37828==="expr")){return x$37807;}else{if(($37821$37828==="stmt")){return (x$37807+";");}else{if(($37821$37828==="return")){return (("return "+x$37807)+";");}else{(other$37848=$37821$37828);throw "OopsI";}}}});(Translator$37478.prototype["op"]=function(op$37854,a$37855,b$37856){var $37878$37892;var $37879$37893;var $37880$37894;var t0$37888;var t1$37889;var t2$37890;var $37874$37883;var e$37871;var it$0$37860;var self$37861;(it$0$37860=this);(self$37861=this);(e$37871=((($37874$37883=[a$37855,b$37856])),function(){if((($37878$37892=($37874$37883 instanceof Array))&&(((t0$37888=$37874$37883.length)),(($37880$37894=(t0$37888===2))&&(((t1$37889=$37874$37883[0])),((t1$37889 instanceof Array)&&(((t2$37890=t1$37889.length)),((t2$37890===1)&&(t1$37889[0]==="void"))))))))){$37874$37883[1];return (op$37854+it$0$37860.translate(b$37856,"expr"));}else{if(($37880$37894&&($37874$37883[0],(((t1$37889=$37874$37883[1])),((t1$37889 instanceof Array)&&(((t2$37890=t1$37889.length)),((t2$37890===1)&&(t1$37889[0]==="void")))))))){return (it$0$37860.translate(a$37855,"expr")+op$37854);}else{$37874$37883;return ((it$0$37860.translate(a$37855,"expr")+op$37854)+it$0$37860.translate(b$37856,"expr"));}}}()));return (("("+e$37871)+")");});(Translator$37478.prototype["translate"]=function(expr$37937,mode$37938){var repl$38063;var it$0$38102;var it$0$38096;var it$0$38090;var it$0$38084;var bridge$38044$38121;var bridge$38043$38114;var other$38136;var id$38130;var bridge$38042$38054;var $38037$38049;var r$38034;var t0$38175;var t0$38182;var trf$38202;var trmsg$38203;var trf$38247;var trmsg$38248;var trf$38262;var trmsg$38263;var otherwise$38257;var $38229$38234;var x$38323;var x$38313;var $38296$38308;var $38297$38309;var $38298$38310;var t0$38306;var $38292$38301;var $index$38363;var $length$38357;var temp$38351;var acc$38345;var trf$38333;var trargs$38334;var op$38289;var code$38402;var code$38416;var t0$38394;var t1$38395;var trf$38423;var trmsg$38424;var codevar$38392;var f$38443;var r$38438;var f$38518;var f$38564;var v$38558;var all_strings$38460;var r$38461;var $index$38651;var $length$38645;var temp$38639;var acc$38633;var a$38618;var b$38619;var name$38611;var a$38715;var b$38716;var other$38710;var $38693$38698;var a$38753;var b$38754;var c$38755;var other$38747;var $38730$38735;var a$38808;var other$38804;var bridge$38783$38792;var $38781$38787;var a$38846;var b$38847;var other$38841;var bridge$38820$38829;var $38818$38824;var a$38875;var b$38876;var c$38877;var a$38896;var b$38897;var $index$39007;var $length$39001;var temp$38995;var acc$38989;var $index$39053;var $length$39047;var temp$39041;var acc$39035;var xs$38981;var $38919$38969;var $38915$38963;var isdecl$38920;var $index$39123;var $length$39117;var temp$39111;var acc$39105;var decls$39097;var f$39156;var r$39151;var other$39278;var $39261$39266;var a$39308;var b$39309;var other$39303;var $39286$39291;var a$39348;var b$39349;var c$39350;var d$39351;var other$39341;var $39324$39329;var a$39394;var b$39395;var c$39396;var other$39388;var $39371$39376;var t0$39440;var t0$39448;var a$39486;var b$39487;var other$39481;var $39464$39469;var other$39515;var t0$39502;var $39458$39497;var r$39461;var other$39524;var x$39519;var attempt$39408;var v$39409;var body$39410;var finally$39411;var x$39366;var y$39367;var body$39368;var x$39318;var y$39319;var z$39320;var body$39321;var test$39282;var body$39283;var label$39247;var body$39248;var value$39242;var value$39237;var value$39232;var label$39217;var label$39202;var value$39197;var args$39146;var vars$39091;var body$39092;var s$39086;var args$39081;var args$38910;var lhs$38889;var rhs$38890;var obj$38856;var msg$38857;var rhs$38858;var binding$38814;var value$38815;var binding$38767;var test$38725;var pos$38726;var neg$38727;var test$38677;var pos$38678;var bindings$38605;var body$38606;var args$38454;var args$38433;var f$38386;var msg$38387;var f$38272;var args$38273;var f$38212;var msg$38213;var s$38214;var f$38166;var msg$38167;var f$38141;var v$38029;var s$38015;var $37990$38009;var $37991$38010;var $37992$38011;var $37993$38012;var t0$38001;var t1$38002;var t2$38003;var t3$38004;var t4$38005;var bridge$37957$38006;var bridge$37987$38007;var $37951$37996;var it$0$37942;var self$37943;(it$0$37942=this);(self$37943=this);($37951$37996=expr$37937);if((($37990$38009=($37951$37996 instanceof Array))&&(((t0$38001=$37951$37996.length)),((t0$38001===2)&&($37951$37996[0]==="symbol"))))){(s$38015=$37951$37996[1]);return it$0$37942.expr(it$0$37942.mangle(s$38015),mode$37938);}else{if(($37990$38009&&((t0$38001===1)&&($37951$37996[0]==="void")))){return it$0$37942.expr("null",mode$37938);}else{if(($37990$38009&&((t0$38001===2)&&($37951$37996[0]==="value")))){(v$38029=$37951$37996[1]);(r$38034=((($38037$38049=v$38029)),function(){if((typeof($38037$38049)==="string")){(repl$38063=({"\"":"\\\"","\n":"\\n","\\":"\\\\"}));(v$38029=v$38029.replace(RegExp("((?:(?:\"|\\\\)|\n))","g"),function(m$38071){return $37395(repl$38063,m$38071);}));return (("\""+v$38029)+"\"");}else{if(($38037$38049===(void 0))){return "(void 0)";}else{if($37376(RegExp)($38037$38049)){(it$0$38084=String(v$38029));(it$0$38090=it$0$38084.slice(1,-1));(it$0$38096=it$0$38090.replace(RegExp("/","g"),"\\/"));(it$0$38102=it$0$38096.replace(RegExp("\n","g"),"\\n"));return "/".concat(it$0$38102).concat("/");}else{(bridge$38042$38054=$38037$38049);if(((((bridge$38043$38114=bridge$38042$38054)),((((bridge$38044$38121=bridge$38043$38114)),((typeof(bridge$38044$38121)==="number")||(bridge$38044$38121===true)))||(bridge$38043$38114===false)))||(bridge$38042$38054===null))){return String(v$38029);}else{if(($39889($38037$38049,"::id")&&((id$38130=$38037$38049["::id"]),id$38130))){return it$0$37942.translate(it$0$37942.register_value(v$38029,id$38130),mode$37938);}else{(other$38136=$38037$38049);throw $39583(["cannot_serialize"]).create("Cannot serialize value",({"value":v$38029}));}}}}}}()));return it$0$37942.expr(r$38034,mode$37938);}else{if(($37990$38009&&(($37992$38011=(t0$38001===3))&&(($37993$38012=($37951$37996[0]==="send"))&&(((t1$38002=$37951$37996[1])),((t1$38002 instanceof Array)&&(((t2$38003=t1$38002.length)),((t2$38003===2)&&((t1$38002[0]==="variable")&&((t1$38002[1]==="___node")&&(((t3$38004=$37951$37996[2])),((t3$38004 instanceof Array)&&(((t4$38005=t3$38004.length)),((t4$38005===2)&&(t3$38004[0]==="value"))))))))))))))){(f$38141=t3$38004[1]);return f$38141;}else{if(($37993$38012&&(((bridge$37957$38006=$37951$37996[1])),((((bridge$37957$38006 instanceof Array)&&(((t0$38175=bridge$37957$38006.length)),((t0$38175===2)&&((bridge$37957$38006[0]==="symbol")&&(bridge$37957$38006[1]==="___js_fetch")))))||((bridge$37957$38006 instanceof Array)&&(((t0$38182=bridge$37957$38006.length)),((t0$38182===2)&&((bridge$37957$38006[0]==="variable")&&(bridge$37957$38006[1]==="___js_fetch"))))))&&(((t1$38002=$37951$37996[2])),((t1$38002 instanceof Array)&&(((t2$38003=t1$38002.length)),((t2$38003===3)&&(t1$38002[0]==="array"))))))))){(f$38166=t1$38002[1]);(msg$38167=t1$38002[2]);(trf$38202=it$0$37942.translate(f$38166,"expr"));(trmsg$38203=it$0$37942.translate(msg$38167,"expr"));return it$0$37942.expr((((trf$38202+"[")+trmsg$38203)+"]"),mode$37938);}else{if(($37993$38012&&((f$38212=$37951$37996[1]),(((t1$38002=$37951$37996[2])),((msg$38213=t1$38002),((t1$38002 instanceof Array)&&(((t2$38003=t1$38002.length)),((t2$38003===2)&&(t1$38002[0]==="value"))))))))){(s$38214=t1$38002[1]);($38229$38234=null);$38229$38234;if(((typeof(s$38214)==="string")&&s$38214.match(RegExp("(?:^(?:[a-zA-Z_$]+)$)","")))){(trf$38247=it$0$37942.translate(f$38212,"expr"));(trmsg$38248=it$0$37942.translate(["symbol",s$38214],"expr"));return it$0$37942.expr(((trf$38247+".")+trmsg$38248),mode$37938);}else{(otherwise$38257=$38229$38234);(trf$38262=it$0$37942.translate(f$38212,"expr"));(trmsg$38263=it$0$37942.translate(msg$38213,"expr"));return it$0$37942.expr((((trf$38262+"[")+trmsg$38263)+"]"),mode$37938);}}else{if(($37993$38012&&((f$38272=$37951$37996[1]),(((t1$38002=$37951$37996[2])),((t1$38002 instanceof Array)&&(((t2$38003=t1$38002.length)),((t2$38003>=1)&&(t1$38002[0]==="array")))))))){(args$38273=Array.prototype.slice.call(t1$38002,1));(op$38289=((($38292$38301=f$38272)),function(){if((($38296$38308=($38292$38301 instanceof Array))&&(((t0$38306=$38292$38301.length)),(($38298$38310=(t0$38306===2))&&($38292$38301[0]==="symbol"))))){(x$38313=$38292$38301[1]);return $37395(js_op_table$37477,x$38313);}else{if(($38298$38310&&($38292$38301[0]==="variable"))){(x$38323=$38292$38301[1]);return $37395(js_op_table2$37476,x$38323);}else{$38292$38301;return null;}}}()));if(op$38289){return it$0$37942.expr(it$0$37942.op(op$38289,args$38273[0],args$38273[1]),mode$37938);}else{(trf$38333=it$0$37942.translate(f$38272,"expr"));(trargs$38334=(((acc$38345=[])),(((temp$38351=args$38273)),((($length$38357=temp$38351.length)),((($index$38363=0)),function(){$38340:for(;($index$38363<$length$38357);($index$38363++)){var x$38380;var m$38372;(m$38372=temp$38351[$index$38363]);(x$38380=m$38372);acc$38345.push(it$0$37942.translate(x$38380,"expr"));}}()))),acc$38345));return it$0$37942.expr((((trf$38333+"(")+trargs$38334.join(","))+")"),mode$37938);}}else{if($37993$38012){(f$38386=$37951$37996[1]);(msg$38387=$37951$37996[2]);(t0$38394=(((code$38402="(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}})")),it$0$37942.register_raw(code$38402,"~send")));if(((t0$38394 instanceof Array)&&(((t1$38395=t0$38394.length)),((t1$38395===2)&&(t0$38394[0]==="symbol"))))){(codevar$38392=t0$38394[1]);}else{$39564((((code$38416="(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}})")),it$0$37942.register_raw(code$38416,"~send")),"/home/olivier/git/earl-grey/src/translate-js.eg",6698,6908);}(trf$38423=it$0$37942.translate(f$38386,"expr"));(trmsg$38424=it$0$37942.translate(msg$38387,"expr"));return it$0$37942.expr((((((codevar$38392+"(")+trf$38423)+",")+trmsg$38424)+")"),mode$37938);}else{if(($37990$38009&&(($37992$38011=(t0$38001>=1))&&($37951$37996[0]==="array")))){(args$38433=Array.prototype.slice.call($37951$37996,1));(r$38438=(((f$38443=function(x$38448){return it$0$37942.translate(x$38448,"expr");})),(("["+args$38433.map(f$38443).join(","))+"]")));return it$0$37942.expr(r$38438,mode$37938);}else{if(($37992$38011&&($37951$37996[0]==="object"))){(args$38454=Array.prototype.slice.call($37951$37996,1));(all_strings$38460=args$38454.every(function($38465$38468){var t0$38476;var t1$38477;var other$38511;var v$38501;var t0$38497;var $38470$38492;var ph$38473;var y$38474;(t0$38476=$38465$38468);if(((t0$38476 instanceof Array)&&(((t1$38477=t0$38476.length)),((t1$38477===3)&&(t0$38476[0]==="array"))))){(ph$38473=t0$38476[1]);(y$38474=t0$38476[2]);}else{$39564($38465$38468);}($38470$38492=ph$38473);if((($38470$38492 instanceof Array)&&(((t0$38497=$38470$38492.length)),((t0$38497===2)&&($38470$38492[0]==="value"))))){(v$38501=$38470$38492[1]);return true;}else{(other$38511=$38470$38492);return false;}}));(r$38461=function(){if(all_strings$38460){(f$38518=function($38522$38525){var t0$38530;var t1$38531;var a$38547;var b$38548;var x$38527;var y$38528;(t0$38530=$38522$38525);if(((t0$38530 instanceof Array)&&(((t1$38531=t0$38530.length)),((t1$38531===3)&&(t0$38530[0]==="array"))))){(x$38527=t0$38530[1]);(y$38528=t0$38530[2]);}else{$39564($38522$38525);}(a$38547=it$0$37942.translate(x$38527,"expr"));(b$38548=it$0$37942.translate(y$38528,"expr"));return ((a$38547+":")+b$38548);});return (("({"+args$38454.map(f$38518).join(","))+"})");}else{(v$38558=gensym$37473());(f$38564=function($38568$38571){var t0$38576;var t1$38577;var a$38593;var b$38594;var x$38573;var y$38574;(t0$38576=$38568$38571);if(((t0$38576 instanceof Array)&&(((t1$38577=t0$38576.length)),((t1$38577===3)&&(t0$38576[0]==="array"))))){(x$38573=t0$38576[1]);(y$38574=t0$38576[2]);}else{$39564($38568$38571);}(a$38593=it$0$37942.translate(x$38573,"expr"));(b$38594=it$0$37942.translate(y$38574,"expr"));return (((((v$38558+"[")+a$38593)+"]=")+b$38594)+";");});return ((((((("(function(){"+"var ")+v$38558)+"={};")+args$38454.map(f$38564).join(""))+";return ")+v$38558)+";}())");}}());return it$0$37942.expr(r$38461,mode$37938);}else{if(($37990$38009&&((t0$38001===3)&&($37951$37996[0]==="lambda")))){(bindings$38605=$37951$37996[1]);(body$38606=$37951$37996[2]);(name$38611=function(){if($37376(RegExp("^[$_a-zA-Z]*$",""))(expr$37937.name)){return (expr$37937.name+" ");}else{return "";}}());(a$38618=(((acc$38633=[])),(((temp$38639=bindings$38605)),((($length$38645=temp$38639.length)),((($index$38651=0)),function(){$38628:for(;($index$38651<$length$38645);($index$38651++)){var x$38668;var m$38660;(m$38660=temp$38639[$index$38651]);(x$38668=m$38660);acc$38633.push(it$0$37942.translate(x$38668,"expr"));}}()))),acc$38633).join(","));(b$38619=it$0$37942.body(body$38606,"return"));return it$0$37942.expr((((((("function"+name$38611)+"(")+a$38618)+"){")+b$38619)+"}"),mode$37938);}else{if(($37990$38009&&(($37992$38011=(t0$38001===4))&&(($37993$38012=($37951$37996[0]==="if"))&&((test$38677=$37951$37996[1]),((pos$38678=$37951$37996[2]),(((t1$38002=$37951$37996[3])),((t1$38002 instanceof Array)&&(((t2$38003=t1$38002.length)),((t2$38003===2)&&((t1$38002[0]==="value")&&(t1$38002[1]===(void 0))))))))))))){($38693$38698=mode$37938);if(($38693$38698==="expr")){return it$0$37942.body(expr$37937,"expr");}else{(other$38710=$38693$38698);(a$38715=it$0$37942.translate(test$38677,"expr"));(b$38716=it$0$37942.translate(pos$38678,mode$37938));return (((("if("+a$38715)+"){")+b$38716)+"}");}}else{if($37993$38012){(test$38725=$37951$37996[1]);(pos$38726=$37951$37996[2]);(neg$38727=$37951$37996[3]);($38730$38735=mode$37938);if(($38730$38735==="expr")){return it$0$37942.body(expr$37937,"expr");}else{(other$38747=$38730$38735);(a$38753=it$0$37942.translate(test$38725,"expr"));(b$38754=it$0$37942.translate(pos$38726,mode$37938));(c$38755=it$0$37942.translate(neg$38727,mode$37938));return (((((("if("+a$38753)+"){")+b$38754)+"}else{")+c$38755)+"}");}}else{if(($37990$38009&&(($37992$38011=(t0$38001===3))&&(($37993$38012=($37951$37996[0]==="declare"))&&((binding$38767=$37951$37996[1]),(((t1$38002=$37951$37996[2])),((t1$38002 instanceof Array)&&(((t2$38003=t1$38002.length)),((t2$38003===2)&&((t1$38002[0]==="value")&&(t1$38002[1]===(void 0)))))))))))){($38781$38787=mode$37938);(bridge$38783$38792=$38781$38787);if(((bridge$38783$38792==="expr")||(bridge$38783$38792==="return"))){throw "Invalid in expr ctx";}else{(other$38804=$38781$38787);(a$38808=it$0$37942.translate(binding$38767,"expr"));return (("var "+a$38808)+";");}}else{if($37993$38012){(binding$38814=$37951$37996[1]);(value$38815=$37951$37996[2]);($38818$38824=mode$37938);(bridge$38820$38829=$38818$38824);if(((bridge$38820$38829==="expr")||(bridge$38820$38829==="return"))){throw "Invalid in expr ctx";}else{(other$38841=$38818$38824);(a$38846=it$0$37942.translate(binding$38814,"expr"));(b$38847=it$0$37942.translate(value$38815,"expr"));return (((("var "+a$38846)+"=")+b$38847)+";");}}else{if(($37992$38011&&(($37993$38012=($37951$37996[0]==="assign"))&&(((t1$38002=$37951$37996[1])),((t1$38002 instanceof Array)&&(((t2$38003=t1$38002.length)),((t2$38003===3)&&(t1$38002[0]==="send")))))))){(obj$38856=t1$38002[1]);(msg$38857=t1$38002[2]);(rhs$38858=$37951$37996[2]);(a$38875=it$0$37942.translate(obj$38856,"expr"));(b$38876=it$0$37942.translate(msg$38857,"expr"));(c$38877=it$0$37942.translate(rhs$38858,"expr"));return it$0$37942.expr((((((("("+a$38875)+"[")+b$38876)+"]=")+c$38877)+")"),mode$37938);}else{if($37993$38012){(lhs$38889=$37951$37996[1]);(rhs$38890=$37951$37996[2]);(a$38896=it$0$37942.translate(lhs$38889,"expr"));(b$38897=it$0$37942.translate(rhs$38890,"expr"));return it$0$37942.expr((((("("+a$38896)+"=")+b$38897)+")"),mode$37938);}else{if(($37990$38009&&((t0$38001===1)&&($37951$37996[0]==="multi")))){return "";}else{if(($37990$38009&&(($37992$38011=(t0$38001>=1))&&($37951$37996[0]==="multi")))){(args$38910=Array.prototype.slice.call($37951$37996,1));(isdecl$38920=function($38924$38927){var other$38958;var variable$38947;var value$38948;var t0$38943;var $38929$38938;var ph$38932;(ph$38932=$38924$38927);($38929$38938=ph$38932);if((($38929$38938 instanceof Array)&&(((t0$38943=$38929$38938.length)),((t0$38943===3)&&($38929$38938[0]==="declare"))))){(variable$38947=$38929$38938[1]);(value$38948=$38929$38938[2]);return true;}else{(other$38958=$38929$38938);return false;}});($38915$38963=null);$38915$38963;if((args$38910.length===1)){return it$0$37942.translate(args$38910[0],mode$37938);}else{if(((mode$37938==="expr")&&(!args$38910.some(isdecl$38920)))){(xs$38981=(((acc$38989=[])),(((temp$38995=args$38910)),((($length$39001=temp$38995.length)),((($index$39007=0)),function(){$38984:for(;($index$39007<$length$39001);($index$39007++)){var x$39024;var m$39016;(m$39016=temp$38995[$index$39007]);(x$39024=m$39016);acc$38989.push(it$0$37942.translate(x$39024,"expr"));}}()))),acc$38989));(xs$38981=(((acc$39035=[])),(((temp$39041=xs$38981)),((($length$39047=temp$39041.length)),((($index$39053=0)),function(){$39030:for(;($index$39053<$length$39047);($index$39053++)){var x$39070;var m$39062;(m$39062=temp$39041[$index$39053]);(x$39070=m$39062);if((x$39070!=="")){acc$39035.push(x$39070);}else{false;}}}()))),acc$39035));return (("("+xs$38981.join(","))+")");}else{return it$0$37942.body(expr$37937,mode$37938);}}}else{if(($37992$38011&&($37951$37996[0]==="splice"))){(args$39081=Array.prototype.slice.call($37951$37996,1));return it$0$37942.translate(["multi"].concat(args$39081),mode$37938);}else{if(($37990$38009&&((t0$38001===2)&&($37951$37996[0]==="variable")))){(s$39086=$37951$37996[1]);return it$0$37942.expr(it$0$37942.mangle(s$39086),mode$37938);}else{if(($37990$38009&&((t0$38001===3)&&($37951$37996[0]==="scope")))){(vars$39091=$37951$37996[1]);(body$39092=$37951$37996[2]);(decls$39097=(((acc$39105=[])),(((temp$39111=vars$39091)),((($length$39117=temp$39111.length)),((($index$39123=0)),function(){$39100:for(;($index$39123<$length$39117);($index$39123++)){var v$39140;var m$39132;(m$39132=temp$39111[$index$39123]);(v$39140=m$39132);acc$39105.push(["declare",v$39140,["value",(void 0)]]);}}()))),acc$39105));return it$0$37942.translate(["multi"].concat(decls$39097).concat([body$39092]),mode$37938);}else{if(($37990$38009&&((t0$38001>=1)&&($37951$37996[0]==="object2")))){(args$39146=Array.prototype.slice.call($37951$37996,1));(r$39151=(((f$39156=function($39160$39163){var t0$39168;var t1$39169;var a$39185;var b$39186;var x$39165;var y$39166;(t0$39168=$39160$39163);if(((t0$39168 instanceof Array)&&(((t1$39169=t0$39168.length)),(t1$39169===2)))){(x$39165=t0$39168[0]);(y$39166=t0$39168[1]);}else{$39564($39160$39163);}(a$39185=it$0$37942.translate(x$39165,"expr"));(b$39186=it$0$37942.translate(y$39166,"expr"));return ((a$39185+":")+b$39186);})),(("({"+args$39146.map(f$39156).join(","))+"})")));return it$0$37942.expr(r$39151,mode$37938);}else{if(($37990$38009&&((t0$38001===2)&&($37951$37996[0]==="js_new")))){(value$39197=$37951$37996[1]);return it$0$37942.expr((("(new "+it$0$37942.translate(value$39197,"expr"))+")"),mode$37938);}else{if(($37990$38009&&(($37992$38011=((t0$38001>=1)&&(t0$38001<=2)))&&(($37951$37996[0]==="js_break")&&(((t1$38002=function(){if((1>=t0$38001)){return ["value",null];}else{return $37951$37996[1];}}())),((t1$38002 instanceof Array)&&(((t2$38003=t1$38002.length)),((t2$38003===2)&&(t1$38002[0]==="value"))))))))){(label$39202=t1$38002[1]);if((mode$37938==="expr")){throw "Invalid break in ctx";}else{return (("break"+function(){if(label$39202){return (" "+label$39202);}else{return "";}}())+";");}}else{if(($37992$38011&&(($37951$37996[0]==="js_continue")&&(((t1$38002=function(){if((1>=t0$38001)){return ["value",null];}else{return $37951$37996[1];}}())),((t1$38002 instanceof Array)&&(((t2$38003=t1$38002.length)),((t2$38003===2)&&(t1$38002[0]==="value")))))))){(label$39217=t1$38002[1]);if((mode$37938==="expr")){throw "Invalid continue in ctx";}else{return (("continue"+function(){if(label$39217){return (" "+label$39217);}else{return "";}}())+";");}}else{if(($37990$38009&&(($37992$38011=(t0$38001===2))&&($37951$37996[0]==="js_return")))){(value$39232=$37951$37996[1]);if((mode$37938==="expr")){throw "Invalid return in ctx";}else{return (("return "+it$0$37942.translate(value$39232,"expr"))+";");}}else{if(($37992$38011&&($37951$37996[0]==="js_delete"))){(value$39237=$37951$37996[1]);if((mode$37938==="expr")){throw "Invalid delete in ctx";}else{return (("delete "+it$0$37942.translate(value$39237,"expr"))+";");}}else{if(($37992$38011&&($37951$37996[0]==="js_throw"))){(value$39242=$37951$37996[1]);if((mode$37938==="expr")){return (("function(){throw "+it$0$37942.translate(value$39242,"expr"))+";}()");}else{return (("throw "+it$0$37942.translate(value$39242,"expr"))+";");}}else{if(($37990$38009&&(($37992$38011=(t0$38001===3))&&(($37951$37996[0]==="js_label")&&(((t1$38002=$37951$37996[1])),((t1$38002 instanceof Array)&&(((t2$38003=t1$38002.length)),((t2$38003===2)&&(t1$38002[0]==="value"))))))))){(label$39247=t1$38002[1]);(body$39248=$37951$37996[2]);($39261$39266=mode$37938);if(($39261$39266==="expr")){return it$0$37942.body(expr$37937,"expr");}else{(other$39278=$39261$39266);return ((label$39247+":")+it$0$37942.translate(body$39248,other$39278));}}else{if(($37992$38011&&($37951$37996[0]==="js_while"))){(test$39282=$37951$37996[1]);(body$39283=$37951$37996[2]);($39286$39291=mode$37938);if(($39286$39291==="expr")){return it$0$37942.body(expr$37937,"expr");}else{(other$39303=$39286$39291);(a$39308=it$0$37942.translate(test$39282,"expr"));(b$39309=it$0$37942.translate(body$39283,"stmt"));return (((("while("+a$39308)+"){")+b$39309)+"}");}}else{if(($37990$38009&&((t0$38001===5)&&($37951$37996[0]==="js_for")))){(x$39318=$37951$37996[1]);(y$39319=$37951$37996[2]);(z$39320=$37951$37996[3]);(body$39321=$37951$37996[4]);($39324$39329=mode$37938);if(($39324$39329==="expr")){return it$0$37942.body(expr$37937,"expr");}else{(other$39341=$39324$39329);(a$39348=it$0$37942.translate(x$39318,"expr"));(b$39349=it$0$37942.translate(y$39319,"expr"));(c$39350=it$0$37942.translate(z$39320,"expr"));(d$39351=it$0$37942.translate(body$39321,"stmt"));return (((((((("for("+a$39348)+";")+b$39349)+";")+c$39350)+"){")+d$39351)+"}");}}else{if(($37990$38009&&(($37992$38011=(t0$38001===4))&&($37951$37996[0]==="js_for_in")))){(x$39366=$37951$37996[1]);(y$39367=$37951$37996[2]);(body$39368=$37951$37996[3]);($39371$39376=mode$37938);if(($39371$39376==="expr")){return it$0$37942.body(expr$37937,"expr");}else{(other$39388=$39371$39376);(a$39394=it$0$37942.translate(x$39366,"expr"));(b$39395=it$0$37942.translate(y$39367,"expr"));(c$39396=it$0$37942.translate(body$39368,"stmt"));return (((((("for("+a$39394)+" in ")+b$39395)+"){")+c$39396)+"}");}}else{if(($37992$38011&&(($37951$37996[0]==="js_try")&&((attempt$39408=$37951$37996[1]),(((t1$38002=$37951$37996[2])),((t1$38002 instanceof Array)&&(((t2$38003=t1$38002.length)),((t2$38003===3)&&((t1$38002[0]==="lambda")&&(((t3$38004=t1$38002[1])),((t3$38004 instanceof Array)&&(((t4$38005=t3$38004.length)),((t4$38005===1)&&(((bridge$37987$38007=t3$38004[0])),(((bridge$37987$38007 instanceof Array)&&(((t0$39440=bridge$37987$38007.length)),((t0$39440===2)&&((bridge$37987$38007[0]==="symbol")&&((v$39409=bridge$37987$38007[1]),true)))))||((bridge$37987$38007 instanceof Array)&&(((t0$39448=bridge$37987$38007.length)),((t0$39448===2)&&((bridge$37987$38007[0]==="variable")&&((v$39409=bridge$37987$38007[1]),true)))))))))))))))))))){(body$39410=t1$38002[2]);(finally$39411=$37951$37996[3]);(r$39461=((($39464$39469=mode$37938)),function(){if(($39464$39469==="expr")){return it$0$37942.body(expr$37937,"expr");}else{(other$39481=$39464$39469);(a$39486=it$0$37942.translate(attempt$39408,"stmt"));(b$39487=it$0$37942.translate(body$39410,"stmt"));return (((((("try{"+a$39486)+"}catch(")+v$39409)+"){")+b$39487)+"}");}}()));($39458$39497=finally$39411);if((($39458$39497 instanceof Array)&&(((t0$39502=$39458$39497.length)),((t0$39502===1)&&($39458$39497[0]==="void"))))){return r$39461;}else{(other$39515=$39458$39497);return (((r$39461+"finally{")+it$0$37942.translate(other$39515,"stmt"))+"}");}}else{if(($37990$38009&&((t0$38001===2)&&($37951$37996[0]==="raw")))){(x$39519=$37951$37996[1]);return x$39519;}else{(other$39524=$37951$37996);throw other$39524;}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}});$37396(Translator$37478,$37396(((accum$39529=({})),((accum$39529["::name"]="Translator"),accum$39529)),((accum$39533=({})),((accum$39533["::egclass"]=true),accum$39533))));Translator$37478;(translate$37479=function(expr$39540,mode$39541){var tr$39546;var t$39547;(tr$39546=Translator$37478());(t$39547=tr$39546.translate(expr$39540,mode$39541));return (tr$39546.dump_store()+t$39547);});(exports["Translator"]=Translator$37478);(exports["translate"]=translate$37479);

},{"./pp":12,"./util":15}],15:[function(require,module,exports){
var $40174=function(type$40177){var f$40181;(f$40181=type$40177["::check"]);if((f$40181===(void 0))){return function(value$40187){return (value$40187 instanceof type$40177);};}else{return function(value$40191){return f$40181.call(type$40177,value$40191);};}};
var $40193=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $40194=function(dest$40197,values$40198){var k$40203;(k$40203=null);$40201:for(k$40203 in values$40198){if(values$40198.hasOwnProperty(k$40203)){(dest$40197[k$40203]=values$40198[k$40203]);}}return dest$40197;};
var $40211=function($40213$40216){var ph$40222;(ph$40222=$40213$40216);var $40218$40228;($40218$40228=ph$40222);var bridge$40220$40233;var x$40237;(bridge$40220$40233=$40218$40228);if((((typeof(bridge$40220$40233)==="string")&&((x$40237=bridge$40220$40233),true))||((typeof(bridge$40220$40233)==="number")&&((x$40237=bridge$40220$40233),true)))){return ["value",x$40237];}else{var other$40248;(other$40248=$40218$40228);return other$40248["::serialize_ast"]();}};
var send$39948;(send$39948=function(obj$39955,$39952$39956){var ph$39962;var msg$39963;var t0$39965;(t0$39965=$39952$39956);(msg$39963=t0$39965);(ph$39962=t0$39965);var $39958$39974;($39958$39974=ph$39962);var bridge$39960$39979;(bridge$39960$39979=$39958$39974);if(((typeof(bridge$39960$39979)==="string")||(typeof(bridge$39960$39979)==="number"))){return obj$39955[msg$39963];}else{var other$39991;(other$39991=$39958$39974);return obj$39955["::send"](msg$39963);}});(Array[":::project"]=function($39997$40000){var ph$40005;var value$40006;var t0$40008;(t0$40008=$39997$40000);(value$40006=t0$40008);(ph$40005=t0$40008);var $40002$40017;($40002$40017=ph$40005);if($40174(Array)($40002$40017)){return [true,value$40006];}else{$40002$40017;return [true,[value$40006]];}});(Array.prototype["::check"]=function(value$40035){if((value$40035 instanceof Array)){var i$40041;(i$40041=0);$40038:for(;(i$40041<this.length);(i$40041++)){if(($40193(this,i$40041)!==$40193(value$40035,i$40041))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $40194(this.slice(0),this);});(Array.prototype[":::project"]=function(value$40060){if((value$40060 instanceof Array)){var i$40066;(i$40066=0);$40063:for(;(i$40066<this.length);(i$40066++)){if(($40193(this,i$40066)!==$40193(value$40060,i$40066))){return [true,[value$40060]];}}return [true,value$40060.slice(this.length)];}else{return [true,[value$40060]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($40211));});(RegExp.prototype["::check"]=function($40084$40087){var ph$40092;(ph$40092=$40084$40087);var $40089$40098;($40089$40098=ph$40092);var value$40106;if((typeof($40089$40098)==="string")){(value$40106=$40089$40098);if(value$40106.match(this)){return true;}else{return false;}}else{var other$40111;(other$40111=$40089$40098);return false;}});(RegExp.prototype[":::project"]=function($40117$40120){var ph$40125;(ph$40125=$40117$40120);var $40122$40131;($40122$40131=ph$40125);var value$40139;if((typeof($40122$40131)==="string")){(value$40139=$40122$40131);var $40142$40147;($40142$40147=value$40139.match(this));var m$40155;if(($40142$40147===null)){(m$40155=$40142$40147);return [false,null];}else{var m$40160;(m$40160=$40142$40147);return [true,m$40160];}}else{var other$40164;(other$40164=$40122$40131);return [false,null];}});(Function.prototype["::send"]=function(args$40171){return this.apply(this,args$40171);});
var $41216=function(arr$41219){var results$41225;var l$41226;(results$41225=[]);(l$41226=arr$41219.length);var i$41235;(i$41235=0);$41224:for(;(i$41235<l$41226);(i$41235++)){results$41225.push([i$41235,$40193(arr$41219,i$41235)]);}return results$41225;};
var $40983=function(){var $40984$40990;($40984$40990=function(tags$40995){var it$0$40998;(it$0$40998=function(){if((!$40174($40984$40990)(this))){return Object.create($40984$40990.prototype);}else{return this;}}());(it$0$40998["tags"]=tags$40995);return it$0$40998;});($40984$40990.prototype["create"]=function(){var it$0$41018;var self$41019;(it$0$41018=this);(self$41019=this);var $41016$41028;($41016$41028=arguments);var t0$41033;var message$41037;var args$41038;(t0$41033=$41016$41028.length);if((t0$41033>=0)){(message$41037=function(){if((0>=t0$41033)){return "";}else{return $41016$41028[0];}}());(args$41038=Array.prototype.slice.call($41016$41028,1));var e$41051;(e$41051=Error(message$41037));(e$41051["::tags"]=it$0$41018.tags);(e$41051["args"]=args$41038);var temp$41067;(temp$41067=$41216(args$41038));var $length$41073;($length$41073=temp$41067.length);var $index$41079;($index$41079=0);$41052:for(;($index$41079<$length$41073);($index$41079++)){var m$41088;(m$41088=temp$41067[$index$41079]);var t0$41093;var t1$41094;var i$41098;var arg$41099;(t0$41093=m$41088);if(((t0$41093 instanceof Array)&&(((t1$41094=t0$41093.length)),(t1$41094===2)))){(i$41098=t0$41093[0]);(arg$41099=t0$41093[1]);(e$41051[i$41098]=arg$41099);}else{$40964(m$41088);}}(e$41051["length"]=args$41038.length);(e$41051["name"]=["E"].concat(it$0$41018.tags).join("."));return e$41051;}else{$40964($41016$41028);}});($40984$40990.prototype["::check"]=function(e$41129){var it$0$41133;var self$41134;(it$0$41133=this);(self$41134=this);var tags$41144;if(((!e$41129)||(!$40174(Error)(e$41129)))){return false;}(tags$41144=(e$41129["::tags"]||[]));var temp$41155;(temp$41155=it$0$41133.tags);var $length$41161;($length$41161=temp$41155.length);var $index$41167;($index$41167=0);$41145:for(;($index$41167<$length$41161);($index$41167++)){var m$41176;(m$41176=temp$41155[$index$41167]);var tag$41184;(tag$41184=m$41176);if((tags$41144.indexOf(tag$41184)===-1)){return false;}else{false;}}return true;});($40984$40990.prototype["::deconstruct"]=function(e$41193){var it$0$41197;var self$41198;(it$0$41197=this);(self$41198=this);return e$41193.args;});$40194($40984$40990,$40194(function(){var accum$41209;(accum$41209=({}));(accum$41209["::name"]="$40984");return accum$41209;}(),function(){var accum$41213;(accum$41213=({}));(accum$41213["::egclass"]=true);return accum$41213;}()));return $40984$40990;}();
var $40964=function(value$40967,url$40968,start$40969,end$40970){var err$40974;(err$40974=$40983(["match"]).create("Could not find a match for value",({"value":value$40967})));if(url$40968){(err$40974["location"]=["location",url$40968,start$40969,end$40970]);}throw err$40974;};var GenSym$40263;var gensym$40264;var identity$40265;var binsearch$40266;var classify$40267;var classify_contiguous$40268;var neighbours$40269;var partition$40270;var product$40271;var construct$40272;var mkset$40273;(GenSym$40263=function(prefix$40278){var id$40283;(id$40283=0);return function(){var r$40310;var pfx$40301;var t0$40297;var $40288$40292;($40288$40292=arguments);(t0$40297=$40288$40292.length);if(((t0$40297>=0)&&(t0$40297<=1))){(pfx$40301=function(){if((0>=t0$40297)){return "";}else{return $40288$40292[0];}}());(r$40310=((pfx$40301+prefix$40278)+[true,String(id$40283)][1]));(id$40283++);return r$40310;}else{$40964($40288$40292);}};});(gensym$40264=GenSym$40263("$"));(identity$40265=function(x$40324){return x$40324;});(binsearch$40266=function(xs$40331,x$40332){var lo$40337;var hi$40338;(lo$40337=0);(hi$40338=(xs$40331.length-1));$40345:while((lo$40337<=hi$40338)){var $40351$40365;var mid$40355;var v$40356;(mid$40355=(lo$40337+((hi$40338-lo$40337)>>1)));(v$40356=$40193(xs$40331,mid$40355));($40351$40365=$40193(xs$40331,mid$40355));if(($40351$40365<x$40332)){(lo$40337=(mid$40355+1));}else{if(($40351$40365>x$40332)){(hi$40338=(mid$40355-1));}else{$40351$40365;return (mid$40355+1);}}}return lo$40337;});(classify$40267=function(){var $index$40440;var $length$40434;var temp$40428;var results$40418;var classes$40408;var xs$40409;var t0$40404;var $40395$40399;($40395$40399=arguments);(t0$40404=$40395$40399.length);if((t0$40404>=1)){(classes$40408=Array.prototype.slice.call($40395$40399,0,-1));(xs$40409=$40395$40399[(t0$40404-1)]);(results$40418=({"rest":[]}));(temp$40428=classes$40408);($length$40434=temp$40428.length);($index$40440=0);$40419:for(;($index$40440<$length$40434);($index$40440++)){var cls$40457;var m$40449;(m$40449=temp$40428[$index$40440]);(cls$40457=m$40449);(results$40418[cls$40457]=[]);}$40463:while(xs$40409.length){var x$40499;var other$40519;var cls$40506;var x$40507;var newxs$40482;var t0$40478;var $40466$40473;($40466$40473=xs$40409.shift());if((($40466$40473 instanceof Array)&&(((t0$40478=$40466$40473.length)),((t0$40478>=1)&&($40466$40473[0]==="splice"))))){(newxs$40482=Array.prototype.slice.call($40466$40473,1));(xs$40409=newxs$40482.concat(xs$40409));}else{if((((x$40499=$40466$40473)),((x$40499 instanceof Array)&&(x$40499[0]==="ignore")))){null;}else{if((($40466$40473 instanceof Array)&&(((t0$40478=$40466$40473.length)),((t0$40478===2)&&((cls$40506=$40466$40473[0]),((x$40507=$40466$40473[1]),$40193(results$40418,cls$40506))))))){$40193(results$40418,cls$40506).push(x$40507);}else{(other$40519=$40466$40473);results$40418.rest.push(other$40519);}}}}return results$40418;}else{$40964($40395$40399);}});(classify_contiguous$40268=function(xs$40528,classifier$40529){var $index$40565;var $length$40559;var temp$40553;var groups$40535;var currcls$40536;var curr$40537;(groups$40535=[]);(currcls$40536=null);(curr$40537=null);(temp$40553=xs$40528);($length$40559=temp$40553.length);($index$40565=0);$40538:for(;($index$40565<$length$40559);($index$40565++)){var cls$40586;var x$40582;var m$40574;(m$40574=temp$40553[$index$40565]);(x$40582=m$40574);(cls$40586=classifier$40529(x$40582));if((cls$40586===currcls$40536)){curr$40537.push(x$40582);}else{if(curr$40537){groups$40535.push(curr$40537);}(curr$40537=[cls$40586,x$40582]);(currcls$40536=cls$40586);}}if(curr$40537){groups$40535.push(curr$40537);}return groups$40535;});(neighbours$40269=function($40605$40608){var x$40647;var y$40648;var rest$40649;var x$40642;var $40614$40629;var $40615$40630;var t0$40627;var $40610$40622;var ph$40616;(ph$40616=$40605$40608);($40610$40622=ph$40616);if((($40614$40629=($40610$40622 instanceof Array))&&(((t0$40627=$40610$40622.length)),(t0$40627===0)))){return [];}else{if(($40614$40629&&(t0$40627===1))){(x$40642=$40610$40622[0]);return [];}else{if(($40614$40629&&(t0$40627>=2))){(x$40647=$40610$40622[0]);(y$40648=$40610$40622[1]);(rest$40649=Array.prototype.slice.call($40610$40622,2));return [[x$40647,y$40648]].concat(neighbours$40269([y$40648].concat(rest$40649)));}else{$40964($40610$40622);}}}});(partition$40270=function(xs$40659,predicate$40660){var $index$40692;var $length$40686;var temp$40680;var t$40665;var f$40666;(t$40665=[]);(f$40666=[]);(temp$40680=xs$40659);($length$40686=temp$40680.length);($index$40692=0);$40667:for(;($index$40692<$length$40686);($index$40692++)){var x$40714;var x$40709;var m$40701;(m$40701=temp$40680[$index$40692]);(x$40709=m$40701);if(predicate$40660(x$40709)){t$40665.push(x$40709);}else{(x$40714=m$40701);f$40666.push(x$40714);}}return [t$40665,f$40666];});(product$40271=function(a$40721,b$40722){var $index$40748;var $length$40742;var temp$40736;var results$40726;(results$40726=[]);(temp$40736=a$40721);($length$40742=temp$40736.length);($index$40748=0);$40727:for(;($index$40748<$length$40742);($index$40748++)){var $index$40790;var $length$40784;var temp$40778;var acc$40772;var x$40765;var m$40757;(m$40757=temp$40736[$index$40748]);(x$40765=m$40757);(results$40726=results$40726.concat((((acc$40772=[])),(((temp$40778=b$40722)),((($length$40784=temp$40778.length)),((($index$40790=0)),function(){$40767:for(;($index$40790<$length$40784);($index$40790++)){var y$40807;var m$40799;(m$40799=temp$40778[$index$40790]);(y$40807=m$40799);acc$40772.push([x$40765,y$40807]);}}()))),acc$40772)));}return results$40726;});(construct$40272=function($40814$40817,fn$40818,zero$40819){var x$40858;var rest$40859;var x$40853;var $40825$40840;var $40826$40841;var t0$40838;var $40821$40833;var ph$40827;(ph$40827=$40814$40817);($40821$40833=ph$40827);if((($40825$40840=($40821$40833 instanceof Array))&&(((t0$40838=$40821$40833.length)),(t0$40838===0)))){return zero$40819;}else{if(($40825$40840&&(t0$40838===1))){(x$40853=$40821$40833[0]);return x$40853;}else{if(($40825$40840&&(t0$40838>=1))){(x$40858=$40821$40833[0]);(rest$40859=Array.prototype.slice.call($40821$40833,1));return fn$40818(x$40858,construct$40272(rest$40859,fn$40818,zero$40819));}else{$40964($40821$40833);}}}});(mkset$40273=function(xs$40869){var $index$40895;var $length$40889;var temp$40883;var rval$40873;(rval$40873=({}));(temp$40883=xs$40869);($length$40889=temp$40883.length);($index$40895=0);$40874:for(;($index$40895<$length$40889);($index$40895++)){var x$40912;var m$40904;(m$40904=temp$40883[$index$40895]);(x$40912=m$40904);(rval$40873[x$40912]=true);}return rval$40873;});(exports["GenSym"]=GenSym$40263);(exports["gensym"]=gensym$40264);(exports["identity"]=identity$40265);(exports["binsearch"]=binsearch$40266);(exports["classify"]=classify$40267);(exports["classify_contiguous"]=classify_contiguous$40268);(exports["neighbours"]=neighbours$40269);(exports["partition"]=partition$40270);(exports["construct"]=construct$40272);(exports["mkset"]=mkset$40273);(exports["product"]=product$40271);

},{}],16:[function(require,module,exports){
var $237=function(type$240){var f$244;(f$244=type$240["::check"]);if((f$244===(void 0))){return function(value$250){return (value$250 instanceof type$240);};}else{return function(value$254){return f$244.call(type$240,value$254);};}};
var $256=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $257=function(dest$260,values$261){var k$266;(k$266=null);$264:for(k$266 in values$261){if(values$261.hasOwnProperty(k$266)){(dest$260[k$266]=values$261[k$266]);}}return dest$260;};
var $274=function($276$279){var ph$285;(ph$285=$276$279);var $281$291;($281$291=ph$285);var bridge$283$296;var x$300;(bridge$283$296=$281$291);if((((typeof(bridge$283$296)==="string")&&((x$300=bridge$283$296),true))||((typeof(bridge$283$296)==="number")&&((x$300=bridge$283$296),true)))){return ["value",x$300];}else{var other$311;(other$311=$281$291);return other$311["::serialize_ast"]();}};
var send$11;(send$11=function(obj$18,$15$19){var ph$25;var msg$26;var t0$28;(t0$28=$15$19);(msg$26=t0$28);(ph$25=t0$28);var $21$37;($21$37=ph$25);var bridge$23$42;(bridge$23$42=$21$37);if(((typeof(bridge$23$42)==="string")||(typeof(bridge$23$42)==="number"))){return obj$18[msg$26];}else{var other$54;(other$54=$21$37);return obj$18["::send"](msg$26);}});(Array[":::project"]=function($60$63){var ph$68;var value$69;var t0$71;(t0$71=$60$63);(value$69=t0$71);(ph$68=t0$71);var $65$80;($65$80=ph$68);if($237(Array)($65$80)){return [true,value$69];}else{$65$80;return [true,[value$69]];}});(Array.prototype["::check"]=function(value$98){if((value$98 instanceof Array)){var i$104;(i$104=0);$101:for(;(i$104<this.length);(i$104++)){if(($256(this,i$104)!==$256(value$98,i$104))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $257(this.slice(0),this);});(Array.prototype[":::project"]=function(value$123){if((value$123 instanceof Array)){var i$129;(i$129=0);$126:for(;(i$129<this.length);(i$129++)){if(($256(this,i$129)!==$256(value$123,i$129))){return [true,[value$123]];}}return [true,value$123.slice(this.length)];}else{return [true,[value$123]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($274));});(RegExp.prototype["::check"]=function($147$150){var ph$155;(ph$155=$147$150);var $152$161;($152$161=ph$155);var value$169;if((typeof($152$161)==="string")){(value$169=$152$161);if(value$169.match(this)){return true;}else{return false;}}else{var other$174;(other$174=$152$161);return false;}});(RegExp.prototype[":::project"]=function($180$183){var ph$188;(ph$188=$180$183);var $185$194;($185$194=ph$188);var value$202;if((typeof($185$194)==="string")){(value$202=$185$194);var $205$210;($205$210=value$202.match(this));var m$218;if(($205$210===null)){(m$218=$205$210);return [false,null];}else{var m$223;(m$223=$205$210);return [true,m$223];}}else{var other$227;(other$227=$185$194);return [false,null];}});(Function.prototype["::send"]=function(args$234){return this.apply(this,args$234);});
var $5366=function($5368$5371,key$5372){var ph$5380;(ph$5380=$5368$5371);var $5374$5386;($5374$5386=ph$5380);var bridge$5376$5391;(bridge$5376$5391=$5374$5386);if(((bridge$5376$5391===null)||(bridge$5376$5391===(void 0)))){return false;}else{var x$5403;if((typeof($5374$5386)==="string")){(x$5403=$5374$5386);return (key$5372 in String.prototype);}else{var x$5408;if((typeof($5374$5386)==="number")){(x$5408=$5374$5386);return (key$5372 in Number.prototype);}else{var x$5413;(x$5413=$5374$5386);return (key$5372 in x$5413);}}}};
var $5667=function(arr$5670){var results$5676;var l$5677;(results$5676=[]);(l$5677=arr$5670.length);var i$5686;(i$5686=0);$5675:for(;(i$5686<l$5677);(i$5686++)){results$5676.push([i$5686,$256(arr$5670,i$5686)]);}return results$5676;};
var $5434=function(){var $5435$5441;($5435$5441=function(tags$5446){var it$0$5449;(it$0$5449=function(){if((!$237($5435$5441)(this))){return Object.create($5435$5441.prototype);}else{return this;}}());(it$0$5449["tags"]=tags$5446);return it$0$5449;});($5435$5441.prototype["create"]=function(){var it$0$5469;var self$5470;(it$0$5469=this);(self$5470=this);var $5467$5479;($5467$5479=arguments);var t0$5484;var message$5488;var args$5489;(t0$5484=$5467$5479.length);if((t0$5484>=0)){(message$5488=function(){if((0>=t0$5484)){return "";}else{return $5467$5479[0];}}());(args$5489=Array.prototype.slice.call($5467$5479,1));var e$5502;(e$5502=Error(message$5488));(e$5502["::tags"]=it$0$5469.tags);(e$5502["args"]=args$5489);var temp$5518;(temp$5518=$5667(args$5489));var $length$5524;($length$5524=temp$5518.length);var $index$5530;($index$5530=0);$5503:for(;($index$5530<$length$5524);($index$5530++)){var m$5539;(m$5539=temp$5518[$index$5530]);var t0$5544;var t1$5545;var i$5549;var arg$5550;(t0$5544=m$5539);if(((t0$5544 instanceof Array)&&(((t1$5545=t0$5544.length)),(t1$5545===2)))){(i$5549=t0$5544[0]);(arg$5550=t0$5544[1]);(e$5502[i$5549]=arg$5550);}else{$5415(m$5539);}}(e$5502["length"]=args$5489.length);(e$5502["name"]=["E"].concat(it$0$5469.tags).join("."));return e$5502;}else{$5415($5467$5479);}});($5435$5441.prototype["::check"]=function(e$5580){var it$0$5584;var self$5585;(it$0$5584=this);(self$5585=this);var tags$5595;if(((!e$5580)||(!$237(Error)(e$5580)))){return false;}(tags$5595=(e$5580["::tags"]||[]));var temp$5606;(temp$5606=it$0$5584.tags);var $length$5612;($length$5612=temp$5606.length);var $index$5618;($index$5618=0);$5596:for(;($index$5618<$length$5612);($index$5618++)){var m$5627;(m$5627=temp$5606[$index$5618]);var tag$5635;(tag$5635=m$5627);if((tags$5595.indexOf(tag$5635)===-1)){return false;}else{false;}}return true;});($5435$5441.prototype["::deconstruct"]=function(e$5644){var it$0$5648;var self$5649;(it$0$5648=this);(self$5649=this);return e$5644.args;});$257($5435$5441,$257(function(){var accum$5660;(accum$5660=({}));(accum$5660["::name"]="$5435");return accum$5660;}(),function(){var accum$5664;(accum$5664=({}));(accum$5664["::egclass"]=true);return accum$5664;}()));return $5435$5441;}();
var $5415=function(value$5418,url$5419,start$5420,end$5421){var err$5425;(err$5425=$5434(["match"]).create("Could not find a match for value",({"value":value$5418})));if(url$5419){(err$5425["location"]=["location",url$5419,start$5420,end$5421]);}throw err$5425;};
var $5715=function($5717$5720){var ph$5730;var x$5731;var t0$5733;(t0$5733=$5717$5720);(x$5731=t0$5733);(ph$5730=t0$5733);var $5722$5742;($5722$5742=ph$5730);var bridge$5724$5747;(bridge$5724$5747=$5722$5742);if((function(){var bridge$5725$5757;(bridge$5725$5757=bridge$5724$5747);return (function(){var bridge$5726$5764;(bridge$5726$5764=bridge$5725$5757);return ((bridge$5726$5764===(void 0))||(bridge$5726$5764===null));}()||(typeof(bridge$5725$5757)==="string"));}()||(typeof(bridge$5724$5747)==="number"))){return x$5731;}else{if($5366($5722$5742,"::clone")){$5722$5742["::clone"];return x$5731["::clone"]();}else{$5722$5742;if((Object.getPrototypeOf(x$5731)===Object.prototype)){var dest$5782;(dest$5782=({}));var k$5787;(k$5787=null);$5781:for(k$5787 in x$5731){if(Object.prototype.hasOwnProperty.call(x$5731,k$5787)){(dest$5782[k$5787]=x$5731[k$5787]);}}return dest$5782;}else{var other$5797;(other$5797=$5722$5742);throw $5434(["clone"]).create("Object cannot be cloned",({"obj":x$5731}));}}}};
var $5693=function(a$5696,b$5697){var dest$5702;(dest$5702=$5715(a$5696));var k$5707;(k$5707=null);$5701:for(k$5707 in b$5697){if(Object.prototype.hasOwnProperty.call(b$5697,k$5707)){(dest$5702[k$5707]=b$5697[k$5707]);}}return dest$5702;};
var $5799=function(arrays$5802){var results$5806;(results$5806=[]);var temp$5816;(temp$5816=arrays$5802);var $length$5822;($length$5822=temp$5816.length);var $index$5828;($index$5828=0);$5807:for(;($index$5828<$length$5822);($index$5828++)){var m$5837;(m$5837=temp$5816[$index$5828]);var a$5845;(a$5845=m$5837);(results$5806=results$5806.concat(a$5845));}return results$5806;};
var $6023=Object.keys;
var $5851=function($5853$5856,b$5857){var ph$5871;var a$5872;var t0$5874;(t0$5874=$5853$5856);(a$5872=t0$5874);(ph$5871=t0$5874);var $5859$5883;($5859$5883=ph$5871);var bridge$5862$5888;if(($5859$5883===b$5857)){return true;}else{(bridge$5862$5888=$5859$5883);if((function(){var bridge$5863$5902;(bridge$5863$5902=bridge$5862$5888);return (function(){var bridge$5864$5909;(bridge$5864$5909=bridge$5863$5902);return (function(){var bridge$5865$5916;(bridge$5865$5916=bridge$5864$5909);return (function(){var bridge$5866$5923;(bridge$5866$5923=bridge$5865$5916);return ((typeof(bridge$5866$5923)==="number")||(typeof(bridge$5866$5923)==="string"));}()||(bridge$5865$5916===null));}()||(bridge$5864$5909===(void 0)));}()||(bridge$5863$5902===true));}()||(bridge$5862$5888===false))){return false;}else{if($237(Array)($5859$5883)){if(((!$237(Array)(b$5857))||(a$5872.length!==b$5857.length))){return false;}var i$5939;(i$5939=0);$5935:for(;(i$5939<a$5872.length);(i$5939++)){if((!$5851(a$5872[i$5939],b$5857[i$5939]))){return false;}}return true;}else{$5859$5883;if((((Object.getPrototypeOf(a$5872)===Object.prototype)&&$237(Object)(b$5857))&&(Object.getPrototypeOf(b$5857)===Object.prototype))){var ka$5953;(ka$5953=$6023(a$5872));if((!$5851(ka$5953.sort(),$6023(b$5857).sort()))){return false;}var temp$5964;(temp$5964=ka$5953);var $length$5970;($length$5970=temp$5964.length);var $index$5976;($index$5976=0);$5954:for(;($index$5976<$length$5970);($index$5976++)){var m$5985;(m$5985=temp$5964[$index$5976]);var k$5993;(k$5993=m$5985);if((!$5851(a$5872[k$5993],b$5857[k$5993]))){return false;}}return true;}else{if($5366($5859$5883,"::serialize")){$5859$5883["::serialize"];var $6000$6005;($6000$6005=b$5857);if($5366($6000$6005,"::serialize")){$6000$6005["::serialize"];return $5851(a$5872["::serialize"](),b$5857["::serialize"]());}else{var otherwise$6017;(otherwise$6017=$6000$6005);return false;}}else{var otherwise$6021;(otherwise$6021=$5859$5883);return false;}}}}}};
var $6024=function(type$6027){return function(value$6031){var f$6035;(f$6035=type$6027[":::project"]);if((f$6035===(void 0))){(f$6035=type$6027["::project"]);if((f$6035===(void 0))){return [true,type$6027(value$6031)];}else{var rval$6048;(rval$6048=false);try{(rval$6048=[true,f$6035(value$6031)]);}catch(excv$6059){var e$6065;(e$6065=excv$6059);(rval$6048=[false,null]);}return rval$6048;}}else{return f$6035.call(type$6027,value$6031);}};};
var $6071=function(pairs$6074){var rval$6078;(rval$6078=({}));var temp$6088;(temp$6088=pairs$6074);var $length$6094;($length$6094=temp$6088.length);var $index$6100;($index$6100=0);$6079:for(;($index$6100<$length$6094);($index$6100++)){var m$6109;(m$6109=temp$6088[$index$6100]);var t0$6114;var t1$6115;var k$6119;var v$6120;(t0$6114=m$6109);if(((t0$6114 instanceof Array)&&(((t1$6115=t0$6114.length)),(t1$6115===2)))){(k$6119=t0$6114[0]);(v$6120=t0$6114[1]);(rval$6078[k$6119]=v$6120);}else{$5415(m$6109);}}return rval$6078;};
var $6139=function(xs$6142,ys$6143){var acc$6150;(acc$6150=[]);var temp$6156;(temp$6156=$5667(xs$6142));var $length$6162;($length$6162=temp$6156.length);var $index$6168;($index$6168=0);$6145:for(;($index$6168<$length$6162);($index$6168++)){var m$6177;(m$6177=temp$6156[$index$6168]);var t0$6182;var t1$6183;var i$6187;var x$6188;(t0$6182=m$6177);if(((t0$6182 instanceof Array)&&(((t1$6183=t0$6182.length)),(t1$6183===2)))){(i$6187=t0$6182[0]);(x$6188=t0$6182[1]);acc$6150.push([x$6188,$256(ys$6143,i$6187)]);}else{$5415(m$6177);}}return acc$6150;};
var $6203=function(obj$6206){var results$6211;(results$6211=[]);var k$6216;(k$6216=null);$6210:for(k$6216 in obj$6206){if(Object.prototype.hasOwnProperty.call(obj$6206,k$6216)){results$6211.push([k$6216,$256(obj$6206,k$6216)]);}}return results$6211;};
var $6220=function(){var $6221$6226;($6221$6226=function($6230$6237,$6232$6238,$6234$6239){var it$0$6242;(it$0$6242=function(){if((!$237($6221$6226)(this))){return Object.create($6221$6226.prototype);}else{return this;}}());var t0$6249;(t0$6249=$6024(Array)($6230$6237));if(t0$6249[0]){(it$0$6242["tags"]=t0$6249[1]);}else{$5415($6230$6237);}(it$0$6242["props"]=$6232$6238);var t0$6261;(t0$6261=$6024(Array)($6234$6239));if(t0$6261[0]){(it$0$6242["children"]=t0$6261[1]);}else{$5415($6234$6239);}undefined;return it$0$6242;});$257(function(){var accum$6275;(accum$6275=({}));(accum$6275["::check"]=function(x$6280){return (((x$6280&&x$6280.tags)&&x$6280.props)&&x$6280.children);});return accum$6275;}(),$257(function(){var accum$6283;(accum$6283=({}));(accum$6283[":::project"]=function($6287$6290){var ph$6295;(ph$6295=$6287$6290);var $6292$6301;($6292$6301=ph$6295);var tags$6309;var props$6310;var children$6311;if(($5366($6292$6301,"tags")&&((tags$6309=$6292$6301.tags),($5366($6292$6301,"props")&&((props$6310=$6292$6301.props),$5366($6292$6301,"children")))))){(children$6311=$6292$6301.children);return [true,[tags$6309,props$6310,children$6311]];}else{$6292$6301;return [false,null];}});return accum$6283;}(),$257(function(){var accum$6320;(accum$6320=({}));(accum$6320["::name"]="$6221");return accum$6320;}(),function(){var accum$6324;(accum$6324=({}));(accum$6324["::egclass"]=true);return accum$6324;}())));($6221$6226.prototype["::check"]=function($6330$6333){var it$0$6337;var self$6338;(it$0$6337=this);(self$6338=this);var ph$6349;(ph$6349=$6330$6333);var $6346$6355;($6346$6355=ph$6349);var n$6363;if($237($6220)($6346$6355)){(n$6363=$6346$6355);var temp$6373;(temp$6373=it$0$6337.tags);var $length$6379;($length$6379=temp$6373.length);var $index$6385;($index$6385=0);$6367:for(;($index$6385<$length$6379);($index$6385++)){var m$6394;(m$6394=temp$6373[$index$6385]);var c$6402;(c$6402=m$6394);if((n$6363.tags.indexOf(c$6402)===-1)){return false;}else{false;}}return true;}else{$6346$6355;return false;}});($6221$6226.prototype[":::project"]=function($6413$6416){var it$0$6420;var self$6421;(it$0$6420=this);(self$6421=this);var ph$6432;(ph$6432=$6413$6416);var $6429$6438;($6429$6438=ph$6432);var n$6446;if($237(it$0$6420)($6429$6438)){(n$6446=$6429$6438);return [true,[n$6446.tags,n$6446.props,n$6446.children]];}else{$6429$6438;return [false,null];}});$257($6221$6226,$257(function(){var accum$6457;(accum$6457=({}));(accum$6457["::check"]=function(x$6462){return (((x$6462&&x$6462.tags)&&x$6462.props)&&x$6462.children);});return accum$6457;}(),$257(function(){var accum$6465;(accum$6465=({}));(accum$6465[":::project"]=function($6469$6472){var ph$6477;(ph$6477=$6469$6472);var $6474$6483;($6474$6483=ph$6477);var tags$6491;var props$6492;var children$6493;if(($5366($6474$6483,"tags")&&((tags$6491=$6474$6483.tags),($5366($6474$6483,"props")&&((props$6492=$6474$6483.props),$5366($6474$6483,"children")))))){(children$6493=$6474$6483.children);return [true,[tags$6491,props$6492,children$6493]];}else{$6474$6483;return [false,null];}});return accum$6465;}(),$257(function(){var accum$6502;(accum$6502=({}));(accum$6502["::name"]="$6221");return accum$6502;}(),function(){var accum$6506;(accum$6506=({}));(accum$6506["::egclass"]=true);return accum$6506;}()))));return $6221$6226;}();var q_groups$2156;var q_prio$2157;var accum$3647;var accum$3651;var accum$3940;var accum$3944;var accum$4041;var accum$4045;var accum$4420;var accum$4455;var accum$4477;var accum$4499;var accum$4521;var accum$4549;var accum$4668;var accum$4690;var accum$4712;var accum$4734;var accum$4756;var accum$4778;var accum$4800;var accum$4822;var accum$4844;var accum$4915;var $index$5001;var $length$4995;var temp$4989;var filter$5039;var spec$5040;var fn$5041;var $315$366;var Source$367;var Location$368;var __lt____lt____colon__$369;var __plus____plus____colon__$370;var $316$371;var fill_locations$372;var $317$373;var OperatorGroups$374;var SimplePriority$375;var oparse$376;var fixity_table$377;var inherent_fixity$378;var fullsplit$379;var produce$380;var indent_tracker$381;var process_indent$382;var disambiguate_fixity$383;var alternate_operators$384;var produce_line$385;var dirty_hacks$386;var tokenize$387;var MAX$388;var fxm$389;var q_order$390;var finalize$391;var parse$392;var extract$393;var parse_spec$394;var make_extractor$395;var Dispatcher$396;var Engine$397;var Spec$398;var dispatch$399;var mergeable$400;var collapse$401;var shed$402;var shed_all$403;var shed_indent$404;var components$405;var Quaint$406;($315$366=require("earl-grey/location"));(Source$367=$315$366.Source);(Location$368=$315$366.Location);(__lt____lt____colon__$369=$315$366["<<:"]);(__plus____plus____colon__$370=$315$366["++:"]);($316$371=require("earl-grey/lex"));(fill_locations$372=$316$371.fill_locations);($317$373=require("earl-grey/parse"));(OperatorGroups$374=$317$373.OperatorGroups);(SimplePriority$375=$317$373.SimplePriority);(oparse$376=$317$373.oparse);(fixity_table$377=({"(":"PFX","[":"PFX","{":"PFX",")":"SFX","]":"SFX","}":"SFX"}));(inherent_fixity$378=function(op$450){return ($256(fixity_table$377,op$450)||"?FX");});(fullsplit$379=function(pos0$457,text$458,_re$459){var re$467;var ss$468;var results$469;var pos$470;var lastpos$471;(re$467=(new RegExp((("(\\\\.)|("+_re$459)+")"),"g")));(ss$468=function(a$479,b$480){return text$458.substring((a$479-pos0$457),(b$480-pos0$457));});(results$469=[]);(pos$470=pos0$457);$489:while(true){var m$533;var m$515;var index$516;var $496$507;var $497$508;var t0$505;var $492$500;($492$500=re$467.exec(text$458));if(($492$500===null)){break $489;}else{if((($496$507=($492$500 instanceof Array))&&(((t0$505=$492$500.length)),((t0$505>=2)&&((m$515=$492$500[0]),(($492$500[1]===(void 0))&&(Array.prototype.slice.call($492$500,2),$5366($492$500,"index")))))))){(index$516=$492$500.index);results$469.push(["word",pos$470,(index$516+pos0$457),ss$468(pos$470,(index$516+pos0$457))],["sep",(index$516+pos0$457),(re$467.lastIndex+pos0$457),ss$468((index$516+pos0$457),(re$467.lastIndex+pos0$457))]);(pos$470=(re$467.lastIndex+pos0$457));}else{if(($496$507&&(t0$505>=1))){(m$533=$492$500[0]);Array.prototype.slice.call($492$500,1);continue $489;}else{$5415($492$500);}}}}(lastpos$471=(pos0$457+text$458.length));results$469.push(["word",pos$470,lastpos$471,ss$468(pos$470,lastpos$471)]);return results$469;});(produce$380=function(src$546){var $index$600;var $length$594;var temp$588;var lineop_re$554;var text$555;var url$556;var results$557;var curw$558;(lineop_re$554=RegExp("^[!@#$%^&*_\\-+=<>/?;:.`|]{3,}$",""));(text$555=src$546.text);(url$556=src$546.url);(results$557=[]);(curw$558=0);(temp$588=fullsplit$379(0,text$555,"[ ~]*(\n[ ~]*)+"));($length$594=temp$588.length);($index$600=0);$559:for(;($index$600<$length$594);($index$600++)){var t0$646;var spl$641;var lw$679;var info$669;var s$655;var e$656;var w$657;var $563$658;var s$624;var e$625;var word$626;var $566$618;var $567$619;var $568$620;var $569$621;var t0$614;var t1$615;var t2$616;var m$609;(m$609=temp$588[$index$600]);(t0$614=m$609);if((($567$619=(t0$614 instanceof Array))&&(((t1$615=t0$614.length)),(($569$621=(t1$615===4))&&(t0$614[0]==="sep"))))){(s$624=t0$614[1]);(e$625=t0$614[2]);(word$626=t0$614[3]);(spl$641=word$626.split("\n"));(t0$646=(spl$641.length-2));(curw$558=t0$646);($256(results$557,(results$557.length-1))["wsa"]=t0$646);results$557.push($257(["INDENT",$256(spl$641,(spl$641.length-1)).length],({"location":Location$368(src$546,s$624,e$625)})));}else{if(($569$621&&(t0$614[0]==="word"))){(s$655=t0$614[1]);(e$656=t0$614[2]);(t2$616=t0$614[3]);(w$657=t2$616);($563$658=t2$616);(info$669=({"location":Location$368(src$546,s$655,e$656),"wsb":curw$558}));if($237(lineop_re$554)($563$658)){(lw$679=("L"+w$657));results$557.push($257(["OP",inherent_fixity$378(lw$679),lw$679],info$669));}else{$563$658;results$557.push($257(["LINE",w$657],info$669));}}else{$5415(m$609,"/home/olivier/git/egquaint/src/index.eg",1257,1921);}}}return results$557;});(indent_tracker$381=function(){var curr$700;var stack$701;(curr$700=0);(stack$701=[]);return function($698$709){var t0$726;var rval$790;var x$814;var $index$842;var $length$836;var temp$830;var acc$824;var other$863;var stuff$806;var new_indent$747;var $713$748;var $721$743;var $722$744;var t0$740;var t1$741;var $711$735;var ph$723;var token$724;(t0$726=$698$709);(token$724=t0$726);(ph$723=t0$726);($711$735=ph$723);if((($721$743=($711$735 instanceof Array))&&(((t0$740=$711$735.length)),((t0$740===2)&&($711$735[0]==="INDENT"))))){(t1$741=$711$735[1]);(new_indent$747=t1$741);($713$748=t1$741);$713$748;if((curr$700===false)){(curr$700=new_indent$747);return [];}else{if(($713$748>curr$700)){stack$701.push(curr$700);(curr$700=new_indent$747);return [$5693(["OP","?FX","I("],({"wsb":true,"wsa":true}))];}else{if(($713$748===curr$700)){return [];}else{if(($713$748<curr$700)){(rval$790=[]);$794:while(((stack$701.length>0)&&(new_indent$747<curr$700))){(curr$700=stack$701.pop());rval$790.push($5693(["OP","SFX",")I"],({"wsb":true,"wsa":true})));}return rval$790;}else{$5415($713$748,"/home/olivier/git/egquaint/src/index.eg",2450,2466);}}}}}else{if(($721$743&&((t0$740>=1)&&($711$735[0]==="ID")))){(stuff$806=Array.prototype.slice.call($711$735,1));return [token$724];}else{if((((x$814=$711$735)),((x$814 instanceof Array)&&(x$814[0]==="EOF")))){(acc$824=[]);(temp$830=stack$701);($length$836=temp$830.length);($index$842=0);$819:for(;($index$842<$length$836);($index$842++)){var m$851;(m$851=temp$830[$index$842]);m$851;acc$824.push($5693(["OP","SFX",")I"],({"wsb":true,"wsa":true})));}return acc$824;}else{(other$863=$711$735);return [token$724];}}}};});(process_indent$382=function(stream$870){var $index$901;var $length$895;var temp$889;var tracker$875;var results$876;(tracker$875=indent_tracker$381());(results$876=[]);(temp$889=stream$870);($length$895=temp$889.length);($index$901=0);$877:for(;($index$901<$length$895);($index$901++)){var token$918;var m$910;(m$910=temp$889[$index$901]);(token$918=m$910);(results$876=results$876.concat(tracker$875(token$918)));}return results$876.concat(tracker$875(["EOF"]));});(disambiguate_fixity$383=function(stream$925){var $index$1371;var $length$1365;var temp$1359;var __lt____lt____lt____colon__$934;var collapse_operators$935;var buffer$936;var pfx$937;var collapse$938;var results$939;(__lt____lt____lt____colon__$934=function(a$955,b$956){(a$955["wsb"]=b$956.wsb);(a$955["wsa"]=b$956.wsa);return __lt____lt____colon__$369(a$955,b$956);});(collapse_operators$935=function(){var $index$1056;var $length$1050;var temp$1044;var acc$1038;var $index$1133;var $length$1127;var temp$1121;var acc$1115;var $index$1196;var $length$1190;var temp$1184;var acc$1178;var t0$1249;var t1$1250;var t2$1251;var t3$1252;var t0$1297;var t0$1304;var $1241$1286;var $1242$1287;var $1243$1288;var bridge$1238$1283;var t0$1284;var $1236$1278;var first$1244;var fixity$1245;var name$1246;var rest$1247;var n$1013;var $980$1007;var $981$1008;var $982$1009;var $983$1010;var t0$1004;var t1$1005;var buffer$995;var $974$996;var t0$991;var $972$986;($972$986=arguments);(t0$991=$972$986.length);if((t0$991>=1)){(buffer$995=$972$986[0]);($974$996=Array.prototype.slice.call($972$986,1));(n$1013=buffer$995.length);$974$996;if((!buffer$995.length)){return [];}else{(t0$1004=$974$996);(t1$1005=t0$1004.length);if((($982$1009=(t1$1005===2))&&(($983$1010=t0$1004[0])&&t0$1004[1]))){(acc$1038=[]);(temp$1044=buffer$995);($length$1050=temp$1044.length);($index$1056=0);$1033:for(;($index$1056<$length$1050);($index$1056++)){var t0$1097;var r$1092;var token$1075;var name$1076;var t0$1070;var t1$1071;var m$1065;(m$1065=temp$1044[$index$1056]);(t0$1070=m$1065);(token$1075=t0$1070);if(((t0$1070 instanceof Array)&&(((t1$1071=t0$1070.length)),((t1$1071===3)&&(t0$1070[0]==="OP"))))){t0$1070[1];(name$1076=t0$1070[2]);acc$1038.push((((r$1092=["OP","PFX",name$1076])),(((t0$1097=1)),(r$1092["wsb"]=t0$1097),(r$1092["wsa"]=t0$1097)),__lt____lt____colon__$369(r$1092,token$1075)));}else{$5415(m$1065,"/home/olivier/git/egquaint/src/index.eg",3902,4336);}}return acc$1038;}else{if($983$1010){t0$1004[1];(acc$1115=[]);(temp$1121=buffer$995);($length$1127=temp$1121.length);($index$1133=0);$1110:for(;($index$1133<$length$1127);($index$1133++)){var token$1152;var name$1153;var t0$1147;var t1$1148;var m$1142;(m$1142=temp$1121[$index$1133]);(t0$1147=m$1142);(token$1152=t0$1147);if(((t0$1147 instanceof Array)&&(((t1$1148=t0$1147.length)),((t1$1148===3)&&(t0$1147[0]==="OP"))))){t0$1147[1];(name$1153=t0$1147[2]);acc$1115.push(__lt____lt____lt____colon__$934(["OP","PFX",name$1153],token$1152));}else{$5415(m$1142,"/home/olivier/git/egquaint/src/index.eg",4349,4443);}}return acc$1115;}else{if(($982$1009&&(t0$1004[0],t0$1004[1]))){(acc$1178=[]);(temp$1184=buffer$995);($length$1190=temp$1184.length);($index$1196=0);$1173:for(;($index$1196<$length$1190);($index$1196++)){var token$1215;var name$1216;var t0$1210;var t1$1211;var m$1205;(m$1205=temp$1184[$index$1196]);(t0$1210=m$1205);(token$1215=t0$1210);if(((t0$1210 instanceof Array)&&(((t1$1211=t0$1210.length)),((t1$1211===3)&&(t0$1210[0]==="OP"))))){t0$1210[1];(name$1216=t0$1210[2]);acc$1178.push(__lt____lt____lt____colon__$934(["OP","SFX",name$1216],token$1215));}else{$5415(m$1205,"/home/olivier/git/egquaint/src/index.eg",4456,4550);}}return acc$1178;}else{$974$996;(t0$1249=buffer$995);if(((t0$1249 instanceof Array)&&(((t1$1250=t0$1249.length)),((t1$1250>=1)&&(((t2$1251=t0$1249[0])),((first$1244=t2$1251),((t2$1251 instanceof Array)&&(((t3$1252=t2$1251.length)),((t3$1252===3)&&(t2$1251[0]==="OP")))))))))){(fixity$1245=t2$1251[1]);(name$1246=t2$1251[2]);(rest$1247=Array.prototype.slice.call(t0$1249,1));}else{$5415(buffer$995,"/home/olivier/git/egquaint/src/index.eg",4603,4609);}($1236$1278=[first$1244.wsb,first$1244.wsa]);(bridge$1238$1283=$1236$1278);if((((bridge$1238$1283 instanceof Array)&&(((t0$1297=bridge$1238$1283.length)),((t0$1297===2)&&((!bridge$1238$1283[0])&&(!bridge$1238$1283[1])))))||((bridge$1238$1283 instanceof Array)&&(((t0$1304=bridge$1238$1283.length)),((t0$1304===2)&&(bridge$1238$1283[0]&&bridge$1238$1283[1])))))){return [__lt____lt____lt____colon__$934(["OP","IFX",name$1246],first$1244)].concat(collapse_operators$935(rest$1247,true,false));}else{if((($1241$1286=($1236$1278 instanceof Array))&&(((t0$1284=$1236$1278.length)),(($1243$1288=(t0$1284===2))&&$1236$1278[0])))){$1236$1278[1];return [__lt____lt____lt____colon__$934(["OP","PFX",name$1246],first$1244)].concat(collapse_operators$935(rest$1247,true,false));}else{if(($1243$1288&&($1236$1278[0],$1236$1278[1]))){return [__lt____lt____lt____colon__$934(["OP","SFX",name$1246],first$1244)].concat(collapse_operators$935(rest$1247,false,false));}else{$5415($1236$1278);}}}}}}}}else{$5415($972$986);}});(buffer$936=[]);(pfx$937=true);(collapse$938=function(sfx$1340){var rval$1345;(rval$1345=collapse_operators$935(buffer$936,pfx$937,sfx$1340));(buffer$936=[]);return rval$1345;});(results$939=[]);(temp$1359=stream$925);($length$1365=temp$1359.length);($index$1371=0);$940:for(;($index$1371<$length$1365);($index$1371++)){var other$1452;var name$1402;var $945$1403;var t0$1397;var t1$1398;var token$1389;var $943$1390;var t0$1385;var m$1380;(m$1380=temp$1359[$index$1371]);(t0$1385=m$1380);(token$1389=t0$1385);($943$1390=t0$1385);(t0$1397=$943$1390);if(((t0$1397 instanceof Array)&&(((t1$1398=t0$1397.length)),((t1$1398===3)&&(t0$1397[0]==="OP"))))){($945$1403=t0$1397[1]);(name$1402=t0$1397[2]);if(($945$1403==="?FX")){buffer$936.push(token$1389);}else{if(($945$1403==="IFX")){(results$939=results$939.concat(collapse$938(true)));results$939.push(token$1389);(pfx$937=true);}else{if(($945$1403==="PFX")){(results$939=results$939.concat(collapse$938(false)));results$939.push(token$1389);(pfx$937=true);}else{if(($945$1403==="SFX")){(results$939=results$939.concat(collapse$938(true)));results$939.push(token$1389);(pfx$937=false);}else{$5415($945$1403,"/home/olivier/git/egquaint/src/index.eg",5542,5547);}}}}}else{(other$1452=$943$1390);(results$939=results$939.concat(collapse$938(false)));results$939.push(token$1389);(pfx$937=false);}}return results$939.concat(collapse$938(true));});(alternate_operators$384=function(stream$1464,white$1465){var $index$1515;var $length$1509;var temp$1503;var W$1472;var last_op$1473;var line_op$1474;var results$1475;(W$1472=function(x$1488){if(x$1488){return "wide";}else{return "short";}});(last_op$1473=true);(line_op$1474=false);(results$1475=[]);(temp$1503=stream$1464);($length$1509=temp$1503.length);($index$1515=0);$1476:for(;($index$1515<$length$1509);($index$1515++)){var x$1549;var $1570$1578;var x$1622;var token$1629;var fixity$1556;var name$1557;var t0$1541;var t1$1542;var token$1533;var $1479$1534;var t0$1529;var m$1524;(m$1524=temp$1503[$index$1515]);(t0$1529=m$1524);(token$1533=t0$1529);($1479$1534=t0$1529);if((((x$1549=$1479$1534)),((x$1549 instanceof Array)&&(x$1549[0]==="IGNORE")))){null;}else{(t0$1541=$1479$1534);if(((t0$1541 instanceof Array)&&(((t1$1542=t0$1541.length)),((t1$1542===3)&&(t0$1541[0]==="OP"))))){(fixity$1556=t0$1541[1]);(name$1557=t0$1541[2]);if(last_op$1473){results$1475.push(["VOID"]);}($1570$1578=fixity$1556);if(($1570$1578==="IFX")){results$1475.push(__lt____lt____colon__$369(["IFX",W$1472((token$1533.wsa||token$1533.wsb)),name$1557],token$1533));(last_op$1473=true);}else{if(($1570$1578==="PFX")){if((!last_op$1473)){results$1475.push(["IFX",W$1472(token$1533.wsb),white$1465],["VOID"]);}results$1475.push(__lt____lt____colon__$369(["PFX",W$1472(token$1533.wsa),name$1557],token$1533));(last_op$1473=true);}else{if(($1570$1578==="SFX")){results$1475.push(__lt____lt____colon__$369(["SFX",W$1472(token$1533.wsb),name$1557],token$1533),["VOID"]);(last_op$1473=false);}else{$5415($1570$1578);}}}(line_op$1474=$237(RegExp("^L",""))(name$1557));}else{if((((x$1622=$1479$1534)),((x$1622 instanceof Array)&&(x$1622[0]==="ILLEGAL")))){throw $5434(["syntax","illegal"]).create("unknown character",({"chr":token$1533}));}else{(token$1629=$1479$1534);if((!last_op$1473)){results$1475.push(["IFX",W$1472(token$1629.wsb),white$1465]);}results$1475.push(token$1629);(last_op$1473=false);}}}}if(last_op$1473){results$1475.push(["VOID"]);}return results$1475;});(produce_line$385=function(src$1643,line$1644,start$1645){var $index$1681;var $length$1675;var temp$1669;var ws$1650;var results$1651;(ws$1650=0);(results$1651=[]);(temp$1669=fullsplit$379(start$1645,line$1644,"[ ~]+"));($length$1675=temp$1669.length);($index$1681=0);$1652:for(;($index$1681<$length$1675);($index$1681++)){var $index$1761;var $length$1755;var temp$1749;var prod$1736;var s$1729;var e$1730;var w$1731;var s$1704;var e$1705;var white$1706;var $1656$1698;var $1657$1699;var $1658$1700;var $1659$1701;var t0$1695;var t1$1696;var m$1690;(m$1690=temp$1669[$index$1681]);(t0$1695=m$1690);if((($1657$1699=(t0$1695 instanceof Array))&&(((t1$1696=t0$1695.length)),(($1659$1701=(t1$1696===4))&&(t0$1695[0]==="sep"))))){(s$1704=t0$1695[1]);(e$1705=t0$1695[2]);(white$1706=t0$1695[3]);(ws$1650=white$1706.length);($256(results$1651,(results$1651.length-1))["wsa"]=ws$1650);}else{if(($1659$1701&&(t0$1695[0]==="word"))){(s$1729=t0$1695[1]);(e$1730=t0$1695[2]);(w$1731=t0$1695[3]);(prod$1736=false);(temp$1749=fullsplit$379(s$1729,w$1731,"[!@#$%^&*_\\-+=<>/?;:.`|]+|[(){}\\[\\],.]"));($length$1755=temp$1749.length);($index$1761=0);$1737:for(;($index$1761<$length$1755);($index$1761++)){var w2$1843;var $1826$1831;var info$1805;var type$1781;var s2$1782;var e2$1783;var w2$1784;var $1740$1785;var t0$1775;var t1$1776;var t2$1777;var m$1770;(m$1770=temp$1749[$index$1761]);(t0$1775=m$1770);if(((t0$1775 instanceof Array)&&(((t1$1776=t0$1775.length)),(t1$1776===4)))){(t2$1777=t0$1775[0]);(type$1781=t2$1777);($1740$1785=t2$1777);(s2$1782=t0$1775[1]);(e2$1783=t0$1775[2]);(w2$1784=t0$1775[3]);(info$1805=({"location":Location$368(src$1643,s2$1782,e2$1783),"wsb":ws$1650,"wsa":0}));if(($1740$1785==="sep")){(prod$1736=true);results$1651.push($257(["OP",inherent_fixity$378(w2$1784),w2$1784],info$1805));(ws$1650=0);}else{if(($1740$1785==="word")){($1826$1831=w2$1784);if(($1826$1831==="")){undefined;}else{(w2$1843=$1826$1831);(prod$1736=true);results$1651.push($257(["ID",w2$1843],info$1805));(ws$1650=0);}}else{$5415($1740$1785,"/home/olivier/git/egquaint/src/index.eg",8477,8487);}}}else{$5415(m$1770,"/home/olivier/git/egquaint/src/index.eg",8398,9129);}}if((!prod$1736)){results$1651.push($257(["ID",""],({"location":Location$368(src$1643,s$1729,e$1730),"wsb":ws$1650,"wsa":0})));}}else{$5415(m$1690,"/home/olivier/git/egquaint/src/index.eg",8171,9308);}}}return results$1651;});(dirty_hacks$386=function(tokens$1866){var $index$1890;var $length$1884;var temp$1878;(temp$1878=$5667(tokens$1866));($length$1884=temp$1878.length);($index$1890=0);$1869:for(;($index$1890<$length$1884);($index$1890++)){var t0$1956;var $1946$1951;var oper$1934;var t0$1929;var t1$1930;var i$1910;var token$1911;var $1872$1912;var t0$1904;var t1$1905;var t2$1906;var m$1899;(m$1899=temp$1878[$index$1890]);(t0$1904=m$1899);if(((t0$1904 instanceof Array)&&(((t1$1905=t0$1904.length)),(t1$1905===2)))){(i$1910=t0$1904[0]);(t2$1906=t0$1904[1]);(token$1911=t2$1906);($1872$1912=t2$1906);(t0$1929=$1872$1912);if(((t0$1929 instanceof Array)&&(((t1$1930=t0$1929.length)),((t1$1930===3)&&((t0$1929[0]==="SFX")&&(t0$1929[1]==="wide")))))){(oper$1934=t0$1929[2]);($1946$1951=$256(tokens$1866,(i$1910+2)));if((($1946$1951 instanceof Array)&&(((t0$1956=$1946$1951.length)),((t0$1956===3)&&(($1946$1951[0]==="IFX")&&(($1946$1951[1]==="wide")&&($1946$1951[2]==="I("))))))){(token$1911[0]="IFX");$256(tokens$1866,(i$1910+1)).splice(0,1,"ID","");}else{$1946$1951;undefined;}}else{$1872$1912;undefined;}}else{$5415(m$1899,"/home/olivier/git/egquaint/src/index.eg",9343,9630);}}return tokens$1866;});(tokenize$387=function(src$1985){var $index$2046;var $length$2040;var temp$2034;var acc$2028;var it$0$2100;var it$0$2019;var it$0$2013;var it$0$2007;var it$0$2001;var it$0$1995;var it$0$1989;(it$0$1989=src$1985);(it$0$1995=produce$380(it$0$1989));(it$0$2001=process_indent$382(it$0$1995));(it$0$2007=disambiguate_fixity$383(it$0$2001));(it$0$2013=alternate_operators$384(it$0$2007,"NL"));(it$0$2019=$5799((((acc$2028=[])),(((temp$2034=it$0$2013)),((($length$2040=temp$2034.length)),((($index$2046=0)),function(){$2022:for(;($index$2046<$length$2040);($index$2046++)){var it$0$2088;var it$0$2082;var other$2094;var l$2065;var loc$2066;var t0$2060;var t1$2061;var m$2055;(m$2055=temp$2034[$index$2046]);(t0$2060=m$2055);if(((t0$2060 instanceof Array)&&(((t1$2061=t0$2060.length)),((t1$2061===2)&&((t0$2060[0]==="LINE")&&((l$2065=t0$2060[1]),$5366(t0$2060,"location"))))))){(loc$2066=t0$2060.location);acc$2028.push((((it$0$2082=produce_line$385(loc$2066.source,l$2065,loc$2066.start))),(((it$0$2088=disambiguate_fixity$383(it$0$2082))),alternate_operators$384(it$0$2088,"JUXT"))));}else{(other$2094=m$2055);acc$2028.push([other$2094]);}}}()))),acc$2028)));(it$0$2100=dirty_hacks$386(it$0$2019));return fill_locations$372(src$1985,it$0$2100);});(MAX$388=(1/0));(fxm$389=function(fx$2112,w$2113,re$2114){return function($2117$2120){var t0$2136;var $2122$2131;var ph$2125;(ph$2125=$2117$2120);($2122$2131=ph$2125);if((($2122$2131 instanceof Array)&&(((t0$2136=$2122$2131.length)),((t0$2136===3)&&($5851($2122$2131[0],fx$2112)&&($5851($2122$2131[1],w$2113)&&$237(re$2114)($2122$2131[2]))))))){return true;}else{$2122$2131;return false;}};});(q_order$390=(((q_groups$2156=OperatorGroups$374(({"sh_ifx":[fxm$389("IFX","short",RegExp("^[^L]",""))],"sh_pfx":[fxm$389("PFX","short",RegExp("^[^L]",""))],"sh_sfx":[fxm$389("SFX","short",RegExp("^[^L]",""))],"wi_ifx":[fxm$389("IFX","wide",RegExp("^[^L]",""))],"wi_pfx":[fxm$389("PFX","wide",RegExp("^[^L]",""))],"wi_sfx":[fxm$389("SFX","wide",RegExp("^[^L]",""))],"lsh_ifx":[fxm$389("IFX","short",RegExp("^L",""))],"lsh_pfx":[fxm$389("PFX","short",RegExp("^L",""))],"lsh_sfx":[fxm$389("SFX","short",RegExp("^L",""))],"lwi_ifx":[fxm$389("IFX","wide",RegExp("^L",""))],"lwi_pfx":[fxm$389("PFX","wide",RegExp("^L",""))],"lwi_sfx":[fxm$389("SFX","wide",RegExp("^L",""))],"sjuxt":["XJUXTY"],"wjuxt":["X JUXT Y"],"snl":["XNLY"],"wnl":["X NL Y"],"obrack":["(_Y","[_Y","{_Y"],"cbrack":["X_)","X_]","X_}"],"oindent":["X_I(_Y"],"oindentp":["I(_Y"],"cindent":["X_)I"]})))),((q_prio$2157=({"oindent":[["all",114],["all",1]],"oindentp":[["all",MAX$388],["all",1]],"cindent":[["all",1],["all",MAX$388]],"obrack":[["all",MAX$388],["all",2]],"cbrack":[["all",2],["all",MAX$388]],"lwi_pfx":[["all",MAX$388],["all",10]],"lwi_ifx":[["all",12],["all",11]],"lwi_sfx":[["all",13],["all",MAX$388]],"wnl":[["all",15],["all",15]],"lsh_pfx":[["all",MAX$388],["all",20]],"lsh_ifx":[["all",22],["all",21]],"lsh_sfx":[["all",23],["all",MAX$388]],"snl":[["all",25],["all",25]],"wi_pfx":[["all",MAX$388],["all",110]],"wi_ifx":[["all",112],["all",111]],"wi_sfx":[["all",113],["all",MAX$388]],"wjuxt":[["all",115],["all",115]],"sh_pfx":[["all",MAX$388],["all",120]],"sh_ifx":[["all",122],["all",121]],"sh_sfx":[["all",123],["all",MAX$388]],"sjuxt":[["all",125],["all",125]]}))),SimplePriority$375(q_groups$2156,q_prio$2157)));(finalize$391=function($2168$2171){var t0$2182;var $index$2263;var $length$2257;var temp$2251;var $index$2301;var $length$2295;var temp$2289;var $index$2345;var $length$2339;var temp$2333;var $2486$2491;var t0$2556;var t0$2563;var mid2$2619;var $2596$2601;var $2532$2545;var $2533$2546;var $2534$2547;var bridge$2529$2542;var t0$2543;var $2527$2537;var w$2524;var $2474$2516;var width$2480;var _insert$2481;var start$2482;var end$2483;var pre$2436;var inds$2437;var mid$2438;var inde$2439;var t0$2428;var t1$2429;var t2$2430;var t3$2431;var t4$2432;var $2224$2423;var t0$2663;var t1$2664;var sumloc$2228;var rval$2229;var left$2230;var ops$2216;var args$2217;var text$2202;var $2177$2198;var $2178$2199;var t0$2196;var $2173$2191;var ph$2179;var x$2180;(t0$2182=$2168$2171);(x$2180=t0$2182);(ph$2179=t0$2182);($2173$2191=ph$2179);if((($2177$2198=($2173$2191 instanceof Array))&&(((t0$2196=$2173$2191.length)),((t0$2196===2)&&($2173$2191[0]==="ID"))))){(text$2202=$2173$2191[1]);return __lt____lt____colon__$369(["text",text$2202],x$2180);}else{if(($2177$2198&&((t0$2196===1)&&($2173$2191[0]==="VOID")))){return __lt____lt____colon__$369(["text",""],x$2180.location.at_end());}else{if(($2177$2198&&(t0$2196>=1))){(ops$2216=$2173$2191[0]);(args$2217=Array.prototype.slice.call($2173$2191,1));(sumloc$2228=ops$2216[0].location);(temp$2251=ops$2216.slice(1));($length$2257=temp$2251.length);($index$2263=0);$2231:for(;($index$2263<$length$2257);($index$2263++)){var op$2280;var m$2272;(m$2272=temp$2251[$index$2263]);(op$2280=m$2272);(sumloc$2228=__plus____plus____colon__$370(sumloc$2228,op$2280));}(temp$2289=args$2217);($length$2295=temp$2289.length);($index$2301=0);$2234:for(;($index$2301<$length$2295);($index$2301++)){var arg$2318;var m$2310;(m$2310=temp$2289[$index$2301]);(arg$2318=m$2310);(sumloc$2228=__plus____plus____colon__$370(sumloc$2228,arg$2318));}(rval$2229=["seq"]);(left$2230=0);(temp$2333=$5667(args$2217));($length$2339=temp$2333.length);($index$2345=0);$2237:for(;($index$2345<$length$2339);($index$2345++)){var t0$2399;var t1$2400;var o$2395;var name$2396;var l$2397;var i$2387;var arg$2388;var arg$2368;var $2241$2362;var $2242$2363;var $2243$2364;var $2244$2365;var t0$2359;var t1$2360;var m$2354;(m$2354=temp$2333[$index$2345]);(t0$2359=m$2354);if((($2242$2363=(t0$2359 instanceof Array))&&(((t1$2360=t0$2359.length)),(($2244$2365=(t1$2360===2))&&(t0$2359[0]===0))))){(arg$2368=t0$2359[1]);rval$2229.push(arg$2368);(left$2230=arg$2368.location.end);}else{if($2244$2365){(i$2387=t0$2359[0]);(arg$2388=t0$2359[1]);(t0$2399=$256(ops$2216,(i$2387-1)));(o$2395=t0$2399);if(((t0$2399 instanceof Array)&&(((t1$2400=t0$2399.length)),(t1$2400===3)))){t0$2399[0];t0$2399[1];(name$2396=t0$2399[2]);}else{$5415($256(ops$2216,(i$2387-1)),"/home/olivier/git/egquaint/src/index.eg",12908,12931);}(l$2397=arg$2388.location);rval$2229.push($257(["oper",name$2396],({"location":Location$368(l$2397.source,left$2230,l$2397.start)})),arg$2388);(left$2230=arg$2388.location.end);}else{$5415(m$2354,"/home/olivier/git/egquaint/src/index.eg",12745,13149);}}}($2224$2423=rval$2229);if((($2224$2423 instanceof Array)&&(((t0$2428=$2224$2423.length)),((t0$2428===6)&&(($2224$2423[0]==="seq")&&((pre$2436=$2224$2423[1]),(((t1$2429=$2224$2423[2])),((inds$2437=t1$2429),((t1$2429 instanceof Array)&&(((t2$2430=t1$2429.length)),((t2$2430===2)&&((t1$2429[0]==="oper")&&((t1$2429[1]==="I(")&&((mid$2438=$2224$2423[3]),(((t3$2431=$2224$2423[4])),((inde$2439=t3$2431),((t3$2431 instanceof Array)&&(((t4$2432=t3$2431.length)),((t4$2432===2)&&((t3$2431[0]==="oper")&&(t3$2431[1]===")I"))))))))))))))))))))){$2224$2423[5];(width$2480=((($2486$2491=(inds$2437.location.text().split("\n").length-1))),function(){if(($2486$2491>1)){return "wide";}else{$2486$2491;return "short";}}()));(_insert$2481=function(m$2509,v$2510){m$2509.shift();m$2509.unshift(__lt____lt____colon__$369(["oper","NL"],inds$2437));m$2509.unshift(v$2510);m$2509.unshift("seq");return __lt____lt____colon__$369(m$2509,__plus____plus____colon__$370(v$2510.location,m$2509.location));});($2474$2516=mid$2438);if(($5366($2474$2516,"operator")&&(($2474$2516.operator==="NL")&&$5366($2474$2516,"width")))){(w$2524=$2474$2516.width);($2527$2537=[width$2480,w$2524]);(bridge$2529$2542=$2527$2537);if((((bridge$2529$2542 instanceof Array)&&(((t0$2556=bridge$2529$2542.length)),((t0$2556===2)&&((bridge$2529$2542[0]==="wide")&&(bridge$2529$2542[1]==="wide")))))||((bridge$2529$2542 instanceof Array)&&(((t0$2563=bridge$2529$2542.length)),((t0$2563===2)&&((bridge$2529$2542[0]==="short")&&(bridge$2529$2542[1]==="short"))))))){_insert$2481(mid$2438,pre$2436);}else{if((($2532$2545=($2527$2537 instanceof Array))&&(((t0$2543=$2527$2537.length)),(($2534$2547=(t0$2543===2))&&(($2527$2537[0]==="wide")&&($2527$2537[1]==="short")))))){(mid$2438=["seq",pre$2436,__lt____lt____colon__$369(["oper","NL"],inds$2437),mid$2438]);(mid$2438["operator"]="NL");(mid$2438["width"]=width$2480);}else{if(($2534$2547&&(($2527$2537[0]==="short")&&($2527$2537[1]==="wide")))){($2596$2601=mid$2438[1]);if(($5366($2596$2601,"operator")&&(($2596$2601.operator==="NL")&&($5366($2596$2601,"width")&&($2596$2601.width==="short"))))){_insert$2481(mid$2438[1],pre$2436);}else{$2596$2601;(mid2$2619=["seq",pre$2436,__lt____lt____colon__$369(["oper","NL"],inds$2437),mid$2438[1]]);(mid2$2619["operator"]="NL");(mid2$2619["width"]=width$2480);__lt____lt____colon__$369(mid2$2619,__plus____plus____colon__$370(pre$2436.location,mid$2438[1].location));(mid$2438[1]=mid2$2619);}}else{$5415($2527$2537);}}}}else{$2474$2516;(mid$2438=["seq",pre$2436,__lt____lt____colon__$369(["oper","NL"],inds$2437),mid$2438]);(mid$2438["operator"]="NL");(mid$2438["width"]=width$2480);}__lt____lt____colon__$369(mid$2438,sumloc$2228);(start$2482=pre$2436.location.at_start());(end$2483=pre$2436.location.at_start());(rval$2229=["seq",__lt____lt____colon__$369(["text",""],start$2482),__lt____lt____colon__$369(["oper","I("],start$2482),mid$2438,inde$2439,__lt____lt____colon__$369(["text",""],inde$2439.location.at_end())]);}else{$2224$2423;undefined;}(t0$2663=ops$2216[0]);if(((t0$2663 instanceof Array)&&(((t1$2664=t0$2663.length)),(t1$2664===3)))){t0$2663[0];(rval$2229["width"]=t0$2663[1]);(rval$2229["operator"]=t0$2663[2]);}else{$5415(ops$2216[0],"/home/olivier/git/egquaint/src/index.eg",15112,15126);}return __lt____lt____colon__$369(rval$2229,sumloc$2228);}else{$5415($2173$2191);}}}});(parse$392=function(tokens$2684){var next$2689;var order$2690;(next$2689=function(){return tokens$2684.shift();});(order$2690=function(){var a$2729;var b$2730;var t0$2724;var t1$2725;var $2703$2716;var t0$2712;var $2701$2707;($2701$2707=arguments);(t0$2712=$2701$2707.length);if((t0$2712>=0)){($2703$2716=Array.prototype.slice.call($2701$2707,0));(t0$2724=$2703$2716);(t1$2725=t0$2724.length);if((t1$2725===2)){(a$2729=t0$2724[0]);(b$2730=t0$2724[1]);return q_order$390.compare(a$2729,b$2730);}else{$5415($2703$2716,"/home/olivier/git/egquaint/src/index.eg",15197,15202);}}else{$5415($2701$2707);}});return oparse$376(next$2689,order$2690,finalize$391);});(extract$393=function($2750$2753){var $index$2809;var $length$2803;var temp$2797;var acc$2791;var newargs$2783;var other$2849;var args$2773;var t0$2769;var $2755$2764;var ph$2758;(ph$2758=$2750$2753);($2755$2764=ph$2758);if((($2755$2764 instanceof Array)&&(((t0$2769=$2755$2764.length)),((t0$2769>=1)&&($2755$2764[0]==="seq"))))){(args$2773=Array.prototype.slice.call($2755$2764,1));(newargs$2783=(((acc$2791=[])),(((temp$2797=$5667(args$2773))),((($length$2803=temp$2797.length)),((($index$2809=0)),function(){$2786:for(;($index$2809<$length$2803);($index$2809++)){var i$2828;var arg$2829;var t0$2823;var t1$2824;var m$2818;(m$2818=temp$2797[$index$2809]);(t0$2823=m$2818);if(((t0$2823 instanceof Array)&&(((t1$2824=t0$2823.length)),((t1$2824===2)&&((i$2828=t0$2823[0]),((arg$2829=t0$2823[1]),$5851((i$2828%2),0))))))){acc$2791.push(arg$2829);}else{false;}}}()))),acc$2791));return ["seq",args$2773[1][1]].concat(newargs$2783);}else{(other$2849=$2755$2764);return other$2849;}});(parse_spec$394=function($2855$2858){var helper$2903;var tokens$2886;var ast$2887;var top$2888;var rval$2889;var top$3143;var rval$3144;var spec$2878;var t0$2874;var $2860$2869;var ph$2863;(ph$2863=$2855$2858);($2860$2869=ph$2863);if((typeof($2860$2869)==="string")){(spec$2878=$2860$2869);(tokens$2886=tokenize$387(Source$367(spec$2878)));(ast$2887=parse$392(tokens$2886));(top$2888=null);(rval$2889=(((helper$2903=function($2907$2910,opts$2911){var $index$2990;var $length$2984;var temp$2978;var acc$2972;var $index$3117;var $length$3111;var temp$3105;var acc$3099;var args$3083;var operator$3084;var contents$3055;var op$3050;var v$3045;var ast$3031;var ast$3026;var tags$2949;var pattern$2950;var $2922$2943;var $2923$2944;var $2924$2945;var $2925$2946;var t0$2937;var t1$2938;var t2$2939;var t3$2940;var t4$2941;var $2913$2932;var ph$2926;(ph$2926=$2907$2910);($2913$2932=ph$2926);(t0$2937=$6024(extract$393)($2913$2932));if((t0$2937[0]&&(((t1$2938=t0$2937[1])),(((t2$2939=t1$2938.length)),((t2$2939>=3)&&((t1$2938[0]==="seq")&&(t1$2938[1]==="JUXT"))))))){(tags$2949=Array.prototype.slice.call(t1$2938,2,-1));(pattern$2950=t1$2938[(t2$2939-1)]);return helper$2903(pattern$2950,$5693(opts$2911,$6071((((acc$2972=[])),(((temp$2978=tags$2949)),((($length$2984=temp$2978.length)),((($index$2990=0)),function(){$2967:for(;($index$2990<$length$2984);($index$2990++)){var tag$3009;var t0$3004;var t1$3005;var m$2999;(m$2999=temp$2978[$index$2990]);(t0$3004=m$2999);if(((t0$3004 instanceof Array)&&(((t1$3005=t0$3004.length)),((t1$3005===2)&&(t0$3004[0]==="text"))))){(tag$3009=t0$3004[1]);acc$2972.push([tag$3009,true]);}else{$5415(m$2999,"/home/olivier/git/egquaint/src/index.eg",16002,16047);}}}()))),acc$2972))));}else{(ast$3026=$2913$2932);if(opts$2911.wide){return ["iswide",helper$2903(ast$3026,$5693(opts$2911,({"wide":false})))];}else{(ast$3031=$2913$2932);if(opts$2911.short){return ["isshort",helper$2903(ast$3031,$5693(opts$2911,({"short":false})))];}else{if((($2922$2943=($2913$2932 instanceof Array))&&(((t0$2937=$2913$2932.length)),(($2924$2945=(t0$2937===2))&&(($2925$2946=($2913$2932[0]==="text"))&&($2913$2932[1]==="")))))){return ["eq",["text",""]];}else{if($2925$2946){(v$3045=$2913$2932[1]);return ["put",v$3045,(opts$2911.maybe===true)];}else{if(($2924$2945&&($2913$2932[0]==="oper"))){(op$3050=$2913$2932[1]);return ["eq",["oper",op$3050]];}else{if(($2922$2943&&((t0$2937===6)&&(($2913$2932[0]==="seq")&&($2913$2932[1],(((t1$2938=$2913$2932[2])),((t1$2938 instanceof Array)&&(((t2$2939=t1$2938.length)),((t2$2939===2)&&((t1$2938[0]==="oper")&&((t1$2938[1]==="[")&&((contents$3055=$2913$2932[3]),(((t3$2940=$2913$2932[4])),((t3$2940 instanceof Array)&&(((t4$2941=t3$2940.length)),((t4$2941===2)&&((t3$2940[0]==="oper")&&((t3$2940[1]==="]")&&($2913$2932[5],opts$2911.shed))))))))))))))))))){return helper$2903(contents$3055,$5693(opts$2911,({"shed":false})));}else{if(($2922$2943&&((t0$2937>=1)&&(($2913$2932[0]==="seq")&&((args$3083=Array.prototype.slice.call($2913$2932,1)),$5366($2913$2932,"operator")))))){(operator$3084=$2913$2932.operator);if((!top$2888)){(top$2888=operator$3084);}return ["seq"].concat((((acc$3099=[])),(((temp$3105=args$3083)),((($length$3111=temp$3105.length)),((($index$3117=0)),function(){$3094:for(;($index$3117<$length$3111);($index$3117++)){var arg$3134;var m$3126;(m$3126=temp$3105[$index$3117]);(arg$3134=m$3126);acc$3099.push(helper$2903(arg$3134,opts$2911));}}()))),acc$3099));}else{$5415($2913$2932);}}}}}}}}})),helper$2903(ast$2887,({"shed":true}))));return [top$2888,rval$2889];}else{if((($2860$2869 instanceof Array)&&(((t0$2874=$2860$2869.length)),(t0$2874===2)))){(top$3143=$2860$2869[0]);(rval$3144=$2860$2869[1]);return [top$3143,rval$3144];}else{$5415($2860$2869);}}});(make_extractor$395=function($3158$3161){var t0$3166;var t1$3167;var t2$3168;var top$3163;var spec$3164;(t0$3166=$6024(parse_spec$394)($3158$3161));if((t0$3166[0]&&(((t1$3167=t0$3166[1])),(((t2$3168=t1$3167.length)),(t2$3168===2))))){(top$3163=t1$3167[0]);(spec$3164=t1$3167[1]);}else{$5415($3158$3161);}return [top$3163,function(node$3188){var helper$3192;(helper$3192=function($3196$3199,node$3200){var t0$3260;var $3250$3255;var x$3283;var $index$3345;var $length$3339;var temp$3333;var rval$3323;var other$3400;var args$3312;var t0$3308;var $3298$3303;var f$3404;var subspecs$3290;var v$3246;var maybe$3247;var subspec$3241;var subspec$3231;var $3210$3226;var $3211$3227;var $3212$3228;var t0$3224;var $3202$3219;var ph$3213;(ph$3213=$3196$3199);($3202$3219=ph$3213);if((($3210$3226=($3202$3219 instanceof Array))&&(((t0$3224=$3202$3219.length)),(($3212$3228=(t0$3224===2))&&($3202$3219[0]==="iswide"))))){(subspec$3231=$3202$3219[1]);return ($5851(node$3200.width,"wide")&&helper$3192(subspec$3231,node$3200));}else{if(($3212$3228&&($3202$3219[0]==="isshort"))){(subspec$3241=$3202$3219[1]);return ($5851(node$3200.width,"short")&&helper$3192(subspec$3241,node$3200));}else{if(($3210$3226&&((t0$3224===3)&&($3202$3219[0]==="put")))){(v$3246=$3202$3219[1]);(maybe$3247=$3202$3219[2]);($3250$3255=node$3200);if((($3250$3255 instanceof Array)&&(((t0$3260=$3250$3255.length)),((t0$3260===2)&&(($3250$3255[0]==="text")&&(($3250$3255[1]==="")&&(!maybe$3247))))))){return false;}else{$3250$3255;return (function(){var $6138={};$6138[v$3246]=node$3200;;return $6138;}());}}else{if(($3210$3226&&((t0$3224===2)&&(($3202$3219[0]==="eq")&&$5851($3202$3219[1],node$3200))))){return ({});}else{if((((x$3283=$3202$3219)),((x$3283 instanceof Array)&&(x$3283[0]==="eq")))){return false;}else{if((($3210$3226=($3202$3219 instanceof Array))&&(((t0$3224=$3202$3219.length)),((t0$3224>=1)&&($3202$3219[0]==="seq"))))){(subspecs$3290=Array.prototype.slice.call($3202$3219,1));($3298$3303=node$3200);if((($3298$3303 instanceof Array)&&(((t0$3308=$3298$3303.length)),((t0$3308>=1)&&(($3298$3303[0]==="seq")&&((args$3312=Array.prototype.slice.call($3298$3303,1)),$5851(subspecs$3290.length,args$3312.length))))))){(rval$3323=({}));(temp$3333=$6139(subspecs$3290,args$3312));($length$3339=temp$3333.length);($index$3345=0);$3324:for(;($index$3345<$length$3339);($index$3345++)){var vars$3394;var $3377$3382;var subspec$3364;var arg$3365;var t0$3359;var t1$3360;var m$3354;(m$3354=temp$3333[$index$3345]);(t0$3359=m$3354);if(((t0$3359 instanceof Array)&&(((t1$3360=t0$3359.length)),(t1$3360===2)))){(subspec$3364=t0$3359[0]);(arg$3365=t0$3359[1]);($3377$3382=helper$3192(subspec$3364,arg$3365));if((!$3377$3382)){return false;}else{(vars$3394=$3377$3382);$257(rval$3323,vars$3394);}}else{$5415(m$3354,"/home/olivier/git/egquaint/src/index.eg",17521,17795);}}return rval$3323;}else{(other$3400=$3298$3303);return false;}}else{if(($3210$3226&&((t0$3224===2)&&($3202$3219[0]==="fn")))){(f$3404=$3202$3219[1]);return f$3404(node$3200);}else{$5415($3202$3219);}}}}}}}});return helper$3192(spec$3164,node$3188);}];});(Dispatcher$396=function(){var it$0$3417;(it$0$3417=function(){if((!$237(Dispatcher$396)(this))){return Object.create(Dispatcher$396.prototype);}else{return this;}}());(it$0$3417["dispatch"]=[]);return it$0$3417;});(Dispatcher$396.prototype["handler"]=function(node$3432){var $index$3489;var $length$3483;var temp$3477;var candidates$3468;var $3447$3456;var key$3450;var it$0$3436;var self$3437;(it$0$3436=this);(self$3437=this);(key$3450=node$3432.operator);($3447$3456=$256(it$0$3436.dispatch,key$3450));if(($3447$3456===(void 0))){return false;}else{(candidates$3468=$3447$3456);(temp$3477=candidates$3468);($length$3483=temp$3477.length);($index$3489=0);$3471:for(;($index$3489<$length$3483);($index$3489++)){var parts$3522;var t0$3518;var $3508$3513;var c$3506;var m$3498;(m$3498=temp$3477[$index$3489]);(c$3506=m$3498);($3508$3513=node$3432);(t0$3518=$6024(c$3506)($3508$3513));if(t0$3518[0]){(parts$3522=t0$3518[1]);return [parts$3522,c$3506];}else{$3508$3513;undefined;}}return false;}});(Dispatcher$396.prototype["register"]=function(handler$3536){var key$3552;var l$3553;var it$0$3540;var self$3541;(it$0$3540=this);(self$3541=this);(key$3552=handler$3536.operator);(l$3553=(it$0$3540.dispatch[key$3552]=($256(it$0$3540.dispatch,key$3552)||[])));return l$3553.unshift(handler$3536);});(Dispatcher$396.prototype["clone"]=function(){var $index$3608;var $length$3602;var temp$3596;var acc$3590;var d$3579;var it$0$3567;var self$3568;(it$0$3567=this);(self$3568=this);(d$3579=Dispatcher$396());(d$3579["dispatch"]=$6071((((acc$3590=[])),(((temp$3596=$6203(it$0$3567.dispatch))),((($length$3602=temp$3596.length)),((($index$3608=0)),function(){$3585:for(;($index$3608<$length$3602);($index$3608++)){var key$3627;var l$3628;var t0$3622;var t1$3623;var m$3617;(m$3617=temp$3596[$index$3608]);(t0$3622=m$3617);if(((t0$3622 instanceof Array)&&(((t1$3623=t0$3622.length)),(t1$3623===2)))){(key$3627=t0$3622[0]);(l$3628=t0$3622[1]);acc$3590.push([key$3627,l$3628.slice(0)]);}else{$5415(m$3617,"/home/olivier/git/egquaint/src/index.eg",18530,18597);}}}()))),acc$3590)));return d$3579;});$257(Dispatcher$396,$257(((accum$3647=({})),((accum$3647["::name"]="Dispatcher"),accum$3647)),((accum$3651=({})),((accum$3651["::egclass"]=true),accum$3651))));Dispatcher$396;(Engine$397=function($3657$3660){var it$0$3663;(it$0$3663=function(){if((!$237(Engine$397)(this))){return Object.create(Engine$397.prototype);}else{return this;}}());(it$0$3663["dispatch"]=$3657$3660);undefined;return it$0$3663;});(Engine$397.prototype["run"]=function($3676$3679){var tokens$3721;var parsed$3722;var node$3731;var src$3715;var text$3710;var $3692$3702;var ph$3696;var it$0$3683;var self$3684;(it$0$3683=this);(self$3684=this);(ph$3696=$3676$3679);($3692$3702=ph$3696);if((typeof($3692$3702)==="string")){(text$3710=$3692$3702);return it$0$3683.run(Source$367(text$3710));}else{if($237(Source$367)($3692$3702)){(src$3715=$3692$3702);(tokens$3721=tokenize$387(src$3715));(parsed$3722=parse$392(tokens$3721));return it$0$3683._run(parsed$3722);}else{(node$3731=$3692$3702);return it$0$3683._run(node$3731);}}});(Engine$397.prototype["_run"]=function($3736$3739){var t0$3759;var t0$3785;var t0$3793;var l$3803;var $index$3885;var $length$3879;var temp$3873;var acc$3867;var values$3907;var handler$3908;var t0$3856;var $3846$3851;var parts$3838;var t$3778;var bridge$3754$3773;var t0$3774;var $3752$3768;var ph$3756;var node$3757;var it$0$3743;var self$3744;(it$0$3743=this);(self$3744=this);(t0$3759=$3736$3739);(node$3757=t0$3759);(ph$3756=t0$3759);($3752$3768=ph$3756);(bridge$3754$3773=$3752$3768);if((((bridge$3754$3773 instanceof Array)&&(((t0$3785=bridge$3754$3773.length)),((t0$3785===2)&&((bridge$3754$3773[0]==="text")&&((t$3778=bridge$3754$3773[1]),true)))))||((bridge$3754$3773 instanceof Array)&&(((t0$3793=bridge$3754$3773.length)),((t0$3793===2)&&((bridge$3754$3773[0]==="oper")&&((t$3778=bridge$3754$3773[1]),true))))))){(l$3803=node$3757.location);return node$3757.location.text().replace(RegExp("~|\\\\.","g"),function($3808$3811){var s$3834;var $3813$3822;var ph$3816;(ph$3816=$3808$3811);($3813$3822=ph$3816);if(($3813$3822==="~")){return "";}else{(s$3834=$3813$3822);return s$3834[1];}});}else{if((($3752$3768 instanceof Array)&&(((t0$3774=$3752$3768.length)),((t0$3774>=1)&&($3752$3768[0]==="seq"))))){(parts$3838=Array.prototype.slice.call($3752$3768,1));($3846$3851=it$0$3743.dispatch.handler(node$3757));if((!$3846$3851)){return $6220(["span"],({}),(((acc$3867=[])),(((temp$3873=parts$3838)),((($length$3879=temp$3873.length)),((($index$3885=0)),function(){$3862:for(;($index$3885<$length$3879);($index$3885++)){var part$3902;var m$3894;(m$3894=temp$3873[$index$3885]);(part$3902=m$3894);acc$3867.push(it$0$3743.run(part$3902));}}()))),acc$3867));}else{if((($3846$3851 instanceof Array)&&(((t0$3856=$3846$3851.length)),(t0$3856===2)))){(values$3907=$3846$3851[0]);(handler$3908=$3846$3851[1]);return handler$3908.run(it$0$3743,node$3757,values$3907);}else{$5415($3846$3851);}}}else{$5415($3752$3768);}}});(Engine$397.prototype["eval"]=function(code$3924){var it$0$3928;var self$3929;(it$0$3928=this);(self$3929=this);return eval(code$3924);});$257(Engine$397,$257(((accum$3940=({})),((accum$3940["::name"]="Engine"),accum$3940)),((accum$3944=({})),((accum$3944["::egclass"]=true),accum$3944))));Engine$397;(Spec$398=function($3950$3955,$3952$3956){var t0$3966;var t1$3967;var t2$3968;var it$0$3959;(it$0$3959=function(){if((!$237(Spec$398)(this))){return Object.create(Spec$398.prototype);}else{return this;}}());(t0$3966=$6024(make_extractor$395)($3950$3955));if((t0$3966[0]&&(((t1$3967=t0$3966[1])),(((t2$3968=t1$3967.length)),(t2$3968===2))))){(it$0$3959["operator"]=t1$3967[0]);(it$0$3959["extractor"]=t1$3967[1]);}else{$5415($3950$3955);}(it$0$3959["run"]=$3952$3956);undefined;return it$0$3959;});(Spec$398.prototype[":::project"]=function($3993$3996){var t0$4014;var values$4036;var $4009$4024;var ph$4012;var it$0$4000;var self$4001;(it$0$4000=this);(self$4001=this);(t0$4014=$6024(it$0$4000.extractor)($3993$3996));if(t0$4014[0]){(ph$4012=t0$4014[1]);}else{$5415($3993$3996);}($4009$4024=ph$4012);if((!$4009$4024)){return [false,null];}else{(values$4036=$4009$4024);return [true,values$4036];}});$257(Spec$398,$257(((accum$4041=({})),((accum$4041["::name"]="Spec"),accum$4041)),((accum$4045=({})),((accum$4045["::egclass"]=true),accum$4045))));Spec$398;(dispatch$399=Dispatcher$396());(mergeable$400=function(tag$4055,child$4056){var merge$4062;var node$4063;(merge$4062=function($4067$4070){var t0$4078;var other$4120;var tags$4098;var props$4099;var children$4100;var t0$4092;var t1$4093;var t2$4094;var $4072$4087;var ph$4075;var node$4076;(t0$4078=$4067$4070);(node$4076=t0$4078);(ph$4075=t0$4078);($4072$4087=ph$4075);(t0$4092=$6024($6220([tag$4055],({}),[]))($4072$4087));if((t0$4092[0]&&(((t1$4093=t0$4092[1])),(((t2$4094=t1$4093.length)),(t2$4094===3))))){(tags$4098=t1$4093[0]);(props$4099=t1$4093[1]);(children$4100=t1$4093[2]);(this["children"]=this.children.concat(children$4100));return this;}else{(other$4120=$4072$4087);return false;}});(node$4063=$6220([tag$4055],({}),child$4056));(node$4063["merge"]=merge$4062);return node$4063;});(collapse$401=function(operator$4136,$4133$4137){var node$4179;var l$4159;var r$4160;var t0$4153;var t1$4154;var t2$4155;var $4139$4148;var ph$4142;(ph$4142=$4133$4137);($4139$4148=ph$4142);(t0$4153=$6024(extract$393)($4139$4148));if((t0$4153[0]&&(((t1$4154=t0$4153[1])),(((t2$4155=t1$4154.length)),((t2$4155===4)&&((t1$4154[0]==="seq")&&(t1$4154[1]===operator$4136))))))){(l$4159=t1$4154[2]);(r$4160=t1$4154[3]);return [l$4159].concat(collapse$401(operator$4136,r$4160));}else{(node$4179=$4139$4148);return [node$4179];}});(shed$402=function(){var lw$4261;var rw$4262;var loc$4263;var node$4275;var ob$4220;var mid$4221;var cb$4222;var t0$4211;var t1$4212;var t2$4213;var t3$4214;var t4$4215;var t5$4216;var n$4202;var $4188$4203;var t0$4198;var $4186$4193;($4186$4193=arguments);(t0$4198=$4186$4193.length);if(((t0$4198>=1)&&(t0$4198<=2))){($4188$4203=$4186$4193[0]);(n$4202=function(){if((1>=t0$4198)){return 1;}else{return $4186$4193[1];}}());(t0$4211=$4188$4203);(t1$4212=t0$4211.length);if(((t1$4212===6)&&((t0$4211[0]==="seq")&&(t0$4211[1],(((t2$4213=t0$4211[2])),((ob$4220=t2$4213),((t2$4213 instanceof Array)&&(((t3$4214=t2$4213.length)),((t3$4214===2)&&((t2$4213[0]==="oper")&&((t2$4213[1]==="[")&&((mid$4221=t0$4211[3]),(((t4$4215=t0$4211[4])),((cb$4222=t4$4215),((t4$4215 instanceof Array)&&(((t5$4216=t4$4215.length)),((t5$4216===2)&&((t4$4215[0]==="oper")&&(t4$4215[1]==="]"))))))))))))))))))){t0$4211[5];if((n$4202>1)){return shed$402(mid$4221,(n$4202-1));}else{(lw$4261=ob$4220.location.text().split("[").pop());(rw$4262=cb$4222.location.text().split("]").shift());(loc$4263=mid$4221.location);return $5693(mid$4221,({"location":Location$368(loc$4263.source,(loc$4263.start-lw$4261.length),(loc$4263.end+rw$4262.length))}));}}else{(node$4275=$4188$4203);return node$4275;}}else{$5415($4186$4193);}});(shed_all$403=function(node$4284){return shed$402(node$4284,(1/0));});(shed_indent$404=function($4290$4293){var x$4365;var t0$4357;var t1$4358;var t2$4359;var t3$4360;var t4$4361;var $4347$4352;var node$4398;var mid$4317;var t0$4309;var t1$4310;var t2$4311;var t3$4312;var t4$4313;var $4295$4304;var ph$4298;(ph$4298=$4290$4293);($4295$4304=ph$4298);if((($4295$4304 instanceof Array)&&(((t0$4309=$4295$4304.length)),((t0$4309===6)&&(($4295$4304[0]==="seq")&&($4295$4304[1],(((t1$4310=$4295$4304[2])),((t1$4310 instanceof Array)&&(((t2$4311=t1$4310.length)),((t2$4311===2)&&((t1$4310[0]==="oper")&&((t1$4310[1]==="I(")&&((mid$4317=$4295$4304[3]),(((t3$4312=$4295$4304[4])),((t3$4312 instanceof Array)&&(((t4$4313=t3$4312.length)),((t4$4313===2)&&((t3$4312[0]==="oper")&&(t3$4312[1]===")I"))))))))))))))))))){$4295$4304[5];($4347$4352=mid$4317);if((($4347$4352 instanceof Array)&&(((t0$4357=$4347$4352.length)),((t0$4357===4)&&(($4347$4352[0]==="seq")&&(((t1$4358=$4347$4352[1])),((t1$4358 instanceof Array)&&(((t2$4359=t1$4358.length)),((t2$4359===2)&&((t1$4358[0]==="text")&&((t1$4358[1]==="")&&(((t3$4360=$4347$4352[2])),((t3$4360 instanceof Array)&&(((t4$4361=t3$4360.length)),((t4$4361===2)&&((t3$4360[0]==="oper")&&(t3$4360[1]==="NL"))))))))))))))))){(x$4365=$4347$4352[3]);return x$4365;}else{$4347$4352;return mid$4317;}}else{(node$4398=$4295$4304);return node$4398;}});(components$405=$257(((accum$4420=({})),((accum$4420["[[x]]"]=function(engine$4429,$4424$4430,$4426$4431){var t0$4437;var t1$4438;var o$4433;var x$4434;var c$4435;(t0$4437=$4424$4430);if(((t0$4437 instanceof Array)&&(((t1$4438=t0$4437.length)),((t1$4438===6)&&(t0$4437[0]==="seq"))))){t0$4437[1];(o$4433=t0$4437[2]);(x$4434=t0$4437[3]);(c$4435=t0$4437[4]);t0$4437[5];}else{$5415($4424$4430);}$4426$4431;return $6220(["span"],({}),[o$4433.location.text().replace("[",""),engine$4429.run(x$4434),c$4435.location.text().replace("]","")]);}),accum$4420)),$257(((accum$4455=({})),((accum$4455["{x}"]=function(engine$4462,node$4463,$4459$4464){var t0$4468;var x$4466;(t0$4468=$4459$4464);if($5366(t0$4468,"x")){(x$4466=t0$4468.x);}else{$5415($4459$4464);}return engine$4462.eval(x$4466.location.text());}),accum$4455)),$257(((accum$4477=({})),((accum$4477["_ x"]=function(engine$4484,node$4485,$4481$4486){var t0$4490;var x$4488;(t0$4490=$4481$4486);if($5366(t0$4490,"x")){(x$4488=t0$4490.x);}else{$5415($4481$4486);}return $6220(["i"],({}),engine$4484.run(x$4488));}),accum$4477)),$257(((accum$4499=({})),((accum$4499["__ x"]=function(engine$4506,node$4507,$4503$4508){var t0$4512;var x$4510;(t0$4512=$4503$4508);if($5366(t0$4512,"x")){(x$4510=t0$4512.x);}else{$5415($4503$4508);}return $6220(["b"],({}),engine$4506.run(x$4510));}),accum$4499)),$257(((accum$4521=({})),((accum$4521["` x"]=function(engine$4528,node$4529,$4525$4530){var t0$4534;var t1$4535;var x$4532;(t0$4534=$4525$4530);if(($5366(t0$4534,"x")&&(((t1$4535=$6024(shed$402)(t0$4534.x))),t1$4535[0]))){(x$4532=t1$4535[1]);}else{$5415($4525$4530);}return $6220(["code"],({}),x$4532.location.text());}),accum$4521)),$257(((accum$4549=({})),((accum$4549["descr .. contents"]=function(engine$4556,node$4557,$4553$4558){var t0$4563;var $index$4610;var $length$4604;var temp$4598;var parts$4577;var id$4578;var tags$4579;var props$4580;var descr$4560;var contents$4561;(t0$4563=$4553$4558);if(($5366(t0$4563,"descr")&&((descr$4560=t0$4563.descr),$5366(t0$4563,"contents")))){(contents$4561=t0$4563.contents);}else{$5415($4553$4558);}(parts$4577=descr$4560.location.text().split(RegExp("[ +]|(?=\\.|#)","")));(id$4578=null);(tags$4579=[]);(temp$4598=parts$4577);($length$4604=temp$4598.length);($index$4610=0);$4581:for(;($index$4610<$length$4604);($index$4610++)){var tag$4657;var _id$4634;var t0$4624;var t1$4625;var t2$4626;var m$4619;(m$4619=temp$4598[$index$4610]);if((m$4619==="")){undefined;}else{(t0$4624=$6024(RegExp("^#(.*)",""))(m$4619));if((t0$4624[0]&&(((t1$4625=t0$4624[1])),(((t2$4626=t1$4625.length)),(t2$4626===2))))){t1$4625[0];(_id$4634=t1$4625[1]);(id$4578=_id$4634);}else{(tag$4657=m$4619);tags$4579.push(tag$4657);}}}(props$4580=({}));if(id$4578){(props$4580["id"]=id$4578);}return $6220(tags$4579,props$4580,[engine$4556.run(shed_indent$404(contents$4561))]);}),accum$4549)),$257(((accum$4668=({})),((accum$4668["wide [= x]"]=function(engine$4675,node$4676,$4672$4677){var t0$4681;var x$4679;(t0$4681=$4672$4677);if($5366(t0$4681,"x")){(x$4679=t0$4681.x);}else{$5415($4672$4677);}return $6220(["h1"],({}),engine$4675.run(x$4679));}),accum$4668)),$257(((accum$4690=({})),((accum$4690["wide [== x]"]=function(engine$4697,node$4698,$4694$4699){var t0$4703;var x$4701;(t0$4703=$4694$4699);if($5366(t0$4703,"x")){(x$4701=t0$4703.x);}else{$5415($4694$4699);}return $6220(["h2"],({}),engine$4697.run(x$4701));}),accum$4690)),$257(((accum$4712=({})),((accum$4712["wide [=== x]"]=function(engine$4719,node$4720,$4716$4721){var t0$4725;var x$4723;(t0$4725=$4716$4721);if($5366(t0$4725,"x")){(x$4723=t0$4725.x);}else{$5415($4716$4721);}return $6220(["h3"],({}),engine$4719.run(x$4723));}),accum$4712)),$257(((accum$4734=({})),((accum$4734["wide [==== x]"]=function(engine$4741,node$4742,$4738$4743){var t0$4747;var x$4745;(t0$4747=$4738$4743);if($5366(t0$4747,"x")){(x$4745=t0$4747.x);}else{$5415($4738$4743);}return $6220(["h4"],({}),engine$4741.run(x$4745));}),accum$4734)),$257(((accum$4756=({})),((accum$4756["wide [===== x]"]=function(engine$4763,node$4764,$4760$4765){var t0$4769;var x$4767;(t0$4769=$4760$4765);if($5366(t0$4769,"x")){(x$4767=t0$4769.x);}else{$5415($4760$4765);}return $6220(["h5"],({}),engine$4763.run(x$4767));}),accum$4756)),$257(((accum$4778=({})),((accum$4778["wide [====== x]"]=function(engine$4785,node$4786,$4782$4787){var t0$4791;var x$4789;(t0$4791=$4782$4787);if($5366(t0$4791,"x")){(x$4789=t0$4791.x);}else{$5415($4782$4787);}return $6220(["h6"],({}),engine$4785.run(x$4789));}),accum$4778)),$257(((accum$4800=({})),((accum$4800["wide [# x]"]=function(engine$4807,node$4808,$4804$4809){var t0$4813;var x$4811;(t0$4813=$4804$4809);if($5366(t0$4813,"x")){(x$4811=t0$4813.x);}else{$5415($4804$4809);}return mergeable$400("ol",$6220(["li"],({}),engine$4807.run(x$4811)));}),accum$4800)),$257(((accum$4822=({})),((accum$4822["wide [* x]"]=function(engine$4829,node$4830,$4826$4831){var t0$4835;var x$4833;(t0$4835=$4826$4831);if($5366(t0$4835,"x")){(x$4833=t0$4835.x);}else{$5415($4826$4831);}return mergeable$400("ul",$6220(["li"],({}),engine$4829.run(x$4833)));}),accum$4822)),$257(((accum$4844=({})),((accum$4844["wide [+ x]"]=function(engine$4851,node$4852,$4848$4853){var t0$4857;var $index$4894;var $length$4888;var temp$4882;var acc$4876;var args$4867;var x$4855;(t0$4857=$4848$4853);if($5366(t0$4857,"x")){(x$4855=t0$4857.x);}else{$5415($4848$4853);}(args$4867=collapse$401("+",x$4855));return mergeable$400("table",$6220(["tr"],({}),(((acc$4876=[])),(((temp$4882=args$4867)),((($length$4888=temp$4882.length)),((($index$4894=0)),function(){$4871:for(;($index$4894<$length$4888);($index$4894++)){var arg$4911;var m$4903;(m$4903=temp$4882[$index$4894]);(arg$4911=m$4903);acc$4876.push($6220(["th"],({}),engine$4851.run(arg$4911)));}}()))),acc$4876)));}),accum$4844)),((accum$4915=({})),((accum$4915["wide [| x]"]=function(engine$4922,node$4923,$4919$4924){var t0$4928;var $index$4965;var $length$4959;var temp$4953;var acc$4947;var args$4938;var x$4926;(t0$4928=$4919$4924);if($5366(t0$4928,"x")){(x$4926=t0$4928.x);}else{$5415($4919$4924);}(args$4938=collapse$401("|",x$4926));return mergeable$400("table",$6220(["tr"],({}),(((acc$4947=[])),(((temp$4953=args$4938)),((($length$4959=temp$4953.length)),((($index$4965=0)),function(){$4942:for(;($index$4965<$length$4959);($index$4965++)){var arg$4982;var m$4974;(m$4974=temp$4953[$index$4965]);(arg$4982=m$4974);acc$4947.push($6220(["td"],({}),engine$4922.run(arg$4982)));}}()))),acc$4947)));}),accum$4915))))))))))))))))));(temp$4989=$6203(components$405));($length$4995=temp$4989.length);($index$5001=0);$407:for(;($index$5001<$length$4995);($index$5001++)){var spec$5020;var fn$5021;var t0$5015;var t1$5016;var m$5010;(m$5010=temp$4989[$index$5001]);(t0$5015=m$5010);if(((t0$5015 instanceof Array)&&(((t1$5016=t0$5015.length)),(t1$5016===2)))){(spec$5020=t0$5015[0]);(fn$5021=t0$5015[1]);dispatch$399.register(Spec$398(spec$5020,fn$5021));}else{$5415(m$5010,"/home/olivier/git/egquaint/src/index.eg",22505,22585);}}(filter$5039=function($5045$5048){var t0$5056;var args$5076;var t0$5070;var t1$5071;var t2$5072;var $5050$5065;var ph$5053;var node$5054;(t0$5056=$5045$5048);(node$5054=t0$5056);(ph$5053=t0$5056);($5050$5065=ph$5053);(t0$5070=$6024(extract$393)($5050$5065));if((t0$5070[0]&&(((t1$5071=t0$5070[1])),(((t2$5072=t1$5071.length)),((t2$5072>=2)&&((t1$5071[0]==="seq")&&(t1$5071[1]==="NL"))))))){(args$5076=Array.prototype.slice.call(t1$5071,2));return ({"args":args$5076});}else{$5050$5065;return false;}});(spec$5040=["NL",["fn",filter$5039]]);(fn$5041=function(engine$5108,$5103$5109,$5105$5110){var t0$5116;var t1$5117;var t0$5131;var $index$5243;var $length$5237;var temp$5231;var results$5146;var wide$5147;var last$5148;var run$5149;var i$5150;var add$5151;var node$5112;var elems$5113;var args$5114;(t0$5116=$5103$5109);(node$5112=t0$5116);if(((t0$5116 instanceof Array)&&(((t1$5117=t0$5116.length)),((t1$5117>=1)&&(t0$5116[0]==="seq"))))){(elems$5113=Array.prototype.slice.call(t0$5116,1));}else{$5415($5103$5109);}(t0$5131=$5105$5110);if($5366(t0$5131,"args")){(args$5114=t0$5131.args);}else{$5415($5105$5110);}(results$5146=[]);(wide$5147=$5851(node$5112.width,"wide"));(last$5148=null);(run$5149=engine$5108.run.bind(engine$5108));(i$5150=-3);(add$5151=function(){var $5203$5212;var $5199$5206;var addblank$5191;var t0$5187;var $5178$5182;($5178$5182=arguments);(t0$5187=$5178$5182.length);if(((t0$5187>=0)&&(t0$5187<=1))){(addblank$5191=function(){if((0>=t0$5187)){return true;}else{return $5178$5182[0];}}());results$5146.push(((($5199$5206=last$5148)),function(){if($237($6220(["div"],({}),[]))($5199$5206)){return last$5148;}else{$5199$5206;if(wide$5147){return $6220(["div"],({}),last$5148);}else{return last$5148;}}}()));if(addblank$5191){return results$5146.push($256(elems$5113,i$5150).location.text());}}else{$5415($5178$5182);}});(temp$5231=args$5114);($length$5237=temp$5231.length);($index$5243=0);$5152:for(;($index$5243<$length$5237);($index$5243++)){var newx$5307;var $5285$5290;var x$5315;var x$5282;var x$5273;var $5155$5261;var t0$5257;var m$5252;(m$5252=temp$5231[$index$5243]);(t0$5257=$6024(run$5149)(m$5252));if(t0$5257[0]){($5155$5261=t0$5257[1]);(i$5150=(i$5150+2));(x$5273=$5155$5261);if(($index$5243===0)){(last$5148=x$5273);}else{(x$5282=$5155$5261);if((last$5148&&last$5148.merge)){($5285$5290=last$5148.merge(x$5282));if((!$5285$5290)){add$5151();(last$5148=x$5282);}else{(newx$5307=$5285$5290);(last$5148=newx$5307);}}else{(x$5315=$5155$5261);add$5151();(last$5148=x$5315);}}}else{$5415(m$5252,"/home/olivier/git/egquaint/src/index.eg",23803,24326);}}(i$5150=(i$5150+2));if(last$5148){add$5151(false);}if(wide$5147){return $6220(["div",".blocks"],({}),results$5146);}else{return $6220(["span"],({}),results$5146);}});dispatch$399.register(Spec$398(spec$5040,fn$5041));(Quaint$406=Engine$397(dispatch$399));(exports["Quaint"]=Quaint$406);(exports["Engine"]=Engine$397);(exports["Spec"]=Spec$398);(exports["dispatch"]=dispatch$399);(exports["shed"]=shed$402);(exports["shed_all"]=shed_all$403);(exports["shed_indent"]=shed_indent$404);(exports["collapse"]=collapse$401);(exports["mergeable"]=mergeable$400);

},{"earl-grey/lex":7,"earl-grey/location":8,"earl-grey/parse":10}],17:[function(require,module,exports){

},{}],18:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};

process.nextTick = (function () {
    var canSetImmediate = typeof window !== 'undefined'
    && window.setImmediate;
    var canPost = typeof window !== 'undefined'
    && window.postMessage && window.addEventListener
    ;

    if (canSetImmediate) {
        return function (f) { return window.setImmediate(f) };
    }

    if (canPost) {
        var queue = [];
        window.addEventListener('message', function (ev) {
            var source = ev.source;
            if ((source === window || source === null) && ev.data === 'process-tick') {
                ev.stopPropagation();
                if (queue.length > 0) {
                    var fn = queue.shift();
                    fn();
                }
            }
        }, true);

        return function nextTick(fn) {
            queue.push(fn);
            window.postMessage('process-tick', '*');
        };
    }

    return function nextTick(fn) {
        setTimeout(fn, 0);
    };
})();

process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];

process.binding = function (name) {
    throw new Error('process.binding is not supported');
}

// TODO(shtylman)
process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};

},{}],19:[function(require,module,exports){
(function (process){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// resolves . and .. elements in a path array with directory names there
// must be no slashes, empty elements, or device names (c:\) in the array
// (so also no leading and trailing slashes - it does not distinguish
// relative and absolute paths)
function normalizeArray(parts, allowAboveRoot) {
  // if the path tries to go above the root, `up` ends up > 0
  var up = 0;
  for (var i = parts.length - 1; i >= 0; i--) {
    var last = parts[i];
    if (last === '.') {
      parts.splice(i, 1);
    } else if (last === '..') {
      parts.splice(i, 1);
      up++;
    } else if (up) {
      parts.splice(i, 1);
      up--;
    }
  }

  // if the path is allowed to go above the root, restore leading ..s
  if (allowAboveRoot) {
    for (; up--; up) {
      parts.unshift('..');
    }
  }

  return parts;
}

// Split a filename into [root, dir, basename, ext], unix version
// 'root' is just a slash, or nothing.
var splitPathRe =
    /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;
var splitPath = function(filename) {
  return splitPathRe.exec(filename).slice(1);
};

// path.resolve([from ...], to)
// posix version
exports.resolve = function() {
  var resolvedPath = '',
      resolvedAbsolute = false;

  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {
    var path = (i >= 0) ? arguments[i] : process.cwd();

    // Skip empty and invalid entries
    if (typeof path !== 'string') {
      throw new TypeError('Arguments to path.resolve must be strings');
    } else if (!path) {
      continue;
    }

    resolvedPath = path + '/' + resolvedPath;
    resolvedAbsolute = path.charAt(0) === '/';
  }

  // At this point the path should be resolved to a full absolute path, but
  // handle relative paths to be safe (might happen when process.cwd() fails)

  // Normalize the path
  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {
    return !!p;
  }), !resolvedAbsolute).join('/');

  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';
};

// path.normalize(path)
// posix version
exports.normalize = function(path) {
  var isAbsolute = exports.isAbsolute(path),
      trailingSlash = substr(path, -1) === '/';

  // Normalize the path
  path = normalizeArray(filter(path.split('/'), function(p) {
    return !!p;
  }), !isAbsolute).join('/');

  if (!path && !isAbsolute) {
    path = '.';
  }
  if (path && trailingSlash) {
    path += '/';
  }

  return (isAbsolute ? '/' : '') + path;
};

// posix version
exports.isAbsolute = function(path) {
  return path.charAt(0) === '/';
};

// posix version
exports.join = function() {
  var paths = Array.prototype.slice.call(arguments, 0);
  return exports.normalize(filter(paths, function(p, index) {
    if (typeof p !== 'string') {
      throw new TypeError('Arguments to path.join must be strings');
    }
    return p;
  }).join('/'));
};


// path.relative(from, to)
// posix version
exports.relative = function(from, to) {
  from = exports.resolve(from).substr(1);
  to = exports.resolve(to).substr(1);

  function trim(arr) {
    var start = 0;
    for (; start < arr.length; start++) {
      if (arr[start] !== '') break;
    }

    var end = arr.length - 1;
    for (; end >= 0; end--) {
      if (arr[end] !== '') break;
    }

    if (start > end) return [];
    return arr.slice(start, end - start + 1);
  }

  var fromParts = trim(from.split('/'));
  var toParts = trim(to.split('/'));

  var length = Math.min(fromParts.length, toParts.length);
  var samePartsLength = length;
  for (var i = 0; i < length; i++) {
    if (fromParts[i] !== toParts[i]) {
      samePartsLength = i;
      break;
    }
  }

  var outputParts = [];
  for (var i = samePartsLength; i < fromParts.length; i++) {
    outputParts.push('..');
  }

  outputParts = outputParts.concat(toParts.slice(samePartsLength));

  return outputParts.join('/');
};

exports.sep = '/';
exports.delimiter = ':';

exports.dirname = function(path) {
  var result = splitPath(path),
      root = result[0],
      dir = result[1];

  if (!root && !dir) {
    // No dirname whatsoever
    return '.';
  }

  if (dir) {
    // It has a dirname, strip trailing slash
    dir = dir.substr(0, dir.length - 1);
  }

  return root + dir;
};


exports.basename = function(path, ext) {
  var f = splitPath(path)[2];
  // TODO: make this comparison case-insensitive on windows?
  if (ext && f.substr(-1 * ext.length) === ext) {
    f = f.substr(0, f.length - ext.length);
  }
  return f;
};


exports.extname = function(path) {
  return splitPath(path)[3];
};

function filter (xs, f) {
    if (xs.filter) return xs.filter(f);
    var res = [];
    for (var i = 0; i < xs.length; i++) {
        if (f(xs[i], i, xs)) res.push(xs[i]);
    }
    return res;
}

// String.prototype.substr - negative index don't work in IE8
var substr = 'ab'.substr(-1) === 'b'
    ? function (str, start, len) { return str.substr(start, len) }
    : function (str, start, len) {
        if (start < 0) start = str.length + start;
        return str.substr(start, len);
    }
;

}).call(this,require("/usr/local/lib/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))
},{"/usr/local/lib/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":18}],20:[function(require,module,exports){
var indexOf = require('indexof');

var Object_keys = function (obj) {
    if (Object.keys) return Object.keys(obj)
    else {
        var res = [];
        for (var key in obj) res.push(key)
        return res;
    }
};

var forEach = function (xs, fn) {
    if (xs.forEach) return xs.forEach(fn)
    else for (var i = 0; i < xs.length; i++) {
        fn(xs[i], i, xs);
    }
};

var defineProp = (function() {
    try {
        Object.defineProperty({}, '_', {});
        return function(obj, name, value) {
            Object.defineProperty(obj, name, {
                writable: true,
                enumerable: false,
                configurable: true,
                value: value
            })
        };
    } catch(e) {
        return function(obj, name, value) {
            obj[name] = value;
        };
    }
}());

var globals = ['Array', 'Boolean', 'Date', 'Error', 'EvalError', 'Function',
'Infinity', 'JSON', 'Math', 'NaN', 'Number', 'Object', 'RangeError',
'ReferenceError', 'RegExp', 'String', 'SyntaxError', 'TypeError', 'URIError',
'decodeURI', 'decodeURIComponent', 'encodeURI', 'encodeURIComponent', 'escape',
'eval', 'isFinite', 'isNaN', 'parseFloat', 'parseInt', 'undefined', 'unescape'];

function Context() {}
Context.prototype = {};

var Script = exports.Script = function NodeScript (code) {
    if (!(this instanceof Script)) return new Script(code);
    this.code = code;
};

Script.prototype.runInContext = function (context) {
    if (!(context instanceof Context)) {
        throw new TypeError("needs a 'context' argument.");
    }
    
    var iframe = document.createElement('iframe');
    if (!iframe.style) iframe.style = {};
    iframe.style.display = 'none';
    
    document.body.appendChild(iframe);
    
    var win = iframe.contentWindow;
    var wEval = win.eval, wExecScript = win.execScript;

    if (!wEval && wExecScript) {
        // win.eval() magically appears when this is called in IE:
        wExecScript.call(win, 'null');
        wEval = win.eval;
    }
    
    forEach(Object_keys(context), function (key) {
        win[key] = context[key];
    });
    forEach(globals, function (key) {
        if (context[key]) {
            win[key] = context[key];
        }
    });
    
    var winKeys = Object_keys(win);

    var res = wEval.call(win, this.code);
    
    forEach(Object_keys(win), function (key) {
        // Avoid copying circular objects like `top` and `window` by only
        // updating existing context properties or new properties in the `win`
        // that was only introduced after the eval.
        if (key in context || indexOf(winKeys, key) === -1) {
            context[key] = win[key];
        }
    });

    forEach(globals, function (key) {
        if (!(key in context)) {
            defineProp(context, key, win[key]);
        }
    });
    
    document.body.removeChild(iframe);
    
    return res;
};

Script.prototype.runInThisContext = function () {
    return eval(this.code); // maybe...
};

Script.prototype.runInNewContext = function (context) {
    var ctx = Script.createContext(context);
    var res = this.runInContext(ctx);

    forEach(Object_keys(ctx), function (key) {
        context[key] = ctx[key];
    });

    return res;
};

forEach(Object_keys(Script.prototype), function (name) {
    exports[name] = Script[name] = function (code) {
        var s = Script(code);
        return s[name].apply(s, [].slice.call(arguments, 1));
    };
});

exports.createScript = function (code) {
    return exports.Script(code);
};

exports.createContext = Script.createContext = function (context) {
    var copy = new Context();
    if(typeof context === 'object') {
        forEach(Object_keys(context), function (key) {
            copy[key] = context[key];
        });
    }
    return copy;
};

},{"indexof":21}],21:[function(require,module,exports){

var indexOf = [].indexOf;

module.exports = function(arr, obj){
  if (indexOf) return arr.indexOf(obj);
  for (var i = 0; i < arr.length; ++i) {
    if (arr[i] === obj) return i;
  }
  return -1;
};
},{}]},{},[])